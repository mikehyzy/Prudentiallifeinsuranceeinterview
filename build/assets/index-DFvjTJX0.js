function W1(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const o=Object.getOwnPropertyDescriptor(i,r);o&&Object.defineProperty(t,r,o.get?o:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function gk(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Wh={exports:{}},Pa={},qh={exports:{}},Fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zy;function q1(){if(Zy)return Fe;Zy=1;var t=Symbol.for("react.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),m=Symbol.iterator;function v(F){return F===null||typeof F!="object"?null:(F=m&&F[m]||F["@@iterator"],typeof F=="function"?F:null)}var S={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,b={};function C(F,$,te){this.props=F,this.context=$,this.refs=b,this.updater=te||S}C.prototype.isReactComponent={},C.prototype.setState=function(F,$){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,$,"setState")},C.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function T(){}T.prototype=C.prototype;function _(F,$,te){this.props=F,this.context=$,this.refs=b,this.updater=te||S}var R=_.prototype=new T;R.constructor=_,k(R,C.prototype),R.isPureReactComponent=!0;var P=Array.isArray,I=Object.prototype.hasOwnProperty,D={current:null},O={key:!0,ref:!0,__self:!0,__source:!0};function N(F,$,te){var ue,ge={},we=null,ee=null;if($!=null)for(ue in $.ref!==void 0&&(ee=$.ref),$.key!==void 0&&(we=""+$.key),$)I.call($,ue)&&!O.hasOwnProperty(ue)&&(ge[ue]=$[ue]);var he=arguments.length-2;if(he===1)ge.children=te;else if(1<he){for(var Ee=Array(he),_e=0;_e<he;_e++)Ee[_e]=arguments[_e+2];ge.children=Ee}if(F&&F.defaultProps)for(ue in he=F.defaultProps,he)ge[ue]===void 0&&(ge[ue]=he[ue]);return{$$typeof:t,type:F,key:we,ref:ee,props:ge,_owner:D.current}}function q(F,$){return{$$typeof:t,type:F.type,key:$,ref:F.ref,props:F.props,_owner:F._owner}}function H(F){return typeof F=="object"&&F!==null&&F.$$typeof===t}function G(F){var $={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(te){return $[te]})}var ce=/\/+/g;function pe(F,$){return typeof F=="object"&&F!==null&&F.key!=null?G(""+F.key):$.toString(36)}function me(F,$,te,ue,ge){var we=typeof F;(we==="undefined"||we==="boolean")&&(F=null);var ee=!1;if(F===null)ee=!0;else switch(we){case"string":case"number":ee=!0;break;case"object":switch(F.$$typeof){case t:case e:ee=!0}}if(ee)return ee=F,ge=ge(ee),F=ue===""?"."+pe(ee,0):ue,P(ge)?(te="",F!=null&&(te=F.replace(ce,"$&/")+"/"),me(ge,$,te,"",function(_e){return _e})):ge!=null&&(H(ge)&&(ge=q(ge,te+(!ge.key||ee&&ee.key===ge.key?"":(""+ge.key).replace(ce,"$&/")+"/")+F)),$.push(ge)),1;if(ee=0,ue=ue===""?".":ue+":",P(F))for(var he=0;he<F.length;he++){we=F[he];var Ee=ue+pe(we,he);ee+=me(we,$,te,Ee,ge)}else if(Ee=v(F),typeof Ee=="function")for(F=Ee.call(F),he=0;!(we=F.next()).done;)we=we.value,Ee=ue+pe(we,he++),ee+=me(we,$,te,Ee,ge);else if(we==="object")throw $=String(F),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.");return ee}function ye(F,$,te){if(F==null)return F;var ue=[],ge=0;return me(F,ue,"","",function(we){return $.call(te,we,ge++)}),ue}function ie(F){if(F._status===-1){var $=F._result;$=$(),$.then(function(te){(F._status===0||F._status===-1)&&(F._status=1,F._result=te)},function(te){(F._status===0||F._status===-1)&&(F._status=2,F._result=te)}),F._status===-1&&(F._status=0,F._result=$)}if(F._status===1)return F._result.default;throw F._result}var Z={current:null},U={transition:null},re={ReactCurrentDispatcher:Z,ReactCurrentBatchConfig:U,ReactCurrentOwner:D};function Y(){throw Error("act(...) is not supported in production builds of React.")}return Fe.Children={map:ye,forEach:function(F,$,te){ye(F,function(){$.apply(this,arguments)},te)},count:function(F){var $=0;return ye(F,function(){$++}),$},toArray:function(F){return ye(F,function($){return $})||[]},only:function(F){if(!H(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Fe.Component=C,Fe.Fragment=n,Fe.Profiler=r,Fe.PureComponent=_,Fe.StrictMode=i,Fe.Suspense=d,Fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,Fe.act=Y,Fe.cloneElement=function(F,$,te){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var ue=k({},F.props),ge=F.key,we=F.ref,ee=F._owner;if($!=null){if($.ref!==void 0&&(we=$.ref,ee=D.current),$.key!==void 0&&(ge=""+$.key),F.type&&F.type.defaultProps)var he=F.type.defaultProps;for(Ee in $)I.call($,Ee)&&!O.hasOwnProperty(Ee)&&(ue[Ee]=$[Ee]===void 0&&he!==void 0?he[Ee]:$[Ee])}var Ee=arguments.length-2;if(Ee===1)ue.children=te;else if(1<Ee){he=Array(Ee);for(var _e=0;_e<Ee;_e++)he[_e]=arguments[_e+2];ue.children=he}return{$$typeof:t,type:F.type,key:ge,ref:we,props:ue,_owner:ee}},Fe.createContext=function(F){return F={$$typeof:l,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:o,_context:F},F.Consumer=F},Fe.createElement=N,Fe.createFactory=function(F){var $=N.bind(null,F);return $.type=F,$},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(F){return{$$typeof:c,render:F}},Fe.isValidElement=H,Fe.lazy=function(F){return{$$typeof:f,_payload:{_status:-1,_result:F},_init:ie}},Fe.memo=function(F,$){return{$$typeof:h,type:F,compare:$===void 0?null:$}},Fe.startTransition=function(F){var $=U.transition;U.transition={};try{F()}finally{U.transition=$}},Fe.unstable_act=Y,Fe.useCallback=function(F,$){return Z.current.useCallback(F,$)},Fe.useContext=function(F){return Z.current.useContext(F)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(F){return Z.current.useDeferredValue(F)},Fe.useEffect=function(F,$){return Z.current.useEffect(F,$)},Fe.useId=function(){return Z.current.useId()},Fe.useImperativeHandle=function(F,$,te){return Z.current.useImperativeHandle(F,$,te)},Fe.useInsertionEffect=function(F,$){return Z.current.useInsertionEffect(F,$)},Fe.useLayoutEffect=function(F,$){return Z.current.useLayoutEffect(F,$)},Fe.useMemo=function(F,$){return Z.current.useMemo(F,$)},Fe.useReducer=function(F,$,te){return Z.current.useReducer(F,$,te)},Fe.useRef=function(F){return Z.current.useRef(F)},Fe.useState=function(F){return Z.current.useState(F)},Fe.useSyncExternalStore=function(F,$,te){return Z.current.useSyncExternalStore(F,$,te)},Fe.useTransition=function(){return Z.current.useTransition()},Fe.version="18.3.1",Fe}var e0;function Jp(){return e0||(e0=1,qh.exports=q1()),qh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t0;function H1(){if(t0)return Pa;t0=1;var t=Jp(),e=Symbol.for("react.element"),n=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function l(c,d,h){var f,m={},v=null,S=null;h!==void 0&&(v=""+h),d.key!==void 0&&(v=""+d.key),d.ref!==void 0&&(S=d.ref);for(f in d)i.call(d,f)&&!o.hasOwnProperty(f)&&(m[f]=d[f]);if(c&&c.defaultProps)for(f in d=c.defaultProps,d)m[f]===void 0&&(m[f]=d[f]);return{$$typeof:e,type:c,key:v,ref:S,props:m,_owner:r.current}}return Pa.Fragment=n,Pa.jsx=l,Pa.jsxs=l,Pa}var n0;function $1(){return n0||(n0=1,Wh.exports=H1()),Wh.exports}var E=$1(),Ic={},Hh={exports:{}},dn={},$h={exports:{}},Kh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i0;function K1(){return i0||(i0=1,(function(t){function e(U,re){var Y=U.length;U.push(re);e:for(;0<Y;){var F=Y-1>>>1,$=U[F];if(0<r($,re))U[F]=re,U[Y]=$,Y=F;else break e}}function n(U){return U.length===0?null:U[0]}function i(U){if(U.length===0)return null;var re=U[0],Y=U.pop();if(Y!==re){U[0]=Y;e:for(var F=0,$=U.length,te=$>>>1;F<te;){var ue=2*(F+1)-1,ge=U[ue],we=ue+1,ee=U[we];if(0>r(ge,Y))we<$&&0>r(ee,ge)?(U[F]=ee,U[we]=Y,F=we):(U[F]=ge,U[ue]=Y,F=ue);else if(we<$&&0>r(ee,Y))U[F]=ee,U[we]=Y,F=we;else break e}}return re}function r(U,re){var Y=U.sortIndex-re.sortIndex;return Y!==0?Y:U.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var d=[],h=[],f=1,m=null,v=3,S=!1,k=!1,b=!1,C=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(U){for(var re=n(h);re!==null;){if(re.callback===null)i(h);else if(re.startTime<=U)i(h),re.sortIndex=re.expirationTime,e(d,re);else break;re=n(h)}}function P(U){if(b=!1,R(U),!k)if(n(d)!==null)k=!0,ie(I);else{var re=n(h);re!==null&&Z(P,re.startTime-U)}}function I(U,re){k=!1,b&&(b=!1,T(N),N=-1),S=!0;var Y=v;try{for(R(re),m=n(d);m!==null&&(!(m.expirationTime>re)||U&&!G());){var F=m.callback;if(typeof F=="function"){m.callback=null,v=m.priorityLevel;var $=F(m.expirationTime<=re);re=t.unstable_now(),typeof $=="function"?m.callback=$:m===n(d)&&i(d),R(re)}else i(d);m=n(d)}if(m!==null)var te=!0;else{var ue=n(h);ue!==null&&Z(P,ue.startTime-re),te=!1}return te}finally{m=null,v=Y,S=!1}}var D=!1,O=null,N=-1,q=5,H=-1;function G(){return!(t.unstable_now()-H<q)}function ce(){if(O!==null){var U=t.unstable_now();H=U;var re=!0;try{re=O(!0,U)}finally{re?pe():(D=!1,O=null)}}else D=!1}var pe;if(typeof _=="function")pe=function(){_(ce)};else if(typeof MessageChannel<"u"){var me=new MessageChannel,ye=me.port2;me.port1.onmessage=ce,pe=function(){ye.postMessage(null)}}else pe=function(){C(ce,0)};function ie(U){O=U,D||(D=!0,pe())}function Z(U,re){N=C(function(){U(t.unstable_now())},re)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(U){U.callback=null},t.unstable_continueExecution=function(){k||S||(k=!0,ie(I))},t.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<U?Math.floor(1e3/U):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_getFirstCallbackNode=function(){return n(d)},t.unstable_next=function(U){switch(v){case 1:case 2:case 3:var re=3;break;default:re=v}var Y=v;v=re;try{return U()}finally{v=Y}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(U,re){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var Y=v;v=U;try{return re()}finally{v=Y}},t.unstable_scheduleCallback=function(U,re,Y){var F=t.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?F+Y:F):Y=F,U){case 1:var $=-1;break;case 2:$=250;break;case 5:$=1073741823;break;case 4:$=1e4;break;default:$=5e3}return $=Y+$,U={id:f++,callback:re,priorityLevel:U,startTime:Y,expirationTime:$,sortIndex:-1},Y>F?(U.sortIndex=Y,e(h,U),n(d)===null&&U===n(h)&&(b?(T(N),N=-1):b=!0,Z(P,Y-F))):(U.sortIndex=$,e(d,U),k||S||(k=!0,ie(I))),U},t.unstable_shouldYield=G,t.unstable_wrapCallback=function(U){var re=v;return function(){var Y=v;v=re;try{return U.apply(this,arguments)}finally{v=Y}}}})(Kh)),Kh}var r0;function G1(){return r0||(r0=1,$h.exports=K1()),$h.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s0;function X1(){if(s0)return dn;s0=1;var t=Jp(),e=G1();function n(s){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+s,u=1;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+s+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,r={};function o(s,a){l(s,a),l(s+"Capture",a)}function l(s,a){for(r[s]=a,s=0;s<a.length;s++)i.add(a[s])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),d=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},m={};function v(s){return d.call(m,s)?!0:d.call(f,s)?!1:h.test(s)?m[s]=!0:(f[s]=!0,!1)}function S(s,a,u,p){if(u!==null&&u.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return p?!1:u!==null?!u.acceptsBooleans:(s=s.toLowerCase().slice(0,5),s!=="data-"&&s!=="aria-");default:return!1}}function k(s,a,u,p){if(a===null||typeof a>"u"||S(s,a,u,p))return!0;if(p)return!1;if(u!==null)switch(u.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function b(s,a,u,p,g,y,w){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=p,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=s,this.type=a,this.sanitizeURL=y,this.removeEmptyString=w}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(s){C[s]=new b(s,0,!1,s,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(s){var a=s[0];C[a]=new b(a,1,!1,s[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(s){C[s]=new b(s,2,!1,s.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(s){C[s]=new b(s,2,!1,s,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(s){C[s]=new b(s,3,!1,s.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(s){C[s]=new b(s,3,!0,s,null,!1,!1)}),["capture","download"].forEach(function(s){C[s]=new b(s,4,!1,s,null,!1,!1)}),["cols","rows","size","span"].forEach(function(s){C[s]=new b(s,6,!1,s,null,!1,!1)}),["rowSpan","start"].forEach(function(s){C[s]=new b(s,5,!1,s.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function _(s){return s[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(s){var a=s.replace(T,_);C[a]=new b(a,1,!1,s,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(s){var a=s.replace(T,_);C[a]=new b(a,1,!1,s,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(s){var a=s.replace(T,_);C[a]=new b(a,1,!1,s,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(s){C[s]=new b(s,1,!1,s.toLowerCase(),null,!1,!1)}),C.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(s){C[s]=new b(s,1,!1,s.toLowerCase(),null,!0,!0)});function R(s,a,u,p){var g=C.hasOwnProperty(a)?C[a]:null;(g!==null?g.type!==0:p||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(k(a,u,g,p)&&(u=null),p||g===null?v(a)&&(u===null?s.removeAttribute(a):s.setAttribute(a,""+u)):g.mustUseProperty?s[g.propertyName]=u===null?g.type===3?!1:"":u:(a=g.attributeName,p=g.attributeNamespace,u===null?s.removeAttribute(a):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,p?s.setAttributeNS(p,a,u):s.setAttribute(a,u))))}var P=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),D=Symbol.for("react.portal"),O=Symbol.for("react.fragment"),N=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),H=Symbol.for("react.provider"),G=Symbol.for("react.context"),ce=Symbol.for("react.forward_ref"),pe=Symbol.for("react.suspense"),me=Symbol.for("react.suspense_list"),ye=Symbol.for("react.memo"),ie=Symbol.for("react.lazy"),Z=Symbol.for("react.offscreen"),U=Symbol.iterator;function re(s){return s===null||typeof s!="object"?null:(s=U&&s[U]||s["@@iterator"],typeof s=="function"?s:null)}var Y=Object.assign,F;function $(s){if(F===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);F=a&&a[1]||""}return`
`+F+s}var te=!1;function ue(s,a){if(!s||te)return"";te=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(W){var p=W}Reflect.construct(s,[],a)}else{try{a.call()}catch(W){p=W}s.call(a.prototype)}else{try{throw Error()}catch(W){p=W}s()}}catch(W){if(W&&p&&typeof W.stack=="string"){for(var g=W.stack.split(`
`),y=p.stack.split(`
`),w=g.length-1,A=y.length-1;1<=w&&0<=A&&g[w]!==y[A];)A--;for(;1<=w&&0<=A;w--,A--)if(g[w]!==y[A]){if(w!==1||A!==1)do if(w--,A--,0>A||g[w]!==y[A]){var L=`
`+g[w].replace(" at new "," at ");return s.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",s.displayName)),L}while(1<=w&&0<=A);break}}}finally{te=!1,Error.prepareStackTrace=u}return(s=s?s.displayName||s.name:"")?$(s):""}function ge(s){switch(s.tag){case 5:return $(s.type);case 16:return $("Lazy");case 13:return $("Suspense");case 19:return $("SuspenseList");case 0:case 2:case 15:return s=ue(s.type,!1),s;case 11:return s=ue(s.type.render,!1),s;case 1:return s=ue(s.type,!0),s;default:return""}}function we(s){if(s==null)return null;if(typeof s=="function")return s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case O:return"Fragment";case D:return"Portal";case q:return"Profiler";case N:return"StrictMode";case pe:return"Suspense";case me:return"SuspenseList"}if(typeof s=="object")switch(s.$$typeof){case G:return(s.displayName||"Context")+".Consumer";case H:return(s._context.displayName||"Context")+".Provider";case ce:var a=s.render;return s=s.displayName,s||(s=a.displayName||a.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case ye:return a=s.displayName||null,a!==null?a:we(s.type)||"Memo";case ie:a=s._payload,s=s._init;try{return we(s(a))}catch{}}return null}function ee(s){var a=s.type;switch(s.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return s=a.render,s=s.displayName||s.name||"",a.displayName||(s!==""?"ForwardRef("+s+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(a);case 8:return a===N?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function he(s){switch(typeof s){case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function Ee(s){var a=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function _e(s){var a=Ee(s)?"checked":"value",u=Object.getOwnPropertyDescriptor(s.constructor.prototype,a),p=""+s[a];if(!s.hasOwnProperty(a)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,y=u.set;return Object.defineProperty(s,a,{configurable:!0,get:function(){return g.call(this)},set:function(w){p=""+w,y.call(this,w)}}),Object.defineProperty(s,a,{enumerable:u.enumerable}),{getValue:function(){return p},setValue:function(w){p=""+w},stopTracking:function(){s._valueTracker=null,delete s[a]}}}}function Le(s){s._valueTracker||(s._valueTracker=_e(s))}function Ve(s){if(!s)return!1;var a=s._valueTracker;if(!a)return!0;var u=a.getValue(),p="";return s&&(p=Ee(s)?s.checked?"true":"false":s.value),s=p,s!==u?(a.setValue(s),!0):!1}function kt(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}function Yt(s,a){var u=a.checked;return Y({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??s._wrapperState.initialChecked})}function Zi(s,a){var u=a.defaultValue==null?"":a.defaultValue,p=a.checked!=null?a.checked:a.defaultChecked;u=he(a.value!=null?a.value:u),s._wrapperState={initialChecked:p,initialValue:u,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Pi(s,a){a=a.checked,a!=null&&R(s,"checked",a,!1)}function yn(s,a){Pi(s,a);var u=he(a.value),p=a.type;if(u!=null)p==="number"?(u===0&&s.value===""||s.value!=u)&&(s.value=""+u):s.value!==""+u&&(s.value=""+u);else if(p==="submit"||p==="reset"){s.removeAttribute("value");return}a.hasOwnProperty("value")?bn(s,a.type,u):a.hasOwnProperty("defaultValue")&&bn(s,a.type,he(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(s.defaultChecked=!!a.defaultChecked)}function zo(s,a,u){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var p=a.type;if(!(p!=="submit"&&p!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+s._wrapperState.initialValue,u||a===s.value||(s.value=a),s.defaultValue=a}u=s.name,u!==""&&(s.name=""),s.defaultChecked=!!s._wrapperState.initialChecked,u!==""&&(s.name=u)}function bn(s,a,u){(a!=="number"||kt(s.ownerDocument)!==s)&&(u==null?s.defaultValue=""+s._wrapperState.initialValue:s.defaultValue!==""+u&&(s.defaultValue=""+u))}var Yr=Array.isArray;function er(s,a,u,p){if(s=s.options,a){a={};for(var g=0;g<u.length;g++)a["$"+u[g]]=!0;for(u=0;u<s.length;u++)g=a.hasOwnProperty("$"+s[u].value),s[u].selected!==g&&(s[u].selected=g),g&&p&&(s[u].defaultSelected=!0)}else{for(u=""+he(u),a=null,g=0;g<s.length;g++){if(s[g].value===u){s[g].selected=!0,p&&(s[g].defaultSelected=!0);return}a!==null||s[g].disabled||(a=s[g])}a!==null&&(a.selected=!0)}}function Ot(s,a){if(a.dangerouslySetInnerHTML!=null)throw Error(n(91));return Y({},a,{value:void 0,defaultValue:void 0,children:""+s._wrapperState.initialValue})}function Ri(s,a){var u=a.value;if(u==null){if(u=a.children,a=a.defaultValue,u!=null){if(a!=null)throw Error(n(92));if(Yr(u)){if(1<u.length)throw Error(n(93));u=u[0]}a=u}a==null&&(a=""),u=a}s._wrapperState={initialValue:he(u)}}function Sl(s,a){var u=he(a.value),p=he(a.defaultValue);u!=null&&(u=""+u,u!==s.value&&(s.value=u),a.defaultValue==null&&s.defaultValue!==u&&(s.defaultValue=u)),p!=null&&(s.defaultValue=""+p)}function kl(s){var a=s.textContent;a===s._wrapperState.initialValue&&a!==""&&a!==null&&(s.value=a)}function Jr(s){switch(s){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wo(s,a){return s==null||s==="http://www.w3.org/1999/xhtml"?Jr(a):s==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":s}var Qr,Ms=(function(s){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,u,p,g){MSApp.execUnsafeLocalFunction(function(){return s(a,u,p,g)})}:s})(function(s,a){if(s.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in s)s.innerHTML=a;else{for(Qr=Qr||document.createElement("div"),Qr.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=Qr.firstChild;s.firstChild;)s.removeChild(s.firstChild);for(;a.firstChild;)s.appendChild(a.firstChild)}});function Rn(s,a){if(a){var u=s.firstChild;if(u&&u===s.lastChild&&u.nodeType===3){u.nodeValue=a;return}}s.textContent=a}var tr={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nr=["Webkit","ms","Moz","O"];Object.keys(tr).forEach(function(s){nr.forEach(function(a){a=a+s.charAt(0).toUpperCase()+s.substring(1),tr[a]=tr[s]})});function Cl(s,a,u){return a==null||typeof a=="boolean"||a===""?"":u||typeof a!="number"||a===0||tr.hasOwnProperty(s)&&tr[s]?(""+a).trim():a+"px"}function Tl(s,a){s=s.style;for(var u in a)if(a.hasOwnProperty(u)){var p=u.indexOf("--")===0,g=Cl(u,a[u],p);u==="float"&&(u="cssFloat"),p?s.setProperty(u,g):s[u]=g}}var wl=Y({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ns(s,a){if(a){if(wl[s]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(n(137,s));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(n(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(n(61))}if(a.style!=null&&typeof a.style!="object")throw Error(n(62))}}function qo(s,a){if(s.indexOf("-")===-1)return typeof a.is=="string";switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Zr=null;function _n(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Ho=null,ir=null,_i=null;function $o(s){if(s=ha(s)){if(typeof Ho!="function")throw Error(n(280));var a=s.stateNode;a&&(a=Hl(a),Ho(s.stateNode,s.type,a))}}function Me(s){ir?_i?_i.push(s):_i=[s]:ir=s}function ht(){if(ir){var s=ir,a=_i;if(_i=ir=null,$o(s),a)for(s=0;s<a.length;s++)$o(a[s])}}function Ct(s,a){return s(a)}function zt(){}var rr=!1;function vt(s,a,u){if(rr)return s(a,u);rr=!0;try{return Ct(s,a,u)}finally{rr=!1,(ir!==null||_i!==null)&&(zt(),ht())}}function _t(s,a){var u=s.stateNode;if(u===null)return null;var p=Hl(u);if(p===null)return null;u=p[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(p=!p.disabled)||(s=s.type,p=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!p;break e;default:s=!1}if(s)return null;if(u&&typeof u!="function")throw Error(n(231,a,typeof u));return u}var sr=!1;if(c)try{var Lt={};Object.defineProperty(Lt,"passive",{get:function(){sr=!0}}),window.addEventListener("test",Lt,Lt),window.removeEventListener("test",Lt,Lt)}catch{sr=!1}function Sn(s,a,u,p,g,y,w,A,L){var W=Array.prototype.slice.call(arguments,3);try{a.apply(u,W)}catch(Q){this.onError(Q)}}var or=!1,In=null,Ko=!1,ld=null,YE={onError:function(s){or=!0,In=s}};function JE(s,a,u,p,g,y,w,A,L){or=!1,In=null,Sn.apply(YE,arguments)}function QE(s,a,u,p,g,y,w,A,L){if(JE.apply(this,arguments),or){if(or){var W=In;or=!1,In=null}else throw Error(n(198));Ko||(Ko=!0,ld=W)}}function es(s){var a=s,u=s;if(s.alternate)for(;a.return;)a=a.return;else{s=a;do a=s,(a.flags&4098)!==0&&(u=a.return),s=a.return;while(s)}return a.tag===3?u:null}function Cg(s){if(s.tag===13){var a=s.memoizedState;if(a===null&&(s=s.alternate,s!==null&&(a=s.memoizedState)),a!==null)return a.dehydrated}return null}function Tg(s){if(es(s)!==s)throw Error(n(188))}function ZE(s){var a=s.alternate;if(!a){if(a=es(s),a===null)throw Error(n(188));return a!==s?null:s}for(var u=s,p=a;;){var g=u.return;if(g===null)break;var y=g.alternate;if(y===null){if(p=g.return,p!==null){u=p;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===u)return Tg(g),s;if(y===p)return Tg(g),a;y=y.sibling}throw Error(n(188))}if(u.return!==p.return)u=g,p=y;else{for(var w=!1,A=g.child;A;){if(A===u){w=!0,u=g,p=y;break}if(A===p){w=!0,p=g,u=y;break}A=A.sibling}if(!w){for(A=y.child;A;){if(A===u){w=!0,u=y,p=g;break}if(A===p){w=!0,p=y,u=g;break}A=A.sibling}if(!w)throw Error(n(189))}}if(u.alternate!==p)throw Error(n(190))}if(u.tag!==3)throw Error(n(188));return u.stateNode.current===u?s:a}function wg(s){return s=ZE(s),s!==null?xg(s):null}function xg(s){if(s.tag===5||s.tag===6)return s;for(s=s.child;s!==null;){var a=xg(s);if(a!==null)return a;s=s.sibling}return null}var Eg=e.unstable_scheduleCallback,Pg=e.unstable_cancelCallback,eP=e.unstable_shouldYield,tP=e.unstable_requestPaint,ft=e.unstable_now,nP=e.unstable_getCurrentPriorityLevel,cd=e.unstable_ImmediatePriority,Rg=e.unstable_UserBlockingPriority,xl=e.unstable_NormalPriority,iP=e.unstable_LowPriority,_g=e.unstable_IdlePriority,El=null,ai=null;function rP(s){if(ai&&typeof ai.onCommitFiberRoot=="function")try{ai.onCommitFiberRoot(El,s,void 0,(s.current.flags&128)===128)}catch{}}var qn=Math.clz32?Math.clz32:aP,sP=Math.log,oP=Math.LN2;function aP(s){return s>>>=0,s===0?32:31-(sP(s)/oP|0)|0}var Pl=64,Rl=4194304;function Go(s){switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return s&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return s}}function _l(s,a){var u=s.pendingLanes;if(u===0)return 0;var p=0,g=s.suspendedLanes,y=s.pingedLanes,w=u&268435455;if(w!==0){var A=w&~g;A!==0?p=Go(A):(y&=w,y!==0&&(p=Go(y)))}else w=u&~g,w!==0?p=Go(w):y!==0&&(p=Go(y));if(p===0)return 0;if(a!==0&&a!==p&&(a&g)===0&&(g=p&-p,y=a&-a,g>=y||g===16&&(y&4194240)!==0))return a;if((p&4)!==0&&(p|=u&16),a=s.entangledLanes,a!==0)for(s=s.entanglements,a&=p;0<a;)u=31-qn(a),g=1<<u,p|=s[u],a&=~g;return p}function lP(s,a){switch(s){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cP(s,a){for(var u=s.suspendedLanes,p=s.pingedLanes,g=s.expirationTimes,y=s.pendingLanes;0<y;){var w=31-qn(y),A=1<<w,L=g[w];L===-1?((A&u)===0||(A&p)!==0)&&(g[w]=lP(A,a)):L<=a&&(s.expiredLanes|=A),y&=~A}}function ud(s){return s=s.pendingLanes&-1073741825,s!==0?s:s&1073741824?1073741824:0}function Ig(){var s=Pl;return Pl<<=1,(Pl&4194240)===0&&(Pl=64),s}function dd(s){for(var a=[],u=0;31>u;u++)a.push(s);return a}function Xo(s,a,u){s.pendingLanes|=a,a!==536870912&&(s.suspendedLanes=0,s.pingedLanes=0),s=s.eventTimes,a=31-qn(a),s[a]=u}function uP(s,a){var u=s.pendingLanes&~a;s.pendingLanes=a,s.suspendedLanes=0,s.pingedLanes=0,s.expiredLanes&=a,s.mutableReadLanes&=a,s.entangledLanes&=a,a=s.entanglements;var p=s.eventTimes;for(s=s.expirationTimes;0<u;){var g=31-qn(u),y=1<<g;a[g]=0,p[g]=-1,s[g]=-1,u&=~y}}function hd(s,a){var u=s.entangledLanes|=a;for(s=s.entanglements;u;){var p=31-qn(u),g=1<<p;g&a|s[p]&a&&(s[p]|=a),u&=~g}}var Ge=0;function Ag(s){return s&=-s,1<s?4<s?(s&268435455)!==0?16:536870912:4:1}var Mg,fd,Ng,Dg,Og,pd=!1,Il=[],ar=null,lr=null,cr=null,Yo=new Map,Jo=new Map,ur=[],dP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lg(s,a){switch(s){case"focusin":case"focusout":ar=null;break;case"dragenter":case"dragleave":lr=null;break;case"mouseover":case"mouseout":cr=null;break;case"pointerover":case"pointerout":Yo.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jo.delete(a.pointerId)}}function Qo(s,a,u,p,g,y){return s===null||s.nativeEvent!==y?(s={blockedOn:a,domEventName:u,eventSystemFlags:p,nativeEvent:y,targetContainers:[g]},a!==null&&(a=ha(a),a!==null&&fd(a)),s):(s.eventSystemFlags|=p,a=s.targetContainers,g!==null&&a.indexOf(g)===-1&&a.push(g),s)}function hP(s,a,u,p,g){switch(a){case"focusin":return ar=Qo(ar,s,a,u,p,g),!0;case"dragenter":return lr=Qo(lr,s,a,u,p,g),!0;case"mouseover":return cr=Qo(cr,s,a,u,p,g),!0;case"pointerover":var y=g.pointerId;return Yo.set(y,Qo(Yo.get(y)||null,s,a,u,p,g)),!0;case"gotpointercapture":return y=g.pointerId,Jo.set(y,Qo(Jo.get(y)||null,s,a,u,p,g)),!0}return!1}function Fg(s){var a=ts(s.target);if(a!==null){var u=es(a);if(u!==null){if(a=u.tag,a===13){if(a=Cg(u),a!==null){s.blockedOn=a,Og(s.priority,function(){Ng(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){s.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Al(s){if(s.blockedOn!==null)return!1;for(var a=s.targetContainers;0<a.length;){var u=gd(s.domEventName,s.eventSystemFlags,a[0],s.nativeEvent);if(u===null){u=s.nativeEvent;var p=new u.constructor(u.type,u);Zr=p,u.target.dispatchEvent(p),Zr=null}else return a=ha(u),a!==null&&fd(a),s.blockedOn=u,!1;a.shift()}return!0}function jg(s,a,u){Al(s)&&u.delete(a)}function fP(){pd=!1,ar!==null&&Al(ar)&&(ar=null),lr!==null&&Al(lr)&&(lr=null),cr!==null&&Al(cr)&&(cr=null),Yo.forEach(jg),Jo.forEach(jg)}function Zo(s,a){s.blockedOn===a&&(s.blockedOn=null,pd||(pd=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,fP)))}function ea(s){function a(g){return Zo(g,s)}if(0<Il.length){Zo(Il[0],s);for(var u=1;u<Il.length;u++){var p=Il[u];p.blockedOn===s&&(p.blockedOn=null)}}for(ar!==null&&Zo(ar,s),lr!==null&&Zo(lr,s),cr!==null&&Zo(cr,s),Yo.forEach(a),Jo.forEach(a),u=0;u<ur.length;u++)p=ur[u],p.blockedOn===s&&(p.blockedOn=null);for(;0<ur.length&&(u=ur[0],u.blockedOn===null);)Fg(u),u.blockedOn===null&&ur.shift()}var Ds=P.ReactCurrentBatchConfig,Ml=!0;function pP(s,a,u,p){var g=Ge,y=Ds.transition;Ds.transition=null;try{Ge=1,md(s,a,u,p)}finally{Ge=g,Ds.transition=y}}function mP(s,a,u,p){var g=Ge,y=Ds.transition;Ds.transition=null;try{Ge=4,md(s,a,u,p)}finally{Ge=g,Ds.transition=y}}function md(s,a,u,p){if(Ml){var g=gd(s,a,u,p);if(g===null)Nd(s,a,p,Nl,u),Lg(s,p);else if(hP(g,s,a,u,p))p.stopPropagation();else if(Lg(s,p),a&4&&-1<dP.indexOf(s)){for(;g!==null;){var y=ha(g);if(y!==null&&Mg(y),y=gd(s,a,u,p),y===null&&Nd(s,a,p,Nl,u),y===g)break;g=y}g!==null&&p.stopPropagation()}else Nd(s,a,p,null,u)}}var Nl=null;function gd(s,a,u,p){if(Nl=null,s=_n(p),s=ts(s),s!==null)if(a=es(s),a===null)s=null;else if(u=a.tag,u===13){if(s=Cg(a),s!==null)return s;s=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;s=null}else a!==s&&(s=null);return Nl=s,null}function Ug(s){switch(s){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(nP()){case cd:return 1;case Rg:return 4;case xl:case iP:return 16;case _g:return 536870912;default:return 16}default:return 16}}var dr=null,vd=null,Dl=null;function Bg(){if(Dl)return Dl;var s,a=vd,u=a.length,p,g="value"in dr?dr.value:dr.textContent,y=g.length;for(s=0;s<u&&a[s]===g[s];s++);var w=u-s;for(p=1;p<=w&&a[u-p]===g[y-p];p++);return Dl=g.slice(s,1<p?1-p:void 0)}function Ol(s){var a=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&a===13&&(s=13)):s=a,s===10&&(s=13),32<=s||s===13?s:0}function Ll(){return!0}function Vg(){return!1}function kn(s){function a(u,p,g,y,w){this._reactName=u,this._targetInst=g,this.type=p,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var A in s)s.hasOwnProperty(A)&&(u=s[A],this[A]=u?u(y):y[A]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Ll:Vg,this.isPropagationStopped=Vg,this}return Y(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Ll)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Ll)},persist:function(){},isPersistent:Ll}),a}var Os={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yd=kn(Os),ta=Y({},Os,{view:0,detail:0}),gP=kn(ta),bd,Sd,na,Fl=Y({},ta,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Cd,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==na&&(na&&s.type==="mousemove"?(bd=s.screenX-na.screenX,Sd=s.screenY-na.screenY):Sd=bd=0,na=s),bd)},movementY:function(s){return"movementY"in s?s.movementY:Sd}}),zg=kn(Fl),vP=Y({},Fl,{dataTransfer:0}),yP=kn(vP),bP=Y({},ta,{relatedTarget:0}),kd=kn(bP),SP=Y({},Os,{animationName:0,elapsedTime:0,pseudoElement:0}),kP=kn(SP),CP=Y({},Os,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),TP=kn(CP),wP=Y({},Os,{data:0}),Wg=kn(wP),xP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},EP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},PP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function RP(s){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(s):(s=PP[s])?!!a[s]:!1}function Cd(){return RP}var _P=Y({},ta,{key:function(s){if(s.key){var a=xP[s.key]||s.key;if(a!=="Unidentified")return a}return s.type==="keypress"?(s=Ol(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?EP[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Cd,charCode:function(s){return s.type==="keypress"?Ol(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Ol(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),IP=kn(_P),AP=Y({},Fl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qg=kn(AP),MP=Y({},ta,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Cd}),NP=kn(MP),DP=Y({},Os,{propertyName:0,elapsedTime:0,pseudoElement:0}),OP=kn(DP),LP=Y({},Fl,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),FP=kn(LP),jP=[9,13,27,32],Td=c&&"CompositionEvent"in window,ia=null;c&&"documentMode"in document&&(ia=document.documentMode);var UP=c&&"TextEvent"in window&&!ia,Hg=c&&(!Td||ia&&8<ia&&11>=ia),$g=" ",Kg=!1;function Gg(s,a){switch(s){case"keyup":return jP.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xg(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var Ls=!1;function BP(s,a){switch(s){case"compositionend":return Xg(a);case"keypress":return a.which!==32?null:(Kg=!0,$g);case"textInput":return s=a.data,s===$g&&Kg?null:s;default:return null}}function VP(s,a){if(Ls)return s==="compositionend"||!Td&&Gg(s,a)?(s=Bg(),Dl=vd=dr=null,Ls=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Hg&&a.locale!=="ko"?null:a.data;default:return null}}var zP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yg(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a==="input"?!!zP[s.type]:a==="textarea"}function Jg(s,a,u,p){Me(p),a=zl(a,"onChange"),0<a.length&&(u=new yd("onChange","change",null,u,p),s.push({event:u,listeners:a}))}var ra=null,sa=null;function WP(s){mv(s,0)}function jl(s){var a=Vs(s);if(Ve(a))return s}function qP(s,a){if(s==="change")return a}var Qg=!1;if(c){var wd;if(c){var xd="oninput"in document;if(!xd){var Zg=document.createElement("div");Zg.setAttribute("oninput","return;"),xd=typeof Zg.oninput=="function"}wd=xd}else wd=!1;Qg=wd&&(!document.documentMode||9<document.documentMode)}function ev(){ra&&(ra.detachEvent("onpropertychange",tv),sa=ra=null)}function tv(s){if(s.propertyName==="value"&&jl(sa)){var a=[];Jg(a,sa,s,_n(s)),vt(WP,a)}}function HP(s,a,u){s==="focusin"?(ev(),ra=a,sa=u,ra.attachEvent("onpropertychange",tv)):s==="focusout"&&ev()}function $P(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return jl(sa)}function KP(s,a){if(s==="click")return jl(a)}function GP(s,a){if(s==="input"||s==="change")return jl(a)}function XP(s,a){return s===a&&(s!==0||1/s===1/a)||s!==s&&a!==a}var Hn=typeof Object.is=="function"?Object.is:XP;function oa(s,a){if(Hn(s,a))return!0;if(typeof s!="object"||s===null||typeof a!="object"||a===null)return!1;var u=Object.keys(s),p=Object.keys(a);if(u.length!==p.length)return!1;for(p=0;p<u.length;p++){var g=u[p];if(!d.call(a,g)||!Hn(s[g],a[g]))return!1}return!0}function nv(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function iv(s,a){var u=nv(s);s=0;for(var p;u;){if(u.nodeType===3){if(p=s+u.textContent.length,s<=a&&p>=a)return{node:u,offset:a-s};s=p}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=nv(u)}}function rv(s,a){return s&&a?s===a?!0:s&&s.nodeType===3?!1:a&&a.nodeType===3?rv(s,a.parentNode):"contains"in s?s.contains(a):s.compareDocumentPosition?!!(s.compareDocumentPosition(a)&16):!1:!1}function sv(){for(var s=window,a=kt();a instanceof s.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)s=a.contentWindow;else break;a=kt(s.document)}return a}function Ed(s){var a=s&&s.nodeName&&s.nodeName.toLowerCase();return a&&(a==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||a==="textarea"||s.contentEditable==="true")}function YP(s){var a=sv(),u=s.focusedElem,p=s.selectionRange;if(a!==u&&u&&u.ownerDocument&&rv(u.ownerDocument.documentElement,u)){if(p!==null&&Ed(u)){if(a=p.start,s=p.end,s===void 0&&(s=a),"selectionStart"in u)u.selectionStart=a,u.selectionEnd=Math.min(s,u.value.length);else if(s=(a=u.ownerDocument||document)&&a.defaultView||window,s.getSelection){s=s.getSelection();var g=u.textContent.length,y=Math.min(p.start,g);p=p.end===void 0?y:Math.min(p.end,g),!s.extend&&y>p&&(g=p,p=y,y=g),g=iv(u,y);var w=iv(u,p);g&&w&&(s.rangeCount!==1||s.anchorNode!==g.node||s.anchorOffset!==g.offset||s.focusNode!==w.node||s.focusOffset!==w.offset)&&(a=a.createRange(),a.setStart(g.node,g.offset),s.removeAllRanges(),y>p?(s.addRange(a),s.extend(w.node,w.offset)):(a.setEnd(w.node,w.offset),s.addRange(a)))}}for(a=[],s=u;s=s.parentNode;)s.nodeType===1&&a.push({element:s,left:s.scrollLeft,top:s.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<a.length;u++)s=a[u],s.element.scrollLeft=s.left,s.element.scrollTop=s.top}}var JP=c&&"documentMode"in document&&11>=document.documentMode,Fs=null,Pd=null,aa=null,Rd=!1;function ov(s,a,u){var p=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Rd||Fs==null||Fs!==kt(p)||(p=Fs,"selectionStart"in p&&Ed(p)?p={start:p.selectionStart,end:p.selectionEnd}:(p=(p.ownerDocument&&p.ownerDocument.defaultView||window).getSelection(),p={anchorNode:p.anchorNode,anchorOffset:p.anchorOffset,focusNode:p.focusNode,focusOffset:p.focusOffset}),aa&&oa(aa,p)||(aa=p,p=zl(Pd,"onSelect"),0<p.length&&(a=new yd("onSelect","select",null,a,u),s.push({event:a,listeners:p}),a.target=Fs)))}function Ul(s,a){var u={};return u[s.toLowerCase()]=a.toLowerCase(),u["Webkit"+s]="webkit"+a,u["Moz"+s]="moz"+a,u}var js={animationend:Ul("Animation","AnimationEnd"),animationiteration:Ul("Animation","AnimationIteration"),animationstart:Ul("Animation","AnimationStart"),transitionend:Ul("Transition","TransitionEnd")},_d={},av={};c&&(av=document.createElement("div").style,"AnimationEvent"in window||(delete js.animationend.animation,delete js.animationiteration.animation,delete js.animationstart.animation),"TransitionEvent"in window||delete js.transitionend.transition);function Bl(s){if(_d[s])return _d[s];if(!js[s])return s;var a=js[s],u;for(u in a)if(a.hasOwnProperty(u)&&u in av)return _d[s]=a[u];return s}var lv=Bl("animationend"),cv=Bl("animationiteration"),uv=Bl("animationstart"),dv=Bl("transitionend"),hv=new Map,fv="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function hr(s,a){hv.set(s,a),o(a,[s])}for(var Id=0;Id<fv.length;Id++){var Ad=fv[Id],QP=Ad.toLowerCase(),ZP=Ad[0].toUpperCase()+Ad.slice(1);hr(QP,"on"+ZP)}hr(lv,"onAnimationEnd"),hr(cv,"onAnimationIteration"),hr(uv,"onAnimationStart"),hr("dblclick","onDoubleClick"),hr("focusin","onFocus"),hr("focusout","onBlur"),hr(dv,"onTransitionEnd"),l("onMouseEnter",["mouseout","mouseover"]),l("onMouseLeave",["mouseout","mouseover"]),l("onPointerEnter",["pointerout","pointerover"]),l("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var la="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),e1=new Set("cancel close invalid load scroll toggle".split(" ").concat(la));function pv(s,a,u){var p=s.type||"unknown-event";s.currentTarget=u,QE(p,a,void 0,s),s.currentTarget=null}function mv(s,a){a=(a&4)!==0;for(var u=0;u<s.length;u++){var p=s[u],g=p.event;p=p.listeners;e:{var y=void 0;if(a)for(var w=p.length-1;0<=w;w--){var A=p[w],L=A.instance,W=A.currentTarget;if(A=A.listener,L!==y&&g.isPropagationStopped())break e;pv(g,A,W),y=L}else for(w=0;w<p.length;w++){if(A=p[w],L=A.instance,W=A.currentTarget,A=A.listener,L!==y&&g.isPropagationStopped())break e;pv(g,A,W),y=L}}}if(Ko)throw s=ld,Ko=!1,ld=null,s}function Je(s,a){var u=a[Ud];u===void 0&&(u=a[Ud]=new Set);var p=s+"__bubble";u.has(p)||(gv(a,s,2,!1),u.add(p))}function Md(s,a,u){var p=0;a&&(p|=4),gv(u,s,p,a)}var Vl="_reactListening"+Math.random().toString(36).slice(2);function ca(s){if(!s[Vl]){s[Vl]=!0,i.forEach(function(u){u!=="selectionchange"&&(e1.has(u)||Md(u,!1,s),Md(u,!0,s))});var a=s.nodeType===9?s:s.ownerDocument;a===null||a[Vl]||(a[Vl]=!0,Md("selectionchange",!1,a))}}function gv(s,a,u,p){switch(Ug(a)){case 1:var g=pP;break;case 4:g=mP;break;default:g=md}u=g.bind(null,a,u,s),g=void 0,!sr||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(g=!0),p?g!==void 0?s.addEventListener(a,u,{capture:!0,passive:g}):s.addEventListener(a,u,!0):g!==void 0?s.addEventListener(a,u,{passive:g}):s.addEventListener(a,u,!1)}function Nd(s,a,u,p,g){var y=p;if((a&1)===0&&(a&2)===0&&p!==null)e:for(;;){if(p===null)return;var w=p.tag;if(w===3||w===4){var A=p.stateNode.containerInfo;if(A===g||A.nodeType===8&&A.parentNode===g)break;if(w===4)for(w=p.return;w!==null;){var L=w.tag;if((L===3||L===4)&&(L=w.stateNode.containerInfo,L===g||L.nodeType===8&&L.parentNode===g))return;w=w.return}for(;A!==null;){if(w=ts(A),w===null)return;if(L=w.tag,L===5||L===6){p=y=w;continue e}A=A.parentNode}}p=p.return}vt(function(){var W=y,Q=_n(u),se=[];e:{var J=hv.get(s);if(J!==void 0){var ve=yd,Se=s;switch(s){case"keypress":if(Ol(u)===0)break e;case"keydown":case"keyup":ve=IP;break;case"focusin":Se="focus",ve=kd;break;case"focusout":Se="blur",ve=kd;break;case"beforeblur":case"afterblur":ve=kd;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=zg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=yP;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=NP;break;case lv:case cv:case uv:ve=kP;break;case dv:ve=OP;break;case"scroll":ve=gP;break;case"wheel":ve=FP;break;case"copy":case"cut":case"paste":ve=TP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=qg}var Te=(a&4)!==0,pt=!Te&&s==="scroll",B=Te?J!==null?J+"Capture":null:J;Te=[];for(var j=W,z;j!==null;){z=j;var oe=z.stateNode;if(z.tag===5&&oe!==null&&(z=oe,B!==null&&(oe=_t(j,B),oe!=null&&Te.push(ua(j,oe,z)))),pt)break;j=j.return}0<Te.length&&(J=new ve(J,Se,null,u,Q),se.push({event:J,listeners:Te}))}}if((a&7)===0){e:{if(J=s==="mouseover"||s==="pointerover",ve=s==="mouseout"||s==="pointerout",J&&u!==Zr&&(Se=u.relatedTarget||u.fromElement)&&(ts(Se)||Se[Ii]))break e;if((ve||J)&&(J=Q.window===Q?Q:(J=Q.ownerDocument)?J.defaultView||J.parentWindow:window,ve?(Se=u.relatedTarget||u.toElement,ve=W,Se=Se?ts(Se):null,Se!==null&&(pt=es(Se),Se!==pt||Se.tag!==5&&Se.tag!==6)&&(Se=null)):(ve=null,Se=W),ve!==Se)){if(Te=zg,oe="onMouseLeave",B="onMouseEnter",j="mouse",(s==="pointerout"||s==="pointerover")&&(Te=qg,oe="onPointerLeave",B="onPointerEnter",j="pointer"),pt=ve==null?J:Vs(ve),z=Se==null?J:Vs(Se),J=new Te(oe,j+"leave",ve,u,Q),J.target=pt,J.relatedTarget=z,oe=null,ts(Q)===W&&(Te=new Te(B,j+"enter",Se,u,Q),Te.target=z,Te.relatedTarget=pt,oe=Te),pt=oe,ve&&Se)t:{for(Te=ve,B=Se,j=0,z=Te;z;z=Us(z))j++;for(z=0,oe=B;oe;oe=Us(oe))z++;for(;0<j-z;)Te=Us(Te),j--;for(;0<z-j;)B=Us(B),z--;for(;j--;){if(Te===B||B!==null&&Te===B.alternate)break t;Te=Us(Te),B=Us(B)}Te=null}else Te=null;ve!==null&&vv(se,J,ve,Te,!1),Se!==null&&pt!==null&&vv(se,pt,Se,Te,!0)}}e:{if(J=W?Vs(W):window,ve=J.nodeName&&J.nodeName.toLowerCase(),ve==="select"||ve==="input"&&J.type==="file")var xe=qP;else if(Yg(J))if(Qg)xe=GP;else{xe=$P;var Pe=HP}else(ve=J.nodeName)&&ve.toLowerCase()==="input"&&(J.type==="checkbox"||J.type==="radio")&&(xe=KP);if(xe&&(xe=xe(s,W))){Jg(se,xe,u,Q);break e}Pe&&Pe(s,J,W),s==="focusout"&&(Pe=J._wrapperState)&&Pe.controlled&&J.type==="number"&&bn(J,"number",J.value)}switch(Pe=W?Vs(W):window,s){case"focusin":(Yg(Pe)||Pe.contentEditable==="true")&&(Fs=Pe,Pd=W,aa=null);break;case"focusout":aa=Pd=Fs=null;break;case"mousedown":Rd=!0;break;case"contextmenu":case"mouseup":case"dragend":Rd=!1,ov(se,u,Q);break;case"selectionchange":if(JP)break;case"keydown":case"keyup":ov(se,u,Q)}var Re;if(Td)e:{switch(s){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else Ls?Gg(s,u)&&(Ae="onCompositionEnd"):s==="keydown"&&u.keyCode===229&&(Ae="onCompositionStart");Ae&&(Hg&&u.locale!=="ko"&&(Ls||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&Ls&&(Re=Bg()):(dr=Q,vd="value"in dr?dr.value:dr.textContent,Ls=!0)),Pe=zl(W,Ae),0<Pe.length&&(Ae=new Wg(Ae,s,null,u,Q),se.push({event:Ae,listeners:Pe}),Re?Ae.data=Re:(Re=Xg(u),Re!==null&&(Ae.data=Re)))),(Re=UP?BP(s,u):VP(s,u))&&(W=zl(W,"onBeforeInput"),0<W.length&&(Q=new Wg("onBeforeInput","beforeinput",null,u,Q),se.push({event:Q,listeners:W}),Q.data=Re))}mv(se,a)})}function ua(s,a,u){return{instance:s,listener:a,currentTarget:u}}function zl(s,a){for(var u=a+"Capture",p=[];s!==null;){var g=s,y=g.stateNode;g.tag===5&&y!==null&&(g=y,y=_t(s,u),y!=null&&p.unshift(ua(s,y,g)),y=_t(s,a),y!=null&&p.push(ua(s,y,g))),s=s.return}return p}function Us(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5);return s||null}function vv(s,a,u,p,g){for(var y=a._reactName,w=[];u!==null&&u!==p;){var A=u,L=A.alternate,W=A.stateNode;if(L!==null&&L===p)break;A.tag===5&&W!==null&&(A=W,g?(L=_t(u,y),L!=null&&w.unshift(ua(u,L,A))):g||(L=_t(u,y),L!=null&&w.push(ua(u,L,A)))),u=u.return}w.length!==0&&s.push({event:a,listeners:w})}var t1=/\r\n?/g,n1=/\u0000|\uFFFD/g;function yv(s){return(typeof s=="string"?s:""+s).replace(t1,`
`).replace(n1,"")}function Wl(s,a,u){if(a=yv(a),yv(s)!==a&&u)throw Error(n(425))}function ql(){}var Dd=null,Od=null;function Ld(s,a){return s==="textarea"||s==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Fd=typeof setTimeout=="function"?setTimeout:void 0,i1=typeof clearTimeout=="function"?clearTimeout:void 0,bv=typeof Promise=="function"?Promise:void 0,r1=typeof queueMicrotask=="function"?queueMicrotask:typeof bv<"u"?function(s){return bv.resolve(null).then(s).catch(s1)}:Fd;function s1(s){setTimeout(function(){throw s})}function jd(s,a){var u=a,p=0;do{var g=u.nextSibling;if(s.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(p===0){s.removeChild(g),ea(a);return}p--}else u!=="$"&&u!=="$?"&&u!=="$!"||p++;u=g}while(u);ea(a)}function fr(s){for(;s!=null;s=s.nextSibling){var a=s.nodeType;if(a===1||a===3)break;if(a===8){if(a=s.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return s}function Sv(s){s=s.previousSibling;for(var a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="$"||u==="$!"||u==="$?"){if(a===0)return s;a--}else u==="/$"&&a++}s=s.previousSibling}return null}var Bs=Math.random().toString(36).slice(2),li="__reactFiber$"+Bs,da="__reactProps$"+Bs,Ii="__reactContainer$"+Bs,Ud="__reactEvents$"+Bs,o1="__reactListeners$"+Bs,a1="__reactHandles$"+Bs;function ts(s){var a=s[li];if(a)return a;for(var u=s.parentNode;u;){if(a=u[Ii]||u[li]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(s=Sv(s);s!==null;){if(u=s[li])return u;s=Sv(s)}return a}s=u,u=s.parentNode}return null}function ha(s){return s=s[li]||s[Ii],!s||s.tag!==5&&s.tag!==6&&s.tag!==13&&s.tag!==3?null:s}function Vs(s){if(s.tag===5||s.tag===6)return s.stateNode;throw Error(n(33))}function Hl(s){return s[da]||null}var Bd=[],zs=-1;function pr(s){return{current:s}}function Qe(s){0>zs||(s.current=Bd[zs],Bd[zs]=null,zs--)}function Ye(s,a){zs++,Bd[zs]=s.current,s.current=a}var mr={},Wt=pr(mr),on=pr(!1),ns=mr;function Ws(s,a){var u=s.type.contextTypes;if(!u)return mr;var p=s.stateNode;if(p&&p.__reactInternalMemoizedUnmaskedChildContext===a)return p.__reactInternalMemoizedMaskedChildContext;var g={},y;for(y in u)g[y]=a[y];return p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=a,s.__reactInternalMemoizedMaskedChildContext=g),g}function an(s){return s=s.childContextTypes,s!=null}function $l(){Qe(on),Qe(Wt)}function kv(s,a,u){if(Wt.current!==mr)throw Error(n(168));Ye(Wt,a),Ye(on,u)}function Cv(s,a,u){var p=s.stateNode;if(a=a.childContextTypes,typeof p.getChildContext!="function")return u;p=p.getChildContext();for(var g in p)if(!(g in a))throw Error(n(108,ee(s)||"Unknown",g));return Y({},u,p)}function Kl(s){return s=(s=s.stateNode)&&s.__reactInternalMemoizedMergedChildContext||mr,ns=Wt.current,Ye(Wt,s),Ye(on,on.current),!0}function Tv(s,a,u){var p=s.stateNode;if(!p)throw Error(n(169));u?(s=Cv(s,a,ns),p.__reactInternalMemoizedMergedChildContext=s,Qe(on),Qe(Wt),Ye(Wt,s)):Qe(on),Ye(on,u)}var Ai=null,Gl=!1,Vd=!1;function wv(s){Ai===null?Ai=[s]:Ai.push(s)}function l1(s){Gl=!0,wv(s)}function gr(){if(!Vd&&Ai!==null){Vd=!0;var s=0,a=Ge;try{var u=Ai;for(Ge=1;s<u.length;s++){var p=u[s];do p=p(!0);while(p!==null)}Ai=null,Gl=!1}catch(g){throw Ai!==null&&(Ai=Ai.slice(s+1)),Eg(cd,gr),g}finally{Ge=a,Vd=!1}}return null}var qs=[],Hs=0,Xl=null,Yl=0,An=[],Mn=0,is=null,Mi=1,Ni="";function rs(s,a){qs[Hs++]=Yl,qs[Hs++]=Xl,Xl=s,Yl=a}function xv(s,a,u){An[Mn++]=Mi,An[Mn++]=Ni,An[Mn++]=is,is=s;var p=Mi;s=Ni;var g=32-qn(p)-1;p&=~(1<<g),u+=1;var y=32-qn(a)+g;if(30<y){var w=g-g%5;y=(p&(1<<w)-1).toString(32),p>>=w,g-=w,Mi=1<<32-qn(a)+g|u<<g|p,Ni=y+s}else Mi=1<<y|u<<g|p,Ni=s}function zd(s){s.return!==null&&(rs(s,1),xv(s,1,0))}function Wd(s){for(;s===Xl;)Xl=qs[--Hs],qs[Hs]=null,Yl=qs[--Hs],qs[Hs]=null;for(;s===is;)is=An[--Mn],An[Mn]=null,Ni=An[--Mn],An[Mn]=null,Mi=An[--Mn],An[Mn]=null}var Cn=null,Tn=null,Ze=!1,$n=null;function Ev(s,a){var u=Ln(5,null,null,0);u.elementType="DELETED",u.stateNode=a,u.return=s,a=s.deletions,a===null?(s.deletions=[u],s.flags|=16):a.push(u)}function Pv(s,a){switch(s.tag){case 5:var u=s.type;return a=a.nodeType!==1||u.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(s.stateNode=a,Cn=s,Tn=fr(a.firstChild),!0):!1;case 6:return a=s.pendingProps===""||a.nodeType!==3?null:a,a!==null?(s.stateNode=a,Cn=s,Tn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(u=is!==null?{id:Mi,overflow:Ni}:null,s.memoizedState={dehydrated:a,treeContext:u,retryLane:1073741824},u=Ln(18,null,null,0),u.stateNode=a,u.return=s,s.child=u,Cn=s,Tn=null,!0):!1;default:return!1}}function qd(s){return(s.mode&1)!==0&&(s.flags&128)===0}function Hd(s){if(Ze){var a=Tn;if(a){var u=a;if(!Pv(s,a)){if(qd(s))throw Error(n(418));a=fr(u.nextSibling);var p=Cn;a&&Pv(s,a)?Ev(p,u):(s.flags=s.flags&-4097|2,Ze=!1,Cn=s)}}else{if(qd(s))throw Error(n(418));s.flags=s.flags&-4097|2,Ze=!1,Cn=s}}}function Rv(s){for(s=s.return;s!==null&&s.tag!==5&&s.tag!==3&&s.tag!==13;)s=s.return;Cn=s}function Jl(s){if(s!==Cn)return!1;if(!Ze)return Rv(s),Ze=!0,!1;var a;if((a=s.tag!==3)&&!(a=s.tag!==5)&&(a=s.type,a=a!=="head"&&a!=="body"&&!Ld(s.type,s.memoizedProps)),a&&(a=Tn)){if(qd(s))throw _v(),Error(n(418));for(;a;)Ev(s,a),a=fr(a.nextSibling)}if(Rv(s),s.tag===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(n(317));e:{for(s=s.nextSibling,a=0;s;){if(s.nodeType===8){var u=s.data;if(u==="/$"){if(a===0){Tn=fr(s.nextSibling);break e}a--}else u!=="$"&&u!=="$!"&&u!=="$?"||a++}s=s.nextSibling}Tn=null}}else Tn=Cn?fr(s.stateNode.nextSibling):null;return!0}function _v(){for(var s=Tn;s;)s=fr(s.nextSibling)}function $s(){Tn=Cn=null,Ze=!1}function $d(s){$n===null?$n=[s]:$n.push(s)}var c1=P.ReactCurrentBatchConfig;function fa(s,a,u){if(s=u.ref,s!==null&&typeof s!="function"&&typeof s!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(n(309));var p=u.stateNode}if(!p)throw Error(n(147,s));var g=p,y=""+s;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===y?a.ref:(a=function(w){var A=g.refs;w===null?delete A[y]:A[y]=w},a._stringRef=y,a)}if(typeof s!="string")throw Error(n(284));if(!u._owner)throw Error(n(290,s))}return s}function Ql(s,a){throw s=Object.prototype.toString.call(a),Error(n(31,s==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":s))}function Iv(s){var a=s._init;return a(s._payload)}function Av(s){function a(B,j){if(s){var z=B.deletions;z===null?(B.deletions=[j],B.flags|=16):z.push(j)}}function u(B,j){if(!s)return null;for(;j!==null;)a(B,j),j=j.sibling;return null}function p(B,j){for(B=new Map;j!==null;)j.key!==null?B.set(j.key,j):B.set(j.index,j),j=j.sibling;return B}function g(B,j){return B=wr(B,j),B.index=0,B.sibling=null,B}function y(B,j,z){return B.index=z,s?(z=B.alternate,z!==null?(z=z.index,z<j?(B.flags|=2,j):z):(B.flags|=2,j)):(B.flags|=1048576,j)}function w(B){return s&&B.alternate===null&&(B.flags|=2),B}function A(B,j,z,oe){return j===null||j.tag!==6?(j=Fh(z,B.mode,oe),j.return=B,j):(j=g(j,z),j.return=B,j)}function L(B,j,z,oe){var xe=z.type;return xe===O?Q(B,j,z.props.children,oe,z.key):j!==null&&(j.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===ie&&Iv(xe)===j.type)?(oe=g(j,z.props),oe.ref=fa(B,j,z),oe.return=B,oe):(oe=Cc(z.type,z.key,z.props,null,B.mode,oe),oe.ref=fa(B,j,z),oe.return=B,oe)}function W(B,j,z,oe){return j===null||j.tag!==4||j.stateNode.containerInfo!==z.containerInfo||j.stateNode.implementation!==z.implementation?(j=jh(z,B.mode,oe),j.return=B,j):(j=g(j,z.children||[]),j.return=B,j)}function Q(B,j,z,oe,xe){return j===null||j.tag!==7?(j=hs(z,B.mode,oe,xe),j.return=B,j):(j=g(j,z),j.return=B,j)}function se(B,j,z){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Fh(""+j,B.mode,z),j.return=B,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case I:return z=Cc(j.type,j.key,j.props,null,B.mode,z),z.ref=fa(B,null,j),z.return=B,z;case D:return j=jh(j,B.mode,z),j.return=B,j;case ie:var oe=j._init;return se(B,oe(j._payload),z)}if(Yr(j)||re(j))return j=hs(j,B.mode,z,null),j.return=B,j;Ql(B,j)}return null}function J(B,j,z,oe){var xe=j!==null?j.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return xe!==null?null:A(B,j,""+z,oe);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case I:return z.key===xe?L(B,j,z,oe):null;case D:return z.key===xe?W(B,j,z,oe):null;case ie:return xe=z._init,J(B,j,xe(z._payload),oe)}if(Yr(z)||re(z))return xe!==null?null:Q(B,j,z,oe,null);Ql(B,z)}return null}function ve(B,j,z,oe,xe){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return B=B.get(z)||null,A(j,B,""+oe,xe);if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case I:return B=B.get(oe.key===null?z:oe.key)||null,L(j,B,oe,xe);case D:return B=B.get(oe.key===null?z:oe.key)||null,W(j,B,oe,xe);case ie:var Pe=oe._init;return ve(B,j,z,Pe(oe._payload),xe)}if(Yr(oe)||re(oe))return B=B.get(z)||null,Q(j,B,oe,xe,null);Ql(j,oe)}return null}function Se(B,j,z,oe){for(var xe=null,Pe=null,Re=j,Ae=j=0,Mt=null;Re!==null&&Ae<z.length;Ae++){Re.index>Ae?(Mt=Re,Re=null):Mt=Re.sibling;var We=J(B,Re,z[Ae],oe);if(We===null){Re===null&&(Re=Mt);break}s&&Re&&We.alternate===null&&a(B,Re),j=y(We,j,Ae),Pe===null?xe=We:Pe.sibling=We,Pe=We,Re=Mt}if(Ae===z.length)return u(B,Re),Ze&&rs(B,Ae),xe;if(Re===null){for(;Ae<z.length;Ae++)Re=se(B,z[Ae],oe),Re!==null&&(j=y(Re,j,Ae),Pe===null?xe=Re:Pe.sibling=Re,Pe=Re);return Ze&&rs(B,Ae),xe}for(Re=p(B,Re);Ae<z.length;Ae++)Mt=ve(Re,B,Ae,z[Ae],oe),Mt!==null&&(s&&Mt.alternate!==null&&Re.delete(Mt.key===null?Ae:Mt.key),j=y(Mt,j,Ae),Pe===null?xe=Mt:Pe.sibling=Mt,Pe=Mt);return s&&Re.forEach(function(xr){return a(B,xr)}),Ze&&rs(B,Ae),xe}function Te(B,j,z,oe){var xe=re(z);if(typeof xe!="function")throw Error(n(150));if(z=xe.call(z),z==null)throw Error(n(151));for(var Pe=xe=null,Re=j,Ae=j=0,Mt=null,We=z.next();Re!==null&&!We.done;Ae++,We=z.next()){Re.index>Ae?(Mt=Re,Re=null):Mt=Re.sibling;var xr=J(B,Re,We.value,oe);if(xr===null){Re===null&&(Re=Mt);break}s&&Re&&xr.alternate===null&&a(B,Re),j=y(xr,j,Ae),Pe===null?xe=xr:Pe.sibling=xr,Pe=xr,Re=Mt}if(We.done)return u(B,Re),Ze&&rs(B,Ae),xe;if(Re===null){for(;!We.done;Ae++,We=z.next())We=se(B,We.value,oe),We!==null&&(j=y(We,j,Ae),Pe===null?xe=We:Pe.sibling=We,Pe=We);return Ze&&rs(B,Ae),xe}for(Re=p(B,Re);!We.done;Ae++,We=z.next())We=ve(Re,B,Ae,We.value,oe),We!==null&&(s&&We.alternate!==null&&Re.delete(We.key===null?Ae:We.key),j=y(We,j,Ae),Pe===null?xe=We:Pe.sibling=We,Pe=We);return s&&Re.forEach(function(z1){return a(B,z1)}),Ze&&rs(B,Ae),xe}function pt(B,j,z,oe){if(typeof z=="object"&&z!==null&&z.type===O&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case I:e:{for(var xe=z.key,Pe=j;Pe!==null;){if(Pe.key===xe){if(xe=z.type,xe===O){if(Pe.tag===7){u(B,Pe.sibling),j=g(Pe,z.props.children),j.return=B,B=j;break e}}else if(Pe.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===ie&&Iv(xe)===Pe.type){u(B,Pe.sibling),j=g(Pe,z.props),j.ref=fa(B,Pe,z),j.return=B,B=j;break e}u(B,Pe);break}else a(B,Pe);Pe=Pe.sibling}z.type===O?(j=hs(z.props.children,B.mode,oe,z.key),j.return=B,B=j):(oe=Cc(z.type,z.key,z.props,null,B.mode,oe),oe.ref=fa(B,j,z),oe.return=B,B=oe)}return w(B);case D:e:{for(Pe=z.key;j!==null;){if(j.key===Pe)if(j.tag===4&&j.stateNode.containerInfo===z.containerInfo&&j.stateNode.implementation===z.implementation){u(B,j.sibling),j=g(j,z.children||[]),j.return=B,B=j;break e}else{u(B,j);break}else a(B,j);j=j.sibling}j=jh(z,B.mode,oe),j.return=B,B=j}return w(B);case ie:return Pe=z._init,pt(B,j,Pe(z._payload),oe)}if(Yr(z))return Se(B,j,z,oe);if(re(z))return Te(B,j,z,oe);Ql(B,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,j!==null&&j.tag===6?(u(B,j.sibling),j=g(j,z),j.return=B,B=j):(u(B,j),j=Fh(z,B.mode,oe),j.return=B,B=j),w(B)):u(B,j)}return pt}var Ks=Av(!0),Mv=Av(!1),Zl=pr(null),ec=null,Gs=null,Kd=null;function Gd(){Kd=Gs=ec=null}function Xd(s){var a=Zl.current;Qe(Zl),s._currentValue=a}function Yd(s,a,u){for(;s!==null;){var p=s.alternate;if((s.childLanes&a)!==a?(s.childLanes|=a,p!==null&&(p.childLanes|=a)):p!==null&&(p.childLanes&a)!==a&&(p.childLanes|=a),s===u)break;s=s.return}}function Xs(s,a){ec=s,Kd=Gs=null,s=s.dependencies,s!==null&&s.firstContext!==null&&((s.lanes&a)!==0&&(ln=!0),s.firstContext=null)}function Nn(s){var a=s._currentValue;if(Kd!==s)if(s={context:s,memoizedValue:a,next:null},Gs===null){if(ec===null)throw Error(n(308));Gs=s,ec.dependencies={lanes:0,firstContext:s}}else Gs=Gs.next=s;return a}var ss=null;function Jd(s){ss===null?ss=[s]:ss.push(s)}function Nv(s,a,u,p){var g=a.interleaved;return g===null?(u.next=u,Jd(a)):(u.next=g.next,g.next=u),a.interleaved=u,Di(s,p)}function Di(s,a){s.lanes|=a;var u=s.alternate;for(u!==null&&(u.lanes|=a),u=s,s=s.return;s!==null;)s.childLanes|=a,u=s.alternate,u!==null&&(u.childLanes|=a),u=s,s=s.return;return u.tag===3?u.stateNode:null}var vr=!1;function Qd(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Dv(s,a){s=s.updateQueue,a.updateQueue===s&&(a.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,effects:s.effects})}function Oi(s,a){return{eventTime:s,lane:a,tag:0,payload:null,callback:null,next:null}}function yr(s,a,u){var p=s.updateQueue;if(p===null)return null;if(p=p.shared,(ze&2)!==0){var g=p.pending;return g===null?a.next=a:(a.next=g.next,g.next=a),p.pending=a,Di(s,u)}return g=p.interleaved,g===null?(a.next=a,Jd(p)):(a.next=g.next,g.next=a),p.interleaved=a,Di(s,u)}function tc(s,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194240)!==0)){var p=a.lanes;p&=s.pendingLanes,u|=p,a.lanes=u,hd(s,u)}}function Ov(s,a){var u=s.updateQueue,p=s.alternate;if(p!==null&&(p=p.updateQueue,u===p)){var g=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var w={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};y===null?g=y=w:y=y.next=w,u=u.next}while(u!==null);y===null?g=y=a:y=y.next=a}else g=y=a;u={baseState:p.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:p.shared,effects:p.effects},s.updateQueue=u;return}s=u.lastBaseUpdate,s===null?u.firstBaseUpdate=a:s.next=a,u.lastBaseUpdate=a}function nc(s,a,u,p){var g=s.updateQueue;vr=!1;var y=g.firstBaseUpdate,w=g.lastBaseUpdate,A=g.shared.pending;if(A!==null){g.shared.pending=null;var L=A,W=L.next;L.next=null,w===null?y=W:w.next=W,w=L;var Q=s.alternate;Q!==null&&(Q=Q.updateQueue,A=Q.lastBaseUpdate,A!==w&&(A===null?Q.firstBaseUpdate=W:A.next=W,Q.lastBaseUpdate=L))}if(y!==null){var se=g.baseState;w=0,Q=W=L=null,A=y;do{var J=A.lane,ve=A.eventTime;if((p&J)===J){Q!==null&&(Q=Q.next={eventTime:ve,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var Se=s,Te=A;switch(J=a,ve=u,Te.tag){case 1:if(Se=Te.payload,typeof Se=="function"){se=Se.call(ve,se,J);break e}se=Se;break e;case 3:Se.flags=Se.flags&-65537|128;case 0:if(Se=Te.payload,J=typeof Se=="function"?Se.call(ve,se,J):Se,J==null)break e;se=Y({},se,J);break e;case 2:vr=!0}}A.callback!==null&&A.lane!==0&&(s.flags|=64,J=g.effects,J===null?g.effects=[A]:J.push(A))}else ve={eventTime:ve,lane:J,tag:A.tag,payload:A.payload,callback:A.callback,next:null},Q===null?(W=Q=ve,L=se):Q=Q.next=ve,w|=J;if(A=A.next,A===null){if(A=g.shared.pending,A===null)break;J=A,A=J.next,J.next=null,g.lastBaseUpdate=J,g.shared.pending=null}}while(!0);if(Q===null&&(L=se),g.baseState=L,g.firstBaseUpdate=W,g.lastBaseUpdate=Q,a=g.shared.interleaved,a!==null){g=a;do w|=g.lane,g=g.next;while(g!==a)}else y===null&&(g.shared.lanes=0);ls|=w,s.lanes=w,s.memoizedState=se}}function Lv(s,a,u){if(s=a.effects,a.effects=null,s!==null)for(a=0;a<s.length;a++){var p=s[a],g=p.callback;if(g!==null){if(p.callback=null,p=u,typeof g!="function")throw Error(n(191,g));g.call(p)}}}var pa={},ci=pr(pa),ma=pr(pa),ga=pr(pa);function os(s){if(s===pa)throw Error(n(174));return s}function Zd(s,a){switch(Ye(ga,a),Ye(ma,s),Ye(ci,pa),s=a.nodeType,s){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Wo(null,"");break;default:s=s===8?a.parentNode:a,a=s.namespaceURI||null,s=s.tagName,a=Wo(a,s)}Qe(ci),Ye(ci,a)}function Ys(){Qe(ci),Qe(ma),Qe(ga)}function Fv(s){os(ga.current);var a=os(ci.current),u=Wo(a,s.type);a!==u&&(Ye(ma,s),Ye(ci,u))}function eh(s){ma.current===s&&(Qe(ci),Qe(ma))}var it=pr(0);function ic(s){for(var a=s;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var th=[];function nh(){for(var s=0;s<th.length;s++)th[s]._workInProgressVersionPrimary=null;th.length=0}var rc=P.ReactCurrentDispatcher,ih=P.ReactCurrentBatchConfig,as=0,rt=null,Tt=null,It=null,sc=!1,va=!1,ya=0,u1=0;function qt(){throw Error(n(321))}function rh(s,a){if(a===null)return!1;for(var u=0;u<a.length&&u<s.length;u++)if(!Hn(s[u],a[u]))return!1;return!0}function sh(s,a,u,p,g,y){if(as=y,rt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,rc.current=s===null||s.memoizedState===null?p1:m1,s=u(p,g),va){y=0;do{if(va=!1,ya=0,25<=y)throw Error(n(301));y+=1,It=Tt=null,a.updateQueue=null,rc.current=g1,s=u(p,g)}while(va)}if(rc.current=lc,a=Tt!==null&&Tt.next!==null,as=0,It=Tt=rt=null,sc=!1,a)throw Error(n(300));return s}function oh(){var s=ya!==0;return ya=0,s}function ui(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?rt.memoizedState=It=s:It=It.next=s,It}function Dn(){if(Tt===null){var s=rt.alternate;s=s!==null?s.memoizedState:null}else s=Tt.next;var a=It===null?rt.memoizedState:It.next;if(a!==null)It=a,Tt=s;else{if(s===null)throw Error(n(310));Tt=s,s={memoizedState:Tt.memoizedState,baseState:Tt.baseState,baseQueue:Tt.baseQueue,queue:Tt.queue,next:null},It===null?rt.memoizedState=It=s:It=It.next=s}return It}function ba(s,a){return typeof a=="function"?a(s):a}function ah(s){var a=Dn(),u=a.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=s;var p=Tt,g=p.baseQueue,y=u.pending;if(y!==null){if(g!==null){var w=g.next;g.next=y.next,y.next=w}p.baseQueue=g=y,u.pending=null}if(g!==null){y=g.next,p=p.baseState;var A=w=null,L=null,W=y;do{var Q=W.lane;if((as&Q)===Q)L!==null&&(L=L.next={lane:0,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),p=W.hasEagerState?W.eagerState:s(p,W.action);else{var se={lane:Q,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null};L===null?(A=L=se,w=p):L=L.next=se,rt.lanes|=Q,ls|=Q}W=W.next}while(W!==null&&W!==y);L===null?w=p:L.next=A,Hn(p,a.memoizedState)||(ln=!0),a.memoizedState=p,a.baseState=w,a.baseQueue=L,u.lastRenderedState=p}if(s=u.interleaved,s!==null){g=s;do y=g.lane,rt.lanes|=y,ls|=y,g=g.next;while(g!==s)}else g===null&&(u.lanes=0);return[a.memoizedState,u.dispatch]}function lh(s){var a=Dn(),u=a.queue;if(u===null)throw Error(n(311));u.lastRenderedReducer=s;var p=u.dispatch,g=u.pending,y=a.memoizedState;if(g!==null){u.pending=null;var w=g=g.next;do y=s(y,w.action),w=w.next;while(w!==g);Hn(y,a.memoizedState)||(ln=!0),a.memoizedState=y,a.baseQueue===null&&(a.baseState=y),u.lastRenderedState=y}return[y,p]}function jv(){}function Uv(s,a){var u=rt,p=Dn(),g=a(),y=!Hn(p.memoizedState,g);if(y&&(p.memoizedState=g,ln=!0),p=p.queue,ch(zv.bind(null,u,p,s),[s]),p.getSnapshot!==a||y||It!==null&&It.memoizedState.tag&1){if(u.flags|=2048,Sa(9,Vv.bind(null,u,p,g,a),void 0,null),At===null)throw Error(n(349));(as&30)!==0||Bv(u,a,g)}return g}function Bv(s,a,u){s.flags|=16384,s={getSnapshot:a,value:u},a=rt.updateQueue,a===null?(a={lastEffect:null,stores:null},rt.updateQueue=a,a.stores=[s]):(u=a.stores,u===null?a.stores=[s]:u.push(s))}function Vv(s,a,u,p){a.value=u,a.getSnapshot=p,Wv(a)&&qv(s)}function zv(s,a,u){return u(function(){Wv(a)&&qv(s)})}function Wv(s){var a=s.getSnapshot;s=s.value;try{var u=a();return!Hn(s,u)}catch{return!0}}function qv(s){var a=Di(s,1);a!==null&&Yn(a,s,1,-1)}function Hv(s){var a=ui();return typeof s=="function"&&(s=s()),a.memoizedState=a.baseState=s,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:s},a.queue=s,s=s.dispatch=f1.bind(null,rt,s),[a.memoizedState,s]}function Sa(s,a,u,p){return s={tag:s,create:a,destroy:u,deps:p,next:null},a=rt.updateQueue,a===null?(a={lastEffect:null,stores:null},rt.updateQueue=a,a.lastEffect=s.next=s):(u=a.lastEffect,u===null?a.lastEffect=s.next=s:(p=u.next,u.next=s,s.next=p,a.lastEffect=s)),s}function $v(){return Dn().memoizedState}function oc(s,a,u,p){var g=ui();rt.flags|=s,g.memoizedState=Sa(1|a,u,void 0,p===void 0?null:p)}function ac(s,a,u,p){var g=Dn();p=p===void 0?null:p;var y=void 0;if(Tt!==null){var w=Tt.memoizedState;if(y=w.destroy,p!==null&&rh(p,w.deps)){g.memoizedState=Sa(a,u,y,p);return}}rt.flags|=s,g.memoizedState=Sa(1|a,u,y,p)}function Kv(s,a){return oc(8390656,8,s,a)}function ch(s,a){return ac(2048,8,s,a)}function Gv(s,a){return ac(4,2,s,a)}function Xv(s,a){return ac(4,4,s,a)}function Yv(s,a){if(typeof a=="function")return s=s(),a(s),function(){a(null)};if(a!=null)return s=s(),a.current=s,function(){a.current=null}}function Jv(s,a,u){return u=u!=null?u.concat([s]):null,ac(4,4,Yv.bind(null,a,s),u)}function uh(){}function Qv(s,a){var u=Dn();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&rh(a,p[1])?p[0]:(u.memoizedState=[s,a],s)}function Zv(s,a){var u=Dn();a=a===void 0?null:a;var p=u.memoizedState;return p!==null&&a!==null&&rh(a,p[1])?p[0]:(s=s(),u.memoizedState=[s,a],s)}function ey(s,a,u){return(as&21)===0?(s.baseState&&(s.baseState=!1,ln=!0),s.memoizedState=u):(Hn(u,a)||(u=Ig(),rt.lanes|=u,ls|=u,s.baseState=!0),a)}function d1(s,a){var u=Ge;Ge=u!==0&&4>u?u:4,s(!0);var p=ih.transition;ih.transition={};try{s(!1),a()}finally{Ge=u,ih.transition=p}}function ty(){return Dn().memoizedState}function h1(s,a,u){var p=Cr(s);if(u={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null},ny(s))iy(a,u);else if(u=Nv(s,a,u,p),u!==null){var g=Qt();Yn(u,s,p,g),ry(u,a,p)}}function f1(s,a,u){var p=Cr(s),g={lane:p,action:u,hasEagerState:!1,eagerState:null,next:null};if(ny(s))iy(a,g);else{var y=s.alternate;if(s.lanes===0&&(y===null||y.lanes===0)&&(y=a.lastRenderedReducer,y!==null))try{var w=a.lastRenderedState,A=y(w,u);if(g.hasEagerState=!0,g.eagerState=A,Hn(A,w)){var L=a.interleaved;L===null?(g.next=g,Jd(a)):(g.next=L.next,L.next=g),a.interleaved=g;return}}catch{}finally{}u=Nv(s,a,g,p),u!==null&&(g=Qt(),Yn(u,s,p,g),ry(u,a,p))}}function ny(s){var a=s.alternate;return s===rt||a!==null&&a===rt}function iy(s,a){va=sc=!0;var u=s.pending;u===null?a.next=a:(a.next=u.next,u.next=a),s.pending=a}function ry(s,a,u){if((u&4194240)!==0){var p=a.lanes;p&=s.pendingLanes,u|=p,a.lanes=u,hd(s,u)}}var lc={readContext:Nn,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},p1={readContext:Nn,useCallback:function(s,a){return ui().memoizedState=[s,a===void 0?null:a],s},useContext:Nn,useEffect:Kv,useImperativeHandle:function(s,a,u){return u=u!=null?u.concat([s]):null,oc(4194308,4,Yv.bind(null,a,s),u)},useLayoutEffect:function(s,a){return oc(4194308,4,s,a)},useInsertionEffect:function(s,a){return oc(4,2,s,a)},useMemo:function(s,a){var u=ui();return a=a===void 0?null:a,s=s(),u.memoizedState=[s,a],s},useReducer:function(s,a,u){var p=ui();return a=u!==void 0?u(a):a,p.memoizedState=p.baseState=a,s={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:a},p.queue=s,s=s.dispatch=h1.bind(null,rt,s),[p.memoizedState,s]},useRef:function(s){var a=ui();return s={current:s},a.memoizedState=s},useState:Hv,useDebugValue:uh,useDeferredValue:function(s){return ui().memoizedState=s},useTransition:function(){var s=Hv(!1),a=s[0];return s=d1.bind(null,s[1]),ui().memoizedState=s,[a,s]},useMutableSource:function(){},useSyncExternalStore:function(s,a,u){var p=rt,g=ui();if(Ze){if(u===void 0)throw Error(n(407));u=u()}else{if(u=a(),At===null)throw Error(n(349));(as&30)!==0||Bv(p,a,u)}g.memoizedState=u;var y={value:u,getSnapshot:a};return g.queue=y,Kv(zv.bind(null,p,y,s),[s]),p.flags|=2048,Sa(9,Vv.bind(null,p,y,u,a),void 0,null),u},useId:function(){var s=ui(),a=At.identifierPrefix;if(Ze){var u=Ni,p=Mi;u=(p&~(1<<32-qn(p)-1)).toString(32)+u,a=":"+a+"R"+u,u=ya++,0<u&&(a+="H"+u.toString(32)),a+=":"}else u=u1++,a=":"+a+"r"+u.toString(32)+":";return s.memoizedState=a},unstable_isNewReconciler:!1},m1={readContext:Nn,useCallback:Qv,useContext:Nn,useEffect:ch,useImperativeHandle:Jv,useInsertionEffect:Gv,useLayoutEffect:Xv,useMemo:Zv,useReducer:ah,useRef:$v,useState:function(){return ah(ba)},useDebugValue:uh,useDeferredValue:function(s){var a=Dn();return ey(a,Tt.memoizedState,s)},useTransition:function(){var s=ah(ba)[0],a=Dn().memoizedState;return[s,a]},useMutableSource:jv,useSyncExternalStore:Uv,useId:ty,unstable_isNewReconciler:!1},g1={readContext:Nn,useCallback:Qv,useContext:Nn,useEffect:ch,useImperativeHandle:Jv,useInsertionEffect:Gv,useLayoutEffect:Xv,useMemo:Zv,useReducer:lh,useRef:$v,useState:function(){return lh(ba)},useDebugValue:uh,useDeferredValue:function(s){var a=Dn();return Tt===null?a.memoizedState=s:ey(a,Tt.memoizedState,s)},useTransition:function(){var s=lh(ba)[0],a=Dn().memoizedState;return[s,a]},useMutableSource:jv,useSyncExternalStore:Uv,useId:ty,unstable_isNewReconciler:!1};function Kn(s,a){if(s&&s.defaultProps){a=Y({},a),s=s.defaultProps;for(var u in s)a[u]===void 0&&(a[u]=s[u]);return a}return a}function dh(s,a,u,p){a=s.memoizedState,u=u(p,a),u=u==null?a:Y({},a,u),s.memoizedState=u,s.lanes===0&&(s.updateQueue.baseState=u)}var cc={isMounted:function(s){return(s=s._reactInternals)?es(s)===s:!1},enqueueSetState:function(s,a,u){s=s._reactInternals;var p=Qt(),g=Cr(s),y=Oi(p,g);y.payload=a,u!=null&&(y.callback=u),a=yr(s,y,g),a!==null&&(Yn(a,s,g,p),tc(a,s,g))},enqueueReplaceState:function(s,a,u){s=s._reactInternals;var p=Qt(),g=Cr(s),y=Oi(p,g);y.tag=1,y.payload=a,u!=null&&(y.callback=u),a=yr(s,y,g),a!==null&&(Yn(a,s,g,p),tc(a,s,g))},enqueueForceUpdate:function(s,a){s=s._reactInternals;var u=Qt(),p=Cr(s),g=Oi(u,p);g.tag=2,a!=null&&(g.callback=a),a=yr(s,g,p),a!==null&&(Yn(a,s,p,u),tc(a,s,p))}};function sy(s,a,u,p,g,y,w){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(p,y,w):a.prototype&&a.prototype.isPureReactComponent?!oa(u,p)||!oa(g,y):!0}function oy(s,a,u){var p=!1,g=mr,y=a.contextType;return typeof y=="object"&&y!==null?y=Nn(y):(g=an(a)?ns:Wt.current,p=a.contextTypes,y=(p=p!=null)?Ws(s,g):mr),a=new a(u,y),s.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=cc,s.stateNode=a,a._reactInternals=s,p&&(s=s.stateNode,s.__reactInternalMemoizedUnmaskedChildContext=g,s.__reactInternalMemoizedMaskedChildContext=y),a}function ay(s,a,u,p){s=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,p),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,p),a.state!==s&&cc.enqueueReplaceState(a,a.state,null)}function hh(s,a,u,p){var g=s.stateNode;g.props=u,g.state=s.memoizedState,g.refs={},Qd(s);var y=a.contextType;typeof y=="object"&&y!==null?g.context=Nn(y):(y=an(a)?ns:Wt.current,g.context=Ws(s,y)),g.state=s.memoizedState,y=a.getDerivedStateFromProps,typeof y=="function"&&(dh(s,a,y,u),g.state=s.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(a=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),a!==g.state&&cc.enqueueReplaceState(g,g.state,null),nc(s,u,g,p),g.state=s.memoizedState),typeof g.componentDidMount=="function"&&(s.flags|=4194308)}function Js(s,a){try{var u="",p=a;do u+=ge(p),p=p.return;while(p);var g=u}catch(y){g=`
Error generating stack: `+y.message+`
`+y.stack}return{value:s,source:a,stack:g,digest:null}}function fh(s,a,u){return{value:s,source:null,stack:u??null,digest:a??null}}function ph(s,a){try{console.error(a.value)}catch(u){setTimeout(function(){throw u})}}var v1=typeof WeakMap=="function"?WeakMap:Map;function ly(s,a,u){u=Oi(-1,u),u.tag=3,u.payload={element:null};var p=a.value;return u.callback=function(){gc||(gc=!0,_h=p),ph(s,a)},u}function cy(s,a,u){u=Oi(-1,u),u.tag=3;var p=s.type.getDerivedStateFromError;if(typeof p=="function"){var g=a.value;u.payload=function(){return p(g)},u.callback=function(){ph(s,a)}}var y=s.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(u.callback=function(){ph(s,a),typeof p!="function"&&(Sr===null?Sr=new Set([this]):Sr.add(this));var w=a.stack;this.componentDidCatch(a.value,{componentStack:w!==null?w:""})}),u}function uy(s,a,u){var p=s.pingCache;if(p===null){p=s.pingCache=new v1;var g=new Set;p.set(a,g)}else g=p.get(a),g===void 0&&(g=new Set,p.set(a,g));g.has(u)||(g.add(u),s=A1.bind(null,s,a,u),a.then(s,s))}function dy(s){do{var a;if((a=s.tag===13)&&(a=s.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return s;s=s.return}while(s!==null);return null}function hy(s,a,u,p,g){return(s.mode&1)===0?(s===a?s.flags|=65536:(s.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(a=Oi(-1,1),a.tag=2,yr(u,a,1))),u.lanes|=1),s):(s.flags|=65536,s.lanes=g,s)}var y1=P.ReactCurrentOwner,ln=!1;function Jt(s,a,u,p){a.child=s===null?Mv(a,null,u,p):Ks(a,s.child,u,p)}function fy(s,a,u,p,g){u=u.render;var y=a.ref;return Xs(a,g),p=sh(s,a,u,p,y,g),u=oh(),s!==null&&!ln?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~g,Li(s,a,g)):(Ze&&u&&zd(a),a.flags|=1,Jt(s,a,p,g),a.child)}function py(s,a,u,p,g){if(s===null){var y=u.type;return typeof y=="function"&&!Lh(y)&&y.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(a.tag=15,a.type=y,my(s,a,y,p,g)):(s=Cc(u.type,null,p,a,a.mode,g),s.ref=a.ref,s.return=a,a.child=s)}if(y=s.child,(s.lanes&g)===0){var w=y.memoizedProps;if(u=u.compare,u=u!==null?u:oa,u(w,p)&&s.ref===a.ref)return Li(s,a,g)}return a.flags|=1,s=wr(y,p),s.ref=a.ref,s.return=a,a.child=s}function my(s,a,u,p,g){if(s!==null){var y=s.memoizedProps;if(oa(y,p)&&s.ref===a.ref)if(ln=!1,a.pendingProps=p=y,(s.lanes&g)!==0)(s.flags&131072)!==0&&(ln=!0);else return a.lanes=s.lanes,Li(s,a,g)}return mh(s,a,u,p,g)}function gy(s,a,u){var p=a.pendingProps,g=p.children,y=s!==null?s.memoizedState:null;if(p.mode==="hidden")if((a.mode&1)===0)a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ye(Zs,wn),wn|=u;else{if((u&1073741824)===0)return s=y!==null?y.baseLanes|u:u,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:s,cachePool:null,transitions:null},a.updateQueue=null,Ye(Zs,wn),wn|=s,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},p=y!==null?y.baseLanes:u,Ye(Zs,wn),wn|=p}else y!==null?(p=y.baseLanes|u,a.memoizedState=null):p=u,Ye(Zs,wn),wn|=p;return Jt(s,a,g,u),a.child}function vy(s,a){var u=a.ref;(s===null&&u!==null||s!==null&&s.ref!==u)&&(a.flags|=512,a.flags|=2097152)}function mh(s,a,u,p,g){var y=an(u)?ns:Wt.current;return y=Ws(a,y),Xs(a,g),u=sh(s,a,u,p,y,g),p=oh(),s!==null&&!ln?(a.updateQueue=s.updateQueue,a.flags&=-2053,s.lanes&=~g,Li(s,a,g)):(Ze&&p&&zd(a),a.flags|=1,Jt(s,a,u,g),a.child)}function yy(s,a,u,p,g){if(an(u)){var y=!0;Kl(a)}else y=!1;if(Xs(a,g),a.stateNode===null)dc(s,a),oy(a,u,p),hh(a,u,p,g),p=!0;else if(s===null){var w=a.stateNode,A=a.memoizedProps;w.props=A;var L=w.context,W=u.contextType;typeof W=="object"&&W!==null?W=Nn(W):(W=an(u)?ns:Wt.current,W=Ws(a,W));var Q=u.getDerivedStateFromProps,se=typeof Q=="function"||typeof w.getSnapshotBeforeUpdate=="function";se||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==p||L!==W)&&ay(a,w,p,W),vr=!1;var J=a.memoizedState;w.state=J,nc(a,p,w,g),L=a.memoizedState,A!==p||J!==L||on.current||vr?(typeof Q=="function"&&(dh(a,u,Q,p),L=a.memoizedState),(A=vr||sy(a,u,A,p,J,L,W))?(se||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(a.flags|=4194308)):(typeof w.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=p,a.memoizedState=L),w.props=p,w.state=L,w.context=W,p=A):(typeof w.componentDidMount=="function"&&(a.flags|=4194308),p=!1)}else{w=a.stateNode,Dv(s,a),A=a.memoizedProps,W=a.type===a.elementType?A:Kn(a.type,A),w.props=W,se=a.pendingProps,J=w.context,L=u.contextType,typeof L=="object"&&L!==null?L=Nn(L):(L=an(u)?ns:Wt.current,L=Ws(a,L));var ve=u.getDerivedStateFromProps;(Q=typeof ve=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(A!==se||J!==L)&&ay(a,w,p,L),vr=!1,J=a.memoizedState,w.state=J,nc(a,p,w,g);var Se=a.memoizedState;A!==se||J!==Se||on.current||vr?(typeof ve=="function"&&(dh(a,u,ve,p),Se=a.memoizedState),(W=vr||sy(a,u,W,p,J,Se,L)||!1)?(Q||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(p,Se,L),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(p,Se,L)),typeof w.componentDidUpdate=="function"&&(a.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof w.componentDidUpdate!="function"||A===s.memoizedProps&&J===s.memoizedState||(a.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&J===s.memoizedState||(a.flags|=1024),a.memoizedProps=p,a.memoizedState=Se),w.props=p,w.state=Se,w.context=L,p=W):(typeof w.componentDidUpdate!="function"||A===s.memoizedProps&&J===s.memoizedState||(a.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||A===s.memoizedProps&&J===s.memoizedState||(a.flags|=1024),p=!1)}return gh(s,a,u,p,y,g)}function gh(s,a,u,p,g,y){vy(s,a);var w=(a.flags&128)!==0;if(!p&&!w)return g&&Tv(a,u,!1),Li(s,a,y);p=a.stateNode,y1.current=a;var A=w&&typeof u.getDerivedStateFromError!="function"?null:p.render();return a.flags|=1,s!==null&&w?(a.child=Ks(a,s.child,null,y),a.child=Ks(a,null,A,y)):Jt(s,a,A,y),a.memoizedState=p.state,g&&Tv(a,u,!0),a.child}function by(s){var a=s.stateNode;a.pendingContext?kv(s,a.pendingContext,a.pendingContext!==a.context):a.context&&kv(s,a.context,!1),Zd(s,a.containerInfo)}function Sy(s,a,u,p,g){return $s(),$d(g),a.flags|=256,Jt(s,a,u,p),a.child}var vh={dehydrated:null,treeContext:null,retryLane:0};function yh(s){return{baseLanes:s,cachePool:null,transitions:null}}function ky(s,a,u){var p=a.pendingProps,g=it.current,y=!1,w=(a.flags&128)!==0,A;if((A=w)||(A=s!==null&&s.memoizedState===null?!1:(g&2)!==0),A?(y=!0,a.flags&=-129):(s===null||s.memoizedState!==null)&&(g|=1),Ye(it,g&1),s===null)return Hd(a),s=a.memoizedState,s!==null&&(s=s.dehydrated,s!==null)?((a.mode&1)===0?a.lanes=1:s.data==="$!"?a.lanes=8:a.lanes=1073741824,null):(w=p.children,s=p.fallback,y?(p=a.mode,y=a.child,w={mode:"hidden",children:w},(p&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=w):y=Tc(w,p,0,null),s=hs(s,p,u,null),y.return=a,s.return=a,y.sibling=s,a.child=y,a.child.memoizedState=yh(u),a.memoizedState=vh,s):bh(a,w));if(g=s.memoizedState,g!==null&&(A=g.dehydrated,A!==null))return b1(s,a,w,p,A,g,u);if(y){y=p.fallback,w=a.mode,g=s.child,A=g.sibling;var L={mode:"hidden",children:p.children};return(w&1)===0&&a.child!==g?(p=a.child,p.childLanes=0,p.pendingProps=L,a.deletions=null):(p=wr(g,L),p.subtreeFlags=g.subtreeFlags&14680064),A!==null?y=wr(A,y):(y=hs(y,w,u,null),y.flags|=2),y.return=a,p.return=a,p.sibling=y,a.child=p,p=y,y=a.child,w=s.child.memoizedState,w=w===null?yh(u):{baseLanes:w.baseLanes|u,cachePool:null,transitions:w.transitions},y.memoizedState=w,y.childLanes=s.childLanes&~u,a.memoizedState=vh,p}return y=s.child,s=y.sibling,p=wr(y,{mode:"visible",children:p.children}),(a.mode&1)===0&&(p.lanes=u),p.return=a,p.sibling=null,s!==null&&(u=a.deletions,u===null?(a.deletions=[s],a.flags|=16):u.push(s)),a.child=p,a.memoizedState=null,p}function bh(s,a){return a=Tc({mode:"visible",children:a},s.mode,0,null),a.return=s,s.child=a}function uc(s,a,u,p){return p!==null&&$d(p),Ks(a,s.child,null,u),s=bh(a,a.pendingProps.children),s.flags|=2,a.memoizedState=null,s}function b1(s,a,u,p,g,y,w){if(u)return a.flags&256?(a.flags&=-257,p=fh(Error(n(422))),uc(s,a,w,p)):a.memoizedState!==null?(a.child=s.child,a.flags|=128,null):(y=p.fallback,g=a.mode,p=Tc({mode:"visible",children:p.children},g,0,null),y=hs(y,g,w,null),y.flags|=2,p.return=a,y.return=a,p.sibling=y,a.child=p,(a.mode&1)!==0&&Ks(a,s.child,null,w),a.child.memoizedState=yh(w),a.memoizedState=vh,y);if((a.mode&1)===0)return uc(s,a,w,null);if(g.data==="$!"){if(p=g.nextSibling&&g.nextSibling.dataset,p)var A=p.dgst;return p=A,y=Error(n(419)),p=fh(y,p,void 0),uc(s,a,w,p)}if(A=(w&s.childLanes)!==0,ln||A){if(p=At,p!==null){switch(w&-w){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(p.suspendedLanes|w))!==0?0:g,g!==0&&g!==y.retryLane&&(y.retryLane=g,Di(s,g),Yn(p,s,g,-1))}return Oh(),p=fh(Error(n(421))),uc(s,a,w,p)}return g.data==="$?"?(a.flags|=128,a.child=s.child,a=M1.bind(null,s),g._reactRetry=a,null):(s=y.treeContext,Tn=fr(g.nextSibling),Cn=a,Ze=!0,$n=null,s!==null&&(An[Mn++]=Mi,An[Mn++]=Ni,An[Mn++]=is,Mi=s.id,Ni=s.overflow,is=a),a=bh(a,p.children),a.flags|=4096,a)}function Cy(s,a,u){s.lanes|=a;var p=s.alternate;p!==null&&(p.lanes|=a),Yd(s.return,a,u)}function Sh(s,a,u,p,g){var y=s.memoizedState;y===null?s.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:p,tail:u,tailMode:g}:(y.isBackwards=a,y.rendering=null,y.renderingStartTime=0,y.last=p,y.tail=u,y.tailMode=g)}function Ty(s,a,u){var p=a.pendingProps,g=p.revealOrder,y=p.tail;if(Jt(s,a,p.children,u),p=it.current,(p&2)!==0)p=p&1|2,a.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=a.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Cy(s,u,a);else if(s.tag===19)Cy(s,u,a);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===a)break e;for(;s.sibling===null;){if(s.return===null||s.return===a)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}p&=1}if(Ye(it,p),(a.mode&1)===0)a.memoizedState=null;else switch(g){case"forwards":for(u=a.child,g=null;u!==null;)s=u.alternate,s!==null&&ic(s)===null&&(g=u),u=u.sibling;u=g,u===null?(g=a.child,a.child=null):(g=u.sibling,u.sibling=null),Sh(a,!1,g,u,y);break;case"backwards":for(u=null,g=a.child,a.child=null;g!==null;){if(s=g.alternate,s!==null&&ic(s)===null){a.child=g;break}s=g.sibling,g.sibling=u,u=g,g=s}Sh(a,!0,u,null,y);break;case"together":Sh(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function dc(s,a){(a.mode&1)===0&&s!==null&&(s.alternate=null,a.alternate=null,a.flags|=2)}function Li(s,a,u){if(s!==null&&(a.dependencies=s.dependencies),ls|=a.lanes,(u&a.childLanes)===0)return null;if(s!==null&&a.child!==s.child)throw Error(n(153));if(a.child!==null){for(s=a.child,u=wr(s,s.pendingProps),a.child=u,u.return=a;s.sibling!==null;)s=s.sibling,u=u.sibling=wr(s,s.pendingProps),u.return=a;u.sibling=null}return a.child}function S1(s,a,u){switch(a.tag){case 3:by(a),$s();break;case 5:Fv(a);break;case 1:an(a.type)&&Kl(a);break;case 4:Zd(a,a.stateNode.containerInfo);break;case 10:var p=a.type._context,g=a.memoizedProps.value;Ye(Zl,p._currentValue),p._currentValue=g;break;case 13:if(p=a.memoizedState,p!==null)return p.dehydrated!==null?(Ye(it,it.current&1),a.flags|=128,null):(u&a.child.childLanes)!==0?ky(s,a,u):(Ye(it,it.current&1),s=Li(s,a,u),s!==null?s.sibling:null);Ye(it,it.current&1);break;case 19:if(p=(u&a.childLanes)!==0,(s.flags&128)!==0){if(p)return Ty(s,a,u);a.flags|=128}if(g=a.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Ye(it,it.current),p)break;return null;case 22:case 23:return a.lanes=0,gy(s,a,u)}return Li(s,a,u)}var wy,kh,xy,Ey;wy=function(s,a){for(var u=a.child;u!==null;){if(u.tag===5||u.tag===6)s.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},kh=function(){},xy=function(s,a,u,p){var g=s.memoizedProps;if(g!==p){s=a.stateNode,os(ci.current);var y=null;switch(u){case"input":g=Yt(s,g),p=Yt(s,p),y=[];break;case"select":g=Y({},g,{value:void 0}),p=Y({},p,{value:void 0}),y=[];break;case"textarea":g=Ot(s,g),p=Ot(s,p),y=[];break;default:typeof g.onClick!="function"&&typeof p.onClick=="function"&&(s.onclick=ql)}Ns(u,p);var w;u=null;for(W in g)if(!p.hasOwnProperty(W)&&g.hasOwnProperty(W)&&g[W]!=null)if(W==="style"){var A=g[W];for(w in A)A.hasOwnProperty(w)&&(u||(u={}),u[w]="")}else W!=="dangerouslySetInnerHTML"&&W!=="children"&&W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&W!=="autoFocus"&&(r.hasOwnProperty(W)?y||(y=[]):(y=y||[]).push(W,null));for(W in p){var L=p[W];if(A=g?.[W],p.hasOwnProperty(W)&&L!==A&&(L!=null||A!=null))if(W==="style")if(A){for(w in A)!A.hasOwnProperty(w)||L&&L.hasOwnProperty(w)||(u||(u={}),u[w]="");for(w in L)L.hasOwnProperty(w)&&A[w]!==L[w]&&(u||(u={}),u[w]=L[w])}else u||(y||(y=[]),y.push(W,u)),u=L;else W==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,A=A?A.__html:void 0,L!=null&&A!==L&&(y=y||[]).push(W,L)):W==="children"?typeof L!="string"&&typeof L!="number"||(y=y||[]).push(W,""+L):W!=="suppressContentEditableWarning"&&W!=="suppressHydrationWarning"&&(r.hasOwnProperty(W)?(L!=null&&W==="onScroll"&&Je("scroll",s),y||A===L||(y=[])):(y=y||[]).push(W,L))}u&&(y=y||[]).push("style",u);var W=y;(a.updateQueue=W)&&(a.flags|=4)}},Ey=function(s,a,u,p){u!==p&&(a.flags|=4)};function ka(s,a){if(!Ze)switch(s.tailMode){case"hidden":a=s.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?s.tail=null:u.sibling=null;break;case"collapsed":u=s.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?a||s.tail===null?s.tail=null:s.tail.sibling=null:p.sibling=null}}function Ht(s){var a=s.alternate!==null&&s.alternate.child===s.child,u=0,p=0;if(a)for(var g=s.child;g!==null;)u|=g.lanes|g.childLanes,p|=g.subtreeFlags&14680064,p|=g.flags&14680064,g.return=s,g=g.sibling;else for(g=s.child;g!==null;)u|=g.lanes|g.childLanes,p|=g.subtreeFlags,p|=g.flags,g.return=s,g=g.sibling;return s.subtreeFlags|=p,s.childLanes=u,a}function k1(s,a,u){var p=a.pendingProps;switch(Wd(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(a),null;case 1:return an(a.type)&&$l(),Ht(a),null;case 3:return p=a.stateNode,Ys(),Qe(on),Qe(Wt),nh(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(s===null||s.child===null)&&(Jl(a)?a.flags|=4:s===null||s.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,$n!==null&&(Mh($n),$n=null))),kh(s,a),Ht(a),null;case 5:eh(a);var g=os(ga.current);if(u=a.type,s!==null&&a.stateNode!=null)xy(s,a,u,p,g),s.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!p){if(a.stateNode===null)throw Error(n(166));return Ht(a),null}if(s=os(ci.current),Jl(a)){p=a.stateNode,u=a.type;var y=a.memoizedProps;switch(p[li]=a,p[da]=y,s=(a.mode&1)!==0,u){case"dialog":Je("cancel",p),Je("close",p);break;case"iframe":case"object":case"embed":Je("load",p);break;case"video":case"audio":for(g=0;g<la.length;g++)Je(la[g],p);break;case"source":Je("error",p);break;case"img":case"image":case"link":Je("error",p),Je("load",p);break;case"details":Je("toggle",p);break;case"input":Zi(p,y),Je("invalid",p);break;case"select":p._wrapperState={wasMultiple:!!y.multiple},Je("invalid",p);break;case"textarea":Ri(p,y),Je("invalid",p)}Ns(u,y),g=null;for(var w in y)if(y.hasOwnProperty(w)){var A=y[w];w==="children"?typeof A=="string"?p.textContent!==A&&(y.suppressHydrationWarning!==!0&&Wl(p.textContent,A,s),g=["children",A]):typeof A=="number"&&p.textContent!==""+A&&(y.suppressHydrationWarning!==!0&&Wl(p.textContent,A,s),g=["children",""+A]):r.hasOwnProperty(w)&&A!=null&&w==="onScroll"&&Je("scroll",p)}switch(u){case"input":Le(p),zo(p,y,!0);break;case"textarea":Le(p),kl(p);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(p.onclick=ql)}p=g,a.updateQueue=p,p!==null&&(a.flags|=4)}else{w=g.nodeType===9?g:g.ownerDocument,s==="http://www.w3.org/1999/xhtml"&&(s=Jr(u)),s==="http://www.w3.org/1999/xhtml"?u==="script"?(s=w.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild)):typeof p.is=="string"?s=w.createElement(u,{is:p.is}):(s=w.createElement(u),u==="select"&&(w=s,p.multiple?w.multiple=!0:p.size&&(w.size=p.size))):s=w.createElementNS(s,u),s[li]=a,s[da]=p,wy(s,a,!1,!1),a.stateNode=s;e:{switch(w=qo(u,p),u){case"dialog":Je("cancel",s),Je("close",s),g=p;break;case"iframe":case"object":case"embed":Je("load",s),g=p;break;case"video":case"audio":for(g=0;g<la.length;g++)Je(la[g],s);g=p;break;case"source":Je("error",s),g=p;break;case"img":case"image":case"link":Je("error",s),Je("load",s),g=p;break;case"details":Je("toggle",s),g=p;break;case"input":Zi(s,p),g=Yt(s,p),Je("invalid",s);break;case"option":g=p;break;case"select":s._wrapperState={wasMultiple:!!p.multiple},g=Y({},p,{value:void 0}),Je("invalid",s);break;case"textarea":Ri(s,p),g=Ot(s,p),Je("invalid",s);break;default:g=p}Ns(u,g),A=g;for(y in A)if(A.hasOwnProperty(y)){var L=A[y];y==="style"?Tl(s,L):y==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&Ms(s,L)):y==="children"?typeof L=="string"?(u!=="textarea"||L!=="")&&Rn(s,L):typeof L=="number"&&Rn(s,""+L):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(r.hasOwnProperty(y)?L!=null&&y==="onScroll"&&Je("scroll",s):L!=null&&R(s,y,L,w))}switch(u){case"input":Le(s),zo(s,p,!1);break;case"textarea":Le(s),kl(s);break;case"option":p.value!=null&&s.setAttribute("value",""+he(p.value));break;case"select":s.multiple=!!p.multiple,y=p.value,y!=null?er(s,!!p.multiple,y,!1):p.defaultValue!=null&&er(s,!!p.multiple,p.defaultValue,!0);break;default:typeof g.onClick=="function"&&(s.onclick=ql)}switch(u){case"button":case"input":case"select":case"textarea":p=!!p.autoFocus;break e;case"img":p=!0;break e;default:p=!1}}p&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Ht(a),null;case 6:if(s&&a.stateNode!=null)Ey(s,a,s.memoizedProps,p);else{if(typeof p!="string"&&a.stateNode===null)throw Error(n(166));if(u=os(ga.current),os(ci.current),Jl(a)){if(p=a.stateNode,u=a.memoizedProps,p[li]=a,(y=p.nodeValue!==u)&&(s=Cn,s!==null))switch(s.tag){case 3:Wl(p.nodeValue,u,(s.mode&1)!==0);break;case 5:s.memoizedProps.suppressHydrationWarning!==!0&&Wl(p.nodeValue,u,(s.mode&1)!==0)}y&&(a.flags|=4)}else p=(u.nodeType===9?u:u.ownerDocument).createTextNode(p),p[li]=a,a.stateNode=p}return Ht(a),null;case 13:if(Qe(it),p=a.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(Ze&&Tn!==null&&(a.mode&1)!==0&&(a.flags&128)===0)_v(),$s(),a.flags|=98560,y=!1;else if(y=Jl(a),p!==null&&p.dehydrated!==null){if(s===null){if(!y)throw Error(n(318));if(y=a.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(n(317));y[li]=a}else $s(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ht(a),y=!1}else $n!==null&&(Mh($n),$n=null),y=!0;if(!y)return a.flags&65536?a:null}return(a.flags&128)!==0?(a.lanes=u,a):(p=p!==null,p!==(s!==null&&s.memoizedState!==null)&&p&&(a.child.flags|=8192,(a.mode&1)!==0&&(s===null||(it.current&1)!==0?wt===0&&(wt=3):Oh())),a.updateQueue!==null&&(a.flags|=4),Ht(a),null);case 4:return Ys(),kh(s,a),s===null&&ca(a.stateNode.containerInfo),Ht(a),null;case 10:return Xd(a.type._context),Ht(a),null;case 17:return an(a.type)&&$l(),Ht(a),null;case 19:if(Qe(it),y=a.memoizedState,y===null)return Ht(a),null;if(p=(a.flags&128)!==0,w=y.rendering,w===null)if(p)ka(y,!1);else{if(wt!==0||s!==null&&(s.flags&128)!==0)for(s=a.child;s!==null;){if(w=ic(s),w!==null){for(a.flags|=128,ka(y,!1),p=w.updateQueue,p!==null&&(a.updateQueue=p,a.flags|=4),a.subtreeFlags=0,p=u,u=a.child;u!==null;)y=u,s=p,y.flags&=14680066,w=y.alternate,w===null?(y.childLanes=0,y.lanes=s,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=w.childLanes,y.lanes=w.lanes,y.child=w.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=w.memoizedProps,y.memoizedState=w.memoizedState,y.updateQueue=w.updateQueue,y.type=w.type,s=w.dependencies,y.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),u=u.sibling;return Ye(it,it.current&1|2),a.child}s=s.sibling}y.tail!==null&&ft()>eo&&(a.flags|=128,p=!0,ka(y,!1),a.lanes=4194304)}else{if(!p)if(s=ic(w),s!==null){if(a.flags|=128,p=!0,u=s.updateQueue,u!==null&&(a.updateQueue=u,a.flags|=4),ka(y,!0),y.tail===null&&y.tailMode==="hidden"&&!w.alternate&&!Ze)return Ht(a),null}else 2*ft()-y.renderingStartTime>eo&&u!==1073741824&&(a.flags|=128,p=!0,ka(y,!1),a.lanes=4194304);y.isBackwards?(w.sibling=a.child,a.child=w):(u=y.last,u!==null?u.sibling=w:a.child=w,y.last=w)}return y.tail!==null?(a=y.tail,y.rendering=a,y.tail=a.sibling,y.renderingStartTime=ft(),a.sibling=null,u=it.current,Ye(it,p?u&1|2:u&1),a):(Ht(a),null);case 22:case 23:return Dh(),p=a.memoizedState!==null,s!==null&&s.memoizedState!==null!==p&&(a.flags|=8192),p&&(a.mode&1)!==0?(wn&1073741824)!==0&&(Ht(a),a.subtreeFlags&6&&(a.flags|=8192)):Ht(a),null;case 24:return null;case 25:return null}throw Error(n(156,a.tag))}function C1(s,a){switch(Wd(a),a.tag){case 1:return an(a.type)&&$l(),s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 3:return Ys(),Qe(on),Qe(Wt),nh(),s=a.flags,(s&65536)!==0&&(s&128)===0?(a.flags=s&-65537|128,a):null;case 5:return eh(a),null;case 13:if(Qe(it),s=a.memoizedState,s!==null&&s.dehydrated!==null){if(a.alternate===null)throw Error(n(340));$s()}return s=a.flags,s&65536?(a.flags=s&-65537|128,a):null;case 19:return Qe(it),null;case 4:return Ys(),null;case 10:return Xd(a.type._context),null;case 22:case 23:return Dh(),null;case 24:return null;default:return null}}var hc=!1,$t=!1,T1=typeof WeakSet=="function"?WeakSet:Set,be=null;function Qs(s,a){var u=s.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(p){at(s,a,p)}else u.current=null}function Ch(s,a,u){try{u()}catch(p){at(s,a,p)}}var Py=!1;function w1(s,a){if(Dd=Ml,s=sv(),Ed(s)){if("selectionStart"in s)var u={start:s.selectionStart,end:s.selectionEnd};else e:{u=(u=s.ownerDocument)&&u.defaultView||window;var p=u.getSelection&&u.getSelection();if(p&&p.rangeCount!==0){u=p.anchorNode;var g=p.anchorOffset,y=p.focusNode;p=p.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var w=0,A=-1,L=-1,W=0,Q=0,se=s,J=null;t:for(;;){for(var ve;se!==u||g!==0&&se.nodeType!==3||(A=w+g),se!==y||p!==0&&se.nodeType!==3||(L=w+p),se.nodeType===3&&(w+=se.nodeValue.length),(ve=se.firstChild)!==null;)J=se,se=ve;for(;;){if(se===s)break t;if(J===u&&++W===g&&(A=w),J===y&&++Q===p&&(L=w),(ve=se.nextSibling)!==null)break;se=J,J=se.parentNode}se=ve}u=A===-1||L===-1?null:{start:A,end:L}}else u=null}u=u||{start:0,end:0}}else u=null;for(Od={focusedElem:s,selectionRange:u},Ml=!1,be=a;be!==null;)if(a=be,s=a.child,(a.subtreeFlags&1028)!==0&&s!==null)s.return=a,be=s;else for(;be!==null;){a=be;try{var Se=a.alternate;if((a.flags&1024)!==0)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Se!==null){var Te=Se.memoizedProps,pt=Se.memoizedState,B=a.stateNode,j=B.getSnapshotBeforeUpdate(a.elementType===a.type?Te:Kn(a.type,Te),pt);B.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var z=a.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(oe){at(a,a.return,oe)}if(s=a.sibling,s!==null){s.return=a.return,be=s;break}be=a.return}return Se=Py,Py=!1,Se}function Ca(s,a,u){var p=a.updateQueue;if(p=p!==null?p.lastEffect:null,p!==null){var g=p=p.next;do{if((g.tag&s)===s){var y=g.destroy;g.destroy=void 0,y!==void 0&&Ch(a,u,y)}g=g.next}while(g!==p)}}function fc(s,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var u=a=a.next;do{if((u.tag&s)===s){var p=u.create;u.destroy=p()}u=u.next}while(u!==a)}}function Th(s){var a=s.ref;if(a!==null){var u=s.stateNode;switch(s.tag){case 5:s=u;break;default:s=u}typeof a=="function"?a(s):a.current=s}}function Ry(s){var a=s.alternate;a!==null&&(s.alternate=null,Ry(a)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(a=s.stateNode,a!==null&&(delete a[li],delete a[da],delete a[Ud],delete a[o1],delete a[a1])),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}function _y(s){return s.tag===5||s.tag===3||s.tag===4}function Iy(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||_y(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function wh(s,a,u){var p=s.tag;if(p===5||p===6)s=s.stateNode,a?u.nodeType===8?u.parentNode.insertBefore(s,a):u.insertBefore(s,a):(u.nodeType===8?(a=u.parentNode,a.insertBefore(s,u)):(a=u,a.appendChild(s)),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=ql));else if(p!==4&&(s=s.child,s!==null))for(wh(s,a,u),s=s.sibling;s!==null;)wh(s,a,u),s=s.sibling}function xh(s,a,u){var p=s.tag;if(p===5||p===6)s=s.stateNode,a?u.insertBefore(s,a):u.appendChild(s);else if(p!==4&&(s=s.child,s!==null))for(xh(s,a,u),s=s.sibling;s!==null;)xh(s,a,u),s=s.sibling}var Ft=null,Gn=!1;function br(s,a,u){for(u=u.child;u!==null;)Ay(s,a,u),u=u.sibling}function Ay(s,a,u){if(ai&&typeof ai.onCommitFiberUnmount=="function")try{ai.onCommitFiberUnmount(El,u)}catch{}switch(u.tag){case 5:$t||Qs(u,a);case 6:var p=Ft,g=Gn;Ft=null,br(s,a,u),Ft=p,Gn=g,Ft!==null&&(Gn?(s=Ft,u=u.stateNode,s.nodeType===8?s.parentNode.removeChild(u):s.removeChild(u)):Ft.removeChild(u.stateNode));break;case 18:Ft!==null&&(Gn?(s=Ft,u=u.stateNode,s.nodeType===8?jd(s.parentNode,u):s.nodeType===1&&jd(s,u),ea(s)):jd(Ft,u.stateNode));break;case 4:p=Ft,g=Gn,Ft=u.stateNode.containerInfo,Gn=!0,br(s,a,u),Ft=p,Gn=g;break;case 0:case 11:case 14:case 15:if(!$t&&(p=u.updateQueue,p!==null&&(p=p.lastEffect,p!==null))){g=p=p.next;do{var y=g,w=y.destroy;y=y.tag,w!==void 0&&((y&2)!==0||(y&4)!==0)&&Ch(u,a,w),g=g.next}while(g!==p)}br(s,a,u);break;case 1:if(!$t&&(Qs(u,a),p=u.stateNode,typeof p.componentWillUnmount=="function"))try{p.props=u.memoizedProps,p.state=u.memoizedState,p.componentWillUnmount()}catch(A){at(u,a,A)}br(s,a,u);break;case 21:br(s,a,u);break;case 22:u.mode&1?($t=(p=$t)||u.memoizedState!==null,br(s,a,u),$t=p):br(s,a,u);break;default:br(s,a,u)}}function My(s){var a=s.updateQueue;if(a!==null){s.updateQueue=null;var u=s.stateNode;u===null&&(u=s.stateNode=new T1),a.forEach(function(p){var g=N1.bind(null,s,p);u.has(p)||(u.add(p),p.then(g,g))})}}function Xn(s,a){var u=a.deletions;if(u!==null)for(var p=0;p<u.length;p++){var g=u[p];try{var y=s,w=a,A=w;e:for(;A!==null;){switch(A.tag){case 5:Ft=A.stateNode,Gn=!1;break e;case 3:Ft=A.stateNode.containerInfo,Gn=!0;break e;case 4:Ft=A.stateNode.containerInfo,Gn=!0;break e}A=A.return}if(Ft===null)throw Error(n(160));Ay(y,w,g),Ft=null,Gn=!1;var L=g.alternate;L!==null&&(L.return=null),g.return=null}catch(W){at(g,a,W)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)Ny(a,s),a=a.sibling}function Ny(s,a){var u=s.alternate,p=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:if(Xn(a,s),di(s),p&4){try{Ca(3,s,s.return),fc(3,s)}catch(Te){at(s,s.return,Te)}try{Ca(5,s,s.return)}catch(Te){at(s,s.return,Te)}}break;case 1:Xn(a,s),di(s),p&512&&u!==null&&Qs(u,u.return);break;case 5:if(Xn(a,s),di(s),p&512&&u!==null&&Qs(u,u.return),s.flags&32){var g=s.stateNode;try{Rn(g,"")}catch(Te){at(s,s.return,Te)}}if(p&4&&(g=s.stateNode,g!=null)){var y=s.memoizedProps,w=u!==null?u.memoizedProps:y,A=s.type,L=s.updateQueue;if(s.updateQueue=null,L!==null)try{A==="input"&&y.type==="radio"&&y.name!=null&&Pi(g,y),qo(A,w);var W=qo(A,y);for(w=0;w<L.length;w+=2){var Q=L[w],se=L[w+1];Q==="style"?Tl(g,se):Q==="dangerouslySetInnerHTML"?Ms(g,se):Q==="children"?Rn(g,se):R(g,Q,se,W)}switch(A){case"input":yn(g,y);break;case"textarea":Sl(g,y);break;case"select":var J=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!y.multiple;var ve=y.value;ve!=null?er(g,!!y.multiple,ve,!1):J!==!!y.multiple&&(y.defaultValue!=null?er(g,!!y.multiple,y.defaultValue,!0):er(g,!!y.multiple,y.multiple?[]:"",!1))}g[da]=y}catch(Te){at(s,s.return,Te)}}break;case 6:if(Xn(a,s),di(s),p&4){if(s.stateNode===null)throw Error(n(162));g=s.stateNode,y=s.memoizedProps;try{g.nodeValue=y}catch(Te){at(s,s.return,Te)}}break;case 3:if(Xn(a,s),di(s),p&4&&u!==null&&u.memoizedState.isDehydrated)try{ea(a.containerInfo)}catch(Te){at(s,s.return,Te)}break;case 4:Xn(a,s),di(s);break;case 13:Xn(a,s),di(s),g=s.child,g.flags&8192&&(y=g.memoizedState!==null,g.stateNode.isHidden=y,!y||g.alternate!==null&&g.alternate.memoizedState!==null||(Rh=ft())),p&4&&My(s);break;case 22:if(Q=u!==null&&u.memoizedState!==null,s.mode&1?($t=(W=$t)||Q,Xn(a,s),$t=W):Xn(a,s),di(s),p&8192){if(W=s.memoizedState!==null,(s.stateNode.isHidden=W)&&!Q&&(s.mode&1)!==0)for(be=s,Q=s.child;Q!==null;){for(se=be=Q;be!==null;){switch(J=be,ve=J.child,J.tag){case 0:case 11:case 14:case 15:Ca(4,J,J.return);break;case 1:Qs(J,J.return);var Se=J.stateNode;if(typeof Se.componentWillUnmount=="function"){p=J,u=J.return;try{a=p,Se.props=a.memoizedProps,Se.state=a.memoizedState,Se.componentWillUnmount()}catch(Te){at(p,u,Te)}}break;case 5:Qs(J,J.return);break;case 22:if(J.memoizedState!==null){Ly(se);continue}}ve!==null?(ve.return=J,be=ve):Ly(se)}Q=Q.sibling}e:for(Q=null,se=s;;){if(se.tag===5){if(Q===null){Q=se;try{g=se.stateNode,W?(y=g.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(A=se.stateNode,L=se.memoizedProps.style,w=L!=null&&L.hasOwnProperty("display")?L.display:null,A.style.display=Cl("display",w))}catch(Te){at(s,s.return,Te)}}}else if(se.tag===6){if(Q===null)try{se.stateNode.nodeValue=W?"":se.memoizedProps}catch(Te){at(s,s.return,Te)}}else if((se.tag!==22&&se.tag!==23||se.memoizedState===null||se===s)&&se.child!==null){se.child.return=se,se=se.child;continue}if(se===s)break e;for(;se.sibling===null;){if(se.return===null||se.return===s)break e;Q===se&&(Q=null),se=se.return}Q===se&&(Q=null),se.sibling.return=se.return,se=se.sibling}}break;case 19:Xn(a,s),di(s),p&4&&My(s);break;case 21:break;default:Xn(a,s),di(s)}}function di(s){var a=s.flags;if(a&2){try{e:{for(var u=s.return;u!==null;){if(_y(u)){var p=u;break e}u=u.return}throw Error(n(160))}switch(p.tag){case 5:var g=p.stateNode;p.flags&32&&(Rn(g,""),p.flags&=-33);var y=Iy(s);xh(s,y,g);break;case 3:case 4:var w=p.stateNode.containerInfo,A=Iy(s);wh(s,A,w);break;default:throw Error(n(161))}}catch(L){at(s,s.return,L)}s.flags&=-3}a&4096&&(s.flags&=-4097)}function x1(s,a,u){be=s,Dy(s)}function Dy(s,a,u){for(var p=(s.mode&1)!==0;be!==null;){var g=be,y=g.child;if(g.tag===22&&p){var w=g.memoizedState!==null||hc;if(!w){var A=g.alternate,L=A!==null&&A.memoizedState!==null||$t;A=hc;var W=$t;if(hc=w,($t=L)&&!W)for(be=g;be!==null;)w=be,L=w.child,w.tag===22&&w.memoizedState!==null?Fy(g):L!==null?(L.return=w,be=L):Fy(g);for(;y!==null;)be=y,Dy(y),y=y.sibling;be=g,hc=A,$t=W}Oy(s)}else(g.subtreeFlags&8772)!==0&&y!==null?(y.return=g,be=y):Oy(s)}}function Oy(s){for(;be!==null;){var a=be;if((a.flags&8772)!==0){var u=a.alternate;try{if((a.flags&8772)!==0)switch(a.tag){case 0:case 11:case 15:$t||fc(5,a);break;case 1:var p=a.stateNode;if(a.flags&4&&!$t)if(u===null)p.componentDidMount();else{var g=a.elementType===a.type?u.memoizedProps:Kn(a.type,u.memoizedProps);p.componentDidUpdate(g,u.memoizedState,p.__reactInternalSnapshotBeforeUpdate)}var y=a.updateQueue;y!==null&&Lv(a,y,p);break;case 3:var w=a.updateQueue;if(w!==null){if(u=null,a.child!==null)switch(a.child.tag){case 5:u=a.child.stateNode;break;case 1:u=a.child.stateNode}Lv(a,w,u)}break;case 5:var A=a.stateNode;if(u===null&&a.flags&4){u=A;var L=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&u.focus();break;case"img":L.src&&(u.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var W=a.alternate;if(W!==null){var Q=W.memoizedState;if(Q!==null){var se=Q.dehydrated;se!==null&&ea(se)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}$t||a.flags&512&&Th(a)}catch(J){at(a,a.return,J)}}if(a===s){be=null;break}if(u=a.sibling,u!==null){u.return=a.return,be=u;break}be=a.return}}function Ly(s){for(;be!==null;){var a=be;if(a===s){be=null;break}var u=a.sibling;if(u!==null){u.return=a.return,be=u;break}be=a.return}}function Fy(s){for(;be!==null;){var a=be;try{switch(a.tag){case 0:case 11:case 15:var u=a.return;try{fc(4,a)}catch(L){at(a,u,L)}break;case 1:var p=a.stateNode;if(typeof p.componentDidMount=="function"){var g=a.return;try{p.componentDidMount()}catch(L){at(a,g,L)}}var y=a.return;try{Th(a)}catch(L){at(a,y,L)}break;case 5:var w=a.return;try{Th(a)}catch(L){at(a,w,L)}}}catch(L){at(a,a.return,L)}if(a===s){be=null;break}var A=a.sibling;if(A!==null){A.return=a.return,be=A;break}be=a.return}}var E1=Math.ceil,pc=P.ReactCurrentDispatcher,Eh=P.ReactCurrentOwner,On=P.ReactCurrentBatchConfig,ze=0,At=null,yt=null,jt=0,wn=0,Zs=pr(0),wt=0,Ta=null,ls=0,mc=0,Ph=0,wa=null,cn=null,Rh=0,eo=1/0,Fi=null,gc=!1,_h=null,Sr=null,vc=!1,kr=null,yc=0,xa=0,Ih=null,bc=-1,Sc=0;function Qt(){return(ze&6)!==0?ft():bc!==-1?bc:bc=ft()}function Cr(s){return(s.mode&1)===0?1:(ze&2)!==0&&jt!==0?jt&-jt:c1.transition!==null?(Sc===0&&(Sc=Ig()),Sc):(s=Ge,s!==0||(s=window.event,s=s===void 0?16:Ug(s.type)),s)}function Yn(s,a,u,p){if(50<xa)throw xa=0,Ih=null,Error(n(185));Xo(s,u,p),((ze&2)===0||s!==At)&&(s===At&&((ze&2)===0&&(mc|=u),wt===4&&Tr(s,jt)),un(s,p),u===1&&ze===0&&(a.mode&1)===0&&(eo=ft()+500,Gl&&gr()))}function un(s,a){var u=s.callbackNode;cP(s,a);var p=_l(s,s===At?jt:0);if(p===0)u!==null&&Pg(u),s.callbackNode=null,s.callbackPriority=0;else if(a=p&-p,s.callbackPriority!==a){if(u!=null&&Pg(u),a===1)s.tag===0?l1(Uy.bind(null,s)):wv(Uy.bind(null,s)),r1(function(){(ze&6)===0&&gr()}),u=null;else{switch(Ag(p)){case 1:u=cd;break;case 4:u=Rg;break;case 16:u=xl;break;case 536870912:u=_g;break;default:u=xl}u=Ky(u,jy.bind(null,s))}s.callbackPriority=a,s.callbackNode=u}}function jy(s,a){if(bc=-1,Sc=0,(ze&6)!==0)throw Error(n(327));var u=s.callbackNode;if(to()&&s.callbackNode!==u)return null;var p=_l(s,s===At?jt:0);if(p===0)return null;if((p&30)!==0||(p&s.expiredLanes)!==0||a)a=kc(s,p);else{a=p;var g=ze;ze|=2;var y=Vy();(At!==s||jt!==a)&&(Fi=null,eo=ft()+500,us(s,a));do try{_1();break}catch(A){By(s,A)}while(!0);Gd(),pc.current=y,ze=g,yt!==null?a=0:(At=null,jt=0,a=wt)}if(a!==0){if(a===2&&(g=ud(s),g!==0&&(p=g,a=Ah(s,g))),a===1)throw u=Ta,us(s,0),Tr(s,p),un(s,ft()),u;if(a===6)Tr(s,p);else{if(g=s.current.alternate,(p&30)===0&&!P1(g)&&(a=kc(s,p),a===2&&(y=ud(s),y!==0&&(p=y,a=Ah(s,y))),a===1))throw u=Ta,us(s,0),Tr(s,p),un(s,ft()),u;switch(s.finishedWork=g,s.finishedLanes=p,a){case 0:case 1:throw Error(n(345));case 2:ds(s,cn,Fi);break;case 3:if(Tr(s,p),(p&130023424)===p&&(a=Rh+500-ft(),10<a)){if(_l(s,0)!==0)break;if(g=s.suspendedLanes,(g&p)!==p){Qt(),s.pingedLanes|=s.suspendedLanes&g;break}s.timeoutHandle=Fd(ds.bind(null,s,cn,Fi),a);break}ds(s,cn,Fi);break;case 4:if(Tr(s,p),(p&4194240)===p)break;for(a=s.eventTimes,g=-1;0<p;){var w=31-qn(p);y=1<<w,w=a[w],w>g&&(g=w),p&=~y}if(p=g,p=ft()-p,p=(120>p?120:480>p?480:1080>p?1080:1920>p?1920:3e3>p?3e3:4320>p?4320:1960*E1(p/1960))-p,10<p){s.timeoutHandle=Fd(ds.bind(null,s,cn,Fi),p);break}ds(s,cn,Fi);break;case 5:ds(s,cn,Fi);break;default:throw Error(n(329))}}}return un(s,ft()),s.callbackNode===u?jy.bind(null,s):null}function Ah(s,a){var u=wa;return s.current.memoizedState.isDehydrated&&(us(s,a).flags|=256),s=kc(s,a),s!==2&&(a=cn,cn=u,a!==null&&Mh(a)),s}function Mh(s){cn===null?cn=s:cn.push.apply(cn,s)}function P1(s){for(var a=s;;){if(a.flags&16384){var u=a.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var p=0;p<u.length;p++){var g=u[p],y=g.getSnapshot;g=g.value;try{if(!Hn(y(),g))return!1}catch{return!1}}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===s)break;for(;a.sibling===null;){if(a.return===null||a.return===s)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Tr(s,a){for(a&=~Ph,a&=~mc,s.suspendedLanes|=a,s.pingedLanes&=~a,s=s.expirationTimes;0<a;){var u=31-qn(a),p=1<<u;s[u]=-1,a&=~p}}function Uy(s){if((ze&6)!==0)throw Error(n(327));to();var a=_l(s,0);if((a&1)===0)return un(s,ft()),null;var u=kc(s,a);if(s.tag!==0&&u===2){var p=ud(s);p!==0&&(a=p,u=Ah(s,p))}if(u===1)throw u=Ta,us(s,0),Tr(s,a),un(s,ft()),u;if(u===6)throw Error(n(345));return s.finishedWork=s.current.alternate,s.finishedLanes=a,ds(s,cn,Fi),un(s,ft()),null}function Nh(s,a){var u=ze;ze|=1;try{return s(a)}finally{ze=u,ze===0&&(eo=ft()+500,Gl&&gr())}}function cs(s){kr!==null&&kr.tag===0&&(ze&6)===0&&to();var a=ze;ze|=1;var u=On.transition,p=Ge;try{if(On.transition=null,Ge=1,s)return s()}finally{Ge=p,On.transition=u,ze=a,(ze&6)===0&&gr()}}function Dh(){wn=Zs.current,Qe(Zs)}function us(s,a){s.finishedWork=null,s.finishedLanes=0;var u=s.timeoutHandle;if(u!==-1&&(s.timeoutHandle=-1,i1(u)),yt!==null)for(u=yt.return;u!==null;){var p=u;switch(Wd(p),p.tag){case 1:p=p.type.childContextTypes,p!=null&&$l();break;case 3:Ys(),Qe(on),Qe(Wt),nh();break;case 5:eh(p);break;case 4:Ys();break;case 13:Qe(it);break;case 19:Qe(it);break;case 10:Xd(p.type._context);break;case 22:case 23:Dh()}u=u.return}if(At=s,yt=s=wr(s.current,null),jt=wn=a,wt=0,Ta=null,Ph=mc=ls=0,cn=wa=null,ss!==null){for(a=0;a<ss.length;a++)if(u=ss[a],p=u.interleaved,p!==null){u.interleaved=null;var g=p.next,y=u.pending;if(y!==null){var w=y.next;y.next=g,p.next=w}u.pending=p}ss=null}return s}function By(s,a){do{var u=yt;try{if(Gd(),rc.current=lc,sc){for(var p=rt.memoizedState;p!==null;){var g=p.queue;g!==null&&(g.pending=null),p=p.next}sc=!1}if(as=0,It=Tt=rt=null,va=!1,ya=0,Eh.current=null,u===null||u.return===null){wt=1,Ta=a,yt=null;break}e:{var y=s,w=u.return,A=u,L=a;if(a=jt,A.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var W=L,Q=A,se=Q.tag;if((Q.mode&1)===0&&(se===0||se===11||se===15)){var J=Q.alternate;J?(Q.updateQueue=J.updateQueue,Q.memoizedState=J.memoizedState,Q.lanes=J.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var ve=dy(w);if(ve!==null){ve.flags&=-257,hy(ve,w,A,y,a),ve.mode&1&&uy(y,W,a),a=ve,L=W;var Se=a.updateQueue;if(Se===null){var Te=new Set;Te.add(L),a.updateQueue=Te}else Se.add(L);break e}else{if((a&1)===0){uy(y,W,a),Oh();break e}L=Error(n(426))}}else if(Ze&&A.mode&1){var pt=dy(w);if(pt!==null){(pt.flags&65536)===0&&(pt.flags|=256),hy(pt,w,A,y,a),$d(Js(L,A));break e}}y=L=Js(L,A),wt!==4&&(wt=2),wa===null?wa=[y]:wa.push(y),y=w;do{switch(y.tag){case 3:y.flags|=65536,a&=-a,y.lanes|=a;var B=ly(y,L,a);Ov(y,B);break e;case 1:A=L;var j=y.type,z=y.stateNode;if((y.flags&128)===0&&(typeof j.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Sr===null||!Sr.has(z)))){y.flags|=65536,a&=-a,y.lanes|=a;var oe=cy(y,A,a);Ov(y,oe);break e}}y=y.return}while(y!==null)}Wy(u)}catch(xe){a=xe,yt===u&&u!==null&&(yt=u=u.return);continue}break}while(!0)}function Vy(){var s=pc.current;return pc.current=lc,s===null?lc:s}function Oh(){(wt===0||wt===3||wt===2)&&(wt=4),At===null||(ls&268435455)===0&&(mc&268435455)===0||Tr(At,jt)}function kc(s,a){var u=ze;ze|=2;var p=Vy();(At!==s||jt!==a)&&(Fi=null,us(s,a));do try{R1();break}catch(g){By(s,g)}while(!0);if(Gd(),ze=u,pc.current=p,yt!==null)throw Error(n(261));return At=null,jt=0,wt}function R1(){for(;yt!==null;)zy(yt)}function _1(){for(;yt!==null&&!eP();)zy(yt)}function zy(s){var a=$y(s.alternate,s,wn);s.memoizedProps=s.pendingProps,a===null?Wy(s):yt=a,Eh.current=null}function Wy(s){var a=s;do{var u=a.alternate;if(s=a.return,(a.flags&32768)===0){if(u=k1(u,a,wn),u!==null){yt=u;return}}else{if(u=C1(u,a),u!==null){u.flags&=32767,yt=u;return}if(s!==null)s.flags|=32768,s.subtreeFlags=0,s.deletions=null;else{wt=6,yt=null;return}}if(a=a.sibling,a!==null){yt=a;return}yt=a=s}while(a!==null);wt===0&&(wt=5)}function ds(s,a,u){var p=Ge,g=On.transition;try{On.transition=null,Ge=1,I1(s,a,u,p)}finally{On.transition=g,Ge=p}return null}function I1(s,a,u,p){do to();while(kr!==null);if((ze&6)!==0)throw Error(n(327));u=s.finishedWork;var g=s.finishedLanes;if(u===null)return null;if(s.finishedWork=null,s.finishedLanes=0,u===s.current)throw Error(n(177));s.callbackNode=null,s.callbackPriority=0;var y=u.lanes|u.childLanes;if(uP(s,y),s===At&&(yt=At=null,jt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||vc||(vc=!0,Ky(xl,function(){return to(),null})),y=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||y){y=On.transition,On.transition=null;var w=Ge;Ge=1;var A=ze;ze|=4,Eh.current=null,w1(s,u),Ny(u,s),YP(Od),Ml=!!Dd,Od=Dd=null,s.current=u,x1(u),tP(),ze=A,Ge=w,On.transition=y}else s.current=u;if(vc&&(vc=!1,kr=s,yc=g),y=s.pendingLanes,y===0&&(Sr=null),rP(u.stateNode),un(s,ft()),a!==null)for(p=s.onRecoverableError,u=0;u<a.length;u++)g=a[u],p(g.value,{componentStack:g.stack,digest:g.digest});if(gc)throw gc=!1,s=_h,_h=null,s;return(yc&1)!==0&&s.tag!==0&&to(),y=s.pendingLanes,(y&1)!==0?s===Ih?xa++:(xa=0,Ih=s):xa=0,gr(),null}function to(){if(kr!==null){var s=Ag(yc),a=On.transition,u=Ge;try{if(On.transition=null,Ge=16>s?16:s,kr===null)var p=!1;else{if(s=kr,kr=null,yc=0,(ze&6)!==0)throw Error(n(331));var g=ze;for(ze|=4,be=s.current;be!==null;){var y=be,w=y.child;if((be.flags&16)!==0){var A=y.deletions;if(A!==null){for(var L=0;L<A.length;L++){var W=A[L];for(be=W;be!==null;){var Q=be;switch(Q.tag){case 0:case 11:case 15:Ca(8,Q,y)}var se=Q.child;if(se!==null)se.return=Q,be=se;else for(;be!==null;){Q=be;var J=Q.sibling,ve=Q.return;if(Ry(Q),Q===W){be=null;break}if(J!==null){J.return=ve,be=J;break}be=ve}}}var Se=y.alternate;if(Se!==null){var Te=Se.child;if(Te!==null){Se.child=null;do{var pt=Te.sibling;Te.sibling=null,Te=pt}while(Te!==null)}}be=y}}if((y.subtreeFlags&2064)!==0&&w!==null)w.return=y,be=w;else e:for(;be!==null;){if(y=be,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:Ca(9,y,y.return)}var B=y.sibling;if(B!==null){B.return=y.return,be=B;break e}be=y.return}}var j=s.current;for(be=j;be!==null;){w=be;var z=w.child;if((w.subtreeFlags&2064)!==0&&z!==null)z.return=w,be=z;else e:for(w=j;be!==null;){if(A=be,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:fc(9,A)}}catch(xe){at(A,A.return,xe)}if(A===w){be=null;break e}var oe=A.sibling;if(oe!==null){oe.return=A.return,be=oe;break e}be=A.return}}if(ze=g,gr(),ai&&typeof ai.onPostCommitFiberRoot=="function")try{ai.onPostCommitFiberRoot(El,s)}catch{}p=!0}return p}finally{Ge=u,On.transition=a}}return!1}function qy(s,a,u){a=Js(u,a),a=ly(s,a,1),s=yr(s,a,1),a=Qt(),s!==null&&(Xo(s,1,a),un(s,a))}function at(s,a,u){if(s.tag===3)qy(s,s,u);else for(;a!==null;){if(a.tag===3){qy(a,s,u);break}else if(a.tag===1){var p=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof p.componentDidCatch=="function"&&(Sr===null||!Sr.has(p))){s=Js(u,s),s=cy(a,s,1),a=yr(a,s,1),s=Qt(),a!==null&&(Xo(a,1,s),un(a,s));break}}a=a.return}}function A1(s,a,u){var p=s.pingCache;p!==null&&p.delete(a),a=Qt(),s.pingedLanes|=s.suspendedLanes&u,At===s&&(jt&u)===u&&(wt===4||wt===3&&(jt&130023424)===jt&&500>ft()-Rh?us(s,0):Ph|=u),un(s,a)}function Hy(s,a){a===0&&((s.mode&1)===0?a=1:(a=Rl,Rl<<=1,(Rl&130023424)===0&&(Rl=4194304)));var u=Qt();s=Di(s,a),s!==null&&(Xo(s,a,u),un(s,u))}function M1(s){var a=s.memoizedState,u=0;a!==null&&(u=a.retryLane),Hy(s,u)}function N1(s,a){var u=0;switch(s.tag){case 13:var p=s.stateNode,g=s.memoizedState;g!==null&&(u=g.retryLane);break;case 19:p=s.stateNode;break;default:throw Error(n(314))}p!==null&&p.delete(a),Hy(s,u)}var $y;$y=function(s,a,u){if(s!==null)if(s.memoizedProps!==a.pendingProps||on.current)ln=!0;else{if((s.lanes&u)===0&&(a.flags&128)===0)return ln=!1,S1(s,a,u);ln=(s.flags&131072)!==0}else ln=!1,Ze&&(a.flags&1048576)!==0&&xv(a,Yl,a.index);switch(a.lanes=0,a.tag){case 2:var p=a.type;dc(s,a),s=a.pendingProps;var g=Ws(a,Wt.current);Xs(a,u),g=sh(null,a,p,s,g,u);var y=oh();return a.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,an(p)?(y=!0,Kl(a)):y=!1,a.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Qd(a),g.updater=cc,a.stateNode=g,g._reactInternals=a,hh(a,p,s,u),a=gh(null,a,p,!0,y,u)):(a.tag=0,Ze&&y&&zd(a),Jt(null,a,g,u),a=a.child),a;case 16:p=a.elementType;e:{switch(dc(s,a),s=a.pendingProps,g=p._init,p=g(p._payload),a.type=p,g=a.tag=O1(p),s=Kn(p,s),g){case 0:a=mh(null,a,p,s,u);break e;case 1:a=yy(null,a,p,s,u);break e;case 11:a=fy(null,a,p,s,u);break e;case 14:a=py(null,a,p,Kn(p.type,s),u);break e}throw Error(n(306,p,""))}return a;case 0:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:Kn(p,g),mh(s,a,p,g,u);case 1:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:Kn(p,g),yy(s,a,p,g,u);case 3:e:{if(by(a),s===null)throw Error(n(387));p=a.pendingProps,y=a.memoizedState,g=y.element,Dv(s,a),nc(a,p,null,u);var w=a.memoizedState;if(p=w.element,y.isDehydrated)if(y={element:p,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},a.updateQueue.baseState=y,a.memoizedState=y,a.flags&256){g=Js(Error(n(423)),a),a=Sy(s,a,p,u,g);break e}else if(p!==g){g=Js(Error(n(424)),a),a=Sy(s,a,p,u,g);break e}else for(Tn=fr(a.stateNode.containerInfo.firstChild),Cn=a,Ze=!0,$n=null,u=Mv(a,null,p,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if($s(),p===g){a=Li(s,a,u);break e}Jt(s,a,p,u)}a=a.child}return a;case 5:return Fv(a),s===null&&Hd(a),p=a.type,g=a.pendingProps,y=s!==null?s.memoizedProps:null,w=g.children,Ld(p,g)?w=null:y!==null&&Ld(p,y)&&(a.flags|=32),vy(s,a),Jt(s,a,w,u),a.child;case 6:return s===null&&Hd(a),null;case 13:return ky(s,a,u);case 4:return Zd(a,a.stateNode.containerInfo),p=a.pendingProps,s===null?a.child=Ks(a,null,p,u):Jt(s,a,p,u),a.child;case 11:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:Kn(p,g),fy(s,a,p,g,u);case 7:return Jt(s,a,a.pendingProps,u),a.child;case 8:return Jt(s,a,a.pendingProps.children,u),a.child;case 12:return Jt(s,a,a.pendingProps.children,u),a.child;case 10:e:{if(p=a.type._context,g=a.pendingProps,y=a.memoizedProps,w=g.value,Ye(Zl,p._currentValue),p._currentValue=w,y!==null)if(Hn(y.value,w)){if(y.children===g.children&&!on.current){a=Li(s,a,u);break e}}else for(y=a.child,y!==null&&(y.return=a);y!==null;){var A=y.dependencies;if(A!==null){w=y.child;for(var L=A.firstContext;L!==null;){if(L.context===p){if(y.tag===1){L=Oi(-1,u&-u),L.tag=2;var W=y.updateQueue;if(W!==null){W=W.shared;var Q=W.pending;Q===null?L.next=L:(L.next=Q.next,Q.next=L),W.pending=L}}y.lanes|=u,L=y.alternate,L!==null&&(L.lanes|=u),Yd(y.return,u,a),A.lanes|=u;break}L=L.next}}else if(y.tag===10)w=y.type===a.type?null:y.child;else if(y.tag===18){if(w=y.return,w===null)throw Error(n(341));w.lanes|=u,A=w.alternate,A!==null&&(A.lanes|=u),Yd(w,u,a),w=y.sibling}else w=y.child;if(w!==null)w.return=y;else for(w=y;w!==null;){if(w===a){w=null;break}if(y=w.sibling,y!==null){y.return=w.return,w=y;break}w=w.return}y=w}Jt(s,a,g.children,u),a=a.child}return a;case 9:return g=a.type,p=a.pendingProps.children,Xs(a,u),g=Nn(g),p=p(g),a.flags|=1,Jt(s,a,p,u),a.child;case 14:return p=a.type,g=Kn(p,a.pendingProps),g=Kn(p.type,g),py(s,a,p,g,u);case 15:return my(s,a,a.type,a.pendingProps,u);case 17:return p=a.type,g=a.pendingProps,g=a.elementType===p?g:Kn(p,g),dc(s,a),a.tag=1,an(p)?(s=!0,Kl(a)):s=!1,Xs(a,u),oy(a,p,g),hh(a,p,g,u),gh(null,a,p,!0,s,u);case 19:return Ty(s,a,u);case 22:return gy(s,a,u)}throw Error(n(156,a.tag))};function Ky(s,a){return Eg(s,a)}function D1(s,a,u,p){this.tag=s,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=p,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ln(s,a,u,p){return new D1(s,a,u,p)}function Lh(s){return s=s.prototype,!(!s||!s.isReactComponent)}function O1(s){if(typeof s=="function")return Lh(s)?1:0;if(s!=null){if(s=s.$$typeof,s===ce)return 11;if(s===ye)return 14}return 2}function wr(s,a){var u=s.alternate;return u===null?(u=Ln(s.tag,a,s.key,s.mode),u.elementType=s.elementType,u.type=s.type,u.stateNode=s.stateNode,u.alternate=s,s.alternate=u):(u.pendingProps=a,u.type=s.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=s.flags&14680064,u.childLanes=s.childLanes,u.lanes=s.lanes,u.child=s.child,u.memoizedProps=s.memoizedProps,u.memoizedState=s.memoizedState,u.updateQueue=s.updateQueue,a=s.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=s.sibling,u.index=s.index,u.ref=s.ref,u}function Cc(s,a,u,p,g,y){var w=2;if(p=s,typeof s=="function")Lh(s)&&(w=1);else if(typeof s=="string")w=5;else e:switch(s){case O:return hs(u.children,g,y,a);case N:w=8,g|=8;break;case q:return s=Ln(12,u,a,g|2),s.elementType=q,s.lanes=y,s;case pe:return s=Ln(13,u,a,g),s.elementType=pe,s.lanes=y,s;case me:return s=Ln(19,u,a,g),s.elementType=me,s.lanes=y,s;case Z:return Tc(u,g,y,a);default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case H:w=10;break e;case G:w=9;break e;case ce:w=11;break e;case ye:w=14;break e;case ie:w=16,p=null;break e}throw Error(n(130,s==null?s:typeof s,""))}return a=Ln(w,u,a,g),a.elementType=s,a.type=p,a.lanes=y,a}function hs(s,a,u,p){return s=Ln(7,s,p,a),s.lanes=u,s}function Tc(s,a,u,p){return s=Ln(22,s,p,a),s.elementType=Z,s.lanes=u,s.stateNode={isHidden:!1},s}function Fh(s,a,u){return s=Ln(6,s,null,a),s.lanes=u,s}function jh(s,a,u){return a=Ln(4,s.children!==null?s.children:[],s.key,a),a.lanes=u,a.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},a}function L1(s,a,u,p,g){this.tag=a,this.containerInfo=s,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dd(0),this.expirationTimes=dd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dd(0),this.identifierPrefix=p,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Uh(s,a,u,p,g,y,w,A,L){return s=new L1(s,a,u,A,L),a===1?(a=1,y===!0&&(a|=8)):a=0,y=Ln(3,null,null,a),s.current=y,y.stateNode=s,y.memoizedState={element:p,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qd(y),s}function F1(s,a,u){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:D,key:p==null?null:""+p,children:s,containerInfo:a,implementation:u}}function Gy(s){if(!s)return mr;s=s._reactInternals;e:{if(es(s)!==s||s.tag!==1)throw Error(n(170));var a=s;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(an(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(n(171))}if(s.tag===1){var u=s.type;if(an(u))return Cv(s,u,a)}return a}function Xy(s,a,u,p,g,y,w,A,L){return s=Uh(u,p,!0,s,g,y,w,A,L),s.context=Gy(null),u=s.current,p=Qt(),g=Cr(u),y=Oi(p,g),y.callback=a??null,yr(u,y,g),s.current.lanes=g,Xo(s,g,p),un(s,p),s}function wc(s,a,u,p){var g=a.current,y=Qt(),w=Cr(g);return u=Gy(u),a.context===null?a.context=u:a.pendingContext=u,a=Oi(y,w),a.payload={element:s},p=p===void 0?null:p,p!==null&&(a.callback=p),s=yr(g,a,w),s!==null&&(Yn(s,g,w,y),tc(s,g,w)),w}function xc(s){if(s=s.current,!s.child)return null;switch(s.child.tag){case 5:return s.child.stateNode;default:return s.child.stateNode}}function Yy(s,a){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var u=s.retryLane;s.retryLane=u!==0&&u<a?u:a}}function Bh(s,a){Yy(s,a),(s=s.alternate)&&Yy(s,a)}function j1(){return null}var Jy=typeof reportError=="function"?reportError:function(s){console.error(s)};function Vh(s){this._internalRoot=s}Ec.prototype.render=Vh.prototype.render=function(s){var a=this._internalRoot;if(a===null)throw Error(n(409));wc(s,a,null,null)},Ec.prototype.unmount=Vh.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var a=s.containerInfo;cs(function(){wc(null,s,null,null)}),a[Ii]=null}};function Ec(s){this._internalRoot=s}Ec.prototype.unstable_scheduleHydration=function(s){if(s){var a=Dg();s={blockedOn:null,target:s,priority:a};for(var u=0;u<ur.length&&a!==0&&a<ur[u].priority;u++);ur.splice(u,0,s),u===0&&Fg(s)}};function zh(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function Pc(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11&&(s.nodeType!==8||s.nodeValue!==" react-mount-point-unstable "))}function Qy(){}function U1(s,a,u,p,g){if(g){if(typeof p=="function"){var y=p;p=function(){var W=xc(w);y.call(W)}}var w=Xy(a,p,s,0,null,!1,!1,"",Qy);return s._reactRootContainer=w,s[Ii]=w.current,ca(s.nodeType===8?s.parentNode:s),cs(),w}for(;g=s.lastChild;)s.removeChild(g);if(typeof p=="function"){var A=p;p=function(){var W=xc(L);A.call(W)}}var L=Uh(s,0,!1,null,null,!1,!1,"",Qy);return s._reactRootContainer=L,s[Ii]=L.current,ca(s.nodeType===8?s.parentNode:s),cs(function(){wc(a,L,u,p)}),L}function Rc(s,a,u,p,g){var y=u._reactRootContainer;if(y){var w=y;if(typeof g=="function"){var A=g;g=function(){var L=xc(w);A.call(L)}}wc(a,w,s,g)}else w=U1(u,a,s,g,p);return xc(w)}Mg=function(s){switch(s.tag){case 3:var a=s.stateNode;if(a.current.memoizedState.isDehydrated){var u=Go(a.pendingLanes);u!==0&&(hd(a,u|1),un(a,ft()),(ze&6)===0&&(eo=ft()+500,gr()))}break;case 13:cs(function(){var p=Di(s,1);if(p!==null){var g=Qt();Yn(p,s,1,g)}}),Bh(s,1)}},fd=function(s){if(s.tag===13){var a=Di(s,134217728);if(a!==null){var u=Qt();Yn(a,s,134217728,u)}Bh(s,134217728)}},Ng=function(s){if(s.tag===13){var a=Cr(s),u=Di(s,a);if(u!==null){var p=Qt();Yn(u,s,a,p)}Bh(s,a)}},Dg=function(){return Ge},Og=function(s,a){var u=Ge;try{return Ge=s,a()}finally{Ge=u}},Ho=function(s,a,u){switch(a){case"input":if(yn(s,u),a=u.name,u.type==="radio"&&a!=null){for(u=s;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<u.length;a++){var p=u[a];if(p!==s&&p.form===s.form){var g=Hl(p);if(!g)throw Error(n(90));Ve(p),yn(p,g)}}}break;case"textarea":Sl(s,u);break;case"select":a=u.value,a!=null&&er(s,!!u.multiple,a,!1)}},Ct=Nh,zt=cs;var B1={usingClientEntryPoint:!1,Events:[ha,Vs,Hl,Me,ht,Nh]},Ea={findFiberByHostInstance:ts,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},V1={bundleType:Ea.bundleType,version:Ea.version,rendererPackageName:Ea.rendererPackageName,rendererConfig:Ea.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(s){return s=wg(s),s===null?null:s.stateNode},findFiberByHostInstance:Ea.findFiberByHostInstance||j1,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _c=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_c.isDisabled&&_c.supportsFiber)try{El=_c.inject(V1),ai=_c}catch{}}return dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B1,dn.createPortal=function(s,a){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zh(a))throw Error(n(200));return F1(s,a,null,u)},dn.createRoot=function(s,a){if(!zh(s))throw Error(n(299));var u=!1,p="",g=Jy;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(p=a.identifierPrefix),a.onRecoverableError!==void 0&&(g=a.onRecoverableError)),a=Uh(s,1,!1,null,null,u,!1,p,g),s[Ii]=a.current,ca(s.nodeType===8?s.parentNode:s),new Vh(a)},dn.findDOMNode=function(s){if(s==null)return null;if(s.nodeType===1)return s;var a=s._reactInternals;if(a===void 0)throw typeof s.render=="function"?Error(n(188)):(s=Object.keys(s).join(","),Error(n(268,s)));return s=wg(a),s=s===null?null:s.stateNode,s},dn.flushSync=function(s){return cs(s)},dn.hydrate=function(s,a,u){if(!Pc(a))throw Error(n(200));return Rc(null,s,a,!0,u)},dn.hydrateRoot=function(s,a,u){if(!zh(s))throw Error(n(405));var p=u!=null&&u.hydratedSources||null,g=!1,y="",w=Jy;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onRecoverableError!==void 0&&(w=u.onRecoverableError)),a=Xy(a,null,s,1,u??null,g,!1,y,w),s[Ii]=a.current,ca(s),p)for(s=0;s<p.length;s++)u=p[s],g=u._getVersion,g=g(u._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[u,g]:a.mutableSourceEagerHydrationData.push(u,g);return new Ec(a)},dn.render=function(s,a,u){if(!Pc(a))throw Error(n(200));return Rc(null,s,a,!1,u)},dn.unmountComponentAtNode=function(s){if(!Pc(s))throw Error(n(40));return s._reactRootContainer?(cs(function(){Rc(null,null,s,!1,function(){s._reactRootContainer=null,s[Ii]=null})}),!0):!1},dn.unstable_batchedUpdates=Nh,dn.unstable_renderSubtreeIntoContainer=function(s,a,u,p){if(!Pc(u))throw Error(n(200));if(s==null||s._reactInternals===void 0)throw Error(n(38));return Rc(s,a,u,!1,p)},dn.version="18.3.1-next-f1338f8080-20240426",dn}var o0;function vk(){if(o0)return Hh.exports;o0=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Hh.exports=X1(),Hh.exports}var a0;function Y1(){if(a0)return Ic;a0=1;var t=vk();return Ic.createRoot=t.createRoot,Ic.hydrateRoot=t.hydrateRoot,Ic}var J1=Y1(),x=Jp();const ae=gk(x),Qp=W1({__proto__:null,default:ae},[x]);var hl=vk();const yk=gk(hl);function Q1(t){if(typeof document>"u")return;let e=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",e.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}const Z1=t=>{switch(t){case"success":return nR;case"info":return rR;case"warning":return iR;case"error":return sR;default:return null}},eR=Array(12).fill(0),tR=({visible:t,className:e})=>ae.createElement("div",{className:["sonner-loading-wrapper",e].filter(Boolean).join(" "),"data-visible":t},ae.createElement("div",{className:"sonner-spinner"},eR.map((n,i)=>ae.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),nR=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),iR=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),rR=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),sR=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},ae.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),oR=ae.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},ae.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),ae.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),aR=()=>{const[t,e]=ae.useState(document.hidden);return ae.useEffect(()=>{const n=()=>{e(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),t};let Bf=1;class lR{constructor(){this.subscribe=e=>(this.subscribers.push(e),()=>{const n=this.subscribers.indexOf(e);this.subscribers.splice(n,1)}),this.publish=e=>{this.subscribers.forEach(n=>n(e))},this.addToast=e=>{this.publish(e),this.toasts=[...this.toasts,e]},this.create=e=>{var n;const{message:i,...r}=e,o=typeof e?.id=="number"||((n=e.id)==null?void 0:n.length)>0?e.id:Bf++,l=this.toasts.find(d=>d.id===o),c=e.dismissible===void 0?!0:e.dismissible;return this.dismissedToasts.has(o)&&this.dismissedToasts.delete(o),l?this.toasts=this.toasts.map(d=>d.id===o?(this.publish({...d,...e,id:o,title:i}),{...d,...e,id:o,dismissible:c,title:i}):d):this.addToast({title:i,...r,dismissible:c,id:o}),o},this.dismiss=e=>(e?(this.dismissedToasts.add(e),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:e,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(i=>i({id:n.id,dismiss:!0}))}),e),this.message=(e,n)=>this.create({...n,message:e}),this.error=(e,n)=>this.create({...n,message:e,type:"error"}),this.success=(e,n)=>this.create({...n,type:"success",message:e}),this.info=(e,n)=>this.create({...n,type:"info",message:e}),this.warning=(e,n)=>this.create({...n,type:"warning",message:e}),this.loading=(e,n)=>this.create({...n,type:"loading",message:e}),this.promise=(e,n)=>{if(!n)return;let i;n.loading!==void 0&&(i=this.create({...n,promise:e,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const r=Promise.resolve(e instanceof Function?e():e);let o=i!==void 0,l;const c=r.then(async h=>{if(l=["resolve",h],ae.isValidElement(h))o=!1,this.create({id:i,type:"default",message:h});else if(uR(h)&&!h.ok){o=!1;const m=typeof n.error=="function"?await n.error(`HTTP error! status: ${h.status}`):n.error,v=typeof n.description=="function"?await n.description(`HTTP error! status: ${h.status}`):n.description,k=typeof m=="object"&&!ae.isValidElement(m)?m:{message:m};this.create({id:i,type:"error",description:v,...k})}else if(h instanceof Error){o=!1;const m=typeof n.error=="function"?await n.error(h):n.error,v=typeof n.description=="function"?await n.description(h):n.description,k=typeof m=="object"&&!ae.isValidElement(m)?m:{message:m};this.create({id:i,type:"error",description:v,...k})}else if(n.success!==void 0){o=!1;const m=typeof n.success=="function"?await n.success(h):n.success,v=typeof n.description=="function"?await n.description(h):n.description,k=typeof m=="object"&&!ae.isValidElement(m)?m:{message:m};this.create({id:i,type:"success",description:v,...k})}}).catch(async h=>{if(l=["reject",h],n.error!==void 0){o=!1;const f=typeof n.error=="function"?await n.error(h):n.error,m=typeof n.description=="function"?await n.description(h):n.description,S=typeof f=="object"&&!ae.isValidElement(f)?f:{message:f};this.create({id:i,type:"error",description:m,...S})}}).finally(()=>{o&&(this.dismiss(i),i=void 0),n.finally==null||n.finally.call(n)}),d=()=>new Promise((h,f)=>c.then(()=>l[0]==="reject"?f(l[1]):h(l[1])).catch(f));return typeof i!="string"&&typeof i!="number"?{unwrap:d}:Object.assign(i,{unwrap:d})},this.custom=(e,n)=>{const i=n?.id||Bf++;return this.create({jsx:e(i),id:i,...n}),i},this.getActiveToasts=()=>this.toasts.filter(e=>!this.dismissedToasts.has(e.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const hn=new lR,cR=(t,e)=>{const n=e?.id||Bf++;return hn.addToast({title:t,...e,id:n}),n},uR=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",dR=cR,hR=()=>hn.toasts,fR=()=>hn.getActiveToasts(),Ro=Object.assign(dR,{success:hn.success,info:hn.info,warning:hn.warning,error:hn.error,custom:hn.custom,message:hn.message,promise:hn.promise,dismiss:hn.dismiss,loading:hn.loading},{getHistory:hR,getToasts:fR});Q1("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function Ac(t){return t.label!==void 0}const pR=3,mR="24px",gR="16px",l0=4e3,vR=356,yR=14,bR=45,SR=200;function hi(...t){return t.filter(Boolean).join(" ")}function kR(t){const[e,n]=t.split("-"),i=[];return e&&i.push(e),n&&i.push(n),i}const CR=t=>{var e,n,i,r,o,l,c,d,h;const{invert:f,toast:m,unstyled:v,interacting:S,setHeights:k,visibleToasts:b,heights:C,index:T,toasts:_,expanded:R,removeToast:P,defaultRichColors:I,closeButton:D,style:O,cancelButtonStyle:N,actionButtonStyle:q,className:H="",descriptionClassName:G="",duration:ce,position:pe,gap:me,expandByDefault:ye,classNames:ie,icons:Z,closeButtonAriaLabel:U="Close toast"}=t,[re,Y]=ae.useState(null),[F,$]=ae.useState(null),[te,ue]=ae.useState(!1),[ge,we]=ae.useState(!1),[ee,he]=ae.useState(!1),[Ee,_e]=ae.useState(!1),[Le,Ve]=ae.useState(!1),[kt,Yt]=ae.useState(0),[Zi,Pi]=ae.useState(0),yn=ae.useRef(m.duration||ce||l0),zo=ae.useRef(null),bn=ae.useRef(null),Yr=T===0,er=T+1<=b,Ot=m.type,Ri=m.dismissible!==!1,Sl=m.className||"",kl=m.descriptionClassName||"",Jr=ae.useMemo(()=>C.findIndex(Me=>Me.toastId===m.id)||0,[C,m.id]),Wo=ae.useMemo(()=>{var Me;return(Me=m.closeButton)!=null?Me:D},[m.closeButton,D]),Qr=ae.useMemo(()=>m.duration||ce||l0,[m.duration,ce]),Ms=ae.useRef(0),Rn=ae.useRef(0),tr=ae.useRef(0),nr=ae.useRef(null),[Cl,Tl]=pe.split("-"),wl=ae.useMemo(()=>C.reduce((Me,ht,Ct)=>Ct>=Jr?Me:Me+ht.height,0),[C,Jr]),Ns=aR(),qo=m.invert||f,Zr=Ot==="loading";Rn.current=ae.useMemo(()=>Jr*me+wl,[Jr,wl]),ae.useEffect(()=>{yn.current=Qr},[Qr]),ae.useEffect(()=>{ue(!0)},[]),ae.useEffect(()=>{const Me=bn.current;if(Me){const ht=Me.getBoundingClientRect().height;return Pi(ht),k(Ct=>[{toastId:m.id,height:ht,position:m.position},...Ct]),()=>k(Ct=>Ct.filter(zt=>zt.toastId!==m.id))}},[k,m.id]),ae.useLayoutEffect(()=>{if(!te)return;const Me=bn.current,ht=Me.style.height;Me.style.height="auto";const Ct=Me.getBoundingClientRect().height;Me.style.height=ht,Pi(Ct),k(zt=>zt.find(vt=>vt.toastId===m.id)?zt.map(vt=>vt.toastId===m.id?{...vt,height:Ct}:vt):[{toastId:m.id,height:Ct,position:m.position},...zt])},[te,m.title,m.description,k,m.id,m.jsx,m.action,m.cancel]);const _n=ae.useCallback(()=>{we(!0),Yt(Rn.current),k(Me=>Me.filter(ht=>ht.toastId!==m.id)),setTimeout(()=>{P(m)},SR)},[m,P,k,Rn]);ae.useEffect(()=>{if(m.promise&&Ot==="loading"||m.duration===1/0||m.type==="loading")return;let Me;return R||S||Ns?(()=>{if(tr.current<Ms.current){const zt=new Date().getTime()-Ms.current;yn.current=yn.current-zt}tr.current=new Date().getTime()})():(()=>{yn.current!==1/0&&(Ms.current=new Date().getTime(),Me=setTimeout(()=>{m.onAutoClose==null||m.onAutoClose.call(m,m),_n()},yn.current))})(),()=>clearTimeout(Me)},[R,S,m,Ot,Ns,_n]),ae.useEffect(()=>{m.delete&&(_n(),m.onDismiss==null||m.onDismiss.call(m,m))},[_n,m.delete]);function Ho(){var Me;if(Z?.loading){var ht;return ae.createElement("div",{className:hi(ie?.loader,m==null||(ht=m.classNames)==null?void 0:ht.loader,"sonner-loader"),"data-visible":Ot==="loading"},Z.loading)}return ae.createElement(tR,{className:hi(ie?.loader,m==null||(Me=m.classNames)==null?void 0:Me.loader),visible:Ot==="loading"})}const ir=m.icon||Z?.[Ot]||Z1(Ot);var _i,$o;return ae.createElement("li",{tabIndex:0,ref:bn,className:hi(H,Sl,ie?.toast,m==null||(e=m.classNames)==null?void 0:e.toast,ie?.default,ie?.[Ot],m==null||(n=m.classNames)==null?void 0:n[Ot]),"data-sonner-toast":"","data-rich-colors":(_i=m.richColors)!=null?_i:I,"data-styled":!(m.jsx||m.unstyled||v),"data-mounted":te,"data-promise":!!m.promise,"data-swiped":Le,"data-removed":ge,"data-visible":er,"data-y-position":Cl,"data-x-position":Tl,"data-index":T,"data-front":Yr,"data-swiping":ee,"data-dismissible":Ri,"data-type":Ot,"data-invert":qo,"data-swipe-out":Ee,"data-swipe-direction":F,"data-expanded":!!(R||ye&&te),"data-testid":m.testId,style:{"--index":T,"--toasts-before":T,"--z-index":_.length-T,"--offset":`${ge?kt:Rn.current}px`,"--initial-height":ye?"auto":`${Zi}px`,...O,...m.style},onDragEnd:()=>{he(!1),Y(null),nr.current=null},onPointerDown:Me=>{Me.button!==2&&(Zr||!Ri||(zo.current=new Date,Yt(Rn.current),Me.target.setPointerCapture(Me.pointerId),Me.target.tagName!=="BUTTON"&&(he(!0),nr.current={x:Me.clientX,y:Me.clientY})))},onPointerUp:()=>{var Me,ht,Ct;if(Ee||!Ri)return;nr.current=null;const zt=Number(((Me=bn.current)==null?void 0:Me.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),rr=Number(((ht=bn.current)==null?void 0:ht.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),vt=new Date().getTime()-((Ct=zo.current)==null?void 0:Ct.getTime()),_t=re==="x"?zt:rr,sr=Math.abs(_t)/vt;if(Math.abs(_t)>=bR||sr>.11){Yt(Rn.current),m.onDismiss==null||m.onDismiss.call(m,m),$(re==="x"?zt>0?"right":"left":rr>0?"down":"up"),_n(),_e(!0);return}else{var Lt,Sn;(Lt=bn.current)==null||Lt.style.setProperty("--swipe-amount-x","0px"),(Sn=bn.current)==null||Sn.style.setProperty("--swipe-amount-y","0px")}Ve(!1),he(!1),Y(null)},onPointerMove:Me=>{var ht,Ct,zt;if(!nr.current||!Ri||((ht=window.getSelection())==null?void 0:ht.toString().length)>0)return;const vt=Me.clientY-nr.current.y,_t=Me.clientX-nr.current.x;var sr;const Lt=(sr=t.swipeDirections)!=null?sr:kR(pe);!re&&(Math.abs(_t)>1||Math.abs(vt)>1)&&Y(Math.abs(_t)>Math.abs(vt)?"x":"y");let Sn={x:0,y:0};const or=In=>1/(1.5+Math.abs(In)/20);if(re==="y"){if(Lt.includes("top")||Lt.includes("bottom"))if(Lt.includes("top")&&vt<0||Lt.includes("bottom")&&vt>0)Sn.y=vt;else{const In=vt*or(vt);Sn.y=Math.abs(In)<Math.abs(vt)?In:vt}}else if(re==="x"&&(Lt.includes("left")||Lt.includes("right")))if(Lt.includes("left")&&_t<0||Lt.includes("right")&&_t>0)Sn.x=_t;else{const In=_t*or(_t);Sn.x=Math.abs(In)<Math.abs(_t)?In:_t}(Math.abs(Sn.x)>0||Math.abs(Sn.y)>0)&&Ve(!0),(Ct=bn.current)==null||Ct.style.setProperty("--swipe-amount-x",`${Sn.x}px`),(zt=bn.current)==null||zt.style.setProperty("--swipe-amount-y",`${Sn.y}px`)}},Wo&&!m.jsx&&Ot!=="loading"?ae.createElement("button",{"aria-label":U,"data-disabled":Zr,"data-close-button":!0,onClick:Zr||!Ri?()=>{}:()=>{_n(),m.onDismiss==null||m.onDismiss.call(m,m)},className:hi(ie?.closeButton,m==null||(i=m.classNames)==null?void 0:i.closeButton)},($o=Z?.close)!=null?$o:oR):null,(Ot||m.icon||m.promise)&&m.icon!==null&&(Z?.[Ot]!==null||m.icon)?ae.createElement("div",{"data-icon":"",className:hi(ie?.icon,m==null||(r=m.classNames)==null?void 0:r.icon)},m.promise||m.type==="loading"&&!m.icon?m.icon||Ho():null,m.type!=="loading"?ir:null):null,ae.createElement("div",{"data-content":"",className:hi(ie?.content,m==null||(o=m.classNames)==null?void 0:o.content)},ae.createElement("div",{"data-title":"",className:hi(ie?.title,m==null||(l=m.classNames)==null?void 0:l.title)},m.jsx?m.jsx:typeof m.title=="function"?m.title():m.title),m.description?ae.createElement("div",{"data-description":"",className:hi(G,kl,ie?.description,m==null||(c=m.classNames)==null?void 0:c.description)},typeof m.description=="function"?m.description():m.description):null),ae.isValidElement(m.cancel)?m.cancel:m.cancel&&Ac(m.cancel)?ae.createElement("button",{"data-button":!0,"data-cancel":!0,style:m.cancelButtonStyle||N,onClick:Me=>{Ac(m.cancel)&&Ri&&(m.cancel.onClick==null||m.cancel.onClick.call(m.cancel,Me),_n())},className:hi(ie?.cancelButton,m==null||(d=m.classNames)==null?void 0:d.cancelButton)},m.cancel.label):null,ae.isValidElement(m.action)?m.action:m.action&&Ac(m.action)?ae.createElement("button",{"data-button":!0,"data-action":!0,style:m.actionButtonStyle||q,onClick:Me=>{Ac(m.action)&&(m.action.onClick==null||m.action.onClick.call(m.action,Me),!Me.defaultPrevented&&_n())},className:hi(ie?.actionButton,m==null||(h=m.classNames)==null?void 0:h.actionButton)},m.action.label):null)};function c0(){if(typeof window>"u"||typeof document>"u")return"ltr";const t=document.documentElement.getAttribute("dir");return t==="auto"||!t?window.getComputedStyle(document.documentElement).direction:t}function TR(t,e){const n={};return[t,e].forEach((i,r)=>{const o=r===1,l=o?"--mobile-offset":"--offset",c=o?gR:mR;function d(h){["top","right","bottom","left"].forEach(f=>{n[`${l}-${f}`]=typeof h=="number"?`${h}px`:h})}typeof i=="number"||typeof i=="string"?d(i):typeof i=="object"?["top","right","bottom","left"].forEach(h=>{i[h]===void 0?n[`${l}-${h}`]=c:n[`${l}-${h}`]=typeof i[h]=="number"?`${i[h]}px`:i[h]}):d(c)}),n}const wR=ae.forwardRef(function(e,n){const{id:i,invert:r,position:o="bottom-right",hotkey:l=["altKey","KeyT"],expand:c,closeButton:d,className:h,offset:f,mobileOffset:m,theme:v="light",richColors:S,duration:k,style:b,visibleToasts:C=pR,toastOptions:T,dir:_=c0(),gap:R=yR,icons:P,containerAriaLabel:I="Notifications"}=e,[D,O]=ae.useState([]),N=ae.useMemo(()=>i?D.filter(te=>te.toasterId===i):D.filter(te=>!te.toasterId),[D,i]),q=ae.useMemo(()=>Array.from(new Set([o].concat(N.filter(te=>te.position).map(te=>te.position)))),[N,o]),[H,G]=ae.useState([]),[ce,pe]=ae.useState(!1),[me,ye]=ae.useState(!1),[ie,Z]=ae.useState(v!=="system"?v:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),U=ae.useRef(null),re=l.join("+").replace(/Key/g,"").replace(/Digit/g,""),Y=ae.useRef(null),F=ae.useRef(!1),$=ae.useCallback(te=>{O(ue=>{var ge;return(ge=ue.find(we=>we.id===te.id))!=null&&ge.delete||hn.dismiss(te.id),ue.filter(({id:we})=>we!==te.id)})},[]);return ae.useEffect(()=>hn.subscribe(te=>{if(te.dismiss){requestAnimationFrame(()=>{O(ue=>ue.map(ge=>ge.id===te.id?{...ge,delete:!0}:ge))});return}setTimeout(()=>{yk.flushSync(()=>{O(ue=>{const ge=ue.findIndex(we=>we.id===te.id);return ge!==-1?[...ue.slice(0,ge),{...ue[ge],...te},...ue.slice(ge+1)]:[te,...ue]})})})}),[D]),ae.useEffect(()=>{if(v!=="system"){Z(v);return}if(v==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?Z("dark"):Z("light")),typeof window>"u")return;const te=window.matchMedia("(prefers-color-scheme: dark)");try{te.addEventListener("change",({matches:ue})=>{Z(ue?"dark":"light")})}catch{te.addListener(({matches:ge})=>{try{Z(ge?"dark":"light")}catch(we){console.error(we)}})}},[v]),ae.useEffect(()=>{D.length<=1&&pe(!1)},[D]),ae.useEffect(()=>{const te=ue=>{var ge;if(l.every(he=>ue[he]||ue.code===he)){var ee;pe(!0),(ee=U.current)==null||ee.focus()}ue.code==="Escape"&&(document.activeElement===U.current||(ge=U.current)!=null&&ge.contains(document.activeElement))&&pe(!1)};return document.addEventListener("keydown",te),()=>document.removeEventListener("keydown",te)},[l]),ae.useEffect(()=>{if(U.current)return()=>{Y.current&&(Y.current.focus({preventScroll:!0}),Y.current=null,F.current=!1)}},[U.current]),ae.createElement("section",{ref:n,"aria-label":`${I} ${re}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},q.map((te,ue)=>{var ge;const[we,ee]=te.split("-");return N.length?ae.createElement("ol",{key:te,dir:_==="auto"?c0():_,tabIndex:-1,ref:U,className:h,"data-sonner-toaster":!0,"data-sonner-theme":ie,"data-y-position":we,"data-x-position":ee,style:{"--front-toast-height":`${((ge=H[0])==null?void 0:ge.height)||0}px`,"--width":`${vR}px`,"--gap":`${R}px`,...b,...TR(f,m)},onBlur:he=>{F.current&&!he.currentTarget.contains(he.relatedTarget)&&(F.current=!1,Y.current&&(Y.current.focus({preventScroll:!0}),Y.current=null))},onFocus:he=>{he.target instanceof HTMLElement&&he.target.dataset.dismissible==="false"||F.current||(F.current=!0,Y.current=he.relatedTarget)},onMouseEnter:()=>pe(!0),onMouseMove:()=>pe(!0),onMouseLeave:()=>{me||pe(!1)},onDragEnd:()=>pe(!1),onPointerDown:he=>{he.target instanceof HTMLElement&&he.target.dataset.dismissible==="false"||ye(!0)},onPointerUp:()=>ye(!1)},N.filter(he=>!he.position&&ue===0||he.position===te).map((he,Ee)=>{var _e,Le;return ae.createElement(CR,{key:he.id,icons:P,index:Ee,toast:he,defaultRichColors:S,duration:(_e=T?.duration)!=null?_e:k,className:T?.className,descriptionClassName:T?.descriptionClassName,invert:r,visibleToasts:C,closeButton:(Le=T?.closeButton)!=null?Le:d,interacting:me,position:te,style:T?.style,unstyled:T?.unstyled,classNames:T?.classNames,cancelButtonStyle:T?.cancelButtonStyle,actionButtonStyle:T?.actionButtonStyle,closeButtonAriaLabel:T?.closeButtonAriaLabel,removeToast:$,toasts:N.filter(Ve=>Ve.position==he.position),heights:H.filter(Ve=>Ve.position==he.position),setHeights:G,expandByDefault:c,gap:R,expanded:ce,swipeDirections:e.swipeDirections})})):null}))});/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xR=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ER=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,i)=>i?i.toUpperCase():n.toLowerCase()),u0=t=>{const e=ER(t);return e.charAt(0).toUpperCase()+e.slice(1)},bk=(...t)=>t.filter((e,n,i)=>!!e&&e.trim()!==""&&i.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var PR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=x.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:r="",children:o,iconNode:l,...c},d)=>x.createElement("svg",{ref:d,...PR,width:e,height:e,stroke:t,strokeWidth:i?Number(n)*24/Number(e):n,className:bk("lucide",r),...c},[...l.map(([h,f])=>x.createElement(h,f)),...Array.isArray(o)?o:[o]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vt=(t,e)=>{const n=x.forwardRef(({className:i,...r},o)=>x.createElement(RR,{ref:o,iconNode:e,className:bk(`lucide-${xR(u0(t))}`,`lucide-${t}`,i),...r}));return n.displayName=u0(t),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],IR=Vt("briefcase",_R);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AR=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],MR=Vt("calendar",AR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ts=Vt("check",NR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DR=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Sk=Vt("chevron-down",DR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],d0=Vt("chevron-left",OR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],FR=Vt("chevron-right",LR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],UR=Vt("chevron-up",jR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],VR=Vt("circle",BR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],h0=Vt("dollar-sign",zR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WR=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],qR=Vt("file-text",WR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HR=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],$R=Vt("heart",HR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KR=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],GR=Vt("menu",KR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XR=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],YR=Vt("message-square",XR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],QR=Vt("phone",JR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZR=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],e_=Vt("save",ZR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t_=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],n_=Vt("user",t_);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i_=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],r_=Vt("users",i_);function s_(){return E.jsx("header",{className:"bg-white border-b border-gray-200 shadow-sm",children:E.jsx("div",{className:"max-w-7xl mx-auto px-4",children:E.jsxs("div",{className:"flex items-center justify-between h-16",children:[E.jsxs("div",{className:"flex items-center gap-8",children:[E.jsx("div",{className:"flex items-center",children:E.jsxs("svg",{className:"h-10",viewBox:"0 0 320 60",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[E.jsx("text",{x:"5",y:"38",fontFamily:"Georgia, serif",fontSize:"32",fontWeight:"bold",fill:"#003087",letterSpacing:"-0.5",children:"Prudential"}),E.jsx("line",{x1:"220",y1:"15",x2:"220",y2:"45",stroke:"#003087",strokeWidth:"2"}),E.jsx("text",{x:"235",y:"38",fontFamily:"Arial, sans-serif",fontSize:"38",fontWeight:"300",fill:"#003087",letterSpacing:"2",children:"150"})]})}),E.jsxs("nav",{className:"hidden md:flex items-center gap-6",children:[E.jsx("a",{href:"#",className:"text-gray-700 hover:text-[#0046B8] transition-colors",children:"Products"}),E.jsx("a",{href:"#",className:"text-gray-700 hover:text-[#0046B8] transition-colors",children:"Resources"}),E.jsx("a",{href:"#",className:"text-gray-700 hover:text-[#0046B8] transition-colors",children:"About Us"}),E.jsx("a",{href:"#",className:"text-gray-700 hover:text-[#0046B8] transition-colors",children:"Support"})]})]}),E.jsxs("div",{className:"flex items-center gap-4",children:[E.jsxs("button",{className:"hidden md:flex items-center gap-2 text-gray-700 hover:text-[#0046B8] transition-colors",children:[E.jsx(QR,{className:"w-4 h-4"}),E.jsx("span",{className:"text-sm",children:"1-800-778-3827"})]}),E.jsx("button",{className:"p-2 text-gray-700 hover:text-[#0046B8] transition-colors",children:E.jsx(YR,{className:"w-5 h-5"})}),E.jsx("button",{className:"p-2 text-gray-700 hover:text-[#0046B8] transition-colors",children:E.jsx(n_,{className:"w-5 h-5"})}),E.jsx("button",{className:"md:hidden p-2 text-gray-700 hover:text-[#0046B8] transition-colors",children:E.jsx(GR,{className:"w-5 h-5"})})]})]})})})}const Zp=x.createContext({});function em(t){const e=x.useRef(null);return e.current===null&&(e.current=t()),e.current}const tm=typeof window<"u",kk=tm?x.useLayoutEffect:x.useEffect,ju=x.createContext(null);function nm(t,e){t.indexOf(e)===-1&&t.push(e)}function im(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const Ki=(t,e,n)=>n>e?e:n<t?t:n;let rm=()=>{};const Gi={},Ck=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function Tk(t){return typeof t=="object"&&t!==null}const wk=t=>/^0[^.\s]+$/u.test(t);function sm(t){let e;return()=>(e===void 0&&(e=t()),e)}const Wn=t=>t,o_=(t,e)=>n=>e(t(n)),fl=(...t)=>t.reduce(o_),Ya=(t,e,n)=>{const i=e-t;return i===0?1:(n-t)/i};class om{constructor(){this.subscriptions=[]}add(e){return nm(this.subscriptions,e),()=>im(this.subscriptions,e)}notify(e,n,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,i);else for(let o=0;o<r;o++){const l=this.subscriptions[o];l&&l(e,n,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const yi=t=>t*1e3,Vn=t=>t/1e3;function xk(t,e){return e?t*(1e3/e):0}const Ek=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,a_=1e-7,l_=12;function c_(t,e,n,i,r){let o,l,c=0;do l=e+(n-e)/2,o=Ek(l,i,r)-t,o>0?n=l:e=l;while(Math.abs(o)>a_&&++c<l_);return l}function pl(t,e,n,i){if(t===e&&n===i)return Wn;const r=o=>c_(o,0,1,t,n);return o=>o===0||o===1?o:Ek(r(o),e,i)}const Pk=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,Rk=t=>e=>1-t(1-e),_k=pl(.33,1.53,.69,.99),am=Rk(_k),Ik=Pk(am),Ak=t=>(t*=2)<1?.5*am(t):.5*(2-Math.pow(2,-10*(t-1))),lm=t=>1-Math.sin(Math.acos(t)),Mk=Rk(lm),Nk=Pk(lm),u_=pl(.42,0,1,1),d_=pl(0,0,.58,1),Dk=pl(.42,0,.58,1),h_=t=>Array.isArray(t)&&typeof t[0]!="number",Ok=t=>Array.isArray(t)&&typeof t[0]=="number",f_={linear:Wn,easeIn:u_,easeInOut:Dk,easeOut:d_,circIn:lm,circInOut:Nk,circOut:Mk,backIn:am,backInOut:Ik,backOut:_k,anticipate:Ak},p_=t=>typeof t=="string",f0=t=>{if(Ok(t)){rm(t.length===4);const[e,n,i,r]=t;return pl(e,n,i,r)}else if(p_(t))return f_[t];return t},Mc=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function m_(t,e){let n=new Set,i=new Set,r=!1,o=!1;const l=new WeakSet;let c={delta:0,timestamp:0,isProcessing:!1};function d(f){l.has(f)&&(h.schedule(f),t()),f(c)}const h={schedule:(f,m=!1,v=!1)=>{const k=v&&r?n:i;return m&&l.add(f),k.has(f)||k.add(f),f},cancel:f=>{i.delete(f),l.delete(f)},process:f=>{if(c=f,r){o=!0;return}r=!0,[n,i]=[i,n],n.forEach(d),n.clear(),r=!1,o&&(o=!1,h.process(f))}};return h}const g_=40;function Lk(t,e){let n=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},o=()=>n=!0,l=Mc.reduce((R,P)=>(R[P]=m_(o),R),{}),{setup:c,read:d,resolveKeyframes:h,preUpdate:f,update:m,preRender:v,render:S,postRender:k}=l,b=()=>{const R=Gi.useManualTiming?r.timestamp:performance.now();n=!1,Gi.useManualTiming||(r.delta=i?1e3/60:Math.max(Math.min(R-r.timestamp,g_),1)),r.timestamp=R,r.isProcessing=!0,c.process(r),d.process(r),h.process(r),f.process(r),m.process(r),v.process(r),S.process(r),k.process(r),r.isProcessing=!1,n&&e&&(i=!1,t(b))},C=()=>{n=!0,i=!0,r.isProcessing||t(b)};return{schedule:Mc.reduce((R,P)=>{const I=l[P];return R[P]=(D,O=!1,N=!1)=>(n||C(),I.schedule(D,O,N)),R},{}),cancel:R=>{for(let P=0;P<Mc.length;P++)l[Mc[P]].cancel(R)},state:r,steps:l}}const{schedule:tt,cancel:jr,state:Ut,steps:Gh}=Lk(typeof requestAnimationFrame<"u"?requestAnimationFrame:Wn,!0);let Kc;function v_(){Kc=void 0}const pn={now:()=>(Kc===void 0&&pn.set(Ut.isProcessing||Gi.useManualTiming?Ut.timestamp:performance.now()),Kc),set:t=>{Kc=t,queueMicrotask(v_)}},Fk=t=>e=>typeof e=="string"&&e.startsWith(t),cm=Fk("--"),y_=Fk("var(--"),um=t=>y_(t)?b_.test(t.split("/*")[0].trim()):!1,b_=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Do={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ja={...Do,transform:t=>Ki(0,1,t)},Nc={...Do,default:1},Ba=t=>Math.round(t*1e5)/1e5,dm=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function S_(t){return t==null}const k_=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,hm=(t,e)=>n=>!!(typeof n=="string"&&k_.test(n)&&n.startsWith(t)||e&&!S_(n)&&Object.prototype.hasOwnProperty.call(n,e)),jk=(t,e,n)=>i=>{if(typeof i!="string")return i;const[r,o,l,c]=i.match(dm);return{[t]:parseFloat(r),[e]:parseFloat(o),[n]:parseFloat(l),alpha:c!==void 0?parseFloat(c):1}},C_=t=>Ki(0,255,t),Xh={...Do,transform:t=>Math.round(C_(t))},bs={test:hm("rgb","red"),parse:jk("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:i=1})=>"rgba("+Xh.transform(t)+", "+Xh.transform(e)+", "+Xh.transform(n)+", "+Ba(Ja.transform(i))+")"};function T_(t){let e="",n="",i="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),i=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const Vf={test:hm("#"),parse:T_,transform:bs.transform},ml=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),_r=ml("deg"),bi=ml("%"),Ie=ml("px"),w_=ml("vh"),x_=ml("vw"),p0={...bi,parse:t=>bi.parse(t)/100,transform:t=>bi.transform(t*100)},uo={test:hm("hsl","hue"),parse:jk("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:i=1})=>"hsla("+Math.round(t)+", "+bi.transform(Ba(e))+", "+bi.transform(Ba(n))+", "+Ba(Ja.transform(i))+")"},bt={test:t=>bs.test(t)||Vf.test(t)||uo.test(t),parse:t=>bs.test(t)?bs.parse(t):uo.test(t)?uo.parse(t):Vf.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?bs.transform(t):uo.transform(t),getAnimatableNone:t=>{const e=bt.parse(t);return e.alpha=0,bt.transform(e)}},E_=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function P_(t){return isNaN(t)&&typeof t=="string"&&(t.match(dm)?.length||0)+(t.match(E_)?.length||0)>0}const Uk="number",Bk="color",R_="var",__="var(",m0="${}",I_=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Qa(t){const e=t.toString(),n=[],i={color:[],number:[],var:[]},r=[];let o=0;const c=e.replace(I_,d=>(bt.test(d)?(i.color.push(o),r.push(Bk),n.push(bt.parse(d))):d.startsWith(__)?(i.var.push(o),r.push(R_),n.push(d)):(i.number.push(o),r.push(Uk),n.push(parseFloat(d))),++o,m0)).split(m0);return{values:n,split:c,indexes:i,types:r}}function Vk(t){return Qa(t).values}function zk(t){const{split:e,types:n}=Qa(t),i=e.length;return r=>{let o="";for(let l=0;l<i;l++)if(o+=e[l],r[l]!==void 0){const c=n[l];c===Uk?o+=Ba(r[l]):c===Bk?o+=bt.transform(r[l]):o+=r[l]}return o}}const A_=t=>typeof t=="number"?0:bt.test(t)?bt.getAnimatableNone(t):t;function M_(t){const e=Vk(t);return zk(t)(e.map(A_))}const Ur={test:P_,parse:Vk,createTransformer:zk,getAnimatableNone:M_};function Yh(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function N_({hue:t,saturation:e,lightness:n,alpha:i}){t/=360,e/=100,n/=100;let r=0,o=0,l=0;if(!e)r=o=l=n;else{const c=n<.5?n*(1+e):n+e-n*e,d=2*n-c;r=Yh(d,c,t+1/3),o=Yh(d,c,t),l=Yh(d,c,t-1/3)}return{red:Math.round(r*255),green:Math.round(o*255),blue:Math.round(l*255),alpha:i}}function fu(t,e){return n=>n>0?e:t}const ot=(t,e,n)=>t+(e-t)*n,Jh=(t,e,n)=>{const i=t*t,r=n*(e*e-i)+i;return r<0?0:Math.sqrt(r)},D_=[Vf,bs,uo],O_=t=>D_.find(e=>e.test(t));function g0(t){const e=O_(t);if(!e)return!1;let n=e.parse(t);return e===uo&&(n=N_(n)),n}const v0=(t,e)=>{const n=g0(t),i=g0(e);if(!n||!i)return fu(t,e);const r={...n};return o=>(r.red=Jh(n.red,i.red,o),r.green=Jh(n.green,i.green,o),r.blue=Jh(n.blue,i.blue,o),r.alpha=ot(n.alpha,i.alpha,o),bs.transform(r))},zf=new Set(["none","hidden"]);function L_(t,e){return zf.has(t)?n=>n<=0?t:e:n=>n>=1?e:t}function F_(t,e){return n=>ot(t,e,n)}function fm(t){return typeof t=="number"?F_:typeof t=="string"?um(t)?fu:bt.test(t)?v0:B_:Array.isArray(t)?Wk:typeof t=="object"?bt.test(t)?v0:j_:fu}function Wk(t,e){const n=[...t],i=n.length,r=t.map((o,l)=>fm(o)(o,e[l]));return o=>{for(let l=0;l<i;l++)n[l]=r[l](o);return n}}function j_(t,e){const n={...t,...e},i={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(i[r]=fm(t[r])(t[r],e[r]));return r=>{for(const o in i)n[o]=i[o](r);return n}}function U_(t,e){const n=[],i={color:0,var:0,number:0};for(let r=0;r<e.values.length;r++){const o=e.types[r],l=t.indexes[o][i[o]],c=t.values[l]??0;n[r]=c,i[o]++}return n}const B_=(t,e)=>{const n=Ur.createTransformer(e),i=Qa(t),r=Qa(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?zf.has(t)&&!r.values.length||zf.has(e)&&!i.values.length?L_(t,e):fl(Wk(U_(i,r),r.values),n):fu(t,e)};function qk(t,e,n){return typeof t=="number"&&typeof e=="number"&&typeof n=="number"?ot(t,e,n):fm(t)(t,e)}const V_=t=>{const e=({timestamp:n})=>t(n);return{start:(n=!0)=>tt.update(e,n),stop:()=>jr(e),now:()=>Ut.isProcessing?Ut.timestamp:pn.now()}},Hk=(t,e,n=10)=>{let i="";const r=Math.max(Math.round(e/n),2);for(let o=0;o<r;o++)i+=Math.round(t(o/(r-1))*1e4)/1e4+", ";return`linear(${i.substring(0,i.length-2)})`},pu=2e4;function pm(t){let e=0;const n=50;let i=t.next(e);for(;!i.done&&e<pu;)e+=n,i=t.next(e);return e>=pu?1/0:e}function z_(t,e=100,n){const i=n({...t,keyframes:[0,e]}),r=Math.min(pm(i),pu);return{type:"keyframes",ease:o=>i.next(r*o).value/e,duration:Vn(r)}}const W_=5;function $k(t,e,n){const i=Math.max(e-W_,0);return xk(n-t(i),e-i)}const lt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Qh=.001;function q_({duration:t=lt.duration,bounce:e=lt.bounce,velocity:n=lt.velocity,mass:i=lt.mass}){let r,o,l=1-e;l=Ki(lt.minDamping,lt.maxDamping,l),t=Ki(lt.minDuration,lt.maxDuration,Vn(t)),l<1?(r=h=>{const f=h*l,m=f*t,v=f-n,S=Wf(h,l),k=Math.exp(-m);return Qh-v/S*k},o=h=>{const m=h*l*t,v=m*n+n,S=Math.pow(l,2)*Math.pow(h,2)*t,k=Math.exp(-m),b=Wf(Math.pow(h,2),l);return(-r(h)+Qh>0?-1:1)*((v-S)*k)/b}):(r=h=>{const f=Math.exp(-h*t),m=(h-n)*t+1;return-Qh+f*m},o=h=>{const f=Math.exp(-h*t),m=(n-h)*(t*t);return f*m});const c=5/t,d=$_(r,o,c);if(t=yi(t),isNaN(d))return{stiffness:lt.stiffness,damping:lt.damping,duration:t};{const h=Math.pow(d,2)*i;return{stiffness:h,damping:l*2*Math.sqrt(i*h),duration:t}}}const H_=12;function $_(t,e,n){let i=n;for(let r=1;r<H_;r++)i=i-t(i)/e(i);return i}function Wf(t,e){return t*Math.sqrt(1-e*e)}const K_=["duration","bounce"],G_=["stiffness","damping","mass"];function y0(t,e){return e.some(n=>t[n]!==void 0)}function X_(t){let e={velocity:lt.velocity,stiffness:lt.stiffness,damping:lt.damping,mass:lt.mass,isResolvedFromDuration:!1,...t};if(!y0(t,G_)&&y0(t,K_))if(t.visualDuration){const n=t.visualDuration,i=2*Math.PI/(n*1.2),r=i*i,o=2*Ki(.05,1,1-(t.bounce||0))*Math.sqrt(r);e={...e,mass:lt.mass,stiffness:r,damping:o}}else{const n=q_(t);e={...e,...n,mass:lt.mass},e.isResolvedFromDuration=!0}return e}function mu(t=lt.visualDuration,e=lt.bounce){const n=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:i,restDelta:r}=n;const o=n.keyframes[0],l=n.keyframes[n.keyframes.length-1],c={done:!1,value:o},{stiffness:d,damping:h,mass:f,duration:m,velocity:v,isResolvedFromDuration:S}=X_({...n,velocity:-Vn(n.velocity||0)}),k=v||0,b=h/(2*Math.sqrt(d*f)),C=l-o,T=Vn(Math.sqrt(d/f)),_=Math.abs(C)<5;i||(i=_?lt.restSpeed.granular:lt.restSpeed.default),r||(r=_?lt.restDelta.granular:lt.restDelta.default);let R;if(b<1){const I=Wf(T,b);R=D=>{const O=Math.exp(-b*T*D);return l-O*((k+b*T*C)/I*Math.sin(I*D)+C*Math.cos(I*D))}}else if(b===1)R=I=>l-Math.exp(-T*I)*(C+(k+T*C)*I);else{const I=T*Math.sqrt(b*b-1);R=D=>{const O=Math.exp(-b*T*D),N=Math.min(I*D,300);return l-O*((k+b*T*C)*Math.sinh(N)+I*C*Math.cosh(N))/I}}const P={calculatedDuration:S&&m||null,next:I=>{const D=R(I);if(S)c.done=I>=m;else{let O=I===0?k:0;b<1&&(O=I===0?yi(k):$k(R,I,D));const N=Math.abs(O)<=i,q=Math.abs(l-D)<=r;c.done=N&&q}return c.value=c.done?l:D,c},toString:()=>{const I=Math.min(pm(P),pu),D=Hk(O=>P.next(I*O).value,I,30);return I+"ms "+D},toTransition:()=>{}};return P}mu.applyToOptions=t=>{const e=z_(t,100,mu);return t.ease=e.ease,t.duration=yi(e.duration),t.type="keyframes",t};function qf({keyframes:t,velocity:e=0,power:n=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:o=500,modifyTarget:l,min:c,max:d,restDelta:h=.5,restSpeed:f}){const m=t[0],v={done:!1,value:m},S=N=>c!==void 0&&N<c||d!==void 0&&N>d,k=N=>c===void 0?d:d===void 0||Math.abs(c-N)<Math.abs(d-N)?c:d;let b=n*e;const C=m+b,T=l===void 0?C:l(C);T!==C&&(b=T-m);const _=N=>-b*Math.exp(-N/i),R=N=>T+_(N),P=N=>{const q=_(N),H=R(N);v.done=Math.abs(q)<=h,v.value=v.done?T:H};let I,D;const O=N=>{S(v.value)&&(I=N,D=mu({keyframes:[v.value,k(v.value)],velocity:$k(R,N,v.value),damping:r,stiffness:o,restDelta:h,restSpeed:f}))};return O(0),{calculatedDuration:null,next:N=>{let q=!1;return!D&&I===void 0&&(q=!0,P(N),O(N)),I!==void 0&&N>=I?D.next(N-I):(!q&&P(N),v)}}}function Y_(t,e,n){const i=[],r=n||Gi.mix||qk,o=t.length-1;for(let l=0;l<o;l++){let c=r(t[l],t[l+1]);if(e){const d=Array.isArray(e)?e[l]||Wn:e;c=fl(d,c)}i.push(c)}return i}function J_(t,e,{clamp:n=!0,ease:i,mixer:r}={}){const o=t.length;if(rm(o===e.length),o===1)return()=>e[0];if(o===2&&e[0]===e[1])return()=>e[1];const l=t[0]===t[1];t[0]>t[o-1]&&(t=[...t].reverse(),e=[...e].reverse());const c=Y_(e,i,r),d=c.length,h=f=>{if(l&&f<t[0])return e[0];let m=0;if(d>1)for(;m<t.length-2&&!(f<t[m+1]);m++);const v=Ya(t[m],t[m+1],f);return c[m](v)};return n?f=>h(Ki(t[0],t[o-1],f)):h}function Q_(t,e){const n=t[t.length-1];for(let i=1;i<=e;i++){const r=Ya(0,e,i);t.push(ot(n,1,r))}}function Z_(t){const e=[0];return Q_(e,t.length-1),e}function eI(t,e){return t.map(n=>n*e)}function tI(t,e){return t.map(()=>e||Dk).splice(0,t.length-1)}function Va({duration:t=300,keyframes:e,times:n,ease:i="easeInOut"}){const r=h_(i)?i.map(f0):f0(i),o={done:!1,value:e[0]},l=eI(n&&n.length===e.length?n:Z_(e),t),c=J_(l,e,{ease:Array.isArray(r)?r:tI(e,r)});return{calculatedDuration:t,next:d=>(o.value=c(d),o.done=d>=t,o)}}const nI=t=>t!==null;function mm(t,{repeat:e,repeatType:n="loop"},i,r=1){const o=t.filter(nI),c=r<0||e&&n!=="loop"&&e%2===1?0:o.length-1;return!c||i===void 0?o[c]:i}const iI={decay:qf,inertia:qf,tween:Va,keyframes:Va,spring:mu};function Kk(t){typeof t.type=="string"&&(t.type=iI[t.type])}class gm{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,n){return this.finished.then(e,n)}}const rI=t=>t/100;class vm extends gm{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==pn.now()&&this.tick(pn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;Kk(e);const{type:n=Va,repeat:i=0,repeatDelay:r=0,repeatType:o,velocity:l=0}=e;let{keyframes:c}=e;const d=n||Va;d!==Va&&typeof c[0]!="number"&&(this.mixKeyframes=fl(rI,qk(c[0],c[1])),c=[0,100]);const h=d({...e,keyframes:c});o==="mirror"&&(this.mirroredGenerator=d({...e,keyframes:[...c].reverse(),velocity:-l})),h.calculatedDuration===null&&(h.calculatedDuration=pm(h));const{calculatedDuration:f}=h;this.calculatedDuration=f,this.resolvedDuration=f+r,this.totalDuration=this.resolvedDuration*(i+1)-r,this.generator=h}updateTime(e){const n=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(e,n=!1){const{generator:i,totalDuration:r,mixKeyframes:o,mirroredGenerator:l,resolvedDuration:c,calculatedDuration:d}=this;if(this.startTime===null)return i.next(0);const{delay:h=0,keyframes:f,repeat:m,repeatType:v,repeatDelay:S,type:k,onUpdate:b,finalKeyframe:C}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-r/this.speed,this.startTime)),n?this.currentTime=e:this.updateTime(e);const T=this.currentTime-h*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?T<0:T>r;this.currentTime=Math.max(T,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=r);let R=this.currentTime,P=i;if(m){const N=Math.min(this.currentTime,r)/c;let q=Math.floor(N),H=N%1;!H&&N>=1&&(H=1),H===1&&q--,q=Math.min(q,m+1),!!(q%2)&&(v==="reverse"?(H=1-H,S&&(H-=S/c)):v==="mirror"&&(P=l)),R=Ki(0,1,H)*c}const I=_?{done:!1,value:f[0]}:P.next(R);o&&(I.value=o(I.value));let{done:D}=I;!_&&d!==null&&(D=this.playbackSpeed>=0?this.currentTime>=r:this.currentTime<=0);const O=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&D);return O&&k!==qf&&(I.value=mm(f,this.options,C,this.speed)),b&&b(I.value),O&&this.finish(),I}then(e,n){return this.finished.then(e,n)}get duration(){return Vn(this.calculatedDuration)}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Vn(e)}get time(){return Vn(this.currentTime)}set time(e){e=yi(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(pn.now());const n=this.playbackSpeed!==e;this.playbackSpeed=e,n&&(this.time=Vn(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=V_,startTime:n}=this.options;this.driver||(this.driver=e(r=>this.tick(r))),this.options.onPlay?.();const i=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=i):this.holdTime!==null?this.startTime=i-this.holdTime:this.startTime||(this.startTime=n??i),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(pn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}function sI(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const Ss=t=>t*180/Math.PI,Hf=t=>{const e=Ss(Math.atan2(t[1],t[0]));return $f(e)},oI={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:Hf,rotateZ:Hf,skewX:t=>Ss(Math.atan(t[1])),skewY:t=>Ss(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},$f=t=>(t=t%360,t<0&&(t+=360),t),b0=Hf,S0=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),k0=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),aI={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:S0,scaleY:k0,scale:t=>(S0(t)+k0(t))/2,rotateX:t=>$f(Ss(Math.atan2(t[6],t[5]))),rotateY:t=>$f(Ss(Math.atan2(-t[2],t[0]))),rotateZ:b0,rotate:b0,skewX:t=>Ss(Math.atan(t[4])),skewY:t=>Ss(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function Kf(t){return t.includes("scale")?1:0}function Gf(t,e){if(!t||t==="none")return Kf(e);const n=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let i,r;if(n)i=aI,r=n;else{const c=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);i=oI,r=c}if(!r)return Kf(e);const o=i[e],l=r[1].split(",").map(cI);return typeof o=="function"?o(l):l[o]}const lI=(t,e)=>{const{transform:n="none"}=getComputedStyle(t);return Gf(n,e)};function cI(t){return parseFloat(t.trim())}const Oo=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Lo=new Set(Oo),C0=t=>t===Do||t===Ie,uI=new Set(["x","y","z"]),dI=Oo.filter(t=>!uI.has(t));function hI(t){const e=[];return dI.forEach(n=>{const i=t.getValue(n);i!==void 0&&(e.push([n,i.get()]),i.set(n.startsWith("scale")?1:0))}),e}const ks={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>Gf(e,"x"),y:(t,{transform:e})=>Gf(e,"y")};ks.translateX=ks.x;ks.translateY=ks.y;const Cs=new Set;let Xf=!1,Yf=!1,Jf=!1;function Gk(){if(Yf){const t=Array.from(Cs).filter(i=>i.needsMeasurement),e=new Set(t.map(i=>i.element)),n=new Map;e.forEach(i=>{const r=hI(i);r.length&&(n.set(i,r),i.render())}),t.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=n.get(i);r&&r.forEach(([o,l])=>{i.getValue(o)?.set(l)})}),t.forEach(i=>i.measureEndState()),t.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}Yf=!1,Xf=!1,Cs.forEach(t=>t.complete(Jf)),Cs.clear()}function Xk(){Cs.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(Yf=!0)})}function fI(){Jf=!0,Xk(),Gk(),Jf=!1}class ym{constructor(e,n,i,r,o,l=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=n,this.name=i,this.motionValue=r,this.element=o,this.isAsync=l}scheduleResolve(){this.state="scheduled",this.isAsync?(Cs.add(this),Xf||(Xf=!0,tt.read(Xk),tt.resolveKeyframes(Gk))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:n,element:i,motionValue:r}=this;if(e[0]===null){const o=r?.get(),l=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&n){const c=i.readValue(n,l);c!=null&&(e[0]=c)}e[0]===void 0&&(e[0]=l),r&&o===void 0&&r.set(e[0])}sI(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Cs.delete(this)}cancel(){this.state==="scheduled"&&(Cs.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const pI=t=>t.startsWith("--");function mI(t,e,n){pI(e)?t.style.setProperty(e,n):t.style[e]=n}const gI=sm(()=>window.ScrollTimeline!==void 0),vI={};function yI(t,e){const n=sm(t);return()=>vI[e]??n()}const Yk=yI(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),La=([t,e,n,i])=>`cubic-bezier(${t}, ${e}, ${n}, ${i})`,T0={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:La([0,.65,.55,1]),circOut:La([.55,0,1,.45]),backIn:La([.31,.01,.66,-.59]),backOut:La([.33,1.53,.69,.99])};function Jk(t,e){if(t)return typeof t=="function"?Yk()?Hk(t,e):"ease-out":Ok(t)?La(t):Array.isArray(t)?t.map(n=>Jk(n,e)||T0.easeOut):T0[t]}function bI(t,e,n,{delay:i=0,duration:r=300,repeat:o=0,repeatType:l="loop",ease:c="easeOut",times:d}={},h=void 0){const f={[e]:n};d&&(f.offset=d);const m=Jk(c,r);Array.isArray(m)&&(f.easing=m);const v={delay:i,duration:r,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:o+1,direction:l==="reverse"?"alternate":"normal"};return h&&(v.pseudoElement=h),t.animate(f,v)}function Qk(t){return typeof t=="function"&&"applyToOptions"in t}function SI({type:t,...e}){return Qk(t)&&Yk()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class kI extends gm{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:n,name:i,keyframes:r,pseudoElement:o,allowFlatten:l=!1,finalKeyframe:c,onComplete:d}=e;this.isPseudoElement=!!o,this.allowFlatten=l,this.options=e,rm(typeof e.type!="string");const h=SI(e);this.animation=bI(n,i,r,h,o),h.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!o){const f=mm(r,this.options,c,this.speed);this.updateMotionValue?this.updateMotionValue(f):mI(n,i,f),this.animation.cancel()}d?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Vn(Number(e))}get iterationDuration(){const{delay:e=0}=this.options||{};return this.duration+Vn(e)}get time(){return Vn(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=yi(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&gI()?(this.animation.timeline=e,Wn):n(this)}}const Zk={anticipate:Ak,backInOut:Ik,circInOut:Nk};function CI(t){return t in Zk}function TI(t){typeof t.ease=="string"&&CI(t.ease)&&(t.ease=Zk[t.ease])}const w0=10;class wI extends kI{constructor(e){TI(e),Kk(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:n,onUpdate:i,onComplete:r,element:o,...l}=this.options;if(!n)return;if(e!==void 0){n.set(e);return}const c=new vm({...l,autoplay:!1}),d=yi(this.finishedTime??this.time);n.setWithVelocity(c.sample(d-w0).value,c.sample(d).value,w0),c.stop()}}const x0=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ur.test(t)||t==="0")&&!t.startsWith("url("));function xI(t){const e=t[0];if(t.length===1)return!0;for(let n=0;n<t.length;n++)if(t[n]!==e)return!0}function EI(t,e,n,i){const r=t[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const o=t[t.length-1],l=x0(r,e),c=x0(o,e);return!l||!c?!1:xI(t)||(n==="spring"||Qk(n))&&i}function Qf(t){t.duration=0,t.type="keyframes"}const PI=new Set(["opacity","clipPath","filter","transform"]),RI=sm(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function _I(t){const{motionValue:e,name:n,repeatDelay:i,repeatType:r,damping:o,type:l}=t;if(!(e?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:d,transformTemplate:h}=e.owner.getProps();return RI()&&n&&PI.has(n)&&(n!=="transform"||!h)&&!d&&!i&&r!=="mirror"&&o!==0&&l!=="inertia"}const II=40;class AI extends gm{constructor({autoplay:e=!0,delay:n=0,type:i="keyframes",repeat:r=0,repeatDelay:o=0,repeatType:l="loop",keyframes:c,name:d,motionValue:h,element:f,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=pn.now();const v={autoplay:e,delay:n,type:i,repeat:r,repeatDelay:o,repeatType:l,name:d,motionValue:h,element:f,...m},S=f?.KeyframeResolver||ym;this.keyframeResolver=new S(c,(k,b,C)=>this.onKeyframesResolved(k,b,v,!C),d,h,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,n,i,r){this.keyframeResolver=void 0;const{name:o,type:l,velocity:c,delay:d,isHandoff:h,onUpdate:f}=i;this.resolvedAt=pn.now(),EI(e,o,l,c)||((Gi.instantAnimations||!d)&&f?.(mm(e,i,n)),e[0]=e[e.length-1],Qf(i),i.repeat=0);const v={startTime:r?this.resolvedAt?this.resolvedAt-this.createdAt>II?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...i,keyframes:e},S=!h&&_I(v)?new wI({...v,element:v.motionValue.owner.current}):new vm(v);S.finished.then(()=>this.notifyFinished()).catch(Wn),this.pendingTimeline&&(this.stopTimeline=S.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=S}get finished(){return this._animation?this.animation.finished:this._finished}then(e,n){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),fI()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const MI=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function NI(t){const e=MI.exec(t);if(!e)return[,];const[,n,i,r]=e;return[`--${n??i}`,r]}function eC(t,e,n=1){const[i,r]=NI(t);if(!i)return;const o=window.getComputedStyle(e).getPropertyValue(i);if(o){const l=o.trim();return Ck(l)?parseFloat(l):l}return um(r)?eC(r,e,n+1):r}function bm(t,e){return t?.[e]??t?.default??t}const tC=new Set(["width","height","top","left","right","bottom",...Oo]),DI={test:t=>t==="auto",parse:t=>t},nC=t=>e=>e.test(t),iC=[Do,Ie,bi,_r,x_,w_,DI],E0=t=>iC.find(nC(t));function OI(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||wk(t):!0}const LI=new Set(["brightness","contrast","saturate","opacity"]);function FI(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[i]=n.match(dm)||[];if(!i)return t;const r=n.replace(i,"");let o=LI.has(e)?1:0;return i!==n&&(o*=100),e+"("+o+r+")"}const jI=/\b([a-z-]*)\(.*?\)/gu,Zf={...Ur,getAnimatableNone:t=>{const e=t.match(jI);return e?e.map(FI).join(" "):t}},P0={...Do,transform:Math.round},UI={rotate:_r,rotateX:_r,rotateY:_r,rotateZ:_r,scale:Nc,scaleX:Nc,scaleY:Nc,scaleZ:Nc,skew:_r,skewX:_r,skewY:_r,distance:Ie,translateX:Ie,translateY:Ie,translateZ:Ie,x:Ie,y:Ie,z:Ie,perspective:Ie,transformPerspective:Ie,opacity:Ja,originX:p0,originY:p0,originZ:Ie},Sm={borderWidth:Ie,borderTopWidth:Ie,borderRightWidth:Ie,borderBottomWidth:Ie,borderLeftWidth:Ie,borderRadius:Ie,radius:Ie,borderTopLeftRadius:Ie,borderTopRightRadius:Ie,borderBottomRightRadius:Ie,borderBottomLeftRadius:Ie,width:Ie,maxWidth:Ie,height:Ie,maxHeight:Ie,top:Ie,right:Ie,bottom:Ie,left:Ie,padding:Ie,paddingTop:Ie,paddingRight:Ie,paddingBottom:Ie,paddingLeft:Ie,margin:Ie,marginTop:Ie,marginRight:Ie,marginBottom:Ie,marginLeft:Ie,backgroundPositionX:Ie,backgroundPositionY:Ie,...UI,zIndex:P0,fillOpacity:Ja,strokeOpacity:Ja,numOctaves:P0},BI={...Sm,color:bt,backgroundColor:bt,outlineColor:bt,fill:bt,stroke:bt,borderColor:bt,borderTopColor:bt,borderRightColor:bt,borderBottomColor:bt,borderLeftColor:bt,filter:Zf,WebkitFilter:Zf},rC=t=>BI[t];function sC(t,e){let n=rC(t);return n!==Zf&&(n=Ur),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const VI=new Set(["auto","none","0"]);function zI(t,e,n){let i=0,r;for(;i<t.length&&!r;){const o=t[i];typeof o=="string"&&!VI.has(o)&&Qa(o).values.length&&(r=t[i]),i++}if(r&&n)for(const o of e)t[o]=sC(n,r)}class WI extends ym{constructor(e,n,i,r,o){super(e,n,i,r,o,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:n,name:i}=this;if(!n||!n.current)return;super.readKeyframes();for(let d=0;d<e.length;d++){let h=e[d];if(typeof h=="string"&&(h=h.trim(),um(h))){const f=eC(h,n.current);f!==void 0&&(e[d]=f),d===e.length-1&&(this.finalKeyframe=h)}}if(this.resolveNoneKeyframes(),!tC.has(i)||e.length!==2)return;const[r,o]=e,l=E0(r),c=E0(o);if(l!==c)if(C0(l)&&C0(c))for(let d=0;d<e.length;d++){const h=e[d];typeof h=="string"&&(e[d]=parseFloat(h))}else ks[i]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:n}=this,i=[];for(let r=0;r<e.length;r++)(e[r]===null||OI(e[r]))&&i.push(r);i.length&&zI(e,i,n)}measureInitialState(){const{element:e,unresolvedKeyframes:n,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=ks[i](e.measureViewportBox(),window.getComputedStyle(e.current)),n[0]=this.measuredOrigin;const r=n[n.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){const{element:e,name:n,unresolvedKeyframes:i}=this;if(!e||!e.current)return;const r=e.getValue(n);r&&r.jump(this.measuredOrigin,!1);const o=i.length-1,l=i[o];i[o]=ks[n](e.measureViewportBox(),window.getComputedStyle(e.current)),l!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=l),this.removedTransforms?.length&&this.removedTransforms.forEach(([c,d])=>{e.getValue(c).set(d)}),this.resolveNoneKeyframes()}}function qI(t,e,n){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let i=document;const r=n?.[t]??i.querySelectorAll(t);return r?Array.from(r):[]}return Array.from(t)}const oC=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function aC(t){return Tk(t)&&"offsetHeight"in t}const R0=30,HI=t=>!isNaN(parseFloat(t));class $I{constructor(e,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=i=>{const r=pn.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=n.owner}setCurrent(e){this.current=e,this.updatedAt=pn.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=HI(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new om);const i=this.events[e].add(n);return e==="change"?()=>{i(),tt.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,n,i){this.set(n),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,n=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=pn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>R0)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,R0);return xk(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function _o(t,e){return new $I(t,e)}const{schedule:km}=Lk(queueMicrotask,!1),Qn={x:!1,y:!1};function lC(){return Qn.x||Qn.y}function KI(t){return t==="x"||t==="y"?Qn[t]?null:(Qn[t]=!0,()=>{Qn[t]=!1}):Qn.x||Qn.y?null:(Qn.x=Qn.y=!0,()=>{Qn.x=Qn.y=!1})}function cC(t,e){const n=qI(t),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[n,r,()=>i.abort()]}function _0(t){return!(t.pointerType==="touch"||lC())}function GI(t,e,n={}){const[i,r,o]=cC(t,n),l=c=>{if(!_0(c))return;const{target:d}=c,h=e(d,c);if(typeof h!="function"||!d)return;const f=m=>{_0(m)&&(h(m),d.removeEventListener("pointerleave",f))};d.addEventListener("pointerleave",f,r)};return i.forEach(c=>{c.addEventListener("pointerenter",l,r)}),o}const uC=(t,e)=>e?t===e?!0:uC(t,e.parentElement):!1,Cm=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,XI=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function YI(t){return XI.has(t.tagName)||t.tabIndex!==-1}const Gc=new WeakSet;function I0(t){return e=>{e.key==="Enter"&&t(e)}}function Zh(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const JI=(t,e)=>{const n=t.currentTarget;if(!n)return;const i=I0(()=>{if(Gc.has(n))return;Zh(n,"down");const r=I0(()=>{Zh(n,"up")}),o=()=>Zh(n,"cancel");n.addEventListener("keyup",r,e),n.addEventListener("blur",o,e)});n.addEventListener("keydown",i,e),n.addEventListener("blur",()=>n.removeEventListener("keydown",i),e)};function A0(t){return Cm(t)&&!lC()}function QI(t,e,n={}){const[i,r,o]=cC(t,n),l=c=>{const d=c.currentTarget;if(!A0(c))return;Gc.add(d);const h=e(d,c),f=(S,k)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",v),Gc.has(d)&&Gc.delete(d),A0(S)&&typeof h=="function"&&h(S,{success:k})},m=S=>{f(S,d===window||d===document||n.useGlobalTarget||uC(d,S.target))},v=S=>{f(S,!1)};window.addEventListener("pointerup",m,r),window.addEventListener("pointercancel",v,r)};return i.forEach(c=>{(n.useGlobalTarget?window:c).addEventListener("pointerdown",l,r),aC(c)&&(c.addEventListener("focus",h=>JI(h,r)),!YI(c)&&!c.hasAttribute("tabindex")&&(c.tabIndex=0))}),o}function dC(t){return Tk(t)&&"ownerSVGElement"in t}function ZI(t){return dC(t)&&t.tagName==="svg"}const Gt=t=>!!(t&&t.getVelocity),eA=[...iC,bt,Ur],tA=t=>eA.find(nC(t)),Tm=x.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});function M0(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function nA(...t){return e=>{let n=!1;const i=t.map(r=>{const o=M0(r,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let r=0;r<i.length;r++){const o=i[r];typeof o=="function"?o():M0(t[r],null)}}}}function iA(...t){return x.useCallback(nA(...t),t)}class rA extends x.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const i=n.offsetParent,r=aC(i)&&i.offsetWidth||0,o=this.props.sizeRef.current;o.height=n.offsetHeight||0,o.width=n.offsetWidth||0,o.top=n.offsetTop,o.left=n.offsetLeft,o.right=r-o.width-o.left}return null}componentDidUpdate(){}render(){return this.props.children}}function sA({children:t,isPresent:e,anchorX:n,root:i}){const r=x.useId(),o=x.useRef(null),l=x.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=x.useContext(Tm),d=iA(o,t?.ref);return x.useInsertionEffect(()=>{const{width:h,height:f,top:m,left:v,right:S}=l.current;if(e||!o.current||!h||!f)return;const k=n==="left"?`left: ${v}`:`right: ${S}`;o.current.dataset.motionPopId=r;const b=document.createElement("style");c&&(b.nonce=c);const C=i??document.head;return C.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${h}px !important;
            height: ${f}px !important;
            ${k}px !important;
            top: ${m}px !important;
          }
        `),()=>{C.contains(b)&&C.removeChild(b)}},[e]),E.jsx(rA,{isPresent:e,childRef:o,sizeRef:l,children:x.cloneElement(t,{ref:d})})}const oA=({children:t,initial:e,isPresent:n,onExitComplete:i,custom:r,presenceAffectsLayout:o,mode:l,anchorX:c,root:d})=>{const h=em(aA),f=x.useId();let m=!0,v=x.useMemo(()=>(m=!1,{id:f,initial:e,isPresent:n,custom:r,onExitComplete:S=>{h.set(S,!0);for(const k of h.values())if(!k)return;i&&i()},register:S=>(h.set(S,!1),()=>h.delete(S))}),[n,h,i]);return o&&m&&(v={...v}),x.useMemo(()=>{h.forEach((S,k)=>h.set(k,!1))},[n]),x.useEffect(()=>{!n&&!h.size&&i&&i()},[n]),l==="popLayout"&&(t=E.jsx(sA,{isPresent:n,anchorX:c,root:d,children:t})),E.jsx(ju.Provider,{value:v,children:t})};function aA(){return new Map}function hC(t=!0){const e=x.useContext(ju);if(e===null)return[!0,null];const{isPresent:n,onExitComplete:i,register:r}=e,o=x.useId();x.useEffect(()=>{if(t)return r(o)},[t]);const l=x.useCallback(()=>t&&i&&i(o),[o,i,t]);return!n&&i?[!1,l]:[!0]}const Dc=t=>t.key||"";function N0(t){const e=[];return x.Children.forEach(t,n=>{x.isValidElement(n)&&e.push(n)}),e}const lA=({children:t,custom:e,initial:n=!0,onExitComplete:i,presenceAffectsLayout:r=!0,mode:o="sync",propagate:l=!1,anchorX:c="left",root:d})=>{const[h,f]=hC(l),m=x.useMemo(()=>N0(t),[t]),v=l&&!h?[]:m.map(Dc),S=x.useRef(!0),k=x.useRef(m),b=em(()=>new Map),[C,T]=x.useState(m),[_,R]=x.useState(m);kk(()=>{S.current=!1,k.current=m;for(let D=0;D<_.length;D++){const O=Dc(_[D]);v.includes(O)?b.delete(O):b.get(O)!==!0&&b.set(O,!1)}},[_,v.length,v.join("-")]);const P=[];if(m!==C){let D=[...m];for(let O=0;O<_.length;O++){const N=_[O],q=Dc(N);v.includes(q)||(D.splice(O,0,N),P.push(N))}return o==="wait"&&P.length&&(D=P),R(N0(D)),T(m),null}const{forceRender:I}=x.useContext(Zp);return E.jsx(E.Fragment,{children:_.map(D=>{const O=Dc(D),N=l&&!h?!1:m===_||v.includes(O),q=()=>{if(b.has(O))b.set(O,!0);else return;let H=!0;b.forEach(G=>{G||(H=!1)}),H&&(I?.(),R(k.current),l&&f?.(),i&&i())};return E.jsx(oA,{isPresent:N,initial:!S.current||n?void 0:!1,custom:e,presenceAffectsLayout:r,mode:o,root:d,onExitComplete:N?void 0:q,anchorX:c,children:D},O)})})},fC=x.createContext({strict:!1}),D0={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Io={};for(const t in D0)Io[t]={isEnabled:e=>D0[t].some(n=>!!e[n])};function cA(t){for(const e in t)Io[e]={...Io[e],...t[e]}}const uA=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function gu(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||uA.has(t)}let pC=t=>!gu(t);function dA(t){typeof t=="function"&&(pC=e=>e.startsWith("on")?!gu(e):t(e))}try{dA(require("@emotion/is-prop-valid").default)}catch{}function hA(t,e,n){const i={};for(const r in t)r==="values"&&typeof t.values=="object"||(pC(r)||n===!0&&gu(r)||!e&&!gu(r)||t.draggable&&r.startsWith("onDrag"))&&(i[r]=t[r]);return i}const Uu=x.createContext({});function Bu(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function Za(t){return typeof t=="string"||Array.isArray(t)}const wm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],xm=["initial",...wm];function Vu(t){return Bu(t.animate)||xm.some(e=>Za(t[e]))}function mC(t){return!!(Vu(t)||t.variants)}function fA(t,e){if(Vu(t)){const{initial:n,animate:i}=t;return{initial:n===!1||Za(n)?n:void 0,animate:Za(i)?i:void 0}}return t.inherit!==!1?e:{}}function pA(t){const{initial:e,animate:n}=fA(t,x.useContext(Uu));return x.useMemo(()=>({initial:e,animate:n}),[O0(e),O0(n)])}function O0(t){return Array.isArray(t)?t.join(" "):t}const el={};function mA(t){for(const e in t)el[e]=t[e],cm(e)&&(el[e].isCSSVariable=!0)}function gC(t,{layout:e,layoutId:n}){return Lo.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!el[t]||t==="opacity")}const gA={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},vA=Oo.length;function yA(t,e,n){let i="",r=!0;for(let o=0;o<vA;o++){const l=Oo[o],c=t[l];if(c===void 0)continue;let d=!0;if(typeof c=="number"?d=c===(l.startsWith("scale")?1:0):d=parseFloat(c)===0,!d||n){const h=oC(c,Sm[l]);if(!d){r=!1;const f=gA[l]||l;i+=`${f}(${h}) `}n&&(e[l]=h)}}return i=i.trim(),n?i=n(e,r?"":i):r&&(i="none"),i}function Em(t,e,n){const{style:i,vars:r,transformOrigin:o}=t;let l=!1,c=!1;for(const d in e){const h=e[d];if(Lo.has(d)){l=!0;continue}else if(cm(d)){r[d]=h;continue}else{const f=oC(h,Sm[d]);d.startsWith("origin")?(c=!0,o[d]=f):i[d]=f}}if(e.transform||(l||n?i.transform=yA(e,t.transform,n):i.transform&&(i.transform="none")),c){const{originX:d="50%",originY:h="50%",originZ:f=0}=o;i.transformOrigin=`${d} ${h} ${f}`}}const Pm=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function vC(t,e,n){for(const i in e)!Gt(e[i])&&!gC(i,n)&&(t[i]=e[i])}function bA({transformTemplate:t},e){return x.useMemo(()=>{const n=Pm();return Em(n,e,t),Object.assign({},n.vars,n.style)},[e])}function SA(t,e){const n=t.style||{},i={};return vC(i,n,t),Object.assign(i,bA(t,e)),i}function kA(t,e){const n={},i=SA(t,e);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const CA={offset:"stroke-dashoffset",array:"stroke-dasharray"},TA={offset:"strokeDashoffset",array:"strokeDasharray"};function wA(t,e,n=1,i=0,r=!0){t.pathLength=1;const o=r?CA:TA;t[o.offset]=Ie.transform(-i);const l=Ie.transform(e),c=Ie.transform(n);t[o.array]=`${l} ${c}`}function yC(t,{attrX:e,attrY:n,attrScale:i,pathLength:r,pathSpacing:o=1,pathOffset:l=0,...c},d,h,f){if(Em(t,c,h),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:m,style:v}=t;m.transform&&(v.transform=m.transform,delete m.transform),(v.transform||m.transformOrigin)&&(v.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),v.transform&&(v.transformBox=f?.transformBox??"fill-box",delete m.transformBox),e!==void 0&&(m.x=e),n!==void 0&&(m.y=n),i!==void 0&&(m.scale=i),r!==void 0&&wA(m,r,o,l,!1)}const bC=()=>({...Pm(),attrs:{}}),SC=t=>typeof t=="string"&&t.toLowerCase()==="svg";function xA(t,e,n,i){const r=x.useMemo(()=>{const o=bC();return yC(o,e,SC(i),t.transformTemplate,t.style),{...o.attrs,style:{...o.style}}},[e]);if(t.style){const o={};vC(o,t.style,t),r.style={...o,...r.style}}return r}const EA=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Rm(t){return typeof t!="string"||t.includes("-")?!1:!!(EA.indexOf(t)>-1||/[A-Z]/u.test(t))}function PA(t,e,n,{latestValues:i},r,o=!1){const c=(Rm(t)?xA:kA)(e,i,r,t),d=hA(e,typeof t=="string",o),h=t!==x.Fragment?{...d,...c,ref:n}:{},{children:f}=e,m=x.useMemo(()=>Gt(f)?f.get():f,[f]);return x.createElement(t,{...h,children:m})}function L0(t){const e=[{},{}];return t?.values.forEach((n,i)=>{e[0][i]=n.get(),e[1][i]=n.getVelocity()}),e}function _m(t,e,n,i){if(typeof e=="function"){const[r,o]=L0(i);e=e(n!==void 0?n:t.custom,r,o)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[r,o]=L0(i);e=e(n!==void 0?n:t.custom,r,o)}return e}function Xc(t){return Gt(t)?t.get():t}function RA({scrapeMotionValuesFromProps:t,createRenderState:e},n,i,r){return{latestValues:_A(n,i,r,t),renderState:e()}}function _A(t,e,n,i){const r={},o=i(t,{});for(const v in o)r[v]=Xc(o[v]);let{initial:l,animate:c}=t;const d=Vu(t),h=mC(t);e&&h&&!d&&t.inherit!==!1&&(l===void 0&&(l=e.initial),c===void 0&&(c=e.animate));let f=n?n.initial===!1:!1;f=f||l===!1;const m=f?c:l;if(m&&typeof m!="boolean"&&!Bu(m)){const v=Array.isArray(m)?m:[m];for(let S=0;S<v.length;S++){const k=_m(t,v[S]);if(k){const{transitionEnd:b,transition:C,...T}=k;for(const _ in T){let R=T[_];if(Array.isArray(R)){const P=f?R.length-1:0;R=R[P]}R!==null&&(r[_]=R)}for(const _ in b)r[_]=b[_]}}}return r}const kC=t=>(e,n)=>{const i=x.useContext(Uu),r=x.useContext(ju),o=()=>RA(t,e,i,r);return n?o():em(o)};function Im(t,e,n){const{style:i}=t,r={};for(const o in i)(Gt(i[o])||e.style&&Gt(e.style[o])||gC(o,t)||n?.getValue(o)?.liveStyle!==void 0)&&(r[o]=i[o]);return r}const IA=kC({scrapeMotionValuesFromProps:Im,createRenderState:Pm});function CC(t,e,n){const i=Im(t,e,n);for(const r in t)if(Gt(t[r])||Gt(e[r])){const o=Oo.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[o]=t[r]}return i}const AA=kC({scrapeMotionValuesFromProps:CC,createRenderState:bC}),MA=Symbol.for("motionComponentSymbol");function ho(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function NA(t,e,n){return x.useCallback(i=>{i&&t.onMount&&t.onMount(i),e&&(i?e.mount(i):e.unmount()),n&&(typeof n=="function"?n(i):ho(n)&&(n.current=i))},[e])}const Am=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),DA="framerAppearId",TC="data-"+Am(DA),wC=x.createContext({});function OA(t,e,n,i,r){const{visualElement:o}=x.useContext(Uu),l=x.useContext(fC),c=x.useContext(ju),d=x.useContext(Tm).reducedMotion,h=x.useRef(null);i=i||l.renderer,!h.current&&i&&(h.current=i(t,{visualState:e,parent:o,props:n,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:d}));const f=h.current,m=x.useContext(wC);f&&!f.projection&&r&&(f.type==="html"||f.type==="svg")&&LA(h.current,n,r,m);const v=x.useRef(!1);x.useInsertionEffect(()=>{f&&v.current&&f.update(n,c)});const S=n[TC],k=x.useRef(!!S&&!window.MotionHandoffIsComplete?.(S)&&window.MotionHasOptimisedAnimation?.(S));return kk(()=>{f&&(v.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),k.current&&f.animationState&&f.animationState.animateChanges())}),x.useEffect(()=>{f&&(!k.current&&f.animationState&&f.animationState.animateChanges(),k.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(S)}),k.current=!1),f.enteringChildren=void 0)}),f}function LA(t,e,n,i){const{layoutId:r,layout:o,drag:l,dragConstraints:c,layoutScroll:d,layoutRoot:h,layoutCrossfade:f}=e;t.projection=new n(t.latestValues,e["data-framer-portal-id"]?void 0:xC(t.parent)),t.projection.setOptions({layoutId:r,layout:o,alwaysMeasureLayout:!!l||c&&ho(c),visualElement:t,animationType:typeof o=="string"?o:"both",initialPromotionConfig:i,crossfade:f,layoutScroll:d,layoutRoot:h})}function xC(t){if(t)return t.options.allowProjection!==!1?t.projection:xC(t.parent)}function ef(t,{forwardMotionProps:e=!1}={},n,i){n&&cA(n);const r=Rm(t)?AA:IA;function o(c,d){let h;const f={...x.useContext(Tm),...c,layoutId:FA(c)},{isStatic:m}=f,v=pA(c),S=r(c,m);if(!m&&tm){jA();const k=UA(f);h=k.MeasureLayout,v.visualElement=OA(t,S,f,i,k.ProjectionNode)}return E.jsxs(Uu.Provider,{value:v,children:[h&&v.visualElement?E.jsx(h,{visualElement:v.visualElement,...f}):null,PA(t,c,NA(S,v.visualElement,d),S,m,e)]})}o.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const l=x.forwardRef(o);return l[MA]=t,l}function FA({layoutId:t}){const e=x.useContext(Zp).id;return e&&t!==void 0?e+"-"+t:t}function jA(t,e){x.useContext(fC).strict}function UA(t){const{drag:e,layout:n}=Io;if(!e&&!n)return{};const i={...e,...n};return{MeasureLayout:e?.isEnabled(t)||n?.isEnabled(t)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}function BA(t,e){if(typeof Proxy>"u")return ef;const n=new Map,i=(o,l)=>ef(o,l,t,e),r=(o,l)=>i(o,l);return new Proxy(r,{get:(o,l)=>l==="create"?i:(n.has(l)||n.set(l,ef(l,void 0,t,e)),n.get(l))})}function EC({top:t,left:e,right:n,bottom:i}){return{x:{min:e,max:n},y:{min:t,max:i}}}function VA({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function zA(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),i=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:i.y,right:i.x}}function tf(t){return t===void 0||t===1}function ep({scale:t,scaleX:e,scaleY:n}){return!tf(t)||!tf(e)||!tf(n)}function ms(t){return ep(t)||PC(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function PC(t){return F0(t.x)||F0(t.y)}function F0(t){return t&&t!=="0%"}function vu(t,e,n){const i=t-n,r=e*i;return n+r}function j0(t,e,n,i,r){return r!==void 0&&(t=vu(t,r,i)),vu(t,n,i)+e}function tp(t,e=0,n=1,i,r){t.min=j0(t.min,e,n,i,r),t.max=j0(t.max,e,n,i,r)}function RC(t,{x:e,y:n}){tp(t.x,e.translate,e.scale,e.originPoint),tp(t.y,n.translate,n.scale,n.originPoint)}const U0=.999999999999,B0=1.0000000000001;function WA(t,e,n,i=!1){const r=n.length;if(!r)return;e.x=e.y=1;let o,l;for(let c=0;c<r;c++){o=n[c],l=o.projectionDelta;const{visualElement:d}=o.options;d&&d.props.style&&d.props.style.display==="contents"||(i&&o.options.layoutScroll&&o.scroll&&o!==o.root&&po(t,{x:-o.scroll.offset.x,y:-o.scroll.offset.y}),l&&(e.x*=l.x.scale,e.y*=l.y.scale,RC(t,l)),i&&ms(o.latestValues)&&po(t,o.latestValues))}e.x<B0&&e.x>U0&&(e.x=1),e.y<B0&&e.y>U0&&(e.y=1)}function fo(t,e){t.min=t.min+e,t.max=t.max+e}function V0(t,e,n,i,r=.5){const o=ot(t.min,t.max,r);tp(t,e,n,o,i)}function po(t,e){V0(t.x,e.x,e.scaleX,e.scale,e.originX),V0(t.y,e.y,e.scaleY,e.scale,e.originY)}function _C(t,e){return EC(zA(t.getBoundingClientRect(),e))}function qA(t,e,n){const i=_C(t,n),{scroll:r}=e;return r&&(fo(i.x,r.offset.x),fo(i.y,r.offset.y)),i}const z0=()=>({translate:0,scale:1,origin:0,originPoint:0}),mo=()=>({x:z0(),y:z0()}),W0=()=>({min:0,max:0}),mt=()=>({x:W0(),y:W0()}),np={current:null},IC={current:!1};function HA(){if(IC.current=!0,!!tm)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>np.current=t.matches;t.addEventListener("change",e),e()}else np.current=!1}const $A=new WeakMap;function KA(t,e,n){for(const i in e){const r=e[i],o=n[i];if(Gt(r))t.addValue(i,r);else if(Gt(o))t.addValue(i,_o(r,{owner:t}));else if(o!==r)if(t.hasValue(i)){const l=t.getValue(i);l.liveStyle===!0?l.jump(r):l.hasAnimated||l.set(r)}else{const l=t.getStaticValue(i);t.addValue(i,_o(l!==void 0?l:r,{owner:t}))}}for(const i in n)e[i]===void 0&&t.removeValue(i);return e}const q0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class GA{scrapeMotionValuesFromProps(e,n,i){return{}}constructor({parent:e,props:n,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:o,visualState:l},c={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=ym,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const v=pn.now();this.renderScheduledAt<v&&(this.renderScheduledAt=v,tt.render(this.render,!1,!0))};const{latestValues:d,renderState:h}=l;this.latestValues=d,this.baseTarget={...d},this.initialValues=n.initial?{...d}:{},this.renderState=h,this.parent=e,this.props=n,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=c,this.blockInitialAnimation=!!o,this.isControllingVariants=Vu(n),this.isVariantNode=mC(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const v in m){const S=m[v];d[v]!==void 0&&Gt(S)&&S.set(d[v])}}mount(e){this.current=e,$A.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,i)=>this.bindToMotionValue(i,n)),IC.current||HA(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:np.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),jr(this.notifyUpdate),jr(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const n=this.features[e];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,n){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=Lo.has(e);i&&this.onBindTransform&&this.onBindTransform();const r=n.on("change",l=>{this.latestValues[e]=l,this.props.onUpdate&&tt.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,n)),this.valueSubscriptions.set(e,()=>{r(),o&&o(),n.owner&&n.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Io){const n=Io[e];if(!n)continue;const{isEnabled:i,Feature:r}=n;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const o=this.features[e];o.isMounted?o.update():(o.mount(),o.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):mt()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let i=0;i<q0.length;i++){const r=q0[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const o="on"+r,l=e[o];l&&(this.propEventSubscriptions[r]=this.on(r,l))}this.prevMotionValues=KA(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){const i=this.values.get(e);n!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,n),this.values.set(e,n),this.latestValues[e]=n.get())}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&n!==void 0&&(i=_o(n===null?void 0:n,{owner:this}),this.addValue(e,i)),i}readValue(e,n){let i=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return i!=null&&(typeof i=="string"&&(Ck(i)||wk(i))?i=parseFloat(i):!tA(i)&&Ur.test(n)&&(i=sC(e,n)),this.setBaseTarget(e,Gt(i)?i.get():i)),Gt(i)?i.get():i}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){const{initial:n}=this.props;let i;if(typeof n=="string"||typeof n=="object"){const o=_m(this.props,n,this.presenceContext?.custom);o&&(i=o[e])}if(n&&i!==void 0)return i;const r=this.getBaseTargetFromProps(this.props,e);return r!==void 0&&!Gt(r)?r:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new om),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}scheduleRenderMicrotask(){km.render(this.render)}}class AC extends GA{constructor(){super(...arguments),this.KeyframeResolver=WI}sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:i}){delete n[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Gt(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function MC(t,{style:e,vars:n},i,r){const o=t.style;let l;for(l in e)o[l]=e[l];r?.applyProjectionStyles(o,i);for(l in n)o.setProperty(l,n[l])}function XA(t){return window.getComputedStyle(t)}class YA extends AC{constructor(){super(...arguments),this.type="html",this.renderInstance=MC}readValueFromInstance(e,n){if(Lo.has(n))return this.projection?.isProjecting?Kf(n):lI(e,n);{const i=XA(e),r=(cm(n)?i.getPropertyValue(n):i[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return _C(e,n)}build(e,n,i){Em(e,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,n,i){return Im(e,n,i)}}const NC=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function JA(t,e,n,i){MC(t,e,void 0,i);for(const r in e.attrs)t.setAttribute(NC.has(r)?r:Am(r),e.attrs[r])}class QA extends AC{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=mt}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Lo.has(n)){const i=rC(n);return i&&i.default||0}return n=NC.has(n)?n:Am(n),e.getAttribute(n)}scrapeMotionValuesFromProps(e,n,i){return CC(e,n,i)}build(e,n,i){yC(e,n,this.isSVGTag,i.transformTemplate,i.style)}renderInstance(e,n,i,r){JA(e,n,i,r)}mount(e){this.isSVGTag=SC(e.tagName),super.mount(e)}}const ZA=(t,e)=>Rm(t)?new QA(e):new YA(e,{allowProjection:t!==x.Fragment});function bo(t,e,n){const i=t.getProps();return _m(i,e,n!==void 0?n:i.custom,t)}const ip=t=>Array.isArray(t);function eM(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,_o(n))}function tM(t){return ip(t)?t[t.length-1]||0:t}function nM(t,e){const n=bo(t,e);let{transitionEnd:i={},transition:r={},...o}=n||{};o={...o,...i};for(const l in o){const c=tM(o[l]);eM(t,l,c)}}function iM(t){return!!(Gt(t)&&t.add)}function rp(t,e){const n=t.getValue("willChange");if(iM(n))return n.add(e);if(!n&&Gi.WillChange){const i=new Gi.WillChange("auto");t.addValue("willChange",i),i.add(e)}}function DC(t){return t.props[TC]}const rM=t=>t!==null;function sM(t,{repeat:e,repeatType:n="loop"},i){const r=t.filter(rM),o=e&&n!=="loop"&&e%2===1?0:r.length-1;return r[o]}const oM={type:"spring",stiffness:500,damping:25,restSpeed:10},aM=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),lM={type:"keyframes",duration:.8},cM={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},uM=(t,{keyframes:e})=>e.length>2?lM:Lo.has(t)?t.startsWith("scale")?aM(e[1]):oM:cM;function dM({when:t,delay:e,delayChildren:n,staggerChildren:i,staggerDirection:r,repeat:o,repeatType:l,repeatDelay:c,from:d,elapsed:h,...f}){return!!Object.keys(f).length}const Mm=(t,e,n,i={},r,o)=>l=>{const c=bm(i,t)||{},d=c.delay||i.delay||0;let{elapsed:h=0}=i;h=h-yi(d);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:e.getVelocity(),...c,delay:-h,onUpdate:v=>{e.set(v),c.onUpdate&&c.onUpdate(v)},onComplete:()=>{l(),c.onComplete&&c.onComplete()},name:t,motionValue:e,element:o?void 0:r};dM(c)||Object.assign(f,uM(t,f)),f.duration&&(f.duration=yi(f.duration)),f.repeatDelay&&(f.repeatDelay=yi(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let m=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(Qf(f),f.delay===0&&(m=!0)),(Gi.instantAnimations||Gi.skipAnimations)&&(m=!0,Qf(f),f.delay=0),f.allowFlatten=!c.type&&!c.ease,m&&!o&&e.get()!==void 0){const v=sM(f.keyframes,c);if(v!==void 0){tt.update(()=>{f.onUpdate(v),f.onComplete()});return}}return c.isSync?new vm(f):new AI(f)};function hM({protectedKeys:t,needsAnimating:e},n){const i=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,i}function OC(t,e,{delay:n=0,transitionOverride:i,type:r}={}){let{transition:o=t.getDefaultTransition(),transitionEnd:l,...c}=e;i&&(o=i);const d=[],h=r&&t.animationState&&t.animationState.getState()[r];for(const f in c){const m=t.getValue(f,t.latestValues[f]??null),v=c[f];if(v===void 0||h&&hM(h,f))continue;const S={delay:n,...bm(o||{},f)},k=m.get();if(k!==void 0&&!m.isAnimating&&!Array.isArray(v)&&v===k&&!S.velocity)continue;let b=!1;if(window.MotionHandoffAnimation){const T=DC(t);if(T){const _=window.MotionHandoffAnimation(T,f,tt);_!==null&&(S.startTime=_,b=!0)}}rp(t,f),m.start(Mm(f,m,v,t.shouldReduceMotion&&tC.has(f)?{type:!1}:S,t,b));const C=m.animation;C&&d.push(C)}return l&&Promise.all(d).then(()=>{tt.update(()=>{l&&nM(t,l)})}),d}function LC(t,e,n,i=0,r=1){const o=Array.from(t).sort((h,f)=>h.sortNodePosition(f)).indexOf(e),l=t.size,c=(l-1)*i;return typeof n=="function"?n(o,l):r===1?o*i:c-o*i}function sp(t,e,n={}){const i=bo(t,e,n.type==="exit"?t.presenceContext?.custom:void 0);let{transition:r=t.getDefaultTransition()||{}}=i||{};n.transitionOverride&&(r=n.transitionOverride);const o=i?()=>Promise.all(OC(t,i,n)):()=>Promise.resolve(),l=t.variantChildren&&t.variantChildren.size?(d=0)=>{const{delayChildren:h=0,staggerChildren:f,staggerDirection:m}=r;return fM(t,e,d,h,f,m,n)}:()=>Promise.resolve(),{when:c}=r;if(c){const[d,h]=c==="beforeChildren"?[o,l]:[l,o];return d().then(()=>h())}else return Promise.all([o(),l(n.delay)])}function fM(t,e,n=0,i=0,r=0,o=1,l){const c=[];for(const d of t.variantChildren)d.notify("AnimationStart",e),c.push(sp(d,e,{...l,delay:n+(typeof i=="function"?0:i)+LC(t.variantChildren,d,i,r,o)}).then(()=>d.notify("AnimationComplete",e)));return Promise.all(c)}function pM(t,e,n={}){t.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(o=>sp(t,o,n));i=Promise.all(r)}else if(typeof e=="string")i=sp(t,e,n);else{const r=typeof e=="function"?bo(t,e,n.custom):e;i=Promise.all(OC(t,r,n))}return i.then(()=>{t.notify("AnimationComplete",e)})}function FC(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(e[i]!==t[i])return!1;return!0}const mM=xm.length;function jC(t){if(!t)return;if(!t.isControllingVariants){const n=t.parent?jC(t.parent)||{}:{};return t.props.initial!==void 0&&(n.initial=t.props.initial),n}const e={};for(let n=0;n<mM;n++){const i=xm[n],r=t.props[i];(Za(r)||r===!1)&&(e[i]=r)}return e}const gM=[...wm].reverse(),vM=wm.length;function yM(t){return e=>Promise.all(e.map(({animation:n,options:i})=>pM(t,n,i)))}function bM(t){let e=yM(t),n=H0(),i=!0;const r=d=>(h,f)=>{const m=bo(t,f,d==="exit"?t.presenceContext?.custom:void 0);if(m){const{transition:v,transitionEnd:S,...k}=m;h={...h,...k,...S}}return h};function o(d){e=d(t)}function l(d){const{props:h}=t,f=jC(t.parent)||{},m=[],v=new Set;let S={},k=1/0;for(let C=0;C<vM;C++){const T=gM[C],_=n[T],R=h[T]!==void 0?h[T]:f[T],P=Za(R),I=T===d?_.isActive:null;I===!1&&(k=C);let D=R===f[T]&&R!==h[T]&&P;if(D&&i&&t.manuallyAnimateOnMount&&(D=!1),_.protectedKeys={...S},!_.isActive&&I===null||!R&&!_.prevProp||Bu(R)||typeof R=="boolean")continue;const O=SM(_.prevProp,R);let N=O||T===d&&_.isActive&&!D&&P||C>k&&P,q=!1;const H=Array.isArray(R)?R:[R];let G=H.reduce(r(T),{});I===!1&&(G={});const{prevResolvedValues:ce={}}=_,pe={...ce,...G},me=Z=>{N=!0,v.has(Z)&&(q=!0,v.delete(Z)),_.needsAnimating[Z]=!0;const U=t.getValue(Z);U&&(U.liveStyle=!1)};for(const Z in pe){const U=G[Z],re=ce[Z];if(S.hasOwnProperty(Z))continue;let Y=!1;ip(U)&&ip(re)?Y=!FC(U,re):Y=U!==re,Y?U!=null?me(Z):v.add(Z):U!==void 0&&v.has(Z)?me(Z):_.protectedKeys[Z]=!0}_.prevProp=R,_.prevResolvedValues=G,_.isActive&&(S={...S,...G}),i&&t.blockInitialAnimation&&(N=!1);const ye=D&&O;N&&(!ye||q)&&m.push(...H.map(Z=>{const U={type:T};if(typeof Z=="string"&&i&&!ye&&t.manuallyAnimateOnMount&&t.parent){const{parent:re}=t,Y=bo(re,Z);if(re.enteringChildren&&Y){const{delayChildren:F}=Y.transition||{};U.delay=LC(re.enteringChildren,t,F)}}return{animation:Z,options:U}}))}if(v.size){const C={};if(typeof h.initial!="boolean"){const T=bo(t,Array.isArray(h.initial)?h.initial[0]:h.initial);T&&T.transition&&(C.transition=T.transition)}v.forEach(T=>{const _=t.getBaseTarget(T),R=t.getValue(T);R&&(R.liveStyle=!0),C[T]=_??null}),m.push({animation:C})}let b=!!m.length;return i&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(b=!1),i=!1,b?e(m):Promise.resolve()}function c(d,h){if(n[d].isActive===h)return Promise.resolve();t.variantChildren?.forEach(m=>m.animationState?.setActive(d,h)),n[d].isActive=h;const f=l(d);for(const m in n)n[m].protectedKeys={};return f}return{animateChanges:l,setActive:c,setAnimateFunction:o,getState:()=>n,reset:()=>{n=H0()}}}function SM(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!FC(e,t):!1}function fs(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function H0(){return{animate:fs(!0),whileInView:fs(),whileHover:fs(),whileTap:fs(),whileDrag:fs(),whileFocus:fs(),exit:fs()}}class Hr{constructor(e){this.isMounted=!1,this.node=e}update(){}}class kM extends Hr{constructor(e){super(e),e.animationState||(e.animationState=bM(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Bu(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let CM=0;class TM extends Hr{constructor(){super(...arguments),this.id=CM++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);n&&!e&&r.then(()=>{n(this.id)})}mount(){const{register:e,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const wM={animation:{Feature:kM},exit:{Feature:TM}};function tl(t,e,n,i={passive:!0}){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n)}function gl(t){return{point:{x:t.pageX,y:t.pageY}}}const xM=t=>e=>Cm(e)&&t(e,gl(e));function za(t,e,n,i){return tl(t,e,xM(n),i)}const UC=1e-4,EM=1-UC,PM=1+UC,BC=.01,RM=0-BC,_M=0+BC;function tn(t){return t.max-t.min}function IM(t,e,n){return Math.abs(t-e)<=n}function $0(t,e,n,i=.5){t.origin=i,t.originPoint=ot(e.min,e.max,t.origin),t.scale=tn(n)/tn(e),t.translate=ot(n.min,n.max,t.origin)-t.originPoint,(t.scale>=EM&&t.scale<=PM||isNaN(t.scale))&&(t.scale=1),(t.translate>=RM&&t.translate<=_M||isNaN(t.translate))&&(t.translate=0)}function Wa(t,e,n,i){$0(t.x,e.x,n.x,i?i.originX:void 0),$0(t.y,e.y,n.y,i?i.originY:void 0)}function K0(t,e,n){t.min=n.min+e.min,t.max=t.min+tn(e)}function AM(t,e,n){K0(t.x,e.x,n.x),K0(t.y,e.y,n.y)}function G0(t,e,n){t.min=e.min-n.min,t.max=t.min+tn(e)}function qa(t,e,n){G0(t.x,e.x,n.x),G0(t.y,e.y,n.y)}function jn(t){return[t("x"),t("y")]}const VC=({current:t})=>t?t.ownerDocument.defaultView:null,X0=(t,e)=>Math.abs(t-e);function MM(t,e){const n=X0(t.x,e.x),i=X0(t.y,e.y);return Math.sqrt(n**2+i**2)}class zC{constructor(e,n,{transformPagePoint:i,contextWindow:r=window,dragSnapToOrigin:o=!1,distanceThreshold:l=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=rf(this.lastMoveEventInfo,this.history),S=this.startEvent!==null,k=MM(v.offset,{x:0,y:0})>=this.distanceThreshold;if(!S&&!k)return;const{point:b}=v,{timestamp:C}=Ut;this.history.push({...b,timestamp:C});const{onStart:T,onMove:_}=this.handlers;S||(T&&T(this.lastMoveEvent,v),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,v)},this.handlePointerMove=(v,S)=>{this.lastMoveEvent=v,this.lastMoveEventInfo=nf(S,this.transformPagePoint),tt.update(this.updatePoint,!0)},this.handlePointerUp=(v,S)=>{this.end();const{onEnd:k,onSessionEnd:b,resumeAnimation:C}=this.handlers;if(this.dragSnapToOrigin&&C&&C(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const T=rf(v.type==="pointercancel"?this.lastMoveEventInfo:nf(S,this.transformPagePoint),this.history);this.startEvent&&k&&k(v,T),b&&b(v,T)},!Cm(e))return;this.dragSnapToOrigin=o,this.handlers=n,this.transformPagePoint=i,this.distanceThreshold=l,this.contextWindow=r||window;const c=gl(e),d=nf(c,this.transformPagePoint),{point:h}=d,{timestamp:f}=Ut;this.history=[{...h,timestamp:f}];const{onSessionStart:m}=n;m&&m(e,rf(d,this.history)),this.removeListeners=fl(za(this.contextWindow,"pointermove",this.handlePointerMove),za(this.contextWindow,"pointerup",this.handlePointerUp),za(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),jr(this.updatePoint)}}function nf(t,e){return e?{point:e(t.point)}:t}function Y0(t,e){return{x:t.x-e.x,y:t.y-e.y}}function rf({point:t},e){return{point:t,delta:Y0(t,WC(e)),offset:Y0(t,NM(e)),velocity:DM(e,.1)}}function NM(t){return t[0]}function WC(t){return t[t.length-1]}function DM(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,i=null;const r=WC(t);for(;n>=0&&(i=t[n],!(r.timestamp-i.timestamp>yi(e)));)n--;if(!i)return{x:0,y:0};const o=Vn(r.timestamp-i.timestamp);if(o===0)return{x:0,y:0};const l={x:(r.x-i.x)/o,y:(r.y-i.y)/o};return l.x===1/0&&(l.x=0),l.y===1/0&&(l.y=0),l}function OM(t,{min:e,max:n},i){return e!==void 0&&t<e?t=i?ot(e,t,i.min):Math.max(t,e):n!==void 0&&t>n&&(t=i?ot(n,t,i.max):Math.min(t,n)),t}function J0(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function LM(t,{top:e,left:n,bottom:i,right:r}){return{x:J0(t.x,n,r),y:J0(t.y,e,i)}}function Q0(t,e){let n=e.min-t.min,i=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,i]=[i,n]),{min:n,max:i}}function FM(t,e){return{x:Q0(t.x,e.x),y:Q0(t.y,e.y)}}function jM(t,e){let n=.5;const i=tn(t),r=tn(e);return r>i?n=Ya(e.min,e.max-i,t.min):i>r&&(n=Ya(t.min,t.max-r,e.min)),Ki(0,1,n)}function UM(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const op=.35;function BM(t=op){return t===!1?t=0:t===!0&&(t=op),{x:Z0(t,"left","right"),y:Z0(t,"top","bottom")}}function Z0(t,e,n){return{min:eb(t,e),max:eb(t,n)}}function eb(t,e){return typeof t=="number"?t:t[e]||0}const VM=new WeakMap;class zM{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=mt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:n=!1,distanceThreshold:i}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const o=m=>{const{dragSnapToOrigin:v}=this.getProps();v?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(gl(m).point)},l=(m,v)=>{const{drag:S,dragPropagation:k,onDragStart:b}=this.getProps();if(S&&!k&&(this.openDragLock&&this.openDragLock(),this.openDragLock=KI(S),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=v,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),jn(T=>{let _=this.getAxisMotionValue(T).get()||0;if(bi.test(_)){const{projection:R}=this.visualElement;if(R&&R.layout){const P=R.layout.layoutBox[T];P&&(_=tn(P)*(parseFloat(_)/100))}}this.originPoint[T]=_}),b&&tt.postRender(()=>b(m,v)),rp(this.visualElement,"transform");const{animationState:C}=this.visualElement;C&&C.setActive("whileDrag",!0)},c=(m,v)=>{this.latestPointerEvent=m,this.latestPanInfo=v;const{dragPropagation:S,dragDirectionLock:k,onDirectionLock:b,onDrag:C}=this.getProps();if(!S&&!this.openDragLock)return;const{offset:T}=v;if(k&&this.currentDirection===null){this.currentDirection=WM(T),this.currentDirection!==null&&b&&b(this.currentDirection);return}this.updateAxis("x",v.point,T),this.updateAxis("y",v.point,T),this.visualElement.render(),C&&C(m,v)},d=(m,v)=>{this.latestPointerEvent=m,this.latestPanInfo=v,this.stop(m,v),this.latestPointerEvent=null,this.latestPanInfo=null},h=()=>jn(m=>this.getAnimationState(m)==="paused"&&this.getAxisMotionValue(m).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new zC(e,{onSessionStart:o,onStart:l,onMove:c,onSessionEnd:d,resumeAnimation:h},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:i,contextWindow:VC(this.visualElement)})}stop(e,n){const i=e||this.latestPointerEvent,r=n||this.latestPanInfo,o=this.isDragging;if(this.cancel(),!o||!r||!i)return;const{velocity:l}=r;this.startAnimation(l);const{onDragEnd:c}=this.getProps();c&&tt.postRender(()=>c(i,r))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,i){const{drag:r}=this.getProps();if(!i||!Oc(e,r,this.currentDirection))return;const o=this.getAxisMotionValue(e);let l=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(l=OM(l,this.constraints[e],this.elastic[e])),o.set(l)}resolveConstraints(){const{dragConstraints:e,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,r=this.constraints;e&&ho(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&i?this.constraints=LM(i.layoutBox,e):this.constraints=!1,this.elastic=BM(n),r!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&jn(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=UM(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ho(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const o=qA(i,r.root,this.visualElement.getTransformPagePoint());let l=FM(r.layout.layoutBox,o);if(n){const c=n(VA(l));this.hasMutatedConstraints=!!c,c&&(l=EC(c))}return l}startAnimation(e){const{drag:n,dragMomentum:i,dragElastic:r,dragTransition:o,dragSnapToOrigin:l,onDragTransitionEnd:c}=this.getProps(),d=this.constraints||{},h=jn(f=>{if(!Oc(f,n,this.currentDirection))return;let m=d&&d[f]||{};l&&(m={min:0,max:0});const v=r?200:1e6,S=r?40:1e7,k={type:"inertia",velocity:i?e[f]:0,bounceStiffness:v,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...o,...m};return this.startAxisValueAnimation(f,k)});return Promise.all(h).then(c)}startAxisValueAnimation(e,n){const i=this.getAxisMotionValue(e);return rp(this.visualElement,e),i.start(Mm(e,i,0,n,this.visualElement,!1))}stopAnimation(){jn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){jn(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const n=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[n];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){jn(n=>{const{drag:i}=this.getProps();if(!Oc(n,i,this.currentDirection))return;const{projection:r}=this.visualElement,o=this.getAxisMotionValue(n);if(r&&r.layout){const{min:l,max:c}=r.layout.layoutBox[n];o.set(e[n]-ot(l,c,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:i}=this.visualElement;if(!ho(n)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};jn(l=>{const c=this.getAxisMotionValue(l);if(c&&this.constraints!==!1){const d=c.get();r[l]=jM({min:d,max:d},this.constraints[l])}});const{transformTemplate:o}=this.visualElement.getProps();this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),jn(l=>{if(!Oc(l,e,null))return;const c=this.getAxisMotionValue(l),{min:d,max:h}=this.constraints[l];c.set(ot(d,h,r[l]))})}addListeners(){if(!this.visualElement.current)return;VM.set(this.visualElement,this);const e=this.visualElement.current,n=za(e,"pointerdown",d=>{const{drag:h,dragListener:f=!0}=this.getProps();h&&f&&this.start(d)}),i=()=>{const{dragConstraints:d}=this.getProps();ho(d)&&d.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,o=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),tt.read(i);const l=tl(window,"resize",()=>this.scalePositionWithinConstraints()),c=r.addEventListener("didUpdate",(({delta:d,hasLayoutChanged:h})=>{this.isDragging&&h&&(jn(f=>{const m=this.getAxisMotionValue(f);m&&(this.originPoint[f]+=d[f].translate,m.set(m.get()+d[f].translate))}),this.visualElement.render())}));return()=>{l(),n(),o(),c&&c()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:o=!1,dragElastic:l=op,dragMomentum:c=!0}=e;return{...e,drag:n,dragDirectionLock:i,dragPropagation:r,dragConstraints:o,dragElastic:l,dragMomentum:c}}}function Oc(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function WM(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class qM extends Hr{constructor(e){super(e),this.removeGroupControls=Wn,this.removeListeners=Wn,this.controls=new zM(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Wn}unmount(){this.removeGroupControls(),this.removeListeners()}}const tb=t=>(e,n)=>{t&&tt.postRender(()=>t(e,n))};class HM extends Hr{constructor(){super(...arguments),this.removePointerDownListener=Wn}onPointerDown(e){this.session=new zC(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:VC(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:tb(e),onStart:tb(n),onMove:i,onEnd:(o,l)=>{delete this.session,r&&tt.postRender(()=>r(o,l))}}}mount(){this.removePointerDownListener=za(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Yc={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function nb(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const Ra={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(Ie.test(t))t=parseFloat(t);else return t;const n=nb(t,e.target.x),i=nb(t,e.target.y);return`${n}% ${i}%`}},$M={correct:(t,{treeScale:e,projectionDelta:n})=>{const i=t,r=Ur.parse(t);if(r.length>5)return i;const o=Ur.createTransformer(t),l=typeof r[0]!="number"?1:0,c=n.x.scale*e.x,d=n.y.scale*e.y;r[0+l]/=c,r[1+l]/=d;const h=ot(c,d,.5);return typeof r[2+l]=="number"&&(r[2+l]/=h),typeof r[3+l]=="number"&&(r[3+l]/=h),o(r)}};let sf=!1;class KM extends x.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i,layoutId:r}=this.props,{projection:o}=e;mA(GM),o&&(n.group&&n.group.add(o),i&&i.register&&r&&i.register(o),sf&&o.root.didUpdate(),o.addEventListener("animationComplete",()=>{this.safeToRemove()}),o.setOptions({...o.options,onExitComplete:()=>this.safeToRemove()})),Yc.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:i,drag:r,isPresent:o}=this.props,{projection:l}=i;return l&&(l.isPresent=o,sf=!0,r||e.layoutDependency!==n||n===void 0||e.isPresent!==o?l.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?l.promote():l.relegate()||tt.postRender(()=>{const c=l.getStack();(!c||!c.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),km.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:i}=this.props,{projection:r}=e;sf=!0,r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function qC(t){const[e,n]=hC(),i=x.useContext(Zp);return E.jsx(KM,{...t,layoutGroup:i,switchLayoutGroup:x.useContext(wC),isPresent:e,safeToRemove:n})}const GM={borderRadius:{...Ra,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ra,borderTopRightRadius:Ra,borderBottomLeftRadius:Ra,borderBottomRightRadius:Ra,boxShadow:$M};function XM(t,e,n){const i=Gt(t)?t:_o(t);return i.start(Mm("",i,e,n)),i.animation}const YM=(t,e)=>t.depth-e.depth;class JM{constructor(){this.children=[],this.isDirty=!1}add(e){nm(this.children,e),this.isDirty=!0}remove(e){im(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(YM),this.isDirty=!1,this.children.forEach(e)}}function QM(t,e){const n=pn.now(),i=({timestamp:r})=>{const o=r-n;o>=e&&(jr(i),t(o-e))};return tt.setup(i,!0),()=>jr(i)}const HC=["TopLeft","TopRight","BottomLeft","BottomRight"],ZM=HC.length,ib=t=>typeof t=="string"?parseFloat(t):t,rb=t=>typeof t=="number"||Ie.test(t);function eN(t,e,n,i,r,o){r?(t.opacity=ot(0,n.opacity??1,tN(i)),t.opacityExit=ot(e.opacity??1,0,nN(i))):o&&(t.opacity=ot(e.opacity??1,n.opacity??1,i));for(let l=0;l<ZM;l++){const c=`border${HC[l]}Radius`;let d=sb(e,c),h=sb(n,c);if(d===void 0&&h===void 0)continue;d||(d=0),h||(h=0),d===0||h===0||rb(d)===rb(h)?(t[c]=Math.max(ot(ib(d),ib(h),i),0),(bi.test(h)||bi.test(d))&&(t[c]+="%")):t[c]=h}(e.rotate||n.rotate)&&(t.rotate=ot(e.rotate||0,n.rotate||0,i))}function sb(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const tN=$C(0,.5,Mk),nN=$C(.5,.95,Wn);function $C(t,e,n){return i=>i<t?0:i>e?1:n(Ya(t,e,i))}function ob(t,e){t.min=e.min,t.max=e.max}function Fn(t,e){ob(t.x,e.x),ob(t.y,e.y)}function ab(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function lb(t,e,n,i,r){return t-=e,t=vu(t,1/n,i),r!==void 0&&(t=vu(t,1/r,i)),t}function iN(t,e=0,n=1,i=.5,r,o=t,l=t){if(bi.test(e)&&(e=parseFloat(e),e=ot(l.min,l.max,e/100)-l.min),typeof e!="number")return;let c=ot(o.min,o.max,i);t===o&&(c-=e),t.min=lb(t.min,e,n,c,r),t.max=lb(t.max,e,n,c,r)}function cb(t,e,[n,i,r],o,l){iN(t,e[n],e[i],e[r],e.scale,o,l)}const rN=["x","scaleX","originX"],sN=["y","scaleY","originY"];function ub(t,e,n,i){cb(t.x,e,rN,n?n.x:void 0,i?i.x:void 0),cb(t.y,e,sN,n?n.y:void 0,i?i.y:void 0)}function db(t){return t.translate===0&&t.scale===1}function KC(t){return db(t.x)&&db(t.y)}function hb(t,e){return t.min===e.min&&t.max===e.max}function oN(t,e){return hb(t.x,e.x)&&hb(t.y,e.y)}function fb(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function GC(t,e){return fb(t.x,e.x)&&fb(t.y,e.y)}function pb(t){return tn(t.x)/tn(t.y)}function mb(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class aN{constructor(){this.members=[]}add(e){nm(this.members,e),e.scheduleRender()}remove(e){if(im(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let i;for(let r=n;r>=0;r--){const o=this.members[r];if(o.isPresent!==!1){i=o;break}}return i?(this.promote(i),!0):!1}promote(e,n){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,n&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:i}=e;n.onExitComplete&&n.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function lN(t,e,n){let i="";const r=t.x.translate/e.x,o=t.y.translate/e.y,l=n?.z||0;if((r||o||l)&&(i=`translate3d(${r}px, ${o}px, ${l}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),n){const{transformPerspective:h,rotate:f,rotateX:m,rotateY:v,skewX:S,skewY:k}=n;h&&(i=`perspective(${h}px) ${i}`),f&&(i+=`rotate(${f}deg) `),m&&(i+=`rotateX(${m}deg) `),v&&(i+=`rotateY(${v}deg) `),S&&(i+=`skewX(${S}deg) `),k&&(i+=`skewY(${k}deg) `)}const c=t.x.scale*e.x,d=t.y.scale*e.y;return(c!==1||d!==1)&&(i+=`scale(${c}, ${d})`),i||"none"}const of=["","X","Y","Z"],cN=1e3;let uN=0;function af(t,e,n,i){const{latestValues:r}=e;r[t]&&(n[t]=r[t],e.setStaticValue(t,0),i&&(i[t]=0))}function XC(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const n=DC(e);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:r,layoutId:o}=t.options;window.MotionCancelOptimisedAnimation(n,"transform",tt,!(r||o))}const{parent:i}=t;i&&!i.hasCheckedOptimisedAppear&&XC(i)}function YC({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(l={},c=e?.()){this.id=uN++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(fN),this.nodes.forEach(vN),this.nodes.forEach(yN),this.nodes.forEach(pN)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=l,this.root=c?c.root||c:this,this.path=c?[...c.path,c]:[],this.parent=c,this.depth=c?c.depth+1:0;for(let d=0;d<this.path.length;d++)this.path[d].shouldResetTransform=!0;this.root===this&&(this.nodes=new JM)}addEventListener(l,c){return this.eventHandlers.has(l)||this.eventHandlers.set(l,new om),this.eventHandlers.get(l).add(c)}notifyListeners(l,...c){const d=this.eventHandlers.get(l);d&&d.notify(...c)}hasListeners(l){return this.eventHandlers.has(l)}mount(l){if(this.instance)return;this.isSVG=dC(l)&&!ZI(l),this.instance=l;const{layoutId:c,layout:d,visualElement:h}=this.options;if(h&&!h.current&&h.mount(l),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(d||c)&&(this.isLayoutDirty=!0),t){let f,m=0;const v=()=>this.root.updateBlockedByResize=!1;tt.read(()=>{m=window.innerWidth}),t(l,()=>{const S=window.innerWidth;S!==m&&(m=S,this.root.updateBlockedByResize=!0,f&&f(),f=QM(v,250),Yc.hasAnimatedSinceResize&&(Yc.hasAnimatedSinceResize=!1,this.nodes.forEach(yb)))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||d)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:m,hasRelativeLayoutChanged:v,layout:S})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const k=this.options.transition||h.getDefaultTransition()||TN,{onLayoutAnimationStart:b,onLayoutAnimationComplete:C}=h.getProps(),T=!this.targetLayout||!GC(this.targetLayout,S),_=!m&&v;if(this.options.layoutRoot||this.resumeFrom||_||m&&(T||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const R={...bm(k,"layout"),onPlay:b,onComplete:C};(h.shouldReduceMotion||this.options.layoutRoot)&&(R.delay=0,R.type=!1),this.startAnimation(R),this.setAnimationOrigin(f,_)}else m||yb(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=S})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const l=this.getStack();l&&l.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),jr(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(bN),this.animationId++)}getTransformTemplate(){const{visualElement:l}=this.options;return l&&l.getProps().transformTemplate}willUpdate(l=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&XC(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const m=this.path[f];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:c,layout:d}=this.options;if(c===void 0&&!d)return;const h=this.getTransformTemplate();this.prevTransformTemplateValue=h?h(this.latestValues,""):void 0,this.updateSnapshot(),l&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(gb);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(vb);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(gN),this.nodes.forEach(dN),this.nodes.forEach(hN)):this.nodes.forEach(vb),this.clearAllSnapshots();const c=pn.now();Ut.delta=Ki(0,1e3/60,c-Ut.timestamp),Ut.timestamp=c,Ut.isProcessing=!0,Gh.update.process(Ut),Gh.preRender.process(Ut),Gh.render.process(Ut),Ut.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,km.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(mN),this.sharedNodes.forEach(SN)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,tt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){tt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!tn(this.snapshot.measuredBox.x)&&!tn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let d=0;d<this.path.length;d++)this.path[d].updateScroll();const l=this.layout;this.layout=this.measure(!1),this.layoutCorrected=mt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:c}=this.options;c&&c.notify("LayoutMeasure",this.layout.layoutBox,l?l.layoutBox:void 0)}updateScroll(l="measure"){let c=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===l&&(c=!1),c&&this.instance){const d=i(this.instance);this.scroll={animationId:this.root.animationId,phase:l,isRoot:d,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:d}}}resetTransform(){if(!r)return;const l=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,c=this.projectionDelta&&!KC(this.projectionDelta),d=this.getTransformTemplate(),h=d?d(this.latestValues,""):void 0,f=h!==this.prevTransformTemplateValue;l&&this.instance&&(c||ms(this.latestValues)||f)&&(r(this.instance,h),this.shouldResetTransform=!1,this.scheduleRender())}measure(l=!0){const c=this.measurePageBox();let d=this.removeElementScroll(c);return l&&(d=this.removeTransform(d)),wN(d),{animationId:this.root.animationId,measuredBox:c,layoutBox:d,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:l}=this.options;if(!l)return mt();const c=l.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(xN))){const{scroll:h}=this.root;h&&(fo(c.x,h.offset.x),fo(c.y,h.offset.y))}return c}removeElementScroll(l){const c=mt();if(Fn(c,l),this.scroll?.wasRoot)return c;for(let d=0;d<this.path.length;d++){const h=this.path[d],{scroll:f,options:m}=h;h!==this.root&&f&&m.layoutScroll&&(f.wasRoot&&Fn(c,l),fo(c.x,f.offset.x),fo(c.y,f.offset.y))}return c}applyTransform(l,c=!1){const d=mt();Fn(d,l);for(let h=0;h<this.path.length;h++){const f=this.path[h];!c&&f.options.layoutScroll&&f.scroll&&f!==f.root&&po(d,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),ms(f.latestValues)&&po(d,f.latestValues)}return ms(this.latestValues)&&po(d,this.latestValues),d}removeTransform(l){const c=mt();Fn(c,l);for(let d=0;d<this.path.length;d++){const h=this.path[d];if(!h.instance||!ms(h.latestValues))continue;ep(h.latestValues)&&h.updateSnapshot();const f=mt(),m=h.measurePageBox();Fn(f,m),ub(c,h.latestValues,h.snapshot?h.snapshot.layoutBox:void 0,f)}return ms(this.latestValues)&&ub(c,this.latestValues),c}setTargetDelta(l){this.targetDelta=l,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(l){this.options={...this.options,...l,crossfade:l.crossfade!==void 0?l.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ut.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(l=!1){const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const d=!!this.resumingFrom||this!==c;if(!(l||d&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:m}=this.options;if(!(!this.layout||!(f||m))){if(this.resolvedRelativeTargetAt=Ut.timestamp,!this.targetDelta&&!this.relativeTarget){const v=this.getClosestProjectingParent();v&&v.layout&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mt(),this.relativeTargetOrigin=mt(),qa(this.relativeTargetOrigin,this.layout.layoutBox,v.layout.layoutBox),Fn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=mt(),this.targetWithTransforms=mt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),AM(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Fn(this.target,this.layout.layoutBox),RC(this.target,this.targetDelta)):Fn(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const v=this.getClosestProjectingParent();v&&!!v.resumingFrom==!!this.resumingFrom&&!v.options.layoutScroll&&v.target&&this.animationProgress!==1?(this.relativeParent=v,this.forceRelativeParentToResolveTarget(),this.relativeTarget=mt(),this.relativeTargetOrigin=mt(),qa(this.relativeTargetOrigin,this.target,v.target),Fn(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||ep(this.parent.latestValues)||PC(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const l=this.getLead(),c=!!this.resumingFrom||this!==l;let d=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(d=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(d=!1),this.resolvedRelativeTargetAt===Ut.timestamp&&(d=!1),d)return;const{layout:h,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||f))return;Fn(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,v=this.treeScale.y;WA(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox,l.targetWithTransforms=mt());const{target:S}=l;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ab(this.prevProjectionDelta.x,this.projectionDelta.x),ab(this.prevProjectionDelta.y,this.projectionDelta.y)),Wa(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==v||!mb(this.projectionDelta.x,this.prevProjectionDelta.x)||!mb(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(l=!0){if(this.options.visualElement?.scheduleRender(),l){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=mo(),this.projectionDelta=mo(),this.projectionDeltaWithTransform=mo()}setAnimationOrigin(l,c=!1){const d=this.snapshot,h=d?d.latestValues:{},f={...this.latestValues},m=mo();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!c;const v=mt(),S=d?d.source:void 0,k=this.layout?this.layout.source:void 0,b=S!==k,C=this.getStack(),T=!C||C.members.length<=1,_=!!(b&&!T&&this.options.crossfade===!0&&!this.path.some(CN));this.animationProgress=0;let R;this.mixTargetDelta=P=>{const I=P/1e3;bb(m.x,l.x,I),bb(m.y,l.y,I),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(qa(v,this.layout.layoutBox,this.relativeParent.layout.layoutBox),kN(this.relativeTarget,this.relativeTargetOrigin,v,I),R&&oN(this.relativeTarget,R)&&(this.isProjectionDirty=!1),R||(R=mt()),Fn(R,this.relativeTarget)),b&&(this.animationValues=f,eN(f,h,this.latestValues,I,_,T)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=I},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(l){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(jr(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=tt.update(()=>{Yc.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=_o(0)),this.currentAnimation=XM(this.motionValue,[0,1e3],{...l,velocity:0,isSync:!0,onUpdate:c=>{this.mixTargetDelta(c),l.onUpdate&&l.onUpdate(c)},onStop:()=>{},onComplete:()=>{l.onComplete&&l.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const l=this.getStack();l&&l.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(cN),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const l=this.getLead();let{targetWithTransforms:c,target:d,layout:h,latestValues:f}=l;if(!(!c||!d||!h)){if(this!==l&&this.layout&&h&&JC(this.options.animationType,this.layout.layoutBox,h.layoutBox)){d=this.target||mt();const m=tn(this.layout.layoutBox.x);d.x.min=l.target.x.min,d.x.max=d.x.min+m;const v=tn(this.layout.layoutBox.y);d.y.min=l.target.y.min,d.y.max=d.y.min+v}Fn(c,d),po(c,f),Wa(this.projectionDeltaWithTransform,this.layoutCorrected,c,f)}}registerSharedNode(l,c){this.sharedNodes.has(l)||this.sharedNodes.set(l,new aN),this.sharedNodes.get(l).add(c);const h=c.options.initialPromotionConfig;c.promote({transition:h?h.transition:void 0,preserveFollowOpacity:h&&h.shouldPreserveFollowOpacity?h.shouldPreserveFollowOpacity(c):void 0})}isLead(){const l=this.getStack();return l?l.lead===this:!0}getLead(){const{layoutId:l}=this.options;return l?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:l}=this.options;return l?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:l}=this.options;if(l)return this.root.sharedNodes.get(l)}promote({needsReset:l,transition:c,preserveFollowOpacity:d}={}){const h=this.getStack();h&&h.promote(this,d),l&&(this.projectionDelta=void 0,this.needsReset=!0),c&&this.setOptions({transition:c})}relegate(){const l=this.getStack();return l?l.relegate(this):!1}resetSkewAndRotation(){const{visualElement:l}=this.options;if(!l)return;let c=!1;const{latestValues:d}=l;if((d.z||d.rotate||d.rotateX||d.rotateY||d.rotateZ||d.skewX||d.skewY)&&(c=!0),!c)return;const h={};d.z&&af("z",l,h,this.animationValues);for(let f=0;f<of.length;f++)af(`rotate${of[f]}`,l,h,this.animationValues),af(`skew${of[f]}`,l,h,this.animationValues);l.render();for(const f in h)l.setStaticValue(f,h[f]),this.animationValues&&(this.animationValues[f]=h[f]);l.scheduleRender()}applyProjectionStyles(l,c){if(!this.instance||this.isSVG)return;if(!this.isVisible){l.visibility="hidden";return}const d=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,l.visibility="",l.opacity="",l.pointerEvents=Xc(c?.pointerEvents)||"",l.transform=d?d(this.latestValues,""):"none";return}const h=this.getLead();if(!this.projectionDelta||!this.layout||!h.target){this.options.layoutId&&(l.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,l.pointerEvents=Xc(c?.pointerEvents)||""),this.hasProjected&&!ms(this.latestValues)&&(l.transform=d?d({},""):"none",this.hasProjected=!1);return}l.visibility="";const f=h.animationValues||h.latestValues;this.applyTransformsToTarget();let m=lN(this.projectionDeltaWithTransform,this.treeScale,f);d&&(m=d(f,m)),l.transform=m;const{x:v,y:S}=this.projectionDelta;l.transformOrigin=`${v.origin*100}% ${S.origin*100}% 0`,h.animationValues?l.opacity=h===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:l.opacity=h===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const k in el){if(f[k]===void 0)continue;const{correct:b,applyTo:C,isCSSVariable:T}=el[k],_=m==="none"?f[k]:b(f[k],h);if(C){const R=C.length;for(let P=0;P<R;P++)l[C[P]]=_}else T?this.options.visualElement.renderState.vars[k]=_:l[k]=_}this.options.layoutId&&(l.pointerEvents=h===this?Xc(c?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(l=>l.currentAnimation?.stop()),this.root.nodes.forEach(gb),this.root.sharedNodes.clear()}}}function dN(t){t.updateLayout()}function hN(t){const e=t.resumeFrom?.snapshot||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:r}=t.options,o=e.source!==t.layout.source;r==="size"?jn(f=>{const m=o?e.measuredBox[f]:e.layoutBox[f],v=tn(m);m.min=n[f].min,m.max=m.min+v}):JC(r,e.layoutBox,n)&&jn(f=>{const m=o?e.measuredBox[f]:e.layoutBox[f],v=tn(n[f]);m.max=m.min+v,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[f].max=t.relativeTarget[f].min+v)});const l=mo();Wa(l,n,e.layoutBox);const c=mo();o?Wa(c,t.applyTransform(i,!0),e.measuredBox):Wa(c,n,e.layoutBox);const d=!KC(l);let h=!1;if(!t.resumeFrom){const f=t.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:v}=f;if(m&&v){const S=mt();qa(S,e.layoutBox,m.layoutBox);const k=mt();qa(k,n,v.layoutBox),GC(S,k)||(h=!0),f.options.layoutRoot&&(t.relativeTarget=k,t.relativeTargetOrigin=S,t.relativeParent=f)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:c,layoutDelta:l,hasLayoutChanged:d,hasRelativeLayoutChanged:h})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function fN(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function pN(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function mN(t){t.clearSnapshot()}function gb(t){t.clearMeasurements()}function vb(t){t.isLayoutDirty=!1}function gN(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function yb(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function vN(t){t.resolveTargetDelta()}function yN(t){t.calcProjection()}function bN(t){t.resetSkewAndRotation()}function SN(t){t.removeLeadSnapshot()}function bb(t,e,n){t.translate=ot(e.translate,0,n),t.scale=ot(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Sb(t,e,n,i){t.min=ot(e.min,n.min,i),t.max=ot(e.max,n.max,i)}function kN(t,e,n,i){Sb(t.x,e.x,n.x,i),Sb(t.y,e.y,n.y,i)}function CN(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const TN={duration:.45,ease:[.4,0,.1,1]},kb=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),Cb=kb("applewebkit/")&&!kb("chrome/")?Math.round:Wn;function Tb(t){t.min=Cb(t.min),t.max=Cb(t.max)}function wN(t){Tb(t.x),Tb(t.y)}function JC(t,e,n){return t==="position"||t==="preserve-aspect"&&!IM(pb(e),pb(n),.2)}function xN(t){return t!==t.root&&t.scroll?.wasRoot}const EN=YC({attachResizeListener:(t,e)=>tl(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),lf={current:void 0},QC=YC({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!lf.current){const t=new EN({});t.mount(window),t.setOptions({layoutScroll:!0}),lf.current=t}return lf.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),PN={pan:{Feature:HM},drag:{Feature:qM,ProjectionNode:QC,MeasureLayout:qC}};function wb(t,e,n){const{props:i}=t;t.animationState&&i.whileHover&&t.animationState.setActive("whileHover",n==="Start");const r="onHover"+n,o=i[r];o&&tt.postRender(()=>o(e,gl(e)))}class RN extends Hr{mount(){const{current:e}=this.node;e&&(this.unmount=GI(e,(n,i)=>(wb(this.node,i,"Start"),r=>wb(this.node,r,"End"))))}unmount(){}}class _N extends Hr{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=fl(tl(this.node.current,"focus",()=>this.onFocus()),tl(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function xb(t,e,n){const{props:i}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&i.whileTap&&t.animationState.setActive("whileTap",n==="Start");const r="onTap"+(n==="End"?"":n),o=i[r];o&&tt.postRender(()=>o(e,gl(e)))}class IN extends Hr{mount(){const{current:e}=this.node;e&&(this.unmount=QI(e,(n,i)=>(xb(this.node,i,"Start"),(r,{success:o})=>xb(this.node,r,o?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const ap=new WeakMap,cf=new WeakMap,AN=t=>{const e=ap.get(t.target);e&&e(t)},MN=t=>{t.forEach(AN)};function NN({root:t,...e}){const n=t||document;cf.has(n)||cf.set(n,{});const i=cf.get(n),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(MN,{root:t,...e})),i[r]}function DN(t,e,n){const i=NN(e);return ap.set(t,n),i.observe(t),()=>{ap.delete(t),i.unobserve(t)}}const ON={some:0,all:1};class LN extends Hr{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:i,amount:r="some",once:o}=e,l={root:n?n.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:ON[r]},c=d=>{const{isIntersecting:h}=d;if(this.isInView===h||(this.isInView=h,o&&!h&&this.hasEnteredView))return;h&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",h);const{onViewportEnter:f,onViewportLeave:m}=this.node.getProps(),v=h?f:m;v&&v(d)};return DN(this.node.current,l,c)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(FN(e,n))&&this.startObserver()}unmount(){}}function FN({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const jN={inView:{Feature:LN},tap:{Feature:IN},focus:{Feature:_N},hover:{Feature:RN}},UN={layout:{ProjectionNode:QC,MeasureLayout:qC}},BN={...wM,...jN,...PN,...UN},Kt=BA(BN,ZA);function VN({sections:t,currentSection:e,onSectionClick:n}){return E.jsx("div",{className:"mb-12",children:E.jsxs("div",{className:"flex items-center justify-between relative",children:[E.jsx("div",{className:"absolute top-5 left-0 right-0 h-0.5 bg-gray-200 -z-10",children:E.jsx(Kt.div,{className:"h-full bg-[#0046B8]",initial:{width:"0%"},animate:{width:`${e/(t.length-1)*100}%`},transition:{duration:.5,ease:"easeInOut"}})}),t.map((i,r)=>{const o=r<e,l=r===e;return E.jsxs("button",{onClick:()=>n?.(r),className:"flex flex-col items-center flex-1 cursor-pointer group transition-all hover:scale-105",children:[E.jsx(Kt.div,{className:`w-12 h-12 rounded-full flex items-center justify-center mb-2 transition-all shadow-lg font-bold text-lg ${o?"bg-gradient-to-br from-[#0046B8] to-[#003087] text-white group-hover:shadow-xl":l?"bg-gradient-to-br from-[#0046B8] to-[#003087] text-white ring-4 ring-blue-200 shadow-2xl group-hover:shadow-xl":"bg-white border-3 border-gray-300 text-gray-400 group-hover:border-[#0046B8] group-hover:text-[#0046B8] group-hover:shadow-xl"}`,animate:l?{scale:[1,1.1,1]}:{scale:1},transition:{duration:.5},children:o?E.jsx(Ts,{className:"w-6 h-6 stroke-[3]"}):E.jsx("span",{className:"font-black",children:r+1})}),E.jsx("span",{className:`text-sm text-center max-w-[90px] transition-colors font-semibold ${l?"text-[#0046B8] font-bold":o?"text-gray-700 group-hover:text-[#0046B8]":"text-gray-400 group-hover:text-[#0046B8]"}`,children:i})]},i)})]})})}function Eb(t,e){if(typeof t=="function")return t(e);t!=null&&(t.current=e)}function vl(...t){return e=>{let n=!1;const i=t.map(r=>{const o=Eb(r,e);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let r=0;r<i.length;r++){const o=i[r];typeof o=="function"?o():Eb(t[r],null)}}}}function nt(...t){return x.useCallback(vl(...t),t)}var zN=Symbol.for("react.lazy"),yu=Qp[" use ".trim().toString()];function WN(t){return typeof t=="object"&&t!==null&&"then"in t}function ZC(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===zN&&"_payload"in t&&WN(t._payload)}function eT(t){const e=HN(t),n=x.forwardRef((i,r)=>{let{children:o,...l}=i;ZC(o)&&typeof yu=="function"&&(o=yu(o._payload));const c=x.Children.toArray(o),d=c.find(KN);if(d){const h=d.props.children,f=c.map(m=>m===d?x.Children.count(h)>1?x.Children.only(null):x.isValidElement(h)?h.props.children:null:m);return E.jsx(e,{...l,ref:r,children:x.isValidElement(h)?x.cloneElement(h,void 0,f):null})}return E.jsx(e,{...l,ref:r,children:o})});return n.displayName=`${t}.Slot`,n}var qN=eT("Slot");function HN(t){const e=x.forwardRef((n,i)=>{let{children:r,...o}=n;if(ZC(r)&&typeof yu=="function"&&(r=yu(r._payload)),x.isValidElement(r)){const l=XN(r),c=GN(o,r.props);return r.type!==x.Fragment&&(c.ref=i?vl(i,l):l),x.cloneElement(r,c)}return x.Children.count(r)>1?x.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var $N=Symbol("radix.slottable");function KN(t){return x.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===$N}function GN(t,e){const n={...e};for(const i in e){const r=t[i],o=e[i];/^on[A-Z]/.test(i)?r&&o?n[i]=(...c)=>{const d=o(...c);return r(...c),d}:r&&(n[i]=r):i==="style"?n[i]={...r,...o}:i==="className"&&(n[i]=[r,o].filter(Boolean).join(" "))}return{...t,...n}}function XN(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function tT(t){var e,n,i="";if(typeof t=="string"||typeof t=="number")i+=t;else if(typeof t=="object")if(Array.isArray(t)){var r=t.length;for(e=0;e<r;e++)t[e]&&(n=tT(t[e]))&&(i&&(i+=" "),i+=n)}else for(n in t)t[n]&&(i&&(i+=" "),i+=n);return i}function nT(){for(var t,e,n=0,i="",r=arguments.length;n<r;n++)(t=arguments[n])&&(e=tT(t))&&(i&&(i+=" "),i+=e);return i}const Pb=t=>typeof t=="boolean"?`${t}`:t===0?"0":t,Rb=nT,YN=(t,e)=>n=>{var i;if(e?.variants==null)return Rb(t,n?.class,n?.className);const{variants:r,defaultVariants:o}=e,l=Object.keys(r).map(h=>{const f=n?.[h],m=o?.[h];if(f===null)return null;const v=Pb(f)||Pb(m);return r[h][v]}),c=n&&Object.entries(n).reduce((h,f)=>{let[m,v]=f;return v===void 0||(h[m]=v),h},{}),d=e==null||(i=e.compoundVariants)===null||i===void 0?void 0:i.reduce((h,f)=>{let{class:m,className:v,...S}=f;return Object.entries(S).every(k=>{let[b,C]=k;return Array.isArray(C)?C.includes({...o,...c}[b]):{...o,...c}[b]===C})?[...h,m,v]:h},[]);return Rb(t,l,d,n?.class,n?.className)},Nm="-",JN=t=>{const e=ZN(t),{conflictingClassGroups:n,conflictingClassGroupModifiers:i}=t;return{getClassGroupId:l=>{const c=l.split(Nm);return c[0]===""&&c.length!==1&&c.shift(),iT(c,e)||QN(l)},getConflictingClassGroupIds:(l,c)=>{const d=n[l]||[];return c&&i[l]?[...d,...i[l]]:d}}},iT=(t,e)=>{if(t.length===0)return e.classGroupId;const n=t[0],i=e.nextPart.get(n),r=i?iT(t.slice(1),i):void 0;if(r)return r;if(e.validators.length===0)return;const o=t.join(Nm);return e.validators.find(({validator:l})=>l(o))?.classGroupId},_b=/^\[(.+)\]$/,QN=t=>{if(_b.test(t)){const e=_b.exec(t)[1],n=e?.substring(0,e.indexOf(":"));if(n)return"arbitrary.."+n}},ZN=t=>{const{theme:e,classGroups:n}=t,i={nextPart:new Map,validators:[]};for(const r in n)lp(n[r],i,r,e);return i},lp=(t,e,n,i)=>{t.forEach(r=>{if(typeof r=="string"){const o=r===""?e:Ib(e,r);o.classGroupId=n;return}if(typeof r=="function"){if(eD(r)){lp(r(i),e,n,i);return}e.validators.push({validator:r,classGroupId:n});return}Object.entries(r).forEach(([o,l])=>{lp(l,Ib(e,o),n,i)})})},Ib=(t,e)=>{let n=t;return e.split(Nm).forEach(i=>{n.nextPart.has(i)||n.nextPart.set(i,{nextPart:new Map,validators:[]}),n=n.nextPart.get(i)}),n},eD=t=>t.isThemeGetter,tD=t=>{if(t<1)return{get:()=>{},set:()=>{}};let e=0,n=new Map,i=new Map;const r=(o,l)=>{n.set(o,l),e++,e>t&&(e=0,i=n,n=new Map)};return{get(o){let l=n.get(o);if(l!==void 0)return l;if((l=i.get(o))!==void 0)return r(o,l),l},set(o,l){n.has(o)?n.set(o,l):r(o,l)}}},cp="!",up=":",nD=up.length,iD=t=>{const{prefix:e,experimentalParseClassName:n}=t;let i=r=>{const o=[];let l=0,c=0,d=0,h;for(let k=0;k<r.length;k++){let b=r[k];if(l===0&&c===0){if(b===up){o.push(r.slice(d,k)),d=k+nD;continue}if(b==="/"){h=k;continue}}b==="["?l++:b==="]"?l--:b==="("?c++:b===")"&&c--}const f=o.length===0?r:r.substring(d),m=rD(f),v=m!==f,S=h&&h>d?h-d:void 0;return{modifiers:o,hasImportantModifier:v,baseClassName:m,maybePostfixModifierPosition:S}};if(e){const r=e+up,o=i;i=l=>l.startsWith(r)?o(l.substring(r.length)):{isExternal:!0,modifiers:[],hasImportantModifier:!1,baseClassName:l,maybePostfixModifierPosition:void 0}}if(n){const r=i;i=o=>n({className:o,parseClassName:r})}return i},rD=t=>t.endsWith(cp)?t.substring(0,t.length-1):t.startsWith(cp)?t.substring(1):t,sD=t=>{const e=Object.fromEntries(t.orderSensitiveModifiers.map(i=>[i,!0]));return i=>{if(i.length<=1)return i;const r=[];let o=[];return i.forEach(l=>{l[0]==="["||e[l]?(r.push(...o.sort(),l),o=[]):o.push(l)}),r.push(...o.sort()),r}},oD=t=>({cache:tD(t.cacheSize),parseClassName:iD(t),sortModifiers:sD(t),...JN(t)}),aD=/\s+/,lD=(t,e)=>{const{parseClassName:n,getClassGroupId:i,getConflictingClassGroupIds:r,sortModifiers:o}=e,l=[],c=t.trim().split(aD);let d="";for(let h=c.length-1;h>=0;h-=1){const f=c[h],{isExternal:m,modifiers:v,hasImportantModifier:S,baseClassName:k,maybePostfixModifierPosition:b}=n(f);if(m){d=f+(d.length>0?" "+d:d);continue}let C=!!b,T=i(C?k.substring(0,b):k);if(!T){if(!C){d=f+(d.length>0?" "+d:d);continue}if(T=i(k),!T){d=f+(d.length>0?" "+d:d);continue}C=!1}const _=o(v).join(":"),R=S?_+cp:_,P=R+T;if(l.includes(P))continue;l.push(P);const I=r(T,C);for(let D=0;D<I.length;++D){const O=I[D];l.push(R+O)}d=f+(d.length>0?" "+d:d)}return d};function cD(){let t=0,e,n,i="";for(;t<arguments.length;)(e=arguments[t++])&&(n=rT(e))&&(i&&(i+=" "),i+=n);return i}const rT=t=>{if(typeof t=="string")return t;let e,n="";for(let i=0;i<t.length;i++)t[i]&&(e=rT(t[i]))&&(n&&(n+=" "),n+=e);return n};function uD(t,...e){let n,i,r,o=l;function l(d){const h=e.reduce((f,m)=>m(f),t());return n=oD(h),i=n.cache.get,r=n.cache.set,o=c,c(d)}function c(d){const h=i(d);if(h)return h;const f=lD(d,n);return r(d,f),f}return function(){return o(cD.apply(null,arguments))}}const xt=t=>{const e=n=>n[t]||[];return e.isThemeGetter=!0,e},sT=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,oT=/^\((?:(\w[\w-]*):)?(.+)\)$/i,dD=/^\d+\/\d+$/,hD=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,fD=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,pD=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,mD=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,gD=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,no=t=>dD.test(t),Ne=t=>!!t&&!Number.isNaN(Number(t)),Er=t=>!!t&&Number.isInteger(Number(t)),uf=t=>t.endsWith("%")&&Ne(t.slice(0,-1)),ji=t=>hD.test(t),vD=()=>!0,yD=t=>fD.test(t)&&!pD.test(t),aT=()=>!1,bD=t=>mD.test(t),SD=t=>gD.test(t),kD=t=>!ke(t)&&!Ce(t),CD=t=>Fo(t,uT,aT),ke=t=>sT.test(t),ps=t=>Fo(t,dT,yD),df=t=>Fo(t,PD,Ne),Ab=t=>Fo(t,lT,aT),TD=t=>Fo(t,cT,SD),Lc=t=>Fo(t,hT,bD),Ce=t=>oT.test(t),_a=t=>jo(t,dT),wD=t=>jo(t,RD),Mb=t=>jo(t,lT),xD=t=>jo(t,uT),ED=t=>jo(t,cT),Fc=t=>jo(t,hT,!0),Fo=(t,e,n)=>{const i=sT.exec(t);return i?i[1]?e(i[1]):n(i[2]):!1},jo=(t,e,n=!1)=>{const i=oT.exec(t);return i?i[1]?e(i[1]):n:!1},lT=t=>t==="position"||t==="percentage",cT=t=>t==="image"||t==="url",uT=t=>t==="length"||t==="size"||t==="bg-size",dT=t=>t==="length",PD=t=>t==="number",RD=t=>t==="family-name",hT=t=>t==="shadow",_D=()=>{const t=xt("color"),e=xt("font"),n=xt("text"),i=xt("font-weight"),r=xt("tracking"),o=xt("leading"),l=xt("breakpoint"),c=xt("container"),d=xt("spacing"),h=xt("radius"),f=xt("shadow"),m=xt("inset-shadow"),v=xt("text-shadow"),S=xt("drop-shadow"),k=xt("blur"),b=xt("perspective"),C=xt("aspect"),T=xt("ease"),_=xt("animate"),R=()=>["auto","avoid","all","avoid-page","page","left","right","column"],P=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],I=()=>[...P(),Ce,ke],D=()=>["auto","hidden","clip","visible","scroll"],O=()=>["auto","contain","none"],N=()=>[Ce,ke,d],q=()=>[no,"full","auto",...N()],H=()=>[Er,"none","subgrid",Ce,ke],G=()=>["auto",{span:["full",Er,Ce,ke]},Er,Ce,ke],ce=()=>[Er,"auto",Ce,ke],pe=()=>["auto","min","max","fr",Ce,ke],me=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ye=()=>["start","end","center","stretch","center-safe","end-safe"],ie=()=>["auto",...N()],Z=()=>[no,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...N()],U=()=>[t,Ce,ke],re=()=>[...P(),Mb,Ab,{position:[Ce,ke]}],Y=()=>["no-repeat",{repeat:["","x","y","space","round"]}],F=()=>["auto","cover","contain",xD,CD,{size:[Ce,ke]}],$=()=>[uf,_a,ps],te=()=>["","none","full",h,Ce,ke],ue=()=>["",Ne,_a,ps],ge=()=>["solid","dashed","dotted","double"],we=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],ee=()=>[Ne,uf,Mb,Ab],he=()=>["","none",k,Ce,ke],Ee=()=>["none",Ne,Ce,ke],_e=()=>["none",Ne,Ce,ke],Le=()=>[Ne,Ce,ke],Ve=()=>[no,"full",...N()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[ji],breakpoint:[ji],color:[vD],container:[ji],"drop-shadow":[ji],ease:["in","out","in-out"],font:[kD],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[ji],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[ji],shadow:[ji],spacing:["px",Ne],text:[ji],"text-shadow":[ji],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",no,ke,Ce,C]}],container:["container"],columns:[{columns:[Ne,ke,Ce,c]}],"break-after":[{"break-after":R()}],"break-before":[{"break-before":R()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:I()}],overflow:[{overflow:D()}],"overflow-x":[{"overflow-x":D()}],"overflow-y":[{"overflow-y":D()}],overscroll:[{overscroll:O()}],"overscroll-x":[{"overscroll-x":O()}],"overscroll-y":[{"overscroll-y":O()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:q()}],"inset-x":[{"inset-x":q()}],"inset-y":[{"inset-y":q()}],start:[{start:q()}],end:[{end:q()}],top:[{top:q()}],right:[{right:q()}],bottom:[{bottom:q()}],left:[{left:q()}],visibility:["visible","invisible","collapse"],z:[{z:[Er,"auto",Ce,ke]}],basis:[{basis:[no,"full","auto",c,...N()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ne,no,"auto","initial","none",ke]}],grow:[{grow:["",Ne,Ce,ke]}],shrink:[{shrink:["",Ne,Ce,ke]}],order:[{order:[Er,"first","last","none",Ce,ke]}],"grid-cols":[{"grid-cols":H()}],"col-start-end":[{col:G()}],"col-start":[{"col-start":ce()}],"col-end":[{"col-end":ce()}],"grid-rows":[{"grid-rows":H()}],"row-start-end":[{row:G()}],"row-start":[{"row-start":ce()}],"row-end":[{"row-end":ce()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":pe()}],"auto-rows":[{"auto-rows":pe()}],gap:[{gap:N()}],"gap-x":[{"gap-x":N()}],"gap-y":[{"gap-y":N()}],"justify-content":[{justify:[...me(),"normal"]}],"justify-items":[{"justify-items":[...ye(),"normal"]}],"justify-self":[{"justify-self":["auto",...ye()]}],"align-content":[{content:["normal",...me()]}],"align-items":[{items:[...ye(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ye(),{baseline:["","last"]}]}],"place-content":[{"place-content":me()}],"place-items":[{"place-items":[...ye(),"baseline"]}],"place-self":[{"place-self":["auto",...ye()]}],p:[{p:N()}],px:[{px:N()}],py:[{py:N()}],ps:[{ps:N()}],pe:[{pe:N()}],pt:[{pt:N()}],pr:[{pr:N()}],pb:[{pb:N()}],pl:[{pl:N()}],m:[{m:ie()}],mx:[{mx:ie()}],my:[{my:ie()}],ms:[{ms:ie()}],me:[{me:ie()}],mt:[{mt:ie()}],mr:[{mr:ie()}],mb:[{mb:ie()}],ml:[{ml:ie()}],"space-x":[{"space-x":N()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":N()}],"space-y-reverse":["space-y-reverse"],size:[{size:Z()}],w:[{w:[c,"screen",...Z()]}],"min-w":[{"min-w":[c,"screen","none",...Z()]}],"max-w":[{"max-w":[c,"screen","none","prose",{screen:[l]},...Z()]}],h:[{h:["screen","lh",...Z()]}],"min-h":[{"min-h":["screen","lh","none",...Z()]}],"max-h":[{"max-h":["screen","lh",...Z()]}],"font-size":[{text:["base",n,_a,ps]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,Ce,df]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",uf,ke]}],"font-family":[{font:[wD,ke,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[r,Ce,ke]}],"line-clamp":[{"line-clamp":[Ne,"none",Ce,df]}],leading:[{leading:[o,...N()]}],"list-image":[{"list-image":["none",Ce,ke]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ce,ke]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:U()}],"text-color":[{text:U()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...ge(),"wavy"]}],"text-decoration-thickness":[{decoration:[Ne,"from-font","auto",Ce,ps]}],"text-decoration-color":[{decoration:U()}],"underline-offset":[{"underline-offset":[Ne,"auto",Ce,ke]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:N()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ce,ke]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ce,ke]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:re()}],"bg-repeat":[{bg:Y()}],"bg-size":[{bg:F()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Er,Ce,ke],radial:["",Ce,ke],conic:[Er,Ce,ke]},ED,TD]}],"bg-color":[{bg:U()}],"gradient-from-pos":[{from:$()}],"gradient-via-pos":[{via:$()}],"gradient-to-pos":[{to:$()}],"gradient-from":[{from:U()}],"gradient-via":[{via:U()}],"gradient-to":[{to:U()}],rounded:[{rounded:te()}],"rounded-s":[{"rounded-s":te()}],"rounded-e":[{"rounded-e":te()}],"rounded-t":[{"rounded-t":te()}],"rounded-r":[{"rounded-r":te()}],"rounded-b":[{"rounded-b":te()}],"rounded-l":[{"rounded-l":te()}],"rounded-ss":[{"rounded-ss":te()}],"rounded-se":[{"rounded-se":te()}],"rounded-ee":[{"rounded-ee":te()}],"rounded-es":[{"rounded-es":te()}],"rounded-tl":[{"rounded-tl":te()}],"rounded-tr":[{"rounded-tr":te()}],"rounded-br":[{"rounded-br":te()}],"rounded-bl":[{"rounded-bl":te()}],"border-w":[{border:ue()}],"border-w-x":[{"border-x":ue()}],"border-w-y":[{"border-y":ue()}],"border-w-s":[{"border-s":ue()}],"border-w-e":[{"border-e":ue()}],"border-w-t":[{"border-t":ue()}],"border-w-r":[{"border-r":ue()}],"border-w-b":[{"border-b":ue()}],"border-w-l":[{"border-l":ue()}],"divide-x":[{"divide-x":ue()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":ue()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...ge(),"hidden","none"]}],"divide-style":[{divide:[...ge(),"hidden","none"]}],"border-color":[{border:U()}],"border-color-x":[{"border-x":U()}],"border-color-y":[{"border-y":U()}],"border-color-s":[{"border-s":U()}],"border-color-e":[{"border-e":U()}],"border-color-t":[{"border-t":U()}],"border-color-r":[{"border-r":U()}],"border-color-b":[{"border-b":U()}],"border-color-l":[{"border-l":U()}],"divide-color":[{divide:U()}],"outline-style":[{outline:[...ge(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Ne,Ce,ke]}],"outline-w":[{outline:["",Ne,_a,ps]}],"outline-color":[{outline:U()}],shadow:[{shadow:["","none",f,Fc,Lc]}],"shadow-color":[{shadow:U()}],"inset-shadow":[{"inset-shadow":["none",m,Fc,Lc]}],"inset-shadow-color":[{"inset-shadow":U()}],"ring-w":[{ring:ue()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:U()}],"ring-offset-w":[{"ring-offset":[Ne,ps]}],"ring-offset-color":[{"ring-offset":U()}],"inset-ring-w":[{"inset-ring":ue()}],"inset-ring-color":[{"inset-ring":U()}],"text-shadow":[{"text-shadow":["none",v,Fc,Lc]}],"text-shadow-color":[{"text-shadow":U()}],opacity:[{opacity:[Ne,Ce,ke]}],"mix-blend":[{"mix-blend":[...we(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":we()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ne]}],"mask-image-linear-from-pos":[{"mask-linear-from":ee()}],"mask-image-linear-to-pos":[{"mask-linear-to":ee()}],"mask-image-linear-from-color":[{"mask-linear-from":U()}],"mask-image-linear-to-color":[{"mask-linear-to":U()}],"mask-image-t-from-pos":[{"mask-t-from":ee()}],"mask-image-t-to-pos":[{"mask-t-to":ee()}],"mask-image-t-from-color":[{"mask-t-from":U()}],"mask-image-t-to-color":[{"mask-t-to":U()}],"mask-image-r-from-pos":[{"mask-r-from":ee()}],"mask-image-r-to-pos":[{"mask-r-to":ee()}],"mask-image-r-from-color":[{"mask-r-from":U()}],"mask-image-r-to-color":[{"mask-r-to":U()}],"mask-image-b-from-pos":[{"mask-b-from":ee()}],"mask-image-b-to-pos":[{"mask-b-to":ee()}],"mask-image-b-from-color":[{"mask-b-from":U()}],"mask-image-b-to-color":[{"mask-b-to":U()}],"mask-image-l-from-pos":[{"mask-l-from":ee()}],"mask-image-l-to-pos":[{"mask-l-to":ee()}],"mask-image-l-from-color":[{"mask-l-from":U()}],"mask-image-l-to-color":[{"mask-l-to":U()}],"mask-image-x-from-pos":[{"mask-x-from":ee()}],"mask-image-x-to-pos":[{"mask-x-to":ee()}],"mask-image-x-from-color":[{"mask-x-from":U()}],"mask-image-x-to-color":[{"mask-x-to":U()}],"mask-image-y-from-pos":[{"mask-y-from":ee()}],"mask-image-y-to-pos":[{"mask-y-to":ee()}],"mask-image-y-from-color":[{"mask-y-from":U()}],"mask-image-y-to-color":[{"mask-y-to":U()}],"mask-image-radial":[{"mask-radial":[Ce,ke]}],"mask-image-radial-from-pos":[{"mask-radial-from":ee()}],"mask-image-radial-to-pos":[{"mask-radial-to":ee()}],"mask-image-radial-from-color":[{"mask-radial-from":U()}],"mask-image-radial-to-color":[{"mask-radial-to":U()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":P()}],"mask-image-conic-pos":[{"mask-conic":[Ne]}],"mask-image-conic-from-pos":[{"mask-conic-from":ee()}],"mask-image-conic-to-pos":[{"mask-conic-to":ee()}],"mask-image-conic-from-color":[{"mask-conic-from":U()}],"mask-image-conic-to-color":[{"mask-conic-to":U()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:re()}],"mask-repeat":[{mask:Y()}],"mask-size":[{mask:F()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ce,ke]}],filter:[{filter:["","none",Ce,ke]}],blur:[{blur:he()}],brightness:[{brightness:[Ne,Ce,ke]}],contrast:[{contrast:[Ne,Ce,ke]}],"drop-shadow":[{"drop-shadow":["","none",S,Fc,Lc]}],"drop-shadow-color":[{"drop-shadow":U()}],grayscale:[{grayscale:["",Ne,Ce,ke]}],"hue-rotate":[{"hue-rotate":[Ne,Ce,ke]}],invert:[{invert:["",Ne,Ce,ke]}],saturate:[{saturate:[Ne,Ce,ke]}],sepia:[{sepia:["",Ne,Ce,ke]}],"backdrop-filter":[{"backdrop-filter":["","none",Ce,ke]}],"backdrop-blur":[{"backdrop-blur":he()}],"backdrop-brightness":[{"backdrop-brightness":[Ne,Ce,ke]}],"backdrop-contrast":[{"backdrop-contrast":[Ne,Ce,ke]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ne,Ce,ke]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ne,Ce,ke]}],"backdrop-invert":[{"backdrop-invert":["",Ne,Ce,ke]}],"backdrop-opacity":[{"backdrop-opacity":[Ne,Ce,ke]}],"backdrop-saturate":[{"backdrop-saturate":[Ne,Ce,ke]}],"backdrop-sepia":[{"backdrop-sepia":["",Ne,Ce,ke]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":N()}],"border-spacing-x":[{"border-spacing-x":N()}],"border-spacing-y":[{"border-spacing-y":N()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ce,ke]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ne,"initial",Ce,ke]}],ease:[{ease:["linear","initial",T,Ce,ke]}],delay:[{delay:[Ne,Ce,ke]}],animate:[{animate:["none",_,Ce,ke]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[b,Ce,ke]}],"perspective-origin":[{"perspective-origin":I()}],rotate:[{rotate:Ee()}],"rotate-x":[{"rotate-x":Ee()}],"rotate-y":[{"rotate-y":Ee()}],"rotate-z":[{"rotate-z":Ee()}],scale:[{scale:_e()}],"scale-x":[{"scale-x":_e()}],"scale-y":[{"scale-y":_e()}],"scale-z":[{"scale-z":_e()}],"scale-3d":["scale-3d"],skew:[{skew:Le()}],"skew-x":[{"skew-x":Le()}],"skew-y":[{"skew-y":Le()}],transform:[{transform:[Ce,ke,"","none","gpu","cpu"]}],"transform-origin":[{origin:I()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Ve()}],"translate-x":[{"translate-x":Ve()}],"translate-y":[{"translate-y":Ve()}],"translate-z":[{"translate-z":Ve()}],"translate-none":["translate-none"],accent:[{accent:U()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:U()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ce,ke]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":N()}],"scroll-mx":[{"scroll-mx":N()}],"scroll-my":[{"scroll-my":N()}],"scroll-ms":[{"scroll-ms":N()}],"scroll-me":[{"scroll-me":N()}],"scroll-mt":[{"scroll-mt":N()}],"scroll-mr":[{"scroll-mr":N()}],"scroll-mb":[{"scroll-mb":N()}],"scroll-ml":[{"scroll-ml":N()}],"scroll-p":[{"scroll-p":N()}],"scroll-px":[{"scroll-px":N()}],"scroll-py":[{"scroll-py":N()}],"scroll-ps":[{"scroll-ps":N()}],"scroll-pe":[{"scroll-pe":N()}],"scroll-pt":[{"scroll-pt":N()}],"scroll-pr":[{"scroll-pr":N()}],"scroll-pb":[{"scroll-pb":N()}],"scroll-pl":[{"scroll-pl":N()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ce,ke]}],fill:[{fill:["none",...U()]}],"stroke-w":[{stroke:[Ne,_a,ps,df]}],stroke:[{stroke:["none",...U()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},ID=uD(_D);function vn(...t){return ID(nT(t))}const AD=YN("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function ys({className:t,variant:e,size:n,asChild:i=!1,...r}){const o=i?qN:"button";return E.jsx(o,{"data-slot":"button",className:vn(AD({variant:e,size:n,className:t})),...r})}function io({className:t,type:e,...n}){return E.jsx("input",{type:e,"data-slot":"input",className:vn("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",t),...n})}var MD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],ND=MD.reduce((t,e)=>{const n=eT(`Primitive.${e}`),i=x.forwardRef((r,o)=>{const{asChild:l,...c}=r,d=l?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),E.jsx(d,{...c,ref:o})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{}),DD="Label",fT=x.forwardRef((t,e)=>E.jsx(ND.label,{...t,ref:e,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));fT.displayName=DD;var OD=fT;function Nb({className:t,...e}){return E.jsx(OD,{"data-slot":"label",className:vn("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...e})}function $e(t,e,{checkForDefaultPrevented:n=!0}={}){return function(r){if(t?.(r),n===!1||!r.defaultPrevented)return e?.(r)}}function Is(t,e=[]){let n=[];function i(o,l){const c=x.createContext(l),d=n.length;n=[...n,l];const h=m=>{const{scope:v,children:S,...k}=m,b=v?.[t]?.[d]||c,C=x.useMemo(()=>k,Object.values(k));return E.jsx(b.Provider,{value:C,children:S})};h.displayName=o+"Provider";function f(m,v){const S=v?.[t]?.[d]||c,k=x.useContext(S);if(k)return k;if(l!==void 0)return l;throw new Error(`\`${m}\` must be used within \`${o}\``)}return[h,f]}const r=()=>{const o=n.map(l=>x.createContext(l));return function(c){const d=c?.[t]||o;return x.useMemo(()=>({[`__scope${t}`]:{...c,[t]:d}}),[c,d])}};return r.scopeName=t,[i,LD(r,...e)]}function LD(...t){const e=t[0];if(t.length===1)return e;const n=()=>{const i=t.map(r=>({useScope:r(),scopeName:r.scopeName}));return function(o){const l=i.reduce((c,{useScope:d,scopeName:h})=>{const m=d(o)[`__scope${h}`];return{...c,...m}},{});return x.useMemo(()=>({[`__scope${e.scopeName}`]:l}),[l])}};return n.scopeName=e.scopeName,n}function FD(t){const e=jD(t),n=x.forwardRef((i,r)=>{const{children:o,...l}=i,c=x.Children.toArray(o),d=c.find(BD);if(d){const h=d.props.children,f=c.map(m=>m===d?x.Children.count(h)>1?x.Children.only(null):x.isValidElement(h)?h.props.children:null:m);return E.jsx(e,{...l,ref:r,children:x.isValidElement(h)?x.cloneElement(h,void 0,f):null})}return E.jsx(e,{...l,ref:r,children:o})});return n.displayName=`${t}.Slot`,n}function jD(t){const e=x.forwardRef((n,i)=>{const{children:r,...o}=n;if(x.isValidElement(r)){const l=zD(r),c=VD(o,r.props);return r.type!==x.Fragment&&(c.ref=i?vl(i,l):l),x.cloneElement(r,c)}return x.Children.count(r)>1?x.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var UD=Symbol("radix.slottable");function BD(t){return x.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===UD}function VD(t,e){const n={...e};for(const i in e){const r=t[i],o=e[i];/^on[A-Z]/.test(i)?r&&o?n[i]=(...c)=>{const d=o(...c);return r(...c),d}:r&&(n[i]=r):i==="style"?n[i]={...r,...o}:i==="className"&&(n[i]=[r,o].filter(Boolean).join(" "))}return{...t,...n}}function zD(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var WD=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ke=WD.reduce((t,e)=>{const n=FD(`Primitive.${e}`),i=x.forwardRef((r,o)=>{const{asChild:l,...c}=r,d=l?n:e;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),E.jsx(d,{...c,ref:o})});return i.displayName=`Primitive.${e}`,{...t,[e]:i}},{});function qD(t,e){t&&hl.flushSync(()=>t.dispatchEvent(e))}function Db(t){const e=HD(t),n=x.forwardRef((i,r)=>{const{children:o,...l}=i,c=x.Children.toArray(o),d=c.find(KD);if(d){const h=d.props.children,f=c.map(m=>m===d?x.Children.count(h)>1?x.Children.only(null):x.isValidElement(h)?h.props.children:null:m);return E.jsx(e,{...l,ref:r,children:x.isValidElement(h)?x.cloneElement(h,void 0,f):null})}return E.jsx(e,{...l,ref:r,children:o})});return n.displayName=`${t}.Slot`,n}function HD(t){const e=x.forwardRef((n,i)=>{const{children:r,...o}=n;if(x.isValidElement(r)){const l=XD(r),c=GD(o,r.props);return r.type!==x.Fragment&&(c.ref=i?vl(i,l):l),x.cloneElement(r,c)}return x.Children.count(r)>1?x.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var $D=Symbol("radix.slottable");function KD(t){return x.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===$D}function GD(t,e){const n={...e};for(const i in e){const r=t[i],o=e[i];/^on[A-Z]/.test(i)?r&&o?n[i]=(...c)=>{const d=o(...c);return r(...c),d}:r&&(n[i]=r):i==="style"?n[i]={...r,...o}:i==="className"&&(n[i]=[r,o].filter(Boolean).join(" "))}return{...t,...n}}function XD(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}function pT(t){const e=t+"CollectionProvider",[n,i]=Is(e),[r,o]=n(e,{collectionRef:{current:null},itemMap:new Map}),l=b=>{const{scope:C,children:T}=b,_=ae.useRef(null),R=ae.useRef(new Map).current;return E.jsx(r,{scope:C,itemMap:R,collectionRef:_,children:T})};l.displayName=e;const c=t+"CollectionSlot",d=Db(c),h=ae.forwardRef((b,C)=>{const{scope:T,children:_}=b,R=o(c,T),P=nt(C,R.collectionRef);return E.jsx(d,{ref:P,children:_})});h.displayName=c;const f=t+"CollectionItemSlot",m="data-radix-collection-item",v=Db(f),S=ae.forwardRef((b,C)=>{const{scope:T,children:_,...R}=b,P=ae.useRef(null),I=nt(C,P),D=o(f,T);return ae.useEffect(()=>(D.itemMap.set(P,{ref:P,...R}),()=>void D.itemMap.delete(P))),E.jsx(v,{[m]:"",ref:I,children:_})});S.displayName=f;function k(b){const C=o(t+"CollectionConsumer",b);return ae.useCallback(()=>{const _=C.collectionRef.current;if(!_)return[];const R=Array.from(_.querySelectorAll(`[${m}]`));return Array.from(C.itemMap.values()).sort((D,O)=>R.indexOf(D.ref.current)-R.indexOf(O.ref.current))},[C.collectionRef,C.itemMap])}return[{Provider:l,Slot:h,ItemSlot:S},k,i]}var Xt=globalThis?.document?x.useLayoutEffect:()=>{},YD=Qp[" useId ".trim().toString()]||(()=>{}),JD=0;function zu(t){const[e,n]=x.useState(YD());return Xt(()=>{n(i=>i??String(JD++))},[t]),t||(e?`radix-${e}`:"")}function Br(t){const e=x.useRef(t);return x.useEffect(()=>{e.current=t}),x.useMemo(()=>(...n)=>e.current?.(...n),[])}var QD=Qp[" useInsertionEffect ".trim().toString()]||Xt;function nl({prop:t,defaultProp:e,onChange:n=()=>{},caller:i}){const[r,o,l]=ZD({defaultProp:e,onChange:n}),c=t!==void 0,d=c?t:r;{const f=x.useRef(t!==void 0);x.useEffect(()=>{const m=f.current;m!==c&&console.warn(`${i} is changing from ${m?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=c},[c,i])}const h=x.useCallback(f=>{if(c){const m=eO(f)?f(t):f;m!==t&&l.current?.(m)}else o(f)},[c,t,o,l]);return[d,h]}function ZD({defaultProp:t,onChange:e}){const[n,i]=x.useState(t),r=x.useRef(n),o=x.useRef(e);return QD(()=>{o.current=e},[e]),x.useEffect(()=>{r.current!==n&&(o.current?.(n),r.current=n)},[n,r]),[n,i,o]}function eO(t){return typeof t=="function"}var tO=x.createContext(void 0);function Dm(t){const e=x.useContext(tO);return t||e||"ltr"}var hf="rovingFocusGroup.onEntryFocus",nO={bubbles:!1,cancelable:!0},yl="RovingFocusGroup",[dp,mT,iO]=pT(yl),[rO,gT]=Is(yl,[iO]),[sO,oO]=rO(yl),vT=x.forwardRef((t,e)=>E.jsx(dp.Provider,{scope:t.__scopeRovingFocusGroup,children:E.jsx(dp.Slot,{scope:t.__scopeRovingFocusGroup,children:E.jsx(aO,{...t,ref:e})})}));vT.displayName=yl;var aO=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,orientation:i,loop:r=!1,dir:o,currentTabStopId:l,defaultCurrentTabStopId:c,onCurrentTabStopIdChange:d,onEntryFocus:h,preventScrollOnEntryFocus:f=!1,...m}=t,v=x.useRef(null),S=nt(e,v),k=Dm(o),[b,C]=nl({prop:l,defaultProp:c??null,onChange:d,caller:yl}),[T,_]=x.useState(!1),R=Br(h),P=mT(n),I=x.useRef(!1),[D,O]=x.useState(0);return x.useEffect(()=>{const N=v.current;if(N)return N.addEventListener(hf,R),()=>N.removeEventListener(hf,R)},[R]),E.jsx(sO,{scope:n,orientation:i,dir:k,loop:r,currentTabStopId:b,onItemFocus:x.useCallback(N=>C(N),[C]),onItemShiftTab:x.useCallback(()=>_(!0),[]),onFocusableItemAdd:x.useCallback(()=>O(N=>N+1),[]),onFocusableItemRemove:x.useCallback(()=>O(N=>N-1),[]),children:E.jsx(Ke.div,{tabIndex:T||D===0?-1:0,"data-orientation":i,...m,ref:S,style:{outline:"none",...t.style},onMouseDown:$e(t.onMouseDown,()=>{I.current=!0}),onFocus:$e(t.onFocus,N=>{const q=!I.current;if(N.target===N.currentTarget&&q&&!T){const H=new CustomEvent(hf,nO);if(N.currentTarget.dispatchEvent(H),!H.defaultPrevented){const G=P().filter(ie=>ie.focusable),ce=G.find(ie=>ie.active),pe=G.find(ie=>ie.id===b),ye=[ce,pe,...G].filter(Boolean).map(ie=>ie.ref.current);ST(ye,f)}}I.current=!1}),onBlur:$e(t.onBlur,()=>_(!1))})})}),yT="RovingFocusGroupItem",bT=x.forwardRef((t,e)=>{const{__scopeRovingFocusGroup:n,focusable:i=!0,active:r=!1,tabStopId:o,children:l,...c}=t,d=zu(),h=o||d,f=oO(yT,n),m=f.currentTabStopId===h,v=mT(n),{onFocusableItemAdd:S,onFocusableItemRemove:k,currentTabStopId:b}=f;return x.useEffect(()=>{if(i)return S(),()=>k()},[i,S,k]),E.jsx(dp.ItemSlot,{scope:n,id:h,focusable:i,active:r,children:E.jsx(Ke.span,{tabIndex:m?0:-1,"data-orientation":f.orientation,...c,ref:e,onMouseDown:$e(t.onMouseDown,C=>{i?f.onItemFocus(h):C.preventDefault()}),onFocus:$e(t.onFocus,()=>f.onItemFocus(h)),onKeyDown:$e(t.onKeyDown,C=>{if(C.key==="Tab"&&C.shiftKey){f.onItemShiftTab();return}if(C.target!==C.currentTarget)return;const T=uO(C,f.orientation,f.dir);if(T!==void 0){if(C.metaKey||C.ctrlKey||C.altKey||C.shiftKey)return;C.preventDefault();let R=v().filter(P=>P.focusable).map(P=>P.ref.current);if(T==="last")R.reverse();else if(T==="prev"||T==="next"){T==="prev"&&R.reverse();const P=R.indexOf(C.currentTarget);R=f.loop?dO(R,P+1):R.slice(P+1)}setTimeout(()=>ST(R))}}),children:typeof l=="function"?l({isCurrentTabStop:m,hasTabStop:b!=null}):l})})});bT.displayName=yT;var lO={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function cO(t,e){return e!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function uO(t,e,n){const i=cO(t.key,n);if(!(e==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(e==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return lO[i]}function ST(t,e=!1){const n=document.activeElement;for(const i of t)if(i===n||(i.focus({preventScroll:e}),document.activeElement!==n))return}function dO(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var hO=vT,fO=bT;function Om(t){const[e,n]=x.useState(void 0);return Xt(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const i=new ResizeObserver(r=>{if(!Array.isArray(r)||!r.length)return;const o=r[0];let l,c;if("borderBoxSize"in o){const d=o.borderBoxSize,h=Array.isArray(d)?d[0]:d;l=h.inlineSize,c=h.blockSize}else l=t.offsetWidth,c=t.offsetHeight;n({width:l,height:c})});return i.observe(t,{box:"border-box"}),()=>i.unobserve(t)}else n(void 0)},[t]),e}function Lm(t){const e=x.useRef({value:t,previous:t});return x.useMemo(()=>(e.current.value!==t&&(e.current.previous=e.current.value,e.current.value=t),e.current.previous),[t])}function pO(t,e){return x.useReducer((n,i)=>e[n][i]??n,t)}var Fm=t=>{const{present:e,children:n}=t,i=mO(e),r=typeof n=="function"?n({present:i.isPresent}):x.Children.only(n),o=nt(i.ref,gO(r));return typeof n=="function"||i.isPresent?x.cloneElement(r,{ref:o}):null};Fm.displayName="Presence";function mO(t){const[e,n]=x.useState(),i=x.useRef(null),r=x.useRef(t),o=x.useRef("none"),l=t?"mounted":"unmounted",[c,d]=pO(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return x.useEffect(()=>{const h=jc(i.current);o.current=c==="mounted"?h:"none"},[c]),Xt(()=>{const h=i.current,f=r.current;if(f!==t){const v=o.current,S=jc(h);t?d("MOUNT"):S==="none"||h?.display==="none"?d("UNMOUNT"):d(f&&v!==S?"ANIMATION_OUT":"UNMOUNT"),r.current=t}},[t,d]),Xt(()=>{if(e){let h;const f=e.ownerDocument.defaultView??window,m=S=>{const b=jc(i.current).includes(CSS.escape(S.animationName));if(S.target===e&&b&&(d("ANIMATION_END"),!r.current)){const C=e.style.animationFillMode;e.style.animationFillMode="forwards",h=f.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=C)})}},v=S=>{S.target===e&&(o.current=jc(i.current))};return e.addEventListener("animationstart",v),e.addEventListener("animationcancel",m),e.addEventListener("animationend",m),()=>{f.clearTimeout(h),e.removeEventListener("animationstart",v),e.removeEventListener("animationcancel",m),e.removeEventListener("animationend",m)}}else d("ANIMATION_END")},[e,d]),{isPresent:["mounted","unmountSuspended"].includes(c),ref:x.useCallback(h=>{i.current=h?getComputedStyle(h):null,n(h)},[])}}function jc(t){return t?.animationName||"none"}function gO(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var jm="Radio",[vO,kT]=Is(jm),[yO,bO]=vO(jm),CT=x.forwardRef((t,e)=>{const{__scopeRadio:n,name:i,checked:r=!1,required:o,disabled:l,value:c="on",onCheck:d,form:h,...f}=t,[m,v]=x.useState(null),S=nt(e,C=>v(C)),k=x.useRef(!1),b=m?h||!!m.closest("form"):!0;return E.jsxs(yO,{scope:n,checked:r,disabled:l,children:[E.jsx(Ke.button,{type:"button",role:"radio","aria-checked":r,"data-state":ET(r),"data-disabled":l?"":void 0,disabled:l,value:c,...f,ref:S,onClick:$e(t.onClick,C=>{r||d?.(),b&&(k.current=C.isPropagationStopped(),k.current||C.stopPropagation())})}),b&&E.jsx(xT,{control:m,bubbles:!k.current,name:i,value:c,checked:r,required:o,disabled:l,form:h,style:{transform:"translateX(-100%)"}})]})});CT.displayName=jm;var TT="RadioIndicator",wT=x.forwardRef((t,e)=>{const{__scopeRadio:n,forceMount:i,...r}=t,o=bO(TT,n);return E.jsx(Fm,{present:i||o.checked,children:E.jsx(Ke.span,{"data-state":ET(o.checked),"data-disabled":o.disabled?"":void 0,...r,ref:e})})});wT.displayName=TT;var SO="RadioBubbleInput",xT=x.forwardRef(({__scopeRadio:t,control:e,checked:n,bubbles:i=!0,...r},o)=>{const l=x.useRef(null),c=nt(l,o),d=Lm(n),h=Om(e);return x.useEffect(()=>{const f=l.current;if(!f)return;const m=window.HTMLInputElement.prototype,S=Object.getOwnPropertyDescriptor(m,"checked").set;if(d!==n&&S){const k=new Event("click",{bubbles:i});S.call(f,n),f.dispatchEvent(k)}},[d,n,i]),E.jsx(Ke.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...r,tabIndex:-1,ref:c,style:{...r.style,...h,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});xT.displayName=SO;function ET(t){return t?"checked":"unchecked"}var kO=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],Wu="RadioGroup",[CO]=Is(Wu,[gT,kT]),PT=gT(),RT=kT(),[TO,wO]=CO(Wu),_T=x.forwardRef((t,e)=>{const{__scopeRadioGroup:n,name:i,defaultValue:r,value:o,required:l=!1,disabled:c=!1,orientation:d,dir:h,loop:f=!0,onValueChange:m,...v}=t,S=PT(n),k=Dm(h),[b,C]=nl({prop:o,defaultProp:r??null,onChange:m,caller:Wu});return E.jsx(TO,{scope:n,name:i,required:l,disabled:c,value:b,onValueChange:C,children:E.jsx(hO,{asChild:!0,...S,orientation:d,dir:k,loop:f,children:E.jsx(Ke.div,{role:"radiogroup","aria-required":l,"aria-orientation":d,"data-disabled":c?"":void 0,dir:k,...v,ref:e})})})});_T.displayName=Wu;var IT="RadioGroupItem",AT=x.forwardRef((t,e)=>{const{__scopeRadioGroup:n,disabled:i,...r}=t,o=wO(IT,n),l=o.disabled||i,c=PT(n),d=RT(n),h=x.useRef(null),f=nt(e,h),m=o.value===r.value,v=x.useRef(!1);return x.useEffect(()=>{const S=b=>{kO.includes(b.key)&&(v.current=!0)},k=()=>v.current=!1;return document.addEventListener("keydown",S),document.addEventListener("keyup",k),()=>{document.removeEventListener("keydown",S),document.removeEventListener("keyup",k)}},[]),E.jsx(fO,{asChild:!0,...c,focusable:!l,active:m,children:E.jsx(CT,{disabled:l,required:o.required,checked:m,...d,...r,name:o.name,ref:f,onCheck:()=>o.onValueChange(r.value),onKeyDown:$e(S=>{S.key==="Enter"&&S.preventDefault()}),onFocus:$e(r.onFocus,()=>{v.current&&h.current?.click()})})})});AT.displayName=IT;var xO="RadioGroupIndicator",MT=x.forwardRef((t,e)=>{const{__scopeRadioGroup:n,...i}=t,r=RT(n);return E.jsx(wT,{...r,...i,ref:e})});MT.displayName=xO;var EO=_T,PO=AT,RO=MT;function _O({className:t,...e}){return E.jsx(EO,{"data-slot":"radio-group",className:vn("grid gap-3",t),...e})}function IO({className:t,...e}){return E.jsx(PO,{"data-slot":"radio-group-item",className:vn("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:E.jsx(RO,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:E.jsx(VR,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}function Ob(t,[e,n]){return Math.min(n,Math.max(e,t))}function AO(t,e=globalThis?.document){const n=Br(t);x.useEffect(()=>{const i=r=>{r.key==="Escape"&&n(r)};return e.addEventListener("keydown",i,{capture:!0}),()=>e.removeEventListener("keydown",i,{capture:!0})},[n,e])}var MO="DismissableLayer",hp="dismissableLayer.update",NO="dismissableLayer.pointerDownOutside",DO="dismissableLayer.focusOutside",Lb,NT=x.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),DT=x.forwardRef((t,e)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:i,onPointerDownOutside:r,onFocusOutside:o,onInteractOutside:l,onDismiss:c,...d}=t,h=x.useContext(NT),[f,m]=x.useState(null),v=f?.ownerDocument??globalThis?.document,[,S]=x.useState({}),k=nt(e,O=>m(O)),b=Array.from(h.layers),[C]=[...h.layersWithOutsidePointerEventsDisabled].slice(-1),T=b.indexOf(C),_=f?b.indexOf(f):-1,R=h.layersWithOutsidePointerEventsDisabled.size>0,P=_>=T,I=FO(O=>{const N=O.target,q=[...h.branches].some(H=>H.contains(N));!P||q||(r?.(O),l?.(O),O.defaultPrevented||c?.())},v),D=jO(O=>{const N=O.target;[...h.branches].some(H=>H.contains(N))||(o?.(O),l?.(O),O.defaultPrevented||c?.())},v);return AO(O=>{_===h.layers.size-1&&(i?.(O),!O.defaultPrevented&&c&&(O.preventDefault(),c()))},v),x.useEffect(()=>{if(f)return n&&(h.layersWithOutsidePointerEventsDisabled.size===0&&(Lb=v.body.style.pointerEvents,v.body.style.pointerEvents="none"),h.layersWithOutsidePointerEventsDisabled.add(f)),h.layers.add(f),Fb(),()=>{n&&h.layersWithOutsidePointerEventsDisabled.size===1&&(v.body.style.pointerEvents=Lb)}},[f,v,n,h]),x.useEffect(()=>()=>{f&&(h.layers.delete(f),h.layersWithOutsidePointerEventsDisabled.delete(f),Fb())},[f,h]),x.useEffect(()=>{const O=()=>S({});return document.addEventListener(hp,O),()=>document.removeEventListener(hp,O)},[]),E.jsx(Ke.div,{...d,ref:k,style:{pointerEvents:R?P?"auto":"none":void 0,...t.style},onFocusCapture:$e(t.onFocusCapture,D.onFocusCapture),onBlurCapture:$e(t.onBlurCapture,D.onBlurCapture),onPointerDownCapture:$e(t.onPointerDownCapture,I.onPointerDownCapture)})});DT.displayName=MO;var OO="DismissableLayerBranch",LO=x.forwardRef((t,e)=>{const n=x.useContext(NT),i=x.useRef(null),r=nt(e,i);return x.useEffect(()=>{const o=i.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),E.jsx(Ke.div,{...t,ref:r})});LO.displayName=OO;function FO(t,e=globalThis?.document){const n=Br(t),i=x.useRef(!1),r=x.useRef(()=>{});return x.useEffect(()=>{const o=c=>{if(c.target&&!i.current){let d=function(){OT(NO,n,h,{discrete:!0})};const h={originalEvent:c};c.pointerType==="touch"?(e.removeEventListener("click",r.current),r.current=d,e.addEventListener("click",r.current,{once:!0})):d()}else e.removeEventListener("click",r.current);i.current=!1},l=window.setTimeout(()=>{e.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(l),e.removeEventListener("pointerdown",o),e.removeEventListener("click",r.current)}},[e,n]),{onPointerDownCapture:()=>i.current=!0}}function jO(t,e=globalThis?.document){const n=Br(t),i=x.useRef(!1);return x.useEffect(()=>{const r=o=>{o.target&&!i.current&&OT(DO,n,{originalEvent:o},{discrete:!1})};return e.addEventListener("focusin",r),()=>e.removeEventListener("focusin",r)},[e,n]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function Fb(){const t=new CustomEvent(hp);document.dispatchEvent(t)}function OT(t,e,n,{discrete:i}){const r=n.originalEvent.target,o=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:n});e&&r.addEventListener(t,e,{once:!0}),i?qD(r,o):r.dispatchEvent(o)}var ff=0;function UO(){x.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??jb()),document.body.insertAdjacentElement("beforeend",t[1]??jb()),ff++,()=>{ff===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(e=>e.remove()),ff--}},[])}function jb(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var pf="focusScope.autoFocusOnMount",mf="focusScope.autoFocusOnUnmount",Ub={bubbles:!1,cancelable:!0},BO="FocusScope",LT=x.forwardRef((t,e)=>{const{loop:n=!1,trapped:i=!1,onMountAutoFocus:r,onUnmountAutoFocus:o,...l}=t,[c,d]=x.useState(null),h=Br(r),f=Br(o),m=x.useRef(null),v=nt(e,b=>d(b)),S=x.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;x.useEffect(()=>{if(i){let b=function(R){if(S.paused||!c)return;const P=R.target;c.contains(P)?m.current=P:Ir(m.current,{select:!0})},C=function(R){if(S.paused||!c)return;const P=R.relatedTarget;P!==null&&(c.contains(P)||Ir(m.current,{select:!0}))},T=function(R){if(document.activeElement===document.body)for(const I of R)I.removedNodes.length>0&&Ir(c)};document.addEventListener("focusin",b),document.addEventListener("focusout",C);const _=new MutationObserver(T);return c&&_.observe(c,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",b),document.removeEventListener("focusout",C),_.disconnect()}}},[i,c,S.paused]),x.useEffect(()=>{if(c){Vb.add(S);const b=document.activeElement;if(!c.contains(b)){const T=new CustomEvent(pf,Ub);c.addEventListener(pf,h),c.dispatchEvent(T),T.defaultPrevented||(VO($O(FT(c)),{select:!0}),document.activeElement===b&&Ir(c))}return()=>{c.removeEventListener(pf,h),setTimeout(()=>{const T=new CustomEvent(mf,Ub);c.addEventListener(mf,f),c.dispatchEvent(T),T.defaultPrevented||Ir(b??document.body,{select:!0}),c.removeEventListener(mf,f),Vb.remove(S)},0)}}},[c,h,f,S]);const k=x.useCallback(b=>{if(!n&&!i||S.paused)return;const C=b.key==="Tab"&&!b.altKey&&!b.ctrlKey&&!b.metaKey,T=document.activeElement;if(C&&T){const _=b.currentTarget,[R,P]=zO(_);R&&P?!b.shiftKey&&T===P?(b.preventDefault(),n&&Ir(R,{select:!0})):b.shiftKey&&T===R&&(b.preventDefault(),n&&Ir(P,{select:!0})):T===_&&b.preventDefault()}},[n,i,S.paused]);return E.jsx(Ke.div,{tabIndex:-1,...l,ref:v,onKeyDown:k})});LT.displayName=BO;function VO(t,{select:e=!1}={}){const n=document.activeElement;for(const i of t)if(Ir(i,{select:e}),document.activeElement!==n)return}function zO(t){const e=FT(t),n=Bb(e,t),i=Bb(e.reverse(),t);return[n,i]}function FT(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const r=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||r?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Bb(t,e){for(const n of t)if(!WO(n,{upTo:e}))return n}function WO(t,{upTo:e}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(e!==void 0&&t===e)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function qO(t){return t instanceof HTMLInputElement&&"select"in t}function Ir(t,{select:e=!1}={}){if(t&&t.focus){const n=document.activeElement;t.focus({preventScroll:!0}),t!==n&&qO(t)&&e&&t.select()}}var Vb=HO();function HO(){let t=[];return{add(e){const n=t[0];e!==n&&n?.pause(),t=zb(t,e),t.unshift(e)},remove(e){t=zb(t,e),t[0]?.resume()}}}function zb(t,e){const n=[...t],i=n.indexOf(e);return i!==-1&&n.splice(i,1),n}function $O(t){return t.filter(e=>e.tagName!=="A")}const KO=["top","right","bottom","left"],Vr=Math.min,xn=Math.max,bu=Math.round,Uc=Math.floor,Si=t=>({x:t,y:t}),GO={left:"right",right:"left",bottom:"top",top:"bottom"},XO={start:"end",end:"start"};function fp(t,e,n){return xn(t,Vr(e,n))}function Xi(t,e){return typeof t=="function"?t(e):t}function Yi(t){return t.split("-")[0]}function Uo(t){return t.split("-")[1]}function Um(t){return t==="x"?"y":"x"}function Bm(t){return t==="y"?"height":"width"}const YO=new Set(["top","bottom"]);function vi(t){return YO.has(Yi(t))?"y":"x"}function Vm(t){return Um(vi(t))}function JO(t,e,n){n===void 0&&(n=!1);const i=Uo(t),r=Vm(t),o=Bm(r);let l=r==="x"?i===(n?"end":"start")?"right":"left":i==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(l=Su(l)),[l,Su(l)]}function QO(t){const e=Su(t);return[pp(t),e,pp(e)]}function pp(t){return t.replace(/start|end/g,e=>XO[e])}const Wb=["left","right"],qb=["right","left"],ZO=["top","bottom"],eL=["bottom","top"];function tL(t,e,n){switch(t){case"top":case"bottom":return n?e?qb:Wb:e?Wb:qb;case"left":case"right":return e?ZO:eL;default:return[]}}function nL(t,e,n,i){const r=Uo(t);let o=tL(Yi(t),n==="start",i);return r&&(o=o.map(l=>l+"-"+r),e&&(o=o.concat(o.map(pp)))),o}function Su(t){return t.replace(/left|right|bottom|top/g,e=>GO[e])}function iL(t){return{top:0,right:0,bottom:0,left:0,...t}}function jT(t){return typeof t!="number"?iL(t):{top:t,right:t,bottom:t,left:t}}function ku(t){const{x:e,y:n,width:i,height:r}=t;return{width:i,height:r,top:n,left:e,right:e+i,bottom:n+r,x:e,y:n}}function Hb(t,e,n){let{reference:i,floating:r}=t;const o=vi(e),l=Vm(e),c=Bm(l),d=Yi(e),h=o==="y",f=i.x+i.width/2-r.width/2,m=i.y+i.height/2-r.height/2,v=i[c]/2-r[c]/2;let S;switch(d){case"top":S={x:f,y:i.y-r.height};break;case"bottom":S={x:f,y:i.y+i.height};break;case"right":S={x:i.x+i.width,y:m};break;case"left":S={x:i.x-r.width,y:m};break;default:S={x:i.x,y:i.y}}switch(Uo(e)){case"start":S[l]-=v*(n&&h?-1:1);break;case"end":S[l]+=v*(n&&h?-1:1);break}return S}const rL=async(t,e,n)=>{const{placement:i="bottom",strategy:r="absolute",middleware:o=[],platform:l}=n,c=o.filter(Boolean),d=await(l.isRTL==null?void 0:l.isRTL(e));let h=await l.getElementRects({reference:t,floating:e,strategy:r}),{x:f,y:m}=Hb(h,i,d),v=i,S={},k=0;for(let b=0;b<c.length;b++){const{name:C,fn:T}=c[b],{x:_,y:R,data:P,reset:I}=await T({x:f,y:m,initialPlacement:i,placement:v,strategy:r,middlewareData:S,rects:h,platform:l,elements:{reference:t,floating:e}});f=_??f,m=R??m,S={...S,[C]:{...S[C],...P}},I&&k<=50&&(k++,typeof I=="object"&&(I.placement&&(v=I.placement),I.rects&&(h=I.rects===!0?await l.getElementRects({reference:t,floating:e,strategy:r}):I.rects),{x:f,y:m}=Hb(h,v,d)),b=-1)}return{x:f,y:m,placement:v,strategy:r,middlewareData:S}};async function il(t,e){var n;e===void 0&&(e={});const{x:i,y:r,platform:o,rects:l,elements:c,strategy:d}=t,{boundary:h="clippingAncestors",rootBoundary:f="viewport",elementContext:m="floating",altBoundary:v=!1,padding:S=0}=Xi(e,t),k=jT(S),C=c[v?m==="floating"?"reference":"floating":m],T=ku(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(C)))==null||n?C:C.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(c.floating)),boundary:h,rootBoundary:f,strategy:d})),_=m==="floating"?{x:i,y:r,width:l.floating.width,height:l.floating.height}:l.reference,R=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c.floating)),P=await(o.isElement==null?void 0:o.isElement(R))?await(o.getScale==null?void 0:o.getScale(R))||{x:1,y:1}:{x:1,y:1},I=ku(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:_,offsetParent:R,strategy:d}):_);return{top:(T.top-I.top+k.top)/P.y,bottom:(I.bottom-T.bottom+k.bottom)/P.y,left:(T.left-I.left+k.left)/P.x,right:(I.right-T.right+k.right)/P.x}}const sL=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:i,placement:r,rects:o,platform:l,elements:c,middlewareData:d}=e,{element:h,padding:f=0}=Xi(t,e)||{};if(h==null)return{};const m=jT(f),v={x:n,y:i},S=Vm(r),k=Bm(S),b=await l.getDimensions(h),C=S==="y",T=C?"top":"left",_=C?"bottom":"right",R=C?"clientHeight":"clientWidth",P=o.reference[k]+o.reference[S]-v[S]-o.floating[k],I=v[S]-o.reference[S],D=await(l.getOffsetParent==null?void 0:l.getOffsetParent(h));let O=D?D[R]:0;(!O||!await(l.isElement==null?void 0:l.isElement(D)))&&(O=c.floating[R]||o.floating[k]);const N=P/2-I/2,q=O/2-b[k]/2-1,H=Vr(m[T],q),G=Vr(m[_],q),ce=H,pe=O-b[k]-G,me=O/2-b[k]/2+N,ye=fp(ce,me,pe),ie=!d.arrow&&Uo(r)!=null&&me!==ye&&o.reference[k]/2-(me<ce?H:G)-b[k]/2<0,Z=ie?me<ce?me-ce:me-pe:0;return{[S]:v[S]+Z,data:{[S]:ye,centerOffset:me-ye-Z,...ie&&{alignmentOffset:Z}},reset:ie}}}),oL=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,i;const{placement:r,middlewareData:o,rects:l,initialPlacement:c,platform:d,elements:h}=e,{mainAxis:f=!0,crossAxis:m=!0,fallbackPlacements:v,fallbackStrategy:S="bestFit",fallbackAxisSideDirection:k="none",flipAlignment:b=!0,...C}=Xi(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const T=Yi(r),_=vi(c),R=Yi(c)===c,P=await(d.isRTL==null?void 0:d.isRTL(h.floating)),I=v||(R||!b?[Su(c)]:QO(c)),D=k!=="none";!v&&D&&I.push(...nL(c,b,k,P));const O=[c,...I],N=await il(e,C),q=[];let H=((i=o.flip)==null?void 0:i.overflows)||[];if(f&&q.push(N[T]),m){const me=JO(r,l,P);q.push(N[me[0]],N[me[1]])}if(H=[...H,{placement:r,overflows:q}],!q.every(me=>me<=0)){var G,ce;const me=(((G=o.flip)==null?void 0:G.index)||0)+1,ye=O[me];if(ye&&(!(m==="alignment"?_!==vi(ye):!1)||H.every(U=>vi(U.placement)===_?U.overflows[0]>0:!0)))return{data:{index:me,overflows:H},reset:{placement:ye}};let ie=(ce=H.filter(Z=>Z.overflows[0]<=0).sort((Z,U)=>Z.overflows[1]-U.overflows[1])[0])==null?void 0:ce.placement;if(!ie)switch(S){case"bestFit":{var pe;const Z=(pe=H.filter(U=>{if(D){const re=vi(U.placement);return re===_||re==="y"}return!0}).map(U=>[U.placement,U.overflows.filter(re=>re>0).reduce((re,Y)=>re+Y,0)]).sort((U,re)=>U[1]-re[1])[0])==null?void 0:pe[0];Z&&(ie=Z);break}case"initialPlacement":ie=c;break}if(r!==ie)return{reset:{placement:ie}}}return{}}}};function $b(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Kb(t){return KO.some(e=>t[e]>=0)}const aL=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:i="referenceHidden",...r}=Xi(t,e);switch(i){case"referenceHidden":{const o=await il(e,{...r,elementContext:"reference"}),l=$b(o,n.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:Kb(l)}}}case"escaped":{const o=await il(e,{...r,altBoundary:!0}),l=$b(o,n.floating);return{data:{escapedOffsets:l,escaped:Kb(l)}}}default:return{}}}}},UT=new Set(["left","top"]);async function lL(t,e){const{placement:n,platform:i,elements:r}=t,o=await(i.isRTL==null?void 0:i.isRTL(r.floating)),l=Yi(n),c=Uo(n),d=vi(n)==="y",h=UT.has(l)?-1:1,f=o&&d?-1:1,m=Xi(e,t);let{mainAxis:v,crossAxis:S,alignmentAxis:k}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return c&&typeof k=="number"&&(S=c==="end"?k*-1:k),d?{x:S*f,y:v*h}:{x:v*h,y:S*f}}const cL=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,i;const{x:r,y:o,placement:l,middlewareData:c}=e,d=await lL(e,t);return l===((n=c.offset)==null?void 0:n.placement)&&(i=c.arrow)!=null&&i.alignmentOffset?{}:{x:r+d.x,y:o+d.y,data:{...d,placement:l}}}}},uL=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:i,placement:r}=e,{mainAxis:o=!0,crossAxis:l=!1,limiter:c={fn:C=>{let{x:T,y:_}=C;return{x:T,y:_}}},...d}=Xi(t,e),h={x:n,y:i},f=await il(e,d),m=vi(Yi(r)),v=Um(m);let S=h[v],k=h[m];if(o){const C=v==="y"?"top":"left",T=v==="y"?"bottom":"right",_=S+f[C],R=S-f[T];S=fp(_,S,R)}if(l){const C=m==="y"?"top":"left",T=m==="y"?"bottom":"right",_=k+f[C],R=k-f[T];k=fp(_,k,R)}const b=c.fn({...e,[v]:S,[m]:k});return{...b,data:{x:b.x-n,y:b.y-i,enabled:{[v]:o,[m]:l}}}}}},dL=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:i,placement:r,rects:o,middlewareData:l}=e,{offset:c=0,mainAxis:d=!0,crossAxis:h=!0}=Xi(t,e),f={x:n,y:i},m=vi(r),v=Um(m);let S=f[v],k=f[m];const b=Xi(c,e),C=typeof b=="number"?{mainAxis:b,crossAxis:0}:{mainAxis:0,crossAxis:0,...b};if(d){const R=v==="y"?"height":"width",P=o.reference[v]-o.floating[R]+C.mainAxis,I=o.reference[v]+o.reference[R]-C.mainAxis;S<P?S=P:S>I&&(S=I)}if(h){var T,_;const R=v==="y"?"width":"height",P=UT.has(Yi(r)),I=o.reference[m]-o.floating[R]+(P&&((T=l.offset)==null?void 0:T[m])||0)+(P?0:C.crossAxis),D=o.reference[m]+o.reference[R]+(P?0:((_=l.offset)==null?void 0:_[m])||0)-(P?C.crossAxis:0);k<I?k=I:k>D&&(k=D)}return{[v]:S,[m]:k}}}},hL=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,i;const{placement:r,rects:o,platform:l,elements:c}=e,{apply:d=()=>{},...h}=Xi(t,e),f=await il(e,h),m=Yi(r),v=Uo(r),S=vi(r)==="y",{width:k,height:b}=o.floating;let C,T;m==="top"||m==="bottom"?(C=m,T=v===(await(l.isRTL==null?void 0:l.isRTL(c.floating))?"start":"end")?"left":"right"):(T=m,C=v==="end"?"top":"bottom");const _=b-f.top-f.bottom,R=k-f.left-f.right,P=Vr(b-f[C],_),I=Vr(k-f[T],R),D=!e.middlewareData.shift;let O=P,N=I;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(N=R),(i=e.middlewareData.shift)!=null&&i.enabled.y&&(O=_),D&&!v){const H=xn(f.left,0),G=xn(f.right,0),ce=xn(f.top,0),pe=xn(f.bottom,0);S?N=k-2*(H!==0||G!==0?H+G:xn(f.left,f.right)):O=b-2*(ce!==0||pe!==0?ce+pe:xn(f.top,f.bottom))}await d({...e,availableWidth:N,availableHeight:O});const q=await l.getDimensions(c.floating);return k!==q.width||b!==q.height?{reset:{rects:!0}}:{}}}};function qu(){return typeof window<"u"}function Bo(t){return BT(t)?(t.nodeName||"").toLowerCase():"#document"}function Pn(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function xi(t){var e;return(e=(BT(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function BT(t){return qu()?t instanceof Node||t instanceof Pn(t).Node:!1}function ri(t){return qu()?t instanceof Element||t instanceof Pn(t).Element:!1}function Ci(t){return qu()?t instanceof HTMLElement||t instanceof Pn(t).HTMLElement:!1}function Gb(t){return!qu()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof Pn(t).ShadowRoot}const fL=new Set(["inline","contents"]);function bl(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=si(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!fL.has(r)}const pL=new Set(["table","td","th"]);function mL(t){return pL.has(Bo(t))}const gL=[":popover-open",":modal"];function Hu(t){return gL.some(e=>{try{return t.matches(e)}catch{return!1}})}const vL=["transform","translate","scale","rotate","perspective"],yL=["transform","translate","scale","rotate","perspective","filter"],bL=["paint","layout","strict","content"];function zm(t){const e=Wm(),n=ri(t)?si(t):t;return vL.some(i=>n[i]?n[i]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||yL.some(i=>(n.willChange||"").includes(i))||bL.some(i=>(n.contain||"").includes(i))}function SL(t){let e=zr(t);for(;Ci(e)&&!Ao(e);){if(zm(e))return e;if(Hu(e))return null;e=zr(e)}return null}function Wm(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const kL=new Set(["html","body","#document"]);function Ao(t){return kL.has(Bo(t))}function si(t){return Pn(t).getComputedStyle(t)}function $u(t){return ri(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function zr(t){if(Bo(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Gb(t)&&t.host||xi(t);return Gb(e)?e.host:e}function VT(t){const e=zr(t);return Ao(e)?t.ownerDocument?t.ownerDocument.body:t.body:Ci(e)&&bl(e)?e:VT(e)}function rl(t,e,n){var i;e===void 0&&(e=[]),n===void 0&&(n=!0);const r=VT(t),o=r===((i=t.ownerDocument)==null?void 0:i.body),l=Pn(r);if(o){const c=mp(l);return e.concat(l,l.visualViewport||[],bl(r)?r:[],c&&n?rl(c):[])}return e.concat(r,rl(r,[],n))}function mp(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function zT(t){const e=si(t);let n=parseFloat(e.width)||0,i=parseFloat(e.height)||0;const r=Ci(t),o=r?t.offsetWidth:n,l=r?t.offsetHeight:i,c=bu(n)!==o||bu(i)!==l;return c&&(n=o,i=l),{width:n,height:i,$:c}}function qm(t){return ri(t)?t:t.contextElement}function So(t){const e=qm(t);if(!Ci(e))return Si(1);const n=e.getBoundingClientRect(),{width:i,height:r,$:o}=zT(e);let l=(o?bu(n.width):n.width)/i,c=(o?bu(n.height):n.height)/r;return(!l||!Number.isFinite(l))&&(l=1),(!c||!Number.isFinite(c))&&(c=1),{x:l,y:c}}const CL=Si(0);function WT(t){const e=Pn(t);return!Wm()||!e.visualViewport?CL:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function TL(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==Pn(t)?!1:e}function ws(t,e,n,i){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=t.getBoundingClientRect(),o=qm(t);let l=Si(1);e&&(i?ri(i)&&(l=So(i)):l=So(t));const c=TL(o,n,i)?WT(o):Si(0);let d=(r.left+c.x)/l.x,h=(r.top+c.y)/l.y,f=r.width/l.x,m=r.height/l.y;if(o){const v=Pn(o),S=i&&ri(i)?Pn(i):i;let k=v,b=mp(k);for(;b&&i&&S!==k;){const C=So(b),T=b.getBoundingClientRect(),_=si(b),R=T.left+(b.clientLeft+parseFloat(_.paddingLeft))*C.x,P=T.top+(b.clientTop+parseFloat(_.paddingTop))*C.y;d*=C.x,h*=C.y,f*=C.x,m*=C.y,d+=R,h+=P,k=Pn(b),b=mp(k)}}return ku({width:f,height:m,x:d,y:h})}function Ku(t,e){const n=$u(t).scrollLeft;return e?e.left+n:ws(xi(t)).left+n}function qT(t,e){const n=t.getBoundingClientRect(),i=n.left+e.scrollLeft-Ku(t,n),r=n.top+e.scrollTop;return{x:i,y:r}}function wL(t){let{elements:e,rect:n,offsetParent:i,strategy:r}=t;const o=r==="fixed",l=xi(i),c=e?Hu(e.floating):!1;if(i===l||c&&o)return n;let d={scrollLeft:0,scrollTop:0},h=Si(1);const f=Si(0),m=Ci(i);if((m||!m&&!o)&&((Bo(i)!=="body"||bl(l))&&(d=$u(i)),Ci(i))){const S=ws(i);h=So(i),f.x=S.x+i.clientLeft,f.y=S.y+i.clientTop}const v=l&&!m&&!o?qT(l,d):Si(0);return{width:n.width*h.x,height:n.height*h.y,x:n.x*h.x-d.scrollLeft*h.x+f.x+v.x,y:n.y*h.y-d.scrollTop*h.y+f.y+v.y}}function xL(t){return Array.from(t.getClientRects())}function EL(t){const e=xi(t),n=$u(t),i=t.ownerDocument.body,r=xn(e.scrollWidth,e.clientWidth,i.scrollWidth,i.clientWidth),o=xn(e.scrollHeight,e.clientHeight,i.scrollHeight,i.clientHeight);let l=-n.scrollLeft+Ku(t);const c=-n.scrollTop;return si(i).direction==="rtl"&&(l+=xn(e.clientWidth,i.clientWidth)-r),{width:r,height:o,x:l,y:c}}const Xb=25;function PL(t,e){const n=Pn(t),i=xi(t),r=n.visualViewport;let o=i.clientWidth,l=i.clientHeight,c=0,d=0;if(r){o=r.width,l=r.height;const f=Wm();(!f||f&&e==="fixed")&&(c=r.offsetLeft,d=r.offsetTop)}const h=Ku(i);if(h<=0){const f=i.ownerDocument,m=f.body,v=getComputedStyle(m),S=f.compatMode==="CSS1Compat"&&parseFloat(v.marginLeft)+parseFloat(v.marginRight)||0,k=Math.abs(i.clientWidth-m.clientWidth-S);k<=Xb&&(o-=k)}else h<=Xb&&(o+=h);return{width:o,height:l,x:c,y:d}}const RL=new Set(["absolute","fixed"]);function _L(t,e){const n=ws(t,!0,e==="fixed"),i=n.top+t.clientTop,r=n.left+t.clientLeft,o=Ci(t)?So(t):Si(1),l=t.clientWidth*o.x,c=t.clientHeight*o.y,d=r*o.x,h=i*o.y;return{width:l,height:c,x:d,y:h}}function Yb(t,e,n){let i;if(e==="viewport")i=PL(t,n);else if(e==="document")i=EL(xi(t));else if(ri(e))i=_L(e,n);else{const r=WT(t);i={x:e.x-r.x,y:e.y-r.y,width:e.width,height:e.height}}return ku(i)}function HT(t,e){const n=zr(t);return n===e||!ri(n)||Ao(n)?!1:si(n).position==="fixed"||HT(n,e)}function IL(t,e){const n=e.get(t);if(n)return n;let i=rl(t,[],!1).filter(c=>ri(c)&&Bo(c)!=="body"),r=null;const o=si(t).position==="fixed";let l=o?zr(t):t;for(;ri(l)&&!Ao(l);){const c=si(l),d=zm(l);!d&&c.position==="fixed"&&(r=null),(o?!d&&!r:!d&&c.position==="static"&&!!r&&RL.has(r.position)||bl(l)&&!d&&HT(t,l))?i=i.filter(f=>f!==l):r=c,l=zr(l)}return e.set(t,i),i}function AL(t){let{element:e,boundary:n,rootBoundary:i,strategy:r}=t;const l=[...n==="clippingAncestors"?Hu(e)?[]:IL(e,this._c):[].concat(n),i],c=l[0],d=l.reduce((h,f)=>{const m=Yb(e,f,r);return h.top=xn(m.top,h.top),h.right=Vr(m.right,h.right),h.bottom=Vr(m.bottom,h.bottom),h.left=xn(m.left,h.left),h},Yb(e,c,r));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function ML(t){const{width:e,height:n}=zT(t);return{width:e,height:n}}function NL(t,e,n){const i=Ci(e),r=xi(e),o=n==="fixed",l=ws(t,!0,o,e);let c={scrollLeft:0,scrollTop:0};const d=Si(0);function h(){d.x=Ku(r)}if(i||!i&&!o)if((Bo(e)!=="body"||bl(r))&&(c=$u(e)),i){const S=ws(e,!0,o,e);d.x=S.x+e.clientLeft,d.y=S.y+e.clientTop}else r&&h();o&&!i&&r&&h();const f=r&&!i&&!o?qT(r,c):Si(0),m=l.left+c.scrollLeft-d.x-f.x,v=l.top+c.scrollTop-d.y-f.y;return{x:m,y:v,width:l.width,height:l.height}}function gf(t){return si(t).position==="static"}function Jb(t,e){if(!Ci(t)||si(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return xi(t)===n&&(n=n.ownerDocument.body),n}function $T(t,e){const n=Pn(t);if(Hu(t))return n;if(!Ci(t)){let r=zr(t);for(;r&&!Ao(r);){if(ri(r)&&!gf(r))return r;r=zr(r)}return n}let i=Jb(t,e);for(;i&&mL(i)&&gf(i);)i=Jb(i,e);return i&&Ao(i)&&gf(i)&&!zm(i)?n:i||SL(t)||n}const DL=async function(t){const e=this.getOffsetParent||$T,n=this.getDimensions,i=await n(t.floating);return{reference:NL(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function OL(t){return si(t).direction==="rtl"}const LL={convertOffsetParentRelativeRectToViewportRelativeRect:wL,getDocumentElement:xi,getClippingRect:AL,getOffsetParent:$T,getElementRects:DL,getClientRects:xL,getDimensions:ML,getScale:So,isElement:ri,isRTL:OL};function KT(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function FL(t,e){let n=null,i;const r=xi(t);function o(){var c;clearTimeout(i),(c=n)==null||c.disconnect(),n=null}function l(c,d){c===void 0&&(c=!1),d===void 0&&(d=1),o();const h=t.getBoundingClientRect(),{left:f,top:m,width:v,height:S}=h;if(c||e(),!v||!S)return;const k=Uc(m),b=Uc(r.clientWidth-(f+v)),C=Uc(r.clientHeight-(m+S)),T=Uc(f),R={rootMargin:-k+"px "+-b+"px "+-C+"px "+-T+"px",threshold:xn(0,Vr(1,d))||1};let P=!0;function I(D){const O=D[0].intersectionRatio;if(O!==d){if(!P)return l();O?l(!1,O):i=setTimeout(()=>{l(!1,1e-7)},1e3)}O===1&&!KT(h,t.getBoundingClientRect())&&l(),P=!1}try{n=new IntersectionObserver(I,{...R,root:r.ownerDocument})}catch{n=new IntersectionObserver(I,R)}n.observe(t)}return l(!0),o}function jL(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:o=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:d=!1}=i,h=qm(t),f=r||o?[...h?rl(h):[],...rl(e)]:[];f.forEach(T=>{r&&T.addEventListener("scroll",n,{passive:!0}),o&&T.addEventListener("resize",n)});const m=h&&c?FL(h,n):null;let v=-1,S=null;l&&(S=new ResizeObserver(T=>{let[_]=T;_&&_.target===h&&S&&(S.unobserve(e),cancelAnimationFrame(v),v=requestAnimationFrame(()=>{var R;(R=S)==null||R.observe(e)})),n()}),h&&!d&&S.observe(h),S.observe(e));let k,b=d?ws(t):null;d&&C();function C(){const T=ws(t);b&&!KT(b,T)&&n(),b=T,k=requestAnimationFrame(C)}return n(),()=>{var T;f.forEach(_=>{r&&_.removeEventListener("scroll",n),o&&_.removeEventListener("resize",n)}),m?.(),(T=S)==null||T.disconnect(),S=null,d&&cancelAnimationFrame(k)}}const UL=cL,BL=uL,VL=oL,zL=hL,WL=aL,Qb=sL,qL=dL,HL=(t,e,n)=>{const i=new Map,r={platform:LL,...n},o={...r.platform,_c:i};return rL(t,e,{...r,platform:o})};var $L=typeof document<"u",KL=function(){},Jc=$L?x.useLayoutEffect:KL;function Cu(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,i,r;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(i=n;i--!==0;)if(!Cu(t[i],e[i]))return!1;return!0}if(r=Object.keys(t),n=r.length,n!==Object.keys(e).length)return!1;for(i=n;i--!==0;)if(!{}.hasOwnProperty.call(e,r[i]))return!1;for(i=n;i--!==0;){const o=r[i];if(!(o==="_owner"&&t.$$typeof)&&!Cu(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function GT(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Zb(t,e){const n=GT(t);return Math.round(e*n)/n}function vf(t){const e=x.useRef(t);return Jc(()=>{e.current=t}),e}function GL(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:i=[],platform:r,elements:{reference:o,floating:l}={},transform:c=!0,whileElementsMounted:d,open:h}=t,[f,m]=x.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[v,S]=x.useState(i);Cu(v,i)||S(i);const[k,b]=x.useState(null),[C,T]=x.useState(null),_=x.useCallback(U=>{U!==D.current&&(D.current=U,b(U))},[]),R=x.useCallback(U=>{U!==O.current&&(O.current=U,T(U))},[]),P=o||k,I=l||C,D=x.useRef(null),O=x.useRef(null),N=x.useRef(f),q=d!=null,H=vf(d),G=vf(r),ce=vf(h),pe=x.useCallback(()=>{if(!D.current||!O.current)return;const U={placement:e,strategy:n,middleware:v};G.current&&(U.platform=G.current),HL(D.current,O.current,U).then(re=>{const Y={...re,isPositioned:ce.current!==!1};me.current&&!Cu(N.current,Y)&&(N.current=Y,hl.flushSync(()=>{m(Y)}))})},[v,e,n,G,ce]);Jc(()=>{h===!1&&N.current.isPositioned&&(N.current.isPositioned=!1,m(U=>({...U,isPositioned:!1})))},[h]);const me=x.useRef(!1);Jc(()=>(me.current=!0,()=>{me.current=!1}),[]),Jc(()=>{if(P&&(D.current=P),I&&(O.current=I),P&&I){if(H.current)return H.current(P,I,pe);pe()}},[P,I,pe,H,q]);const ye=x.useMemo(()=>({reference:D,floating:O,setReference:_,setFloating:R}),[_,R]),ie=x.useMemo(()=>({reference:P,floating:I}),[P,I]),Z=x.useMemo(()=>{const U={position:n,left:0,top:0};if(!ie.floating)return U;const re=Zb(ie.floating,f.x),Y=Zb(ie.floating,f.y);return c?{...U,transform:"translate("+re+"px, "+Y+"px)",...GT(ie.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:re,top:Y}},[n,c,ie.floating,f.x,f.y]);return x.useMemo(()=>({...f,update:pe,refs:ye,elements:ie,floatingStyles:Z}),[f,pe,ye,ie,Z])}const XL=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:i,padding:r}=typeof t=="function"?t(n):t;return i&&e(i)?i.current!=null?Qb({element:i.current,padding:r}).fn(n):{}:i?Qb({element:i,padding:r}).fn(n):{}}}},YL=(t,e)=>({...UL(t),options:[t,e]}),JL=(t,e)=>({...BL(t),options:[t,e]}),QL=(t,e)=>({...qL(t),options:[t,e]}),ZL=(t,e)=>({...VL(t),options:[t,e]}),eF=(t,e)=>({...zL(t),options:[t,e]}),tF=(t,e)=>({...WL(t),options:[t,e]}),nF=(t,e)=>({...XL(t),options:[t,e]});var iF="Arrow",XT=x.forwardRef((t,e)=>{const{children:n,width:i=10,height:r=5,...o}=t;return E.jsx(Ke.svg,{...o,ref:e,width:i,height:r,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:E.jsx("polygon",{points:"0,0 30,0 15,10"})})});XT.displayName=iF;var rF=XT,Hm="Popper",[YT,JT]=Is(Hm),[sF,QT]=YT(Hm),ZT=t=>{const{__scopePopper:e,children:n}=t,[i,r]=x.useState(null);return E.jsx(sF,{scope:e,anchor:i,onAnchorChange:r,children:n})};ZT.displayName=Hm;var ew="PopperAnchor",tw=x.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:i,...r}=t,o=QT(ew,n),l=x.useRef(null),c=nt(e,l),d=x.useRef(null);return x.useEffect(()=>{const h=d.current;d.current=i?.current||l.current,h!==d.current&&o.onAnchorChange(d.current)}),i?null:E.jsx(Ke.div,{...r,ref:c})});tw.displayName=ew;var $m="PopperContent",[oF,aF]=YT($m),nw=x.forwardRef((t,e)=>{const{__scopePopper:n,side:i="bottom",sideOffset:r=0,align:o="center",alignOffset:l=0,arrowPadding:c=0,avoidCollisions:d=!0,collisionBoundary:h=[],collisionPadding:f=0,sticky:m="partial",hideWhenDetached:v=!1,updatePositionStrategy:S="optimized",onPlaced:k,...b}=t,C=QT($m,n),[T,_]=x.useState(null),R=nt(e,ee=>_(ee)),[P,I]=x.useState(null),D=Om(P),O=D?.width??0,N=D?.height??0,q=i+(o!=="center"?"-"+o:""),H=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},G=Array.isArray(h)?h:[h],ce=G.length>0,pe={padding:H,boundary:G.filter(cF),altBoundary:ce},{refs:me,floatingStyles:ye,placement:ie,isPositioned:Z,middlewareData:U}=GL({strategy:"fixed",placement:q,whileElementsMounted:(...ee)=>jL(...ee,{animationFrame:S==="always"}),elements:{reference:C.anchor},middleware:[YL({mainAxis:r+N,alignmentAxis:l}),d&&JL({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?QL():void 0,...pe}),d&&ZL({...pe}),eF({...pe,apply:({elements:ee,rects:he,availableWidth:Ee,availableHeight:_e})=>{const{width:Le,height:Ve}=he.reference,kt=ee.floating.style;kt.setProperty("--radix-popper-available-width",`${Ee}px`),kt.setProperty("--radix-popper-available-height",`${_e}px`),kt.setProperty("--radix-popper-anchor-width",`${Le}px`),kt.setProperty("--radix-popper-anchor-height",`${Ve}px`)}}),P&&nF({element:P,padding:c}),uF({arrowWidth:O,arrowHeight:N}),v&&tF({strategy:"referenceHidden",...pe})]}),[re,Y]=sw(ie),F=Br(k);Xt(()=>{Z&&F?.()},[Z,F]);const $=U.arrow?.x,te=U.arrow?.y,ue=U.arrow?.centerOffset!==0,[ge,we]=x.useState();return Xt(()=>{T&&we(window.getComputedStyle(T).zIndex)},[T]),E.jsx("div",{ref:me.setFloating,"data-radix-popper-content-wrapper":"",style:{...ye,transform:Z?ye.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ge,"--radix-popper-transform-origin":[U.transformOrigin?.x,U.transformOrigin?.y].join(" "),...U.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:E.jsx(oF,{scope:n,placedSide:re,onArrowChange:I,arrowX:$,arrowY:te,shouldHideArrow:ue,children:E.jsx(Ke.div,{"data-side":re,"data-align":Y,...b,ref:R,style:{...b.style,animation:Z?void 0:"none"}})})})});nw.displayName=$m;var iw="PopperArrow",lF={top:"bottom",right:"left",bottom:"top",left:"right"},rw=x.forwardRef(function(e,n){const{__scopePopper:i,...r}=e,o=aF(iw,i),l=lF[o.placedSide];return E.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:E.jsx(rF,{...r,ref:n,style:{...r.style,display:"block"}})})});rw.displayName=iw;function cF(t){return t!==null}var uF=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:i,middlewareData:r}=e,l=r.arrow?.centerOffset!==0,c=l?0:t.arrowWidth,d=l?0:t.arrowHeight,[h,f]=sw(n),m={start:"0%",center:"50%",end:"100%"}[f],v=(r.arrow?.x??0)+c/2,S=(r.arrow?.y??0)+d/2;let k="",b="";return h==="bottom"?(k=l?m:`${v}px`,b=`${-d}px`):h==="top"?(k=l?m:`${v}px`,b=`${i.floating.height+d}px`):h==="right"?(k=`${-d}px`,b=l?m:`${S}px`):h==="left"&&(k=`${i.floating.width+d}px`,b=l?m:`${S}px`),{data:{x:k,y:b}}}});function sw(t){const[e,n="center"]=t.split("-");return[e,n]}var dF=ZT,hF=tw,fF=nw,pF=rw,mF="Portal",ow=x.forwardRef((t,e)=>{const{container:n,...i}=t,[r,o]=x.useState(!1);Xt(()=>o(!0),[]);const l=n||r&&globalThis?.document?.body;return l?yk.createPortal(E.jsx(Ke.div,{...i,ref:e}),l):null});ow.displayName=mF;function gF(t){const e=vF(t),n=x.forwardRef((i,r)=>{const{children:o,...l}=i,c=x.Children.toArray(o),d=c.find(bF);if(d){const h=d.props.children,f=c.map(m=>m===d?x.Children.count(h)>1?x.Children.only(null):x.isValidElement(h)?h.props.children:null:m);return E.jsx(e,{...l,ref:r,children:x.isValidElement(h)?x.cloneElement(h,void 0,f):null})}return E.jsx(e,{...l,ref:r,children:o})});return n.displayName=`${t}.Slot`,n}function vF(t){const e=x.forwardRef((n,i)=>{const{children:r,...o}=n;if(x.isValidElement(r)){const l=kF(r),c=SF(o,r.props);return r.type!==x.Fragment&&(c.ref=i?vl(i,l):l),x.cloneElement(r,c)}return x.Children.count(r)>1?x.Children.only(null):null});return e.displayName=`${t}.SlotClone`,e}var yF=Symbol("radix.slottable");function bF(t){return x.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===yF}function SF(t,e){const n={...e};for(const i in e){const r=t[i],o=e[i];/^on[A-Z]/.test(i)?r&&o?n[i]=(...c)=>{const d=o(...c);return r(...c),d}:r&&(n[i]=r):i==="style"?n[i]={...r,...o}:i==="className"&&(n[i]=[r,o].filter(Boolean).join(" "))}return{...t,...n}}function kF(t){let e=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning;return n?t.ref:(e=Object.getOwnPropertyDescriptor(t,"ref")?.get,n=e&&"isReactWarning"in e&&e.isReactWarning,n?t.props.ref:t.props.ref||t.ref)}var aw=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),CF="VisuallyHidden",TF=x.forwardRef((t,e)=>E.jsx(Ke.span,{...t,ref:e,style:{...aw,...t.style}}));TF.displayName=CF;var wF=function(t){if(typeof document>"u")return null;var e=Array.isArray(t)?t[0]:t;return e.ownerDocument.body},ro=new WeakMap,Bc=new WeakMap,Vc={},yf=0,lw=function(t){return t&&(t.host||lw(t.parentNode))},xF=function(t,e){return e.map(function(n){if(t.contains(n))return n;var i=lw(n);return i&&t.contains(i)?i:(console.error("aria-hidden",n,"in not contained inside",t,". Doing nothing"),null)}).filter(function(n){return!!n})},EF=function(t,e,n,i){var r=xF(e,Array.isArray(t)?t:[t]);Vc[n]||(Vc[n]=new WeakMap);var o=Vc[n],l=[],c=new Set,d=new Set(r),h=function(m){!m||c.has(m)||(c.add(m),h(m.parentNode))};r.forEach(h);var f=function(m){!m||d.has(m)||Array.prototype.forEach.call(m.children,function(v){if(c.has(v))f(v);else try{var S=v.getAttribute(i),k=S!==null&&S!=="false",b=(ro.get(v)||0)+1,C=(o.get(v)||0)+1;ro.set(v,b),o.set(v,C),l.push(v),b===1&&k&&Bc.set(v,!0),C===1&&v.setAttribute(n,"true"),k||v.setAttribute(i,"true")}catch(T){console.error("aria-hidden: cannot operate on ",v,T)}})};return f(e),c.clear(),yf++,function(){l.forEach(function(m){var v=ro.get(m)-1,S=o.get(m)-1;ro.set(m,v),o.set(m,S),v||(Bc.has(m)||m.removeAttribute(i),Bc.delete(m)),S||m.removeAttribute(n)}),yf--,yf||(ro=new WeakMap,ro=new WeakMap,Bc=new WeakMap,Vc={})}},PF=function(t,e,n){n===void 0&&(n="data-aria-hidden");var i=Array.from(Array.isArray(t)?t:[t]),r=wF(t);return r?(i.push.apply(i,Array.from(r.querySelectorAll("[aria-live], script"))),EF(i,r,n,"aria-hidden")):function(){return null}},mi=function(){return mi=Object.assign||function(e){for(var n,i=1,r=arguments.length;i<r;i++){n=arguments[i];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},mi.apply(this,arguments)};function cw(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function RF(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,o;i<r;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}var Qc="right-scroll-bar-position",Zc="width-before-scroll-bar",_F="with-scroll-bars-hidden",IF="--removed-body-scroll-bar-size";function bf(t,e){return typeof t=="function"?t(e):t&&(t.current=e),t}function AF(t,e){var n=x.useState(function(){return{value:t,callback:e,facade:{get current(){return n.value},set current(i){var r=n.value;r!==i&&(n.value=i,n.callback(i,r))}}}})[0];return n.callback=e,n.facade}var MF=typeof window<"u"?x.useLayoutEffect:x.useEffect,eS=new WeakMap;function NF(t,e){var n=AF(null,function(i){return t.forEach(function(r){return bf(r,i)})});return MF(function(){var i=eS.get(n);if(i){var r=new Set(i),o=new Set(t),l=n.current;r.forEach(function(c){o.has(c)||bf(c,null)}),o.forEach(function(c){r.has(c)||bf(c,l)})}eS.set(n,t)},[t]),n}function DF(t){return t}function OF(t,e){e===void 0&&(e=DF);var n=[],i=!1,r={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:t},useMedium:function(o){var l=e(o,i);return n.push(l),function(){n=n.filter(function(c){return c!==l})}},assignSyncMedium:function(o){for(i=!0;n.length;){var l=n;n=[],l.forEach(o)}n={push:function(c){return o(c)},filter:function(){return n}}},assignMedium:function(o){i=!0;var l=[];if(n.length){var c=n;n=[],c.forEach(o),l=n}var d=function(){var f=l;l=[],f.forEach(o)},h=function(){return Promise.resolve().then(d)};h(),n={push:function(f){l.push(f),h()},filter:function(f){return l=l.filter(f),n}}}};return r}function LF(t){t===void 0&&(t={});var e=OF(null);return e.options=mi({async:!0,ssr:!1},t),e}var uw=function(t){var e=t.sideCar,n=cw(t,["sideCar"]);if(!e)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=e.read();if(!i)throw new Error("Sidecar medium not found");return x.createElement(i,mi({},n))};uw.isSideCarExport=!0;function FF(t,e){return t.useMedium(e),uw}var dw=LF(),Sf=function(){},Gu=x.forwardRef(function(t,e){var n=x.useRef(null),i=x.useState({onScrollCapture:Sf,onWheelCapture:Sf,onTouchMoveCapture:Sf}),r=i[0],o=i[1],l=t.forwardProps,c=t.children,d=t.className,h=t.removeScrollBar,f=t.enabled,m=t.shards,v=t.sideCar,S=t.noRelative,k=t.noIsolation,b=t.inert,C=t.allowPinchZoom,T=t.as,_=T===void 0?"div":T,R=t.gapMode,P=cw(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),I=v,D=NF([n,e]),O=mi(mi({},P),r);return x.createElement(x.Fragment,null,f&&x.createElement(I,{sideCar:dw,removeScrollBar:h,shards:m,noRelative:S,noIsolation:k,inert:b,setCallbacks:o,allowPinchZoom:!!C,lockRef:n,gapMode:R}),l?x.cloneElement(x.Children.only(c),mi(mi({},O),{ref:D})):x.createElement(_,mi({},O,{className:d,ref:D}),c))});Gu.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Gu.classNames={fullWidth:Zc,zeroRight:Qc};var jF=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function UF(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var e=jF();return e&&t.setAttribute("nonce",e),t}function BF(t,e){t.styleSheet?t.styleSheet.cssText=e:t.appendChild(document.createTextNode(e))}function VF(t){var e=document.head||document.getElementsByTagName("head")[0];e.appendChild(t)}var zF=function(){var t=0,e=null;return{add:function(n){t==0&&(e=UF())&&(BF(e,n),VF(e)),t++},remove:function(){t--,!t&&e&&(e.parentNode&&e.parentNode.removeChild(e),e=null)}}},WF=function(){var t=zF();return function(e,n){x.useEffect(function(){return t.add(e),function(){t.remove()}},[e&&n])}},hw=function(){var t=WF(),e=function(n){var i=n.styles,r=n.dynamic;return t(i,r),null};return e},qF={left:0,top:0,right:0,gap:0},kf=function(t){return parseInt(t||"",10)||0},HF=function(t){var e=window.getComputedStyle(document.body),n=e[t==="padding"?"paddingLeft":"marginLeft"],i=e[t==="padding"?"paddingTop":"marginTop"],r=e[t==="padding"?"paddingRight":"marginRight"];return[kf(n),kf(i),kf(r)]},$F=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return qF;var e=HF(t),n=document.documentElement.clientWidth,i=window.innerWidth;return{left:e[0],top:e[1],right:e[2],gap:Math.max(0,i-n+e[2]-e[0])}},KF=hw(),ko="data-scroll-locked",GF=function(t,e,n,i){var r=t.left,o=t.top,l=t.right,c=t.gap;return n===void 0&&(n="margin"),`
  .`.concat(_F,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(c,"px ").concat(i,`;
  }
  body[`).concat(ko,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([e&&"position: relative ".concat(i,";"),n==="margin"&&`
    padding-left: `.concat(r,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(l,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(c,"px ").concat(i,`;
    `),n==="padding"&&"padding-right: ".concat(c,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Qc,` {
    right: `).concat(c,"px ").concat(i,`;
  }
  
  .`).concat(Zc,` {
    margin-right: `).concat(c,"px ").concat(i,`;
  }
  
  .`).concat(Qc," .").concat(Qc,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(Zc," .").concat(Zc,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(ko,`] {
    `).concat(IF,": ").concat(c,`px;
  }
`)},tS=function(){var t=parseInt(document.body.getAttribute(ko)||"0",10);return isFinite(t)?t:0},XF=function(){x.useEffect(function(){return document.body.setAttribute(ko,(tS()+1).toString()),function(){var t=tS()-1;t<=0?document.body.removeAttribute(ko):document.body.setAttribute(ko,t.toString())}},[])},YF=function(t){var e=t.noRelative,n=t.noImportant,i=t.gapMode,r=i===void 0?"margin":i;XF();var o=x.useMemo(function(){return $F(r)},[r]);return x.createElement(KF,{styles:GF(o,!e,r,n?"":"!important")})},gp=!1;if(typeof window<"u")try{var zc=Object.defineProperty({},"passive",{get:function(){return gp=!0,!0}});window.addEventListener("test",zc,zc),window.removeEventListener("test",zc,zc)}catch{gp=!1}var so=gp?{passive:!1}:!1,JF=function(t){return t.tagName==="TEXTAREA"},fw=function(t,e){if(!(t instanceof Element))return!1;var n=window.getComputedStyle(t);return n[e]!=="hidden"&&!(n.overflowY===n.overflowX&&!JF(t)&&n[e]==="visible")},QF=function(t){return fw(t,"overflowY")},ZF=function(t){return fw(t,"overflowX")},nS=function(t,e){var n=e.ownerDocument,i=e;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var r=pw(t,i);if(r){var o=mw(t,i),l=o[1],c=o[2];if(l>c)return!0}i=i.parentNode}while(i&&i!==n.body);return!1},ej=function(t){var e=t.scrollTop,n=t.scrollHeight,i=t.clientHeight;return[e,n,i]},tj=function(t){var e=t.scrollLeft,n=t.scrollWidth,i=t.clientWidth;return[e,n,i]},pw=function(t,e){return t==="v"?QF(e):ZF(e)},mw=function(t,e){return t==="v"?ej(e):tj(e)},nj=function(t,e){return t==="h"&&e==="rtl"?-1:1},ij=function(t,e,n,i,r){var o=nj(t,window.getComputedStyle(e).direction),l=o*i,c=n.target,d=e.contains(c),h=!1,f=l>0,m=0,v=0;do{if(!c)break;var S=mw(t,c),k=S[0],b=S[1],C=S[2],T=b-C-o*k;(k||T)&&pw(t,c)&&(m+=T,v+=k);var _=c.parentNode;c=_&&_.nodeType===Node.DOCUMENT_FRAGMENT_NODE?_.host:_}while(!d&&c!==document.body||d&&(e.contains(c)||e===c));return(f&&Math.abs(m)<1||!f&&Math.abs(v)<1)&&(h=!0),h},Wc=function(t){return"changedTouches"in t?[t.changedTouches[0].clientX,t.changedTouches[0].clientY]:[0,0]},iS=function(t){return[t.deltaX,t.deltaY]},rS=function(t){return t&&"current"in t?t.current:t},rj=function(t,e){return t[0]===e[0]&&t[1]===e[1]},sj=function(t){return`
  .block-interactivity-`.concat(t,` {pointer-events: none;}
  .allow-interactivity-`).concat(t,` {pointer-events: all;}
`)},oj=0,oo=[];function aj(t){var e=x.useRef([]),n=x.useRef([0,0]),i=x.useRef(),r=x.useState(oj++)[0],o=x.useState(hw)[0],l=x.useRef(t);x.useEffect(function(){l.current=t},[t]),x.useEffect(function(){if(t.inert){document.body.classList.add("block-interactivity-".concat(r));var b=RF([t.lockRef.current],(t.shards||[]).map(rS),!0).filter(Boolean);return b.forEach(function(C){return C.classList.add("allow-interactivity-".concat(r))}),function(){document.body.classList.remove("block-interactivity-".concat(r)),b.forEach(function(C){return C.classList.remove("allow-interactivity-".concat(r))})}}},[t.inert,t.lockRef.current,t.shards]);var c=x.useCallback(function(b,C){if("touches"in b&&b.touches.length===2||b.type==="wheel"&&b.ctrlKey)return!l.current.allowPinchZoom;var T=Wc(b),_=n.current,R="deltaX"in b?b.deltaX:_[0]-T[0],P="deltaY"in b?b.deltaY:_[1]-T[1],I,D=b.target,O=Math.abs(R)>Math.abs(P)?"h":"v";if("touches"in b&&O==="h"&&D.type==="range")return!1;var N=nS(O,D);if(!N)return!0;if(N?I=O:(I=O==="v"?"h":"v",N=nS(O,D)),!N)return!1;if(!i.current&&"changedTouches"in b&&(R||P)&&(i.current=I),!I)return!0;var q=i.current||I;return ij(q,C,b,q==="h"?R:P)},[]),d=x.useCallback(function(b){var C=b;if(!(!oo.length||oo[oo.length-1]!==o)){var T="deltaY"in C?iS(C):Wc(C),_=e.current.filter(function(I){return I.name===C.type&&(I.target===C.target||C.target===I.shadowParent)&&rj(I.delta,T)})[0];if(_&&_.should){C.cancelable&&C.preventDefault();return}if(!_){var R=(l.current.shards||[]).map(rS).filter(Boolean).filter(function(I){return I.contains(C.target)}),P=R.length>0?c(C,R[0]):!l.current.noIsolation;P&&C.cancelable&&C.preventDefault()}}},[]),h=x.useCallback(function(b,C,T,_){var R={name:b,delta:C,target:T,should:_,shadowParent:lj(T)};e.current.push(R),setTimeout(function(){e.current=e.current.filter(function(P){return P!==R})},1)},[]),f=x.useCallback(function(b){n.current=Wc(b),i.current=void 0},[]),m=x.useCallback(function(b){h(b.type,iS(b),b.target,c(b,t.lockRef.current))},[]),v=x.useCallback(function(b){h(b.type,Wc(b),b.target,c(b,t.lockRef.current))},[]);x.useEffect(function(){return oo.push(o),t.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:v}),document.addEventListener("wheel",d,so),document.addEventListener("touchmove",d,so),document.addEventListener("touchstart",f,so),function(){oo=oo.filter(function(b){return b!==o}),document.removeEventListener("wheel",d,so),document.removeEventListener("touchmove",d,so),document.removeEventListener("touchstart",f,so)}},[]);var S=t.removeScrollBar,k=t.inert;return x.createElement(x.Fragment,null,k?x.createElement(o,{styles:sj(r)}):null,S?x.createElement(YF,{noRelative:t.noRelative,gapMode:t.gapMode}):null)}function lj(t){for(var e=null;t!==null;)t instanceof ShadowRoot&&(e=t.host,t=t.host),t=t.parentNode;return e}const cj=FF(dw,aj);var gw=x.forwardRef(function(t,e){return x.createElement(Gu,mi({},t,{ref:e,sideCar:cj}))});gw.classNames=Gu.classNames;var uj=[" ","Enter","ArrowUp","ArrowDown"],dj=[" ","Enter"],xs="Select",[Xu,Yu,hj]=pT(xs),[Vo]=Is(xs,[hj,JT]),Ju=JT(),[fj,$r]=Vo(xs),[pj,mj]=Vo(xs),vw=t=>{const{__scopeSelect:e,children:n,open:i,defaultOpen:r,onOpenChange:o,value:l,defaultValue:c,onValueChange:d,dir:h,name:f,autoComplete:m,disabled:v,required:S,form:k}=t,b=Ju(e),[C,T]=x.useState(null),[_,R]=x.useState(null),[P,I]=x.useState(!1),D=Dm(h),[O,N]=nl({prop:i,defaultProp:r??!1,onChange:o,caller:xs}),[q,H]=nl({prop:l,defaultProp:c,onChange:d,caller:xs}),G=x.useRef(null),ce=C?k||!!C.closest("form"):!0,[pe,me]=x.useState(new Set),ye=Array.from(pe).map(ie=>ie.props.value).join(";");return E.jsx(dF,{...b,children:E.jsxs(fj,{required:S,scope:e,trigger:C,onTriggerChange:T,valueNode:_,onValueNodeChange:R,valueNodeHasChildren:P,onValueNodeHasChildrenChange:I,contentId:zu(),value:q,onValueChange:H,open:O,onOpenChange:N,dir:D,triggerPointerDownPosRef:G,disabled:v,children:[E.jsx(Xu.Provider,{scope:e,children:E.jsx(pj,{scope:t.__scopeSelect,onNativeOptionAdd:x.useCallback(ie=>{me(Z=>new Set(Z).add(ie))},[]),onNativeOptionRemove:x.useCallback(ie=>{me(Z=>{const U=new Set(Z);return U.delete(ie),U})},[]),children:n})}),ce?E.jsxs(Uw,{"aria-hidden":!0,required:S,tabIndex:-1,name:f,autoComplete:m,value:q,onChange:ie=>H(ie.target.value),disabled:v,form:k,children:[q===void 0?E.jsx("option",{value:""}):null,Array.from(pe)]},ye):null]})})};vw.displayName=xs;var yw="SelectTrigger",bw=x.forwardRef((t,e)=>{const{__scopeSelect:n,disabled:i=!1,...r}=t,o=Ju(n),l=$r(yw,n),c=l.disabled||i,d=nt(e,l.onTriggerChange),h=Yu(n),f=x.useRef("touch"),[m,v,S]=Vw(b=>{const C=h().filter(R=>!R.disabled),T=C.find(R=>R.value===l.value),_=zw(C,b,T);_!==void 0&&l.onValueChange(_.value)}),k=b=>{c||(l.onOpenChange(!0),S()),b&&(l.triggerPointerDownPosRef.current={x:Math.round(b.pageX),y:Math.round(b.pageY)})};return E.jsx(hF,{asChild:!0,...o,children:E.jsx(Ke.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:c,"data-disabled":c?"":void 0,"data-placeholder":Bw(l.value)?"":void 0,...r,ref:d,onClick:$e(r.onClick,b=>{b.currentTarget.focus(),f.current!=="mouse"&&k(b)}),onPointerDown:$e(r.onPointerDown,b=>{f.current=b.pointerType;const C=b.target;C.hasPointerCapture(b.pointerId)&&C.releasePointerCapture(b.pointerId),b.button===0&&b.ctrlKey===!1&&b.pointerType==="mouse"&&(k(b),b.preventDefault())}),onKeyDown:$e(r.onKeyDown,b=>{const C=m.current!=="";!(b.ctrlKey||b.altKey||b.metaKey)&&b.key.length===1&&v(b.key),!(C&&b.key===" ")&&uj.includes(b.key)&&(k(),b.preventDefault())})})})});bw.displayName=yw;var Sw="SelectValue",kw=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,children:o,placeholder:l="",...c}=t,d=$r(Sw,n),{onValueNodeHasChildrenChange:h}=d,f=o!==void 0,m=nt(e,d.onValueNodeChange);return Xt(()=>{h(f)},[h,f]),E.jsx(Ke.span,{...c,ref:m,style:{pointerEvents:"none"},children:Bw(d.value)?E.jsx(E.Fragment,{children:l}):o})});kw.displayName=Sw;var gj="SelectIcon",Cw=x.forwardRef((t,e)=>{const{__scopeSelect:n,children:i,...r}=t;return E.jsx(Ke.span,{"aria-hidden":!0,...r,ref:e,children:i||""})});Cw.displayName=gj;var vj="SelectPortal",Tw=t=>E.jsx(ow,{asChild:!0,...t});Tw.displayName=vj;var Es="SelectContent",ww=x.forwardRef((t,e)=>{const n=$r(Es,t.__scopeSelect),[i,r]=x.useState();if(Xt(()=>{r(new DocumentFragment)},[]),!n.open){const o=i;return o?hl.createPortal(E.jsx(xw,{scope:t.__scopeSelect,children:E.jsx(Xu.Slot,{scope:t.__scopeSelect,children:E.jsx("div",{children:t.children})})}),o):null}return E.jsx(Ew,{...t,ref:e})});ww.displayName=Es;var Zn=10,[xw,Kr]=Vo(Es),yj="SelectContentImpl",bj=gF("SelectContent.RemoveScroll"),Ew=x.forwardRef((t,e)=>{const{__scopeSelect:n,position:i="item-aligned",onCloseAutoFocus:r,onEscapeKeyDown:o,onPointerDownOutside:l,side:c,sideOffset:d,align:h,alignOffset:f,arrowPadding:m,collisionBoundary:v,collisionPadding:S,sticky:k,hideWhenDetached:b,avoidCollisions:C,...T}=t,_=$r(Es,n),[R,P]=x.useState(null),[I,D]=x.useState(null),O=nt(e,ee=>P(ee)),[N,q]=x.useState(null),[H,G]=x.useState(null),ce=Yu(n),[pe,me]=x.useState(!1),ye=x.useRef(!1);x.useEffect(()=>{if(R)return PF(R)},[R]),UO();const ie=x.useCallback(ee=>{const[he,...Ee]=ce().map(Ve=>Ve.ref.current),[_e]=Ee.slice(-1),Le=document.activeElement;for(const Ve of ee)if(Ve===Le||(Ve?.scrollIntoView({block:"nearest"}),Ve===he&&I&&(I.scrollTop=0),Ve===_e&&I&&(I.scrollTop=I.scrollHeight),Ve?.focus(),document.activeElement!==Le))return},[ce,I]),Z=x.useCallback(()=>ie([N,R]),[ie,N,R]);x.useEffect(()=>{pe&&Z()},[pe,Z]);const{onOpenChange:U,triggerPointerDownPosRef:re}=_;x.useEffect(()=>{if(R){let ee={x:0,y:0};const he=_e=>{ee={x:Math.abs(Math.round(_e.pageX)-(re.current?.x??0)),y:Math.abs(Math.round(_e.pageY)-(re.current?.y??0))}},Ee=_e=>{ee.x<=10&&ee.y<=10?_e.preventDefault():R.contains(_e.target)||U(!1),document.removeEventListener("pointermove",he),re.current=null};return re.current!==null&&(document.addEventListener("pointermove",he),document.addEventListener("pointerup",Ee,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",he),document.removeEventListener("pointerup",Ee,{capture:!0})}}},[R,U,re]),x.useEffect(()=>{const ee=()=>U(!1);return window.addEventListener("blur",ee),window.addEventListener("resize",ee),()=>{window.removeEventListener("blur",ee),window.removeEventListener("resize",ee)}},[U]);const[Y,F]=Vw(ee=>{const he=ce().filter(Le=>!Le.disabled),Ee=he.find(Le=>Le.ref.current===document.activeElement),_e=zw(he,ee,Ee);_e&&setTimeout(()=>_e.ref.current.focus())}),$=x.useCallback((ee,he,Ee)=>{const _e=!ye.current&&!Ee;(_.value!==void 0&&_.value===he||_e)&&(q(ee),_e&&(ye.current=!0))},[_.value]),te=x.useCallback(()=>R?.focus(),[R]),ue=x.useCallback((ee,he,Ee)=>{const _e=!ye.current&&!Ee;(_.value!==void 0&&_.value===he||_e)&&G(ee)},[_.value]),ge=i==="popper"?vp:Pw,we=ge===vp?{side:c,sideOffset:d,align:h,alignOffset:f,arrowPadding:m,collisionBoundary:v,collisionPadding:S,sticky:k,hideWhenDetached:b,avoidCollisions:C}:{};return E.jsx(xw,{scope:n,content:R,viewport:I,onViewportChange:D,itemRefCallback:$,selectedItem:N,onItemLeave:te,itemTextRefCallback:ue,focusSelectedItem:Z,selectedItemText:H,position:i,isPositioned:pe,searchRef:Y,children:E.jsx(gw,{as:bj,allowPinchZoom:!0,children:E.jsx(LT,{asChild:!0,trapped:_.open,onMountAutoFocus:ee=>{ee.preventDefault()},onUnmountAutoFocus:$e(r,ee=>{_.trigger?.focus({preventScroll:!0}),ee.preventDefault()}),children:E.jsx(DT,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:o,onPointerDownOutside:l,onFocusOutside:ee=>ee.preventDefault(),onDismiss:()=>_.onOpenChange(!1),children:E.jsx(ge,{role:"listbox",id:_.contentId,"data-state":_.open?"open":"closed",dir:_.dir,onContextMenu:ee=>ee.preventDefault(),...T,...we,onPlaced:()=>me(!0),ref:O,style:{display:"flex",flexDirection:"column",outline:"none",...T.style},onKeyDown:$e(T.onKeyDown,ee=>{const he=ee.ctrlKey||ee.altKey||ee.metaKey;if(ee.key==="Tab"&&ee.preventDefault(),!he&&ee.key.length===1&&F(ee.key),["ArrowUp","ArrowDown","Home","End"].includes(ee.key)){let _e=ce().filter(Le=>!Le.disabled).map(Le=>Le.ref.current);if(["ArrowUp","End"].includes(ee.key)&&(_e=_e.slice().reverse()),["ArrowUp","ArrowDown"].includes(ee.key)){const Le=ee.target,Ve=_e.indexOf(Le);_e=_e.slice(Ve+1)}setTimeout(()=>ie(_e)),ee.preventDefault()}})})})})})})});Ew.displayName=yj;var Sj="SelectItemAlignedPosition",Pw=x.forwardRef((t,e)=>{const{__scopeSelect:n,onPlaced:i,...r}=t,o=$r(Es,n),l=Kr(Es,n),[c,d]=x.useState(null),[h,f]=x.useState(null),m=nt(e,O=>f(O)),v=Yu(n),S=x.useRef(!1),k=x.useRef(!0),{viewport:b,selectedItem:C,selectedItemText:T,focusSelectedItem:_}=l,R=x.useCallback(()=>{if(o.trigger&&o.valueNode&&c&&h&&b&&C&&T){const O=o.trigger.getBoundingClientRect(),N=h.getBoundingClientRect(),q=o.valueNode.getBoundingClientRect(),H=T.getBoundingClientRect();if(o.dir!=="rtl"){const Le=H.left-N.left,Ve=q.left-Le,kt=O.left-Ve,Yt=O.width+kt,Zi=Math.max(Yt,N.width),Pi=window.innerWidth-Zn,yn=Ob(Ve,[Zn,Math.max(Zn,Pi-Zi)]);c.style.minWidth=Yt+"px",c.style.left=yn+"px"}else{const Le=N.right-H.right,Ve=window.innerWidth-q.right-Le,kt=window.innerWidth-O.right-Ve,Yt=O.width+kt,Zi=Math.max(Yt,N.width),Pi=window.innerWidth-Zn,yn=Ob(Ve,[Zn,Math.max(Zn,Pi-Zi)]);c.style.minWidth=Yt+"px",c.style.right=yn+"px"}const G=v(),ce=window.innerHeight-Zn*2,pe=b.scrollHeight,me=window.getComputedStyle(h),ye=parseInt(me.borderTopWidth,10),ie=parseInt(me.paddingTop,10),Z=parseInt(me.borderBottomWidth,10),U=parseInt(me.paddingBottom,10),re=ye+ie+pe+U+Z,Y=Math.min(C.offsetHeight*5,re),F=window.getComputedStyle(b),$=parseInt(F.paddingTop,10),te=parseInt(F.paddingBottom,10),ue=O.top+O.height/2-Zn,ge=ce-ue,we=C.offsetHeight/2,ee=C.offsetTop+we,he=ye+ie+ee,Ee=re-he;if(he<=ue){const Le=G.length>0&&C===G[G.length-1].ref.current;c.style.bottom="0px";const Ve=h.clientHeight-b.offsetTop-b.offsetHeight,kt=Math.max(ge,we+(Le?te:0)+Ve+Z),Yt=he+kt;c.style.height=Yt+"px"}else{const Le=G.length>0&&C===G[0].ref.current;c.style.top="0px";const kt=Math.max(ue,ye+b.offsetTop+(Le?$:0)+we)+Ee;c.style.height=kt+"px",b.scrollTop=he-ue+b.offsetTop}c.style.margin=`${Zn}px 0`,c.style.minHeight=Y+"px",c.style.maxHeight=ce+"px",i?.(),requestAnimationFrame(()=>S.current=!0)}},[v,o.trigger,o.valueNode,c,h,b,C,T,o.dir,i]);Xt(()=>R(),[R]);const[P,I]=x.useState();Xt(()=>{h&&I(window.getComputedStyle(h).zIndex)},[h]);const D=x.useCallback(O=>{O&&k.current===!0&&(R(),_?.(),k.current=!1)},[R,_]);return E.jsx(Cj,{scope:n,contentWrapper:c,shouldExpandOnScrollRef:S,onScrollButtonChange:D,children:E.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:P},children:E.jsx(Ke.div,{...r,ref:m,style:{boxSizing:"border-box",maxHeight:"100%",...r.style}})})})});Pw.displayName=Sj;var kj="SelectPopperPosition",vp=x.forwardRef((t,e)=>{const{__scopeSelect:n,align:i="start",collisionPadding:r=Zn,...o}=t,l=Ju(n);return E.jsx(fF,{...l,...o,ref:e,align:i,collisionPadding:r,style:{boxSizing:"border-box",...o.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});vp.displayName=kj;var[Cj,Km]=Vo(Es,{}),yp="SelectViewport",Rw=x.forwardRef((t,e)=>{const{__scopeSelect:n,nonce:i,...r}=t,o=Kr(yp,n),l=Km(yp,n),c=nt(e,o.onViewportChange),d=x.useRef(0);return E.jsxs(E.Fragment,{children:[E.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),E.jsx(Xu.Slot,{scope:n,children:E.jsx(Ke.div,{"data-radix-select-viewport":"",role:"presentation",...r,ref:c,style:{position:"relative",flex:1,overflow:"hidden auto",...r.style},onScroll:$e(r.onScroll,h=>{const f=h.currentTarget,{contentWrapper:m,shouldExpandOnScrollRef:v}=l;if(v?.current&&m){const S=Math.abs(d.current-f.scrollTop);if(S>0){const k=window.innerHeight-Zn*2,b=parseFloat(m.style.minHeight),C=parseFloat(m.style.height),T=Math.max(b,C);if(T<k){const _=T+S,R=Math.min(k,_),P=_-R;m.style.height=R+"px",m.style.bottom==="0px"&&(f.scrollTop=P>0?P:0,m.style.justifyContent="flex-end")}}}d.current=f.scrollTop})})})]})});Rw.displayName=yp;var _w="SelectGroup",[Tj,wj]=Vo(_w),xj=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=zu();return E.jsx(Tj,{scope:n,id:r,children:E.jsx(Ke.div,{role:"group","aria-labelledby":r,...i,ref:e})})});xj.displayName=_w;var Iw="SelectLabel",Ej=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=wj(Iw,n);return E.jsx(Ke.div,{id:r.id,...i,ref:e})});Ej.displayName=Iw;var Tu="SelectItem",[Pj,Aw]=Vo(Tu),Mw=x.forwardRef((t,e)=>{const{__scopeSelect:n,value:i,disabled:r=!1,textValue:o,...l}=t,c=$r(Tu,n),d=Kr(Tu,n),h=c.value===i,[f,m]=x.useState(o??""),[v,S]=x.useState(!1),k=nt(e,_=>d.itemRefCallback?.(_,i,r)),b=zu(),C=x.useRef("touch"),T=()=>{r||(c.onValueChange(i),c.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return E.jsx(Pj,{scope:n,value:i,disabled:r,textId:b,isSelected:h,onItemTextChange:x.useCallback(_=>{m(R=>R||(_?.textContent??"").trim())},[]),children:E.jsx(Xu.ItemSlot,{scope:n,value:i,disabled:r,textValue:f,children:E.jsx(Ke.div,{role:"option","aria-labelledby":b,"data-highlighted":v?"":void 0,"aria-selected":h&&v,"data-state":h?"checked":"unchecked","aria-disabled":r||void 0,"data-disabled":r?"":void 0,tabIndex:r?void 0:-1,...l,ref:k,onFocus:$e(l.onFocus,()=>S(!0)),onBlur:$e(l.onBlur,()=>S(!1)),onClick:$e(l.onClick,()=>{C.current!=="mouse"&&T()}),onPointerUp:$e(l.onPointerUp,()=>{C.current==="mouse"&&T()}),onPointerDown:$e(l.onPointerDown,_=>{C.current=_.pointerType}),onPointerMove:$e(l.onPointerMove,_=>{C.current=_.pointerType,r?d.onItemLeave?.():C.current==="mouse"&&_.currentTarget.focus({preventScroll:!0})}),onPointerLeave:$e(l.onPointerLeave,_=>{_.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:$e(l.onKeyDown,_=>{d.searchRef?.current!==""&&_.key===" "||(dj.includes(_.key)&&T(),_.key===" "&&_.preventDefault())})})})})});Mw.displayName=Tu;var Fa="SelectItemText",Nw=x.forwardRef((t,e)=>{const{__scopeSelect:n,className:i,style:r,...o}=t,l=$r(Fa,n),c=Kr(Fa,n),d=Aw(Fa,n),h=mj(Fa,n),[f,m]=x.useState(null),v=nt(e,T=>m(T),d.onItemTextChange,T=>c.itemTextRefCallback?.(T,d.value,d.disabled)),S=f?.textContent,k=x.useMemo(()=>E.jsx("option",{value:d.value,disabled:d.disabled,children:S},d.value),[d.disabled,d.value,S]),{onNativeOptionAdd:b,onNativeOptionRemove:C}=h;return Xt(()=>(b(k),()=>C(k)),[b,C,k]),E.jsxs(E.Fragment,{children:[E.jsx(Ke.span,{id:d.textId,...o,ref:v}),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?hl.createPortal(o.children,l.valueNode):null]})});Nw.displayName=Fa;var Dw="SelectItemIndicator",Ow=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return Aw(Dw,n).isSelected?E.jsx(Ke.span,{"aria-hidden":!0,...i,ref:e}):null});Ow.displayName=Dw;var bp="SelectScrollUpButton",Lw=x.forwardRef((t,e)=>{const n=Kr(bp,t.__scopeSelect),i=Km(bp,t.__scopeSelect),[r,o]=x.useState(!1),l=nt(e,i.onScrollButtonChange);return Xt(()=>{if(n.viewport&&n.isPositioned){let c=function(){const h=d.scrollTop>0;o(h)};const d=n.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),r?E.jsx(jw,{...t,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=n;c&&d&&(c.scrollTop=c.scrollTop-d.offsetHeight)}}):null});Lw.displayName=bp;var Sp="SelectScrollDownButton",Fw=x.forwardRef((t,e)=>{const n=Kr(Sp,t.__scopeSelect),i=Km(Sp,t.__scopeSelect),[r,o]=x.useState(!1),l=nt(e,i.onScrollButtonChange);return Xt(()=>{if(n.viewport&&n.isPositioned){let c=function(){const h=d.scrollHeight-d.clientHeight,f=Math.ceil(d.scrollTop)<h;o(f)};const d=n.viewport;return c(),d.addEventListener("scroll",c),()=>d.removeEventListener("scroll",c)}},[n.viewport,n.isPositioned]),r?E.jsx(jw,{...t,ref:l,onAutoScroll:()=>{const{viewport:c,selectedItem:d}=n;c&&d&&(c.scrollTop=c.scrollTop+d.offsetHeight)}}):null});Fw.displayName=Sp;var jw=x.forwardRef((t,e)=>{const{__scopeSelect:n,onAutoScroll:i,...r}=t,o=Kr("SelectScrollButton",n),l=x.useRef(null),c=Yu(n),d=x.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return x.useEffect(()=>()=>d(),[d]),Xt(()=>{c().find(f=>f.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[c]),E.jsx(Ke.div,{"aria-hidden":!0,...r,ref:e,style:{flexShrink:0,...r.style},onPointerDown:$e(r.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(i,50))}),onPointerMove:$e(r.onPointerMove,()=>{o.onItemLeave?.(),l.current===null&&(l.current=window.setInterval(i,50))}),onPointerLeave:$e(r.onPointerLeave,()=>{d()})})}),Rj="SelectSeparator",_j=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t;return E.jsx(Ke.div,{"aria-hidden":!0,...i,ref:e})});_j.displayName=Rj;var kp="SelectArrow",Ij=x.forwardRef((t,e)=>{const{__scopeSelect:n,...i}=t,r=Ju(n),o=$r(kp,n),l=Kr(kp,n);return o.open&&l.position==="popper"?E.jsx(pF,{...r,...i,ref:e}):null});Ij.displayName=kp;var Aj="SelectBubbleInput",Uw=x.forwardRef(({__scopeSelect:t,value:e,...n},i)=>{const r=x.useRef(null),o=nt(i,r),l=Lm(e);return x.useEffect(()=>{const c=r.current;if(!c)return;const d=window.HTMLSelectElement.prototype,f=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==e&&f){const m=new Event("change",{bubbles:!0});f.call(c,e),c.dispatchEvent(m)}},[l,e]),E.jsx(Ke.select,{...n,style:{...aw,...n.style},ref:o,defaultValue:e})});Uw.displayName=Aj;function Bw(t){return t===""||t===void 0}function Vw(t){const e=Br(t),n=x.useRef(""),i=x.useRef(0),r=x.useCallback(l=>{const c=n.current+l;e(c),(function d(h){n.current=h,window.clearTimeout(i.current),h!==""&&(i.current=window.setTimeout(()=>d(""),1e3))})(c)},[e]),o=x.useCallback(()=>{n.current="",window.clearTimeout(i.current)},[]);return x.useEffect(()=>()=>window.clearTimeout(i.current),[]),[n,r,o]}function zw(t,e,n){const r=e.length>1&&Array.from(e).every(h=>h===e[0])?e[0]:e,o=n?t.indexOf(n):-1;let l=Mj(t,Math.max(o,0));r.length===1&&(l=l.filter(h=>h!==n));const d=l.find(h=>h.textValue.toLowerCase().startsWith(r.toLowerCase()));return d!==n?d:void 0}function Mj(t,e){return t.map((n,i)=>t[(e+i)%t.length])}var Nj=vw,Dj=bw,Oj=kw,Lj=Cw,Fj=Tw,jj=ww,Uj=Rw,Bj=Mw,Vj=Nw,zj=Ow,Wj=Lw,qj=Fw;function Hj({...t}){return E.jsx(Nj,{"data-slot":"select",...t})}function $j({...t}){return E.jsx(Oj,{"data-slot":"select-value",...t})}function Kj({className:t,size:e="default",children:n,...i}){return E.jsxs(Dj,{"data-slot":"select-trigger","data-size":e,className:vn("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...i,children:[n,E.jsx(Lj,{asChild:!0,children:E.jsx(Sk,{className:"size-4 opacity-50"})})]})}function Gj({className:t,children:e,position:n="popper",...i}){return E.jsx(Fj,{children:E.jsxs(jj,{"data-slot":"select-content",className:vn("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:n,...i,children:[E.jsx(Yj,{}),E.jsx(Uj,{className:vn("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:e}),E.jsx(Jj,{})]})})}function Xj({className:t,children:e,...n}){return E.jsxs(Bj,{"data-slot":"select-item",className:vn("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...n,children:[E.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:E.jsx(zj,{children:E.jsx(Ts,{className:"size-4"})})}),E.jsx(Vj,{children:e})]})}function Yj({className:t,...e}){return E.jsx(Wj,{"data-slot":"select-scroll-up-button",className:vn("flex cursor-default items-center justify-center py-1",t),...e,children:E.jsx(UR,{className:"size-4"})})}function Jj({className:t,...e}){return E.jsx(qj,{"data-slot":"select-scroll-down-button",className:vn("flex cursor-default items-center justify-center py-1",t),...e,children:E.jsx(Sk,{className:"size-4"})})}function Qj({className:t,...e}){return E.jsx("textarea",{"data-slot":"textarea",className:vn("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),...e})}function Zj({section:t,sectionNumber:e,totalSections:n,formData:i,onFieldChange:r,onNext:o,onPrevious:l,canGoPrevious:c,startingQuestionNumber:d=1}){const h=t.fields.filter(k=>k.required),f=h.filter(k=>i[k.id]),m=h.length===0||f.length===h.length,v=()=>{Ro.success("Responses are saved",{duration:2e3})},S=(k,b)=>{const C=i[k.id]||"",T=!!i[k.id],_=d+b;return E.jsxs(Kt.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:b*.05},className:"space-y-2",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsxs(Nb,{htmlFor:k.id,className:"text-gray-700",children:[E.jsxs("span",{className:"text-gray-400 mr-2",children:[_,"."]}),k.label,k.required&&E.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),T&&E.jsx(Kt.div,{initial:{scale:0},animate:{scale:1},className:"flex items-center gap-1 text-green-600 text-xs",children:E.jsx(Ts,{className:"w-3 h-3"})})]}),k.format&&E.jsxs("p",{className:"text-xs text-gray-500",children:["Format: ",k.format]}),k.type==="text"&&E.jsx(io,{id:k.id,value:C,onChange:R=>r(k.id,R.target.value),placeholder:k.placeholder,className:"max-w-xl"}),k.type==="date"&&E.jsx(io,{id:k.id,type:"date",value:C,onChange:R=>r(k.id,R.target.value),className:"max-w-xs"}),k.type==="email"&&E.jsx(io,{id:k.id,type:"email",value:C,onChange:R=>r(k.id,R.target.value),placeholder:k.placeholder,className:"max-w-xl"}),k.type==="phone"&&E.jsx(io,{id:k.id,type:"tel",value:C,onChange:R=>r(k.id,R.target.value),placeholder:k.format,className:"max-w-xs"}),k.type==="ssn"&&E.jsx(io,{id:k.id,type:"text",value:C,onChange:R=>{let P=R.target.value.replace(/\D/g,"");P.length>3&&(P=P.slice(0,3)+"-"+P.slice(3)),P.length>6&&(P=P.slice(0,6)+"-"+P.slice(6,10)),r(k.id,P)},placeholder:k.format,maxLength:11,className:"max-w-xs"}),k.type==="radio"&&k.options&&E.jsx(_O,{value:C,onValueChange:R=>r(k.id,R),children:E.jsx("div",{className:"flex gap-4",children:k.options.map(R=>E.jsxs(Nb,{htmlFor:`${k.id}-${R}`,className:"flex items-center gap-3 cursor-pointer px-4 py-3 border-2 border-gray-300 rounded-lg hover:border-[#0046B8] hover:bg-blue-50 transition-all shadow-md",style:{borderColor:C===R?"#0046B8":"",backgroundColor:C===R?"#E6F0FF":""},children:[E.jsx(IO,{value:R,id:`${k.id}-${R}`}),E.jsx("span",{className:C===R?"text-[#0046B8]":"text-gray-700",children:R})]},R))})}),k.type==="select"&&k.options&&E.jsxs(Hj,{value:C,onValueChange:R=>r(k.id,R),children:[E.jsx(Kj,{className:"max-w-md",children:E.jsx($j,{placeholder:"Select an option..."})}),E.jsx(Gj,{children:k.options.map(R=>E.jsx(Xj,{value:R,children:R},R))})]}),k.type==="number"&&E.jsx(io,{id:k.id,type:"number",value:C,onChange:R=>r(k.id,R.target.value),placeholder:k.placeholder,className:"max-w-xs"}),k.type==="textarea"&&E.jsx(Qj,{id:k.id,value:C,onChange:R=>r(k.id,R.target.value),placeholder:k.placeholder,maxLength:k.maxLength,className:"max-w-2xl resize-none",rows:4})]},k.id)};return t.name==="Review"?E.jsxs(Kt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-lg p-8 mb-6",children:[E.jsxs("div",{className:"text-center mb-8",children:[E.jsx("h2",{className:"text-[#0046B8] mb-2",children:"Review Your Information"}),E.jsx("p",{className:"text-gray-600",children:"Please review all your answers before submitting"})]}),E.jsx("div",{className:"space-y-6 mb-8",children:Object.entries(i).map(([k,b])=>E.jsxs("div",{className:"flex justify-between border-b border-gray-200 pb-2",children:[E.jsxs("span",{className:"text-gray-600 capitalize",children:[k.replace(/([A-Z])/g," $1").trim(),":"]}),E.jsx("span",{className:"text-gray-900",children:b})]},k))}),E.jsxs("div",{className:"flex items-center justify-between pt-6 border-t border-gray-200",children:[E.jsxs(ys,{onClick:l,variant:"outline",className:"flex items-center gap-2",children:[E.jsx(d0,{className:"w-4 h-4"}),"Previous"]}),E.jsxs(ys,{className:"flex items-center gap-2 bg-[#0046B8] hover:bg-[#003a9a]",children:["Submit Application",E.jsx(Ts,{className:"w-4 h-4"})]})]})]}):E.jsxs(E.Fragment,{children:[E.jsxs(Kt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-lg p-8 mb-32",children:[E.jsxs("div",{className:"mb-8 pb-6 border-b border-gray-200",children:[E.jsxs("div",{className:"flex items-center justify-between mb-2",children:[E.jsx("h2",{className:"text-[#0046B8]",children:t.name}),E.jsxs("span",{className:"text-sm text-gray-500",children:["Section ",e," of ",n]})]}),E.jsx("p",{className:"text-sm text-gray-600",children:h.length>0&&E.jsxs(E.Fragment,{children:["Fields marked with ",E.jsx("span",{className:"text-red-500",children:"*"})," are required"]})})]}),E.jsx("div",{className:"space-y-6",children:t.fields.map((k,b)=>S(k,b))})]}),h.length>0&&E.jsx(Kt.div,{initial:{y:100,opacity:0},animate:{y:0,opacity:1},transition:{delay:.3},className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-2xl z-40",children:E.jsxs("div",{className:"max-w-5xl mx-auto px-8 py-4 pr-32",children:[E.jsxs("div",{className:"mb-4",children:[E.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[E.jsx("span",{className:"text-gray-700",children:"Required fields completed:"}),E.jsxs("span",{className:"text-[#0046B8]",children:[f.length," of ",h.length]})]}),E.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:E.jsx(Kt.div,{className:"h-full bg-[#0046B8]",initial:{width:"0%"},animate:{width:`${f.length/h.length*100}%`},transition:{duration:.3}})})]}),E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs(ys,{onClick:l,disabled:!c,variant:"outline",className:"flex items-center gap-2",children:[E.jsx(d0,{className:"w-4 h-4"}),"Previous"]}),E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsxs(ys,{onClick:v,variant:"outline",className:"flex items-center gap-2 border-[#0046B8] text-[#0046B8] hover:bg-[#0046B8] hover:text-white transition-colors",children:[E.jsx(e_,{className:"w-4 h-4"}),"Save Form"]}),E.jsxs(ys,{onClick:o,disabled:!m,className:"flex items-center gap-2 bg-[#0046B8] hover:bg-[#003a9a]",children:["Next Section",E.jsx(FR,{className:"w-4 h-4"})]})]})]})]})})]})}function e2({className:t,...e}){return E.jsx("div",{"data-slot":"card",className:vn("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",t),...e})}var Qu="Checkbox",[t2]=Is(Qu),[n2,Gm]=t2(Qu);function i2(t){const{__scopeCheckbox:e,checked:n,children:i,defaultChecked:r,disabled:o,form:l,name:c,onCheckedChange:d,required:h,value:f="on",internal_do_not_use_render:m}=t,[v,S]=nl({prop:n,defaultProp:r??!1,onChange:d,caller:Qu}),[k,b]=x.useState(null),[C,T]=x.useState(null),_=x.useRef(!1),R=k?!!l||!!k.closest("form"):!0,P={checked:v,disabled:o,setChecked:S,control:k,setControl:b,name:c,form:l,value:f,hasConsumerStoppedPropagationRef:_,required:h,defaultChecked:Dr(r)?!1:r,isFormControl:R,bubbleInput:C,setBubbleInput:T};return E.jsx(n2,{scope:e,...P,children:r2(m)?m(P):i})}var Ww="CheckboxTrigger",qw=x.forwardRef(({__scopeCheckbox:t,onKeyDown:e,onClick:n,...i},r)=>{const{control:o,value:l,disabled:c,checked:d,required:h,setControl:f,setChecked:m,hasConsumerStoppedPropagationRef:v,isFormControl:S,bubbleInput:k}=Gm(Ww,t),b=nt(r,f),C=x.useRef(d);return x.useEffect(()=>{const T=o?.form;if(T){const _=()=>m(C.current);return T.addEventListener("reset",_),()=>T.removeEventListener("reset",_)}},[o,m]),E.jsx(Ke.button,{type:"button",role:"checkbox","aria-checked":Dr(d)?"mixed":d,"aria-required":h,"data-state":Yw(d),"data-disabled":c?"":void 0,disabled:c,value:l,...i,ref:b,onKeyDown:$e(e,T=>{T.key==="Enter"&&T.preventDefault()}),onClick:$e(n,T=>{m(_=>Dr(_)?!0:!_),k&&S&&(v.current=T.isPropagationStopped(),v.current||T.stopPropagation())})})});qw.displayName=Ww;var Hw=x.forwardRef((t,e)=>{const{__scopeCheckbox:n,name:i,checked:r,defaultChecked:o,required:l,disabled:c,value:d,onCheckedChange:h,form:f,...m}=t;return E.jsx(i2,{__scopeCheckbox:n,checked:r,defaultChecked:o,disabled:c,required:l,onCheckedChange:h,name:i,form:f,value:d,internal_do_not_use_render:({isFormControl:v})=>E.jsxs(E.Fragment,{children:[E.jsx(qw,{...m,ref:e,__scopeCheckbox:n}),v&&E.jsx(Xw,{__scopeCheckbox:n})]})})});Hw.displayName=Qu;var $w="CheckboxIndicator",Kw=x.forwardRef((t,e)=>{const{__scopeCheckbox:n,forceMount:i,...r}=t,o=Gm($w,n);return E.jsx(Fm,{present:i||Dr(o.checked)||o.checked===!0,children:E.jsx(Ke.span,{"data-state":Yw(o.checked),"data-disabled":o.disabled?"":void 0,...r,ref:e,style:{pointerEvents:"none",...t.style}})})});Kw.displayName=$w;var Gw="CheckboxBubbleInput",Xw=x.forwardRef(({__scopeCheckbox:t,...e},n)=>{const{control:i,hasConsumerStoppedPropagationRef:r,checked:o,defaultChecked:l,required:c,disabled:d,name:h,value:f,form:m,bubbleInput:v,setBubbleInput:S}=Gm(Gw,t),k=nt(n,S),b=Lm(o),C=Om(i);x.useEffect(()=>{const _=v;if(!_)return;const R=window.HTMLInputElement.prototype,I=Object.getOwnPropertyDescriptor(R,"checked").set,D=!r.current;if(b!==o&&I){const O=new Event("click",{bubbles:D});_.indeterminate=Dr(o),I.call(_,Dr(o)?!1:o),_.dispatchEvent(O)}},[v,b,o,r]);const T=x.useRef(Dr(o)?!1:o);return E.jsx(Ke.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??T.current,required:c,disabled:d,name:h,value:f,form:m,...e,tabIndex:-1,ref:k,style:{...e.style,...C,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});Xw.displayName=Gw;function r2(t){return typeof t=="function"}function Dr(t){return t==="indeterminate"}function Yw(t){return Dr(t)?"indeterminate":t?"checked":"unchecked"}function s2({className:t,...e}){return E.jsx(Hw,{"data-slot":"checkbox",className:vn("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...e,children:E.jsx(Kw,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:E.jsx(Ts,{className:"size-3.5"})})})}function o2({formData:t,onPrevious:e,canGoPrevious:n}){const i=[{id:"term-life",name:"Term Life Insurance",description:"Coverage for a specific period of time",checked:!!t.desiredTermLength,details:t.desiredTermLength?`${t.desiredTermLength} year term`:null,icon:MR},{id:"whole-life",name:"Whole Life Insurance",description:"Permanent coverage with cash value",checked:t.purposeOfInsurance==="Estate Planning",details:t.purposeOfInsurance==="Estate Planning"?"Estate planning coverage":null,icon:qR},{id:"mortgage-protection",name:"Mortgage Protection",description:"Coverage specifically for mortgage debt",checked:t.purposeOfInsurance==="Mortgage Protection",details:t.mortgageBalance?`Mortgage balance: ${t.mortgageBalance}`:null,icon:h0},{id:"income-replacement",name:"Income Replacement",description:"Replace lost income for your family",checked:t.purposeOfInsurance==="Income Replacement",details:t.annualIncome?`Annual income: ${t.annualIncome}`:null,icon:IR},{id:"final-expense",name:"Final Expense Insurance",description:"Coverage for burial and end-of-life costs",checked:t.purposeOfInsurance==="Business/Final Expenses",details:"Covers funeral and final expenses",icon:$R}],[r,o]=x.useState(i.filter(f=>f.checked).map(f=>f.id)),l=f=>{o(m=>m.includes(f)?m.filter(v=>v!==f):[...m,f])},c=()=>{if(r.length===0){Ro.error("Please select at least one insurance product to apply for");return}Ro.success("Application submitted successfully!",{description:`${r.length} product${r.length>1?"s":""} selected`,duration:3e3})},d=i.map(f=>({...f,checked:r.includes(f.id)})),h=d.filter(f=>f.checked);return E.jsxs("div",{className:"pb-24",children:[E.jsx(e2,{className:"p-8 shadow-lg border-0",children:E.jsxs(Kt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[E.jsxs("div",{className:"mb-8",children:[E.jsx("h2",{className:"text-[#0046B8] mb-2",children:"Review Your Application"}),E.jsx("p",{className:"text-gray-600",children:"Please review the life insurance coverage you're applying for"})]}),t.desiredCoverageAmount&&E.jsxs("div",{className:"bg-gradient-to-r from-[#0046B8] to-[#003087] rounded-lg p-6 mb-8 text-white",children:[E.jsxs("div",{className:"flex items-center justify-between",children:[E.jsxs("div",{children:[E.jsx("p",{className:"text-blue-100 mb-1",children:"Total Coverage Amount"}),E.jsx("p",{className:"text-3xl",children:t.desiredCoverageAmount})]}),E.jsx(h0,{className:"w-12 h-12 opacity-50"})]}),t.premiumPaymentFrequency&&E.jsxs("p",{className:"text-blue-100 mt-4",children:["Payment Frequency: ",t.premiumPaymentFrequency]})]}),E.jsxs("div",{className:"mb-8",children:[E.jsx("h3",{className:"text-gray-900 mb-4",children:"Life Insurance Products Applied For"}),E.jsx("div",{className:"space-y-4",children:d.map((f,m)=>{const v=f.icon;return E.jsx(Kt.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:m*.1},children:E.jsxs("div",{onClick:()=>l(f.id),className:`flex items-start gap-4 p-4 rounded-lg border-2 transition-all cursor-pointer ${f.checked?"border-[#0046B8] bg-blue-50 shadow-md":"border-gray-200 bg-white hover:border-gray-300 hover:shadow"}`,children:[E.jsx("div",{className:"flex items-center h-6",children:E.jsx(s2,{checked:f.checked,onCheckedChange:()=>l(f.id)})}),E.jsxs("div",{className:"flex-1 min-w-0",children:[E.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[E.jsx(v,{className:`w-5 h-5 ${f.checked?"text-[#0046B8]":"text-gray-400"}`}),E.jsx("h4",{className:`${f.checked?"text-[#0046B8]":"text-gray-900"}`,children:f.name}),f.checked&&E.jsx(Kt.div,{initial:{scale:0},animate:{scale:1},className:"ml-auto",children:E.jsx("div",{className:"bg-green-500 text-white rounded-full p-1",children:E.jsx(Ts,{className:"w-4 h-4"})})})]}),E.jsx("p",{className:"text-sm text-gray-600 mb-2",children:f.description}),f.checked&&f.details&&E.jsx("p",{className:"text-sm text-[#0046B8] bg-white px-3 py-1.5 rounded inline-block",children:f.details})]})]})},f.id)})})]}),E.jsxs("div",{className:"bg-gray-50 rounded-lg p-6 mb-8",children:[E.jsx("h4",{className:"text-gray-900 mb-4",children:"Application Summary"}),E.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[t.fullName&&E.jsxs("div",{children:[E.jsx("span",{className:"text-gray-500",children:"Applicant Name"}),E.jsx("p",{className:"text-gray-900",children:t.fullName})]}),t.dateOfBirth&&E.jsxs("div",{children:[E.jsx("span",{className:"text-gray-500",children:"Date of Birth"}),E.jsx("p",{className:"text-gray-900",children:t.dateOfBirth})]}),t.employmentStatus&&E.jsxs("div",{children:[E.jsx("span",{className:"text-gray-500",children:"Employment Status"}),E.jsx("p",{className:"text-gray-900",children:t.employmentStatus})]}),t.tobaccoLast12Months&&E.jsxs("div",{children:[E.jsx("span",{className:"text-gray-500",children:"Tobacco Use"}),E.jsx("p",{className:"text-gray-900",children:t.tobaccoLast12Months})]})]})]}),E.jsx("div",{className:"bg-blue-50 border-l-4 border-[#0046B8] p-4 rounded mb-8",children:E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx(r_,{className:"w-5 h-5 text-[#0046B8]"}),E.jsxs("p",{className:"text-gray-900",children:[E.jsx("span",{className:"text-[#0046B8]",children:h.length})," life insurance"," ",h.length===1?"product":"products"," selected for your application"]})]})}),E.jsxs("div",{className:"flex gap-4 justify-end pt-6 border-t border-gray-200",children:[n&&E.jsx(ys,{variant:"outline",onClick:e,className:"border-gray-300 hover:bg-gray-50",children:"Previous Section"}),E.jsx(ys,{onClick:c,className:"bg-gradient-to-r from-[#0046B8] to-[#003087] text-white hover:opacity-90",children:"Submit Application"})]})]})}),E.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 shadow-lg py-4 px-6 z-10",children:E.jsxs("div",{className:"max-w-5xl mx-auto flex items-center justify-between",children:[E.jsxs("div",{className:"flex items-center gap-3",children:[E.jsx("div",{className:"bg-gradient-to-r from-[#0046B8] to-[#003087] text-white w-10 h-10 rounded-full flex items-center justify-center",children:"7"}),E.jsxs("div",{children:[E.jsx("p",{className:"text-sm text-gray-500",children:"Section 7 of 7"}),E.jsx("p",{className:"text-gray-900",children:"Review"})]})]}),E.jsxs("div",{className:"flex items-center gap-2 text-green-600",children:[E.jsx(Ts,{className:"w-5 h-5"}),E.jsx("span",{children:"Application Complete"})]})]})})]})}var a2=(t,e,n,i,r,o,l,c)=>{let d=document.documentElement,h=["light","dark"];function f(S){(Array.isArray(t)?t:[t]).forEach(k=>{let b=k==="class",C=b&&o?r.map(T=>o[T]||T):r;b?(d.classList.remove(...C),d.classList.add(o&&o[S]?o[S]:S)):d.setAttribute(k,S)}),m(S)}function m(S){c&&h.includes(S)&&(d.style.colorScheme=S)}function v(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(i)f(i);else try{let S=localStorage.getItem(e)||n,k=l&&S==="system"?v():S;f(k)}catch{}},l2=x.createContext(void 0),c2={setTheme:t=>{},themes:[]},u2=()=>{var t;return(t=x.useContext(l2))!=null?t:c2};x.memo(({forcedTheme:t,storageKey:e,attribute:n,enableSystem:i,enableColorScheme:r,defaultTheme:o,value:l,themes:c,nonce:d,scriptProps:h})=>{let f=JSON.stringify([n,e,o,t,c,l,i,r]).slice(1,-1);return x.createElement("script",{...h,suppressHydrationWarning:!0,nonce:typeof window>"u"?d:"",dangerouslySetInnerHTML:{__html:`(${a2.toString()})(${f})`}})});const d2=({...t})=>{const{theme:e="system"}=u2();return E.jsx(wR,{theme:e,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...t})};var sS={};function h2(t,e){return e.forEach(function(n){n&&typeof n!="string"&&!Array.isArray(n)&&Object.keys(n).forEach(function(i){if(i!=="default"&&!(i in t)){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}})}),Object.freeze(t)}var f2=Object.defineProperty,p2=(t,e,n)=>e in t?f2(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,oS=(t,e,n)=>p2(t,typeof e!="symbol"?e+"":e,n);let nn=class{constructor(){oS(this,"_locking"),oS(this,"_locks"),this._locking=Promise.resolve(),this._locks=0}isLocked(){return this._locks>0}lock(){this._locks+=1;let e;const n=new Promise(r=>e=()=>{this._locks-=1,r()}),i=this._locking.then(()=>e);return this._locking=this._locking.then(()=>n),i}};function ut(t,e){if(!t)throw new Error(e)}const m2=34028234663852886e22,g2=-34028234663852886e22,v2=4294967295,y2=2147483647,b2=-2147483648;function eu(t){if(typeof t!="number")throw new Error("invalid int 32: "+typeof t);if(!Number.isInteger(t)||t>y2||t<b2)throw new Error("invalid int 32: "+t)}function Cp(t){if(typeof t!="number")throw new Error("invalid uint 32: "+typeof t);if(!Number.isInteger(t)||t>v2||t<0)throw new Error("invalid uint 32: "+t)}function Jw(t){if(typeof t!="number")throw new Error("invalid float 32: "+typeof t);if(Number.isFinite(t)&&(t>m2||t<g2))throw new Error("invalid float 32: "+t)}const Qw=Symbol("@bufbuild/protobuf/enum-type");function S2(t){const e=t[Qw];return ut(e,"missing enum type on enum object"),e}function Zw(t,e,n,i){t[Qw]=ex(e,n.map(r=>({no:r.no,name:r.name,localName:t[r.no]})))}function ex(t,e,n){const i=Object.create(null),r=Object.create(null),o=[];for(const l of e){const c=tx(l);o.push(c),i[l.name]=c,r[l.no]=c}return{typeName:t,values:o,findName(l){return i[l]},findNumber(l){return r[l]}}}function k2(t,e,n){const i={};for(const r of e){const o=tx(r);i[o.localName]=o.no,i[o.no]=o.localName}return Zw(i,t,e),i}function tx(t){return"localName"in t?t:Object.assign(Object.assign({},t),{localName:t.name})}class Xm{equals(e){return this.getType().runtime.util.equals(this.getType(),this,e)}clone(){return this.getType().runtime.util.clone(this)}fromBinary(e,n){const i=this.getType(),r=i.runtime.bin,o=r.makeReadOptions(n);return r.readMessage(this,o.readerFactory(e),e.byteLength,o),this}fromJson(e,n){const i=this.getType(),r=i.runtime.json,o=r.makeReadOptions(n);return r.readMessage(i,e,o,this),this}fromJsonString(e,n){let i;try{i=JSON.parse(e)}catch(r){throw new Error("cannot decode ".concat(this.getType().typeName," from JSON: ").concat(r instanceof Error?r.message:String(r)))}return this.fromJson(i,n)}toBinary(e){const n=this.getType(),i=n.runtime.bin,r=i.makeWriteOptions(e),o=r.writerFactory();return i.writeMessage(this,o,r),o.finish()}toJson(e){const n=this.getType(),i=n.runtime.json,r=i.makeWriteOptions(e);return i.writeMessage(this,r)}toJsonString(e){var n;const i=this.toJson(e);return JSON.stringify(i,null,(n=e?.prettySpaces)!==null&&n!==void 0?n:0)}toJSON(){return this.toJson({emitDefaultValues:!0})}getType(){return Object.getPrototypeOf(this).constructor}}function C2(t,e,n,i){var r;const o=(r=i?.localName)!==null&&r!==void 0?r:e.substring(e.lastIndexOf(".")+1),l={[o]:function(c){t.util.initFields(this),t.util.initPartial(c,this)}}[o];return Object.setPrototypeOf(l.prototype,new Xm),Object.assign(l,{runtime:t,typeName:e,fields:t.util.newFieldList(n),fromBinary(c,d){return new l().fromBinary(c,d)},fromJson(c,d){return new l().fromJson(c,d)},fromJsonString(c,d){return new l().fromJsonString(c,d)},equals(c,d){return t.util.equals(l,c,d)}}),l}function T2(){let t=0,e=0;for(let i=0;i<28;i+=7){let r=this.buf[this.pos++];if(t|=(r&127)<<i,(r&128)==0)return this.assertBounds(),[t,e]}let n=this.buf[this.pos++];if(t|=(n&15)<<28,e=(n&112)>>4,(n&128)==0)return this.assertBounds(),[t,e];for(let i=3;i<=31;i+=7){let r=this.buf[this.pos++];if(e|=(r&127)<<i,(r&128)==0)return this.assertBounds(),[t,e]}throw new Error("invalid varint")}function Cf(t,e,n){for(let o=0;o<28;o=o+7){const l=t>>>o,c=!(!(l>>>7)&&e==0),d=(c?l|128:l)&255;if(n.push(d),!c)return}const i=t>>>28&15|(e&7)<<4,r=e>>3!=0;if(n.push((r?i|128:i)&255),!!r){for(let o=3;o<31;o=o+7){const l=e>>>o,c=!!(l>>>7),d=(c?l|128:l)&255;if(n.push(d),!c)return}n.push(e>>>31&1)}}const tu=4294967296;function aS(t){const e=t[0]==="-";e&&(t=t.slice(1));const n=1e6;let i=0,r=0;function o(l,c){const d=Number(t.slice(l,c));r*=n,i=i*n+d,i>=tu&&(r=r+(i/tu|0),i=i%tu)}return o(-24,-18),o(-18,-12),o(-12,-6),o(-6),e?ix(i,r):Ym(i,r)}function w2(t,e){let n=Ym(t,e);const i=n.hi&2147483648;i&&(n=ix(n.lo,n.hi));const r=nx(n.lo,n.hi);return i?"-"+r:r}function nx(t,e){if({lo:t,hi:e}=x2(t,e),e<=2097151)return String(tu*e+t);const n=t&16777215,i=(t>>>24|e<<8)&16777215,r=e>>16&65535;let o=n+i*6777216+r*6710656,l=i+r*8147497,c=r*2;const d=1e7;return o>=d&&(l+=Math.floor(o/d),o%=d),l>=d&&(c+=Math.floor(l/d),l%=d),c.toString()+lS(l)+lS(o)}function x2(t,e){return{lo:t>>>0,hi:e>>>0}}function Ym(t,e){return{lo:t|0,hi:e|0}}function ix(t,e){return e=~e,t?t=~t+1:e+=1,Ym(t,e)}const lS=t=>{const e=String(t);return"0000000".slice(e.length)+e};function cS(t,e){if(t>=0){for(;t>127;)e.push(t&127|128),t=t>>>7;e.push(t)}else{for(let n=0;n<9;n++)e.push(t&127|128),t=t>>7;e.push(1)}}function E2(){let t=this.buf[this.pos++],e=t&127;if((t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<7,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<14,(t&128)==0)return this.assertBounds(),e;if(t=this.buf[this.pos++],e|=(t&127)<<21,(t&128)==0)return this.assertBounds(),e;t=this.buf[this.pos++],e|=(t&15)<<28;for(let n=5;(t&128)!==0&&n<10;n++)t=this.buf[this.pos++];if((t&128)!=0)throw new Error("invalid varint");return this.assertBounds(),e>>>0}function P2(){const t=new DataView(new ArrayBuffer(8));if(typeof BigInt=="function"&&typeof t.getBigInt64=="function"&&typeof t.getBigUint64=="function"&&typeof t.setBigInt64=="function"&&typeof t.setBigUint64=="function"&&(typeof process!="object"||typeof sS!="object"||sS.BUF_BIGINT_DISABLE!=="1")){const r=BigInt("-9223372036854775808"),o=BigInt("9223372036854775807"),l=BigInt("0"),c=BigInt("18446744073709551615");return{zero:BigInt(0),supported:!0,parse(d){const h=typeof d=="bigint"?d:BigInt(d);if(h>o||h<r)throw new Error("int64 invalid: ".concat(d));return h},uParse(d){const h=typeof d=="bigint"?d:BigInt(d);if(h>c||h<l)throw new Error("uint64 invalid: ".concat(d));return h},enc(d){return t.setBigInt64(0,this.parse(d),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},uEnc(d){return t.setBigInt64(0,this.uParse(d),!0),{lo:t.getInt32(0,!0),hi:t.getInt32(4,!0)}},dec(d,h){return t.setInt32(0,d,!0),t.setInt32(4,h,!0),t.getBigInt64(0,!0)},uDec(d,h){return t.setInt32(0,d,!0),t.setInt32(4,h,!0),t.getBigUint64(0,!0)}}}const n=r=>ut(/^-?[0-9]+$/.test(r),"int64 invalid: ".concat(r)),i=r=>ut(/^[0-9]+$/.test(r),"uint64 invalid: ".concat(r));return{zero:"0",supported:!1,parse(r){return typeof r!="string"&&(r=r.toString()),n(r),r},uParse(r){return typeof r!="string"&&(r=r.toString()),i(r),r},enc(r){return typeof r!="string"&&(r=r.toString()),n(r),aS(r)},uEnc(r){return typeof r!="string"&&(r=r.toString()),i(r),aS(r)},dec(r,o){return w2(r,o)},uDec(r,o){return nx(r,o)}}}const et=P2();var X;(function(t){t[t.DOUBLE=1]="DOUBLE",t[t.FLOAT=2]="FLOAT",t[t.INT64=3]="INT64",t[t.UINT64=4]="UINT64",t[t.INT32=5]="INT32",t[t.FIXED64=6]="FIXED64",t[t.FIXED32=7]="FIXED32",t[t.BOOL=8]="BOOL",t[t.STRING=9]="STRING",t[t.BYTES=12]="BYTES",t[t.UINT32=13]="UINT32",t[t.SFIXED32=15]="SFIXED32",t[t.SFIXED64=16]="SFIXED64",t[t.SINT32=17]="SINT32",t[t.SINT64=18]="SINT64"})(X||(X={}));var Wr;(function(t){t[t.BIGINT=0]="BIGINT",t[t.STRING=1]="STRING"})(Wr||(Wr={}));function Pr(t,e,n){if(e===n)return!0;if(t==X.BYTES){if(!(e instanceof Uint8Array)||!(n instanceof Uint8Array)||e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!==n[i])return!1;return!0}switch(t){case X.UINT64:case X.FIXED64:case X.INT64:case X.SFIXED64:case X.SINT64:return e==n}return!1}function Mo(t,e){switch(t){case X.BOOL:return!1;case X.UINT64:case X.FIXED64:case X.INT64:case X.SFIXED64:case X.SINT64:return e==0?et.zero:"0";case X.DOUBLE:case X.FLOAT:return 0;case X.BYTES:return new Uint8Array(0);case X.STRING:return"";default:return 0}}function rx(t,e){switch(t){case X.BOOL:return e===!1;case X.STRING:return e==="";case X.BYTES:return e instanceof Uint8Array&&!e.byteLength;default:return e==0}}var gt;(function(t){t[t.Varint=0]="Varint",t[t.Bit64=1]="Bit64",t[t.LengthDelimited=2]="LengthDelimited",t[t.StartGroup=3]="StartGroup",t[t.EndGroup=4]="EndGroup",t[t.Bit32=5]="Bit32"})(gt||(gt={}));class R2{constructor(e){this.stack=[],this.textEncoder=e??new TextEncoder,this.chunks=[],this.buf=[]}finish(){this.chunks.push(new Uint8Array(this.buf));let e=0;for(let r=0;r<this.chunks.length;r++)e+=this.chunks[r].length;let n=new Uint8Array(e),i=0;for(let r=0;r<this.chunks.length;r++)n.set(this.chunks[r],i),i+=this.chunks[r].length;return this.chunks=[],n}fork(){return this.stack.push({chunks:this.chunks,buf:this.buf}),this.chunks=[],this.buf=[],this}join(){let e=this.finish(),n=this.stack.pop();if(!n)throw new Error("invalid state, fork stack empty");return this.chunks=n.chunks,this.buf=n.buf,this.uint32(e.byteLength),this.raw(e)}tag(e,n){return this.uint32((e<<3|n)>>>0)}raw(e){return this.buf.length&&(this.chunks.push(new Uint8Array(this.buf)),this.buf=[]),this.chunks.push(e),this}uint32(e){for(Cp(e);e>127;)this.buf.push(e&127|128),e=e>>>7;return this.buf.push(e),this}int32(e){return eu(e),cS(e,this.buf),this}bool(e){return this.buf.push(e?1:0),this}bytes(e){return this.uint32(e.byteLength),this.raw(e)}string(e){let n=this.textEncoder.encode(e);return this.uint32(n.byteLength),this.raw(n)}float(e){Jw(e);let n=new Uint8Array(4);return new DataView(n.buffer).setFloat32(0,e,!0),this.raw(n)}double(e){let n=new Uint8Array(8);return new DataView(n.buffer).setFloat64(0,e,!0),this.raw(n)}fixed32(e){Cp(e);let n=new Uint8Array(4);return new DataView(n.buffer).setUint32(0,e,!0),this.raw(n)}sfixed32(e){eu(e);let n=new Uint8Array(4);return new DataView(n.buffer).setInt32(0,e,!0),this.raw(n)}sint32(e){return eu(e),e=(e<<1^e>>31)>>>0,cS(e,this.buf),this}sfixed64(e){let n=new Uint8Array(8),i=new DataView(n.buffer),r=et.enc(e);return i.setInt32(0,r.lo,!0),i.setInt32(4,r.hi,!0),this.raw(n)}fixed64(e){let n=new Uint8Array(8),i=new DataView(n.buffer),r=et.uEnc(e);return i.setInt32(0,r.lo,!0),i.setInt32(4,r.hi,!0),this.raw(n)}int64(e){let n=et.enc(e);return Cf(n.lo,n.hi,this.buf),this}sint64(e){let n=et.enc(e),i=n.hi>>31,r=n.lo<<1^i,o=(n.hi<<1|n.lo>>>31)^i;return Cf(r,o,this.buf),this}uint64(e){let n=et.uEnc(e);return Cf(n.lo,n.hi,this.buf),this}}class _2{constructor(e,n){this.varint64=T2,this.uint32=E2,this.buf=e,this.len=e.length,this.pos=0,this.view=new DataView(e.buffer,e.byteOffset,e.byteLength),this.textDecoder=n??new TextDecoder}tag(){let e=this.uint32(),n=e>>>3,i=e&7;if(n<=0||i<0||i>5)throw new Error("illegal tag: field no "+n+" wire type "+i);return[n,i]}skip(e,n){let i=this.pos;switch(e){case gt.Varint:for(;this.buf[this.pos++]&128;);break;case gt.Bit64:this.pos+=4;case gt.Bit32:this.pos+=4;break;case gt.LengthDelimited:let r=this.uint32();this.pos+=r;break;case gt.StartGroup:for(;;){const[o,l]=this.tag();if(l===gt.EndGroup){if(n!==void 0&&o!==n)throw new Error("invalid end group tag");break}this.skip(l,o)}break;default:throw new Error("cant skip wire type "+e)}return this.assertBounds(),this.buf.subarray(i,this.pos)}assertBounds(){if(this.pos>this.len)throw new RangeError("premature EOF")}int32(){return this.uint32()|0}sint32(){let e=this.uint32();return e>>>1^-(e&1)}int64(){return et.dec(...this.varint64())}uint64(){return et.uDec(...this.varint64())}sint64(){let[e,n]=this.varint64(),i=-(e&1);return e=(e>>>1|(n&1)<<31)^i,n=n>>>1^i,et.dec(e,n)}bool(){let[e,n]=this.varint64();return e!==0||n!==0}fixed32(){return this.view.getUint32((this.pos+=4)-4,!0)}sfixed32(){return this.view.getInt32((this.pos+=4)-4,!0)}fixed64(){return et.uDec(this.sfixed32(),this.sfixed32())}sfixed64(){return et.dec(this.sfixed32(),this.sfixed32())}float(){return this.view.getFloat32((this.pos+=4)-4,!0)}double(){return this.view.getFloat64((this.pos+=8)-8,!0)}bytes(){let e=this.uint32(),n=this.pos;return this.pos+=e,this.assertBounds(),this.buf.subarray(n,n+e)}string(){return this.textDecoder.decode(this.bytes())}}function I2(t,e,n,i){let r;return{typeName:e,extendee:n,get field(){if(!r){const o=typeof i=="function"?i():i;o.name=e.split(".").pop(),o.jsonName="[".concat(e,"]"),r=t.util.newFieldList([o]).list()[0]}return r},runtime:t}}function sx(t){const e=t.field.localName,n=Object.create(null);return n[e]=A2(t),[n,()=>n[e]]}function A2(t){const e=t.field;if(e.repeated)return[];if(e.default!==void 0)return e.default;switch(e.kind){case"enum":return e.T.values[0].no;case"scalar":return Mo(e.T,e.L);case"message":const n=e.T,i=new n;return n.fieldWrapper?n.fieldWrapper.unwrapField(i):i;case"map":throw"map fields are not allowed to be extensions"}}function M2(t,e){if(!e.repeated&&(e.kind=="enum"||e.kind=="scalar")){for(let n=t.length-1;n>=0;--n)if(t[n].no==e.no)return[t[n]];return[]}return t.filter(n=>n.no===e.no)}let zi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),Zu=[];for(let t=0;t<zi.length;t++)Zu[zi[t].charCodeAt(0)]=t;Zu[45]=zi.indexOf("+");Zu[95]=zi.indexOf("/");const ox={dec(t){let e=t.length*3/4;t[t.length-2]=="="?e-=2:t[t.length-1]=="="&&(e-=1);let n=new Uint8Array(e),i=0,r=0,o,l=0;for(let c=0;c<t.length;c++){if(o=Zu[t.charCodeAt(c)],o===void 0)switch(t[c]){case"=":r=0;case`
`:case"\r":case"	":case" ":continue;default:throw Error("invalid base64 string.")}switch(r){case 0:l=o,r=1;break;case 1:n[i++]=l<<2|(o&48)>>4,l=o,r=2;break;case 2:n[i++]=(l&15)<<4|(o&60)>>2,l=o,r=3;break;case 3:n[i++]=(l&3)<<6|o,r=0;break}}if(r==1)throw Error("invalid base64 string.");return n.subarray(0,i)},enc(t){let e="",n=0,i,r=0;for(let o=0;o<t.length;o++)switch(i=t[o],n){case 0:e+=zi[i>>2],r=(i&3)<<4,n=1;break;case 1:e+=zi[r|i>>4],r=(i&15)<<2,n=2;break;case 2:e+=zi[r|i>>6],e+=zi[i&63],n=0;break}return n&&(e+=zi[r],e+="=",n==1&&(e+="=")),e}};function N2(t,e,n){lx(e,t);const i=e.runtime.bin.makeReadOptions(n),r=M2(t.getType().runtime.bin.listUnknownFields(t),e.field),[o,l]=sx(e);for(const c of r)e.runtime.bin.readField(o,i.readerFactory(c.data),e.field,c.wireType,i);return l()}function D2(t,e,n,i){lx(e,t);const r=e.runtime.bin.makeReadOptions(i),o=e.runtime.bin.makeWriteOptions(i);if(ax(t,e)){const h=t.getType().runtime.bin.listUnknownFields(t).filter(f=>f.no!=e.field.no);t.getType().runtime.bin.discardUnknownFields(t);for(const f of h)t.getType().runtime.bin.onUnknownField(t,f.no,f.wireType,f.data)}const l=o.writerFactory();let c=e.field;!c.opt&&!c.repeated&&(c.kind=="enum"||c.kind=="scalar")&&(c=Object.assign(Object.assign({},e.field),{opt:!0})),e.runtime.bin.writeField(c,n,l,o);const d=r.readerFactory(l.finish());for(;d.pos<d.len;){const[h,f]=d.tag(),m=d.skip(f,h);t.getType().runtime.bin.onUnknownField(t,h,f,m)}}function ax(t,e){const n=t.getType();return e.extendee.typeName===n.typeName&&!!n.runtime.bin.listUnknownFields(t).find(i=>i.no==e.field.no)}function lx(t,e){ut(t.extendee.typeName==e.getType().typeName,"extension ".concat(t.typeName," can only be applied to message ").concat(t.extendee.typeName))}function cx(t,e){const n=t.localName;if(t.repeated)return e[n].length>0;if(t.oneof)return e[t.oneof.localName].case===n;switch(t.kind){case"enum":case"scalar":return t.opt||t.req?e[n]!==void 0:t.kind=="enum"?e[n]!==t.T.values[0].no:!rx(t.T,e[n]);case"message":return e[n]!==void 0;case"map":return Object.keys(e[n]).length>0}}function uS(t,e){const n=t.localName,i=!t.opt&&!t.req;if(t.repeated)e[n]=[];else if(t.oneof)e[t.oneof.localName]={case:void 0};else switch(t.kind){case"map":e[n]={};break;case"enum":e[n]=i?t.T.values[0].no:void 0;break;case"scalar":e[n]=i?Mo(t.T,t.L):void 0;break;case"message":e[n]=void 0;break}}function Wi(t,e){if(t===null||typeof t!="object"||!Object.getOwnPropertyNames(Xm.prototype).every(i=>i in t&&typeof t[i]=="function"))return!1;const n=t.getType();return n===null||typeof n!="function"||!("typeName"in n)||typeof n.typeName!="string"?!1:e===void 0?!0:n.typeName==e.typeName}function ux(t,e){return Wi(e)||!t.fieldWrapper?e:t.fieldWrapper.wrapField(e)}X.DOUBLE,X.FLOAT,X.INT64,X.UINT64,X.INT32,X.UINT32,X.BOOL,X.STRING,X.BYTES;const dS={ignoreUnknownFields:!1},hS={emitDefaultValues:!1,enumAsInteger:!1,useProtoFieldName:!1,prettySpaces:0};function O2(t){return t?Object.assign(Object.assign({},dS),t):dS}function L2(t){return t?Object.assign(Object.assign({},hS),t):hS}const wu=Symbol(),nu=Symbol();function F2(){return{makeReadOptions:O2,makeWriteOptions:L2,readMessage(t,e,n,i){if(e==null||Array.isArray(e)||typeof e!="object")throw new Error("cannot decode message ".concat(t.typeName," from JSON: ").concat(pi(e)));i=i??new t;const r=new Map,o=n.typeRegistry;for(const[l,c]of Object.entries(e)){const d=t.fields.findJsonName(l);if(d){if(d.oneof){if(c===null&&d.kind=="scalar")continue;const h=r.get(d.oneof);if(h!==void 0)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: multiple keys for oneof "').concat(d.oneof.name,'" present: "').concat(h,'", "').concat(l,'"'));r.set(d.oneof,l)}fS(i,c,d,n,t)}else{let h=!1;if(o?.findExtension&&l.startsWith("[")&&l.endsWith("]")){const f=o.findExtension(l.substring(1,l.length-1));if(f&&f.extendee.typeName==t.typeName){h=!0;const[m,v]=sx(f);fS(m,c,f.field,n,f),D2(i,f,v(),n)}}if(!h&&!n.ignoreUnknownFields)throw new Error("cannot decode message ".concat(t.typeName,' from JSON: key "').concat(l,'" is unknown'))}}return i},writeMessage(t,e){const n=t.getType(),i={};let r;try{for(r of n.fields.byNumber()){if(!cx(r,t)){if(r.req)throw"required field not set";if(!e.emitDefaultValues||!U2(r))continue}const l=r.oneof?t[r.oneof.localName].value:t[r.localName],c=pS(r,l,e);c!==void 0&&(i[e.useProtoFieldName?r.name:r.jsonName]=c)}const o=e.typeRegistry;if(o?.findExtensionFor)for(const l of n.runtime.bin.listUnknownFields(t)){const c=o.findExtensionFor(n.typeName,l.no);if(c&&ax(t,c)){const d=N2(t,c,e),h=pS(c.field,d,e);h!==void 0&&(i[c.field.jsonName]=h)}}}catch(o){const l=r?"cannot encode field ".concat(n.typeName,".").concat(r.name," to JSON"):"cannot encode message ".concat(n.typeName," to JSON"),c=o instanceof Error?o.message:String(o);throw new Error(l+(c.length>0?": ".concat(c):""))}return i},readScalar(t,e,n){return Ha(t,e,n??Wr.BIGINT,!0)},writeScalar(t,e,n){if(e!==void 0&&(n||rx(t,e)))return iu(t,e)},debug:pi}}function pi(t){if(t===null)return"null";switch(typeof t){case"object":return Array.isArray(t)?"array":"object";case"string":return t.length>100?"string":'"'.concat(t.split('"').join('\\"'),'"');default:return String(t)}}function fS(t,e,n,i,r){let o=n.localName;if(n.repeated){if(ut(n.kind!="map"),e===null)return;if(!Array.isArray(e))throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(pi(e)));const l=t[o];for(const c of e){if(c===null)throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(pi(c)));switch(n.kind){case"message":l.push(n.T.fromJson(c,i));break;case"enum":const d=Tf(n.T,c,i.ignoreUnknownFields,!0);d!==nu&&l.push(d);break;case"scalar":try{l.push(Ha(n.T,c,n.L,!0))}catch(h){let f="cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(pi(c));throw h instanceof Error&&h.message.length>0&&(f+=": ".concat(h.message)),new Error(f)}break}}}else if(n.kind=="map"){if(e===null)return;if(typeof e!="object"||Array.isArray(e))throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(pi(e)));const l=t[o];for(const[c,d]of Object.entries(e)){if(d===null)throw new Error("cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: map value null"));let h;try{h=j2(n.K,c)}catch(f){let m="cannot decode map key for field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(pi(e));throw f instanceof Error&&f.message.length>0&&(m+=": ".concat(f.message)),new Error(m)}switch(n.V.kind){case"message":l[h]=n.V.T.fromJson(d,i);break;case"enum":const f=Tf(n.V.T,d,i.ignoreUnknownFields,!0);f!==nu&&(l[h]=f);break;case"scalar":try{l[h]=Ha(n.V.T,d,Wr.BIGINT,!0)}catch(m){let v="cannot decode map value for field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(pi(e));throw m instanceof Error&&m.message.length>0&&(v+=": ".concat(m.message)),new Error(v)}break}}}else switch(n.oneof&&(t=t[n.oneof.localName]={case:o},o="value"),n.kind){case"message":const l=n.T;if(e===null&&l.typeName!="google.protobuf.Value")return;let c=t[o];Wi(c)?c.fromJson(e,i):(t[o]=c=l.fromJson(e,i),l.fieldWrapper&&!n.oneof&&(t[o]=l.fieldWrapper.unwrapField(c)));break;case"enum":const d=Tf(n.T,e,i.ignoreUnknownFields,!1);switch(d){case wu:uS(n,t);break;case nu:break;default:t[o]=d;break}break;case"scalar":try{const h=Ha(n.T,e,n.L,!1);switch(h){case wu:uS(n,t);break;default:t[o]=h;break}}catch(h){let f="cannot decode field ".concat(r.typeName,".").concat(n.name," from JSON: ").concat(pi(e));throw h instanceof Error&&h.message.length>0&&(f+=": ".concat(h.message)),new Error(f)}break}}function j2(t,e){if(t===X.BOOL)switch(e){case"true":e=!0;break;case"false":e=!1;break}return Ha(t,e,Wr.BIGINT,!0).toString()}function Ha(t,e,n,i){if(e===null)return i?Mo(t,n):wu;switch(t){case X.DOUBLE:case X.FLOAT:if(e==="NaN")return Number.NaN;if(e==="Infinity")return Number.POSITIVE_INFINITY;if(e==="-Infinity")return Number.NEGATIVE_INFINITY;if(e===""||typeof e=="string"&&e.trim().length!==e.length||typeof e!="string"&&typeof e!="number")break;const r=Number(e);if(Number.isNaN(r)||!Number.isFinite(r))break;return t==X.FLOAT&&Jw(r),r;case X.INT32:case X.FIXED32:case X.SFIXED32:case X.SINT32:case X.UINT32:let o;if(typeof e=="number"?o=e:typeof e=="string"&&e.length>0&&e.trim().length===e.length&&(o=Number(e)),o===void 0)break;return t==X.UINT32||t==X.FIXED32?Cp(o):eu(o),o;case X.INT64:case X.SFIXED64:case X.SINT64:if(typeof e!="number"&&typeof e!="string")break;const l=et.parse(e);return n?l.toString():l;case X.FIXED64:case X.UINT64:if(typeof e!="number"&&typeof e!="string")break;const c=et.uParse(e);return n?c.toString():c;case X.BOOL:if(typeof e!="boolean")break;return e;case X.STRING:if(typeof e!="string")break;try{encodeURIComponent(e)}catch{throw new Error("invalid UTF8")}return e;case X.BYTES:if(e==="")return new Uint8Array(0);if(typeof e!="string")break;return ox.dec(e)}throw new Error}function Tf(t,e,n,i){if(e===null)return t.typeName=="google.protobuf.NullValue"?0:i?t.values[0].no:wu;switch(typeof e){case"number":if(Number.isInteger(e))return e;break;case"string":const r=t.findName(e);if(r!==void 0)return r.no;if(n)return nu;break}throw new Error("cannot decode enum ".concat(t.typeName," from JSON: ").concat(pi(e)))}function U2(t){return t.repeated||t.kind=="map"?!0:!(t.oneof||t.kind=="message"||t.opt||t.req)}function pS(t,e,n){if(t.kind=="map"){ut(typeof e=="object"&&e!=null);const i={},r=Object.entries(e);switch(t.V.kind){case"scalar":for(const[l,c]of r)i[l.toString()]=iu(t.V.T,c);break;case"message":for(const[l,c]of r)i[l.toString()]=c.toJson(n);break;case"enum":const o=t.V.T;for(const[l,c]of r)i[l.toString()]=wf(o,c,n.enumAsInteger);break}return n.emitDefaultValues||r.length>0?i:void 0}if(t.repeated){ut(Array.isArray(e));const i=[];switch(t.kind){case"scalar":for(let r=0;r<e.length;r++)i.push(iu(t.T,e[r]));break;case"enum":for(let r=0;r<e.length;r++)i.push(wf(t.T,e[r],n.enumAsInteger));break;case"message":for(let r=0;r<e.length;r++)i.push(e[r].toJson(n));break}return n.emitDefaultValues||i.length>0?i:void 0}switch(t.kind){case"scalar":return iu(t.T,e);case"enum":return wf(t.T,e,n.enumAsInteger);case"message":return ux(t.T,e).toJson(n)}}function wf(t,e,n){var i;if(ut(typeof e=="number"),t.typeName=="google.protobuf.NullValue")return null;if(n)return e;const r=t.findNumber(e);return(i=r?.name)!==null&&i!==void 0?i:e}function iu(t,e){switch(t){case X.INT32:case X.SFIXED32:case X.SINT32:case X.FIXED32:case X.UINT32:return ut(typeof e=="number"),e;case X.FLOAT:case X.DOUBLE:return ut(typeof e=="number"),Number.isNaN(e)?"NaN":e===Number.POSITIVE_INFINITY?"Infinity":e===Number.NEGATIVE_INFINITY?"-Infinity":e;case X.STRING:return ut(typeof e=="string"),e;case X.BOOL:return ut(typeof e=="boolean"),e;case X.UINT64:case X.FIXED64:case X.INT64:case X.SFIXED64:case X.SINT64:return ut(typeof e=="bigint"||typeof e=="string"||typeof e=="number"),e.toString();case X.BYTES:return ut(e instanceof Uint8Array),ox.enc(e)}}const ao=Symbol("@bufbuild/protobuf/unknown-fields"),mS={readUnknownFields:!0,readerFactory:t=>new _2(t)},gS={writeUnknownFields:!0,writerFactory:()=>new R2};function B2(t){return t?Object.assign(Object.assign({},mS),t):mS}function V2(t){return t?Object.assign(Object.assign({},gS),t):gS}function z2(){return{makeReadOptions:B2,makeWriteOptions:V2,listUnknownFields(t){var e;return(e=t[ao])!==null&&e!==void 0?e:[]},discardUnknownFields(t){delete t[ao]},writeUnknownFields(t,e){const i=t[ao];if(i)for(const r of i)e.tag(r.no,r.wireType).raw(r.data)},onUnknownField(t,e,n,i){const r=t;Array.isArray(r[ao])||(r[ao]=[]),r[ao].push({no:e,wireType:n,data:i})},readMessage(t,e,n,i,r){const o=t.getType(),l=r?e.len:e.pos+n;let c,d;for(;e.pos<l&&([c,d]=e.tag(),!(r===!0&&d==gt.EndGroup));){const h=o.fields.find(c);if(!h){const f=e.skip(d,c);i.readUnknownFields&&this.onUnknownField(t,c,d,f);continue}vS(t,e,h,d,i)}if(r&&(d!=gt.EndGroup||c!==n))throw new Error("invalid end group tag")},readField:vS,writeMessage(t,e,n){const i=t.getType();for(const r of i.fields.byNumber()){if(!cx(r,t)){if(r.req)throw new Error("cannot encode field ".concat(i.typeName,".").concat(r.name," to binary: required field not set"));continue}const o=r.oneof?t[r.oneof.localName].value:t[r.localName];yS(r,o,e,n)}return n.writeUnknownFields&&this.writeUnknownFields(t,e),e},writeField(t,e,n,i){e!==void 0&&yS(t,e,n,i)}}}function vS(t,e,n,i,r){let{repeated:o,localName:l}=n;switch(n.oneof&&(t=t[n.oneof.localName],t.case!=l&&delete t.value,t.case=l,l="value"),n.kind){case"scalar":case"enum":const c=n.kind=="enum"?X.INT32:n.T;let d=xu;if(n.kind=="scalar"&&n.L>0&&(d=q2),o){let v=t[l];if(i==gt.LengthDelimited&&c!=X.STRING&&c!=X.BYTES){let k=e.uint32()+e.pos;for(;e.pos<k;)v.push(d(e,c))}else v.push(d(e,c))}else t[l]=d(e,c);break;case"message":const h=n.T;o?t[l].push(ru(e,new h,r,n)):Wi(t[l])?ru(e,t[l],r,n):(t[l]=ru(e,new h,r,n),h.fieldWrapper&&!n.oneof&&!n.repeated&&(t[l]=h.fieldWrapper.unwrapField(t[l])));break;case"map":let[f,m]=W2(n,e,r);t[l][f]=m;break}}function ru(t,e,n,i){const r=e.getType().runtime.bin,o=i?.delimited;return r.readMessage(e,t,o?i.no:t.uint32(),n,o),e}function W2(t,e,n){const i=e.uint32(),r=e.pos+i;let o,l;for(;e.pos<r;){const[c]=e.tag();switch(c){case 1:o=xu(e,t.K);break;case 2:switch(t.V.kind){case"scalar":l=xu(e,t.V.T);break;case"enum":l=e.int32();break;case"message":l=ru(e,new t.V.T,n,void 0);break}break}}if(o===void 0&&(o=Mo(t.K,Wr.BIGINT)),typeof o!="string"&&typeof o!="number"&&(o=o.toString()),l===void 0)switch(t.V.kind){case"scalar":l=Mo(t.V.T,Wr.BIGINT);break;case"enum":l=t.V.T.values[0].no;break;case"message":l=new t.V.T;break}return[o,l]}function q2(t,e){const n=xu(t,e);return typeof n=="bigint"?n.toString():n}function xu(t,e){switch(e){case X.STRING:return t.string();case X.BOOL:return t.bool();case X.DOUBLE:return t.double();case X.FLOAT:return t.float();case X.INT32:return t.int32();case X.INT64:return t.int64();case X.UINT64:return t.uint64();case X.FIXED64:return t.fixed64();case X.BYTES:return t.bytes();case X.FIXED32:return t.fixed32();case X.SFIXED32:return t.sfixed32();case X.SFIXED64:return t.sfixed64();case X.SINT64:return t.sint64();case X.UINT32:return t.uint32();case X.SINT32:return t.sint32()}}function yS(t,e,n,i){ut(e!==void 0);const r=t.repeated;switch(t.kind){case"scalar":case"enum":let o=t.kind=="enum"?X.INT32:t.T;if(r)if(ut(Array.isArray(e)),t.packed)$2(n,o,t.no,e);else for(const l of e)$a(n,o,t.no,l);else $a(n,o,t.no,e);break;case"message":if(r){ut(Array.isArray(e));for(const l of e)bS(n,i,t,l)}else bS(n,i,t,e);break;case"map":ut(typeof e=="object"&&e!=null);for(const[l,c]of Object.entries(e))H2(n,i,t,l,c);break}}function H2(t,e,n,i,r){t.tag(n.no,gt.LengthDelimited),t.fork();let o=i;switch(n.K){case X.INT32:case X.FIXED32:case X.UINT32:case X.SFIXED32:case X.SINT32:o=Number.parseInt(i);break;case X.BOOL:ut(i=="true"||i=="false"),o=i=="true";break}switch($a(t,n.K,1,o),n.V.kind){case"scalar":$a(t,n.V.T,2,r);break;case"enum":$a(t,X.INT32,2,r);break;case"message":ut(r!==void 0),t.tag(2,gt.LengthDelimited).bytes(r.toBinary(e));break}t.join()}function bS(t,e,n,i){const r=ux(n.T,i);n.delimited?t.tag(n.no,gt.StartGroup).raw(r.toBinary(e)).tag(n.no,gt.EndGroup):t.tag(n.no,gt.LengthDelimited).bytes(r.toBinary(e))}function $a(t,e,n,i){ut(i!==void 0);let[r,o]=dx(e);t.tag(n,r)[o](i)}function $2(t,e,n,i){if(!i.length)return;t.tag(n,gt.LengthDelimited).fork();let[,r]=dx(e);for(let o=0;o<i.length;o++)t[r](i[o]);t.join()}function dx(t){let e=gt.Varint;switch(t){case X.BYTES:case X.STRING:e=gt.LengthDelimited;break;case X.DOUBLE:case X.FIXED64:case X.SFIXED64:e=gt.Bit64;break;case X.FIXED32:case X.SFIXED32:case X.FLOAT:e=gt.Bit32;break}const n=X[t].toLowerCase();return[e,n]}function K2(){return{setEnumType:Zw,initPartial(t,e){if(t===void 0)return;const n=e.getType();for(const i of n.fields.byMember()){const r=i.localName,o=e,l=t;if(l[r]!=null)switch(i.kind){case"oneof":const c=l[r].case;if(c===void 0)continue;const d=i.findField(c);let h=l[r].value;d&&d.kind=="message"&&!Wi(h,d.T)?h=new d.T(h):d&&d.kind==="scalar"&&d.T===X.BYTES&&(h=Ia(h)),o[r]={case:c,value:h};break;case"scalar":case"enum":let f=l[r];i.T===X.BYTES&&(f=i.repeated?f.map(Ia):Ia(f)),o[r]=f;break;case"map":switch(i.V.kind){case"scalar":case"enum":if(i.V.T===X.BYTES)for(const[S,k]of Object.entries(l[r]))o[r][S]=Ia(k);else Object.assign(o[r],l[r]);break;case"message":const v=i.V.T;for(const S of Object.keys(l[r])){let k=l[r][S];v.fieldWrapper||(k=new v(k)),o[r][S]=k}break}break;case"message":const m=i.T;if(i.repeated)o[r]=l[r].map(v=>Wi(v,m)?v:new m(v));else{const v=l[r];m.fieldWrapper?m.typeName==="google.protobuf.BytesValue"?o[r]=Ia(v):o[r]=v:o[r]=Wi(v,m)?v:new m(v)}break}}},equals(t,e,n){return e===n?!0:!e||!n?!1:t.fields.byMember().every(i=>{const r=e[i.localName],o=n[i.localName];if(i.repeated){if(r.length!==o.length)return!1;switch(i.kind){case"message":return r.every((l,c)=>i.T.equals(l,o[c]));case"scalar":return r.every((l,c)=>Pr(i.T,l,o[c]));case"enum":return r.every((l,c)=>Pr(X.INT32,l,o[c]))}throw new Error("repeated cannot contain ".concat(i.kind))}switch(i.kind){case"message":let l=r,c=o;return i.T.fieldWrapper&&(l!==void 0&&!Wi(l)&&(l=i.T.fieldWrapper.wrapField(l)),c!==void 0&&!Wi(c)&&(c=i.T.fieldWrapper.wrapField(c))),i.T.equals(l,c);case"enum":return Pr(X.INT32,r,o);case"scalar":return Pr(i.T,r,o);case"oneof":if(r.case!==o.case)return!1;const d=i.findField(r.case);if(d===void 0)return!0;switch(d.kind){case"message":return d.T.equals(r.value,o.value);case"enum":return Pr(X.INT32,r.value,o.value);case"scalar":return Pr(d.T,r.value,o.value)}throw new Error("oneof cannot contain ".concat(d.kind));case"map":const h=Object.keys(r).concat(Object.keys(o));switch(i.V.kind){case"message":const f=i.V.T;return h.every(v=>f.equals(r[v],o[v]));case"enum":return h.every(v=>Pr(X.INT32,r[v],o[v]));case"scalar":const m=i.V.T;return h.every(v=>Pr(m,r[v],o[v]))}break}})},clone(t){const e=t.getType(),n=new e,i=n;for(const r of e.fields.byMember()){const o=t[r.localName];let l;if(r.repeated)l=o.map(qc);else if(r.kind=="map"){l=i[r.localName];for(const[c,d]of Object.entries(o))l[c]=qc(d)}else r.kind=="oneof"?l=r.findField(o.case)?{case:o.case,value:qc(o.value)}:{case:void 0}:l=qc(o);i[r.localName]=l}for(const r of e.runtime.bin.listUnknownFields(t))e.runtime.bin.onUnknownField(i,r.no,r.wireType,r.data);return n}}}function qc(t){if(t===void 0)return t;if(Wi(t))return t.clone();if(t instanceof Uint8Array){const e=new Uint8Array(t.byteLength);return e.set(t),e}return t}function Ia(t){return t instanceof Uint8Array?t:new Uint8Array(t)}function G2(t,e,n){return{syntax:t,json:F2(),bin:z2(),util:Object.assign(Object.assign({},K2()),{newFieldList:e,initFields:n}),makeMessageType(i,r,o){return C2(this,i,r,o)},makeEnum:k2,makeEnumType:ex,getEnumType:S2,makeExtension(i,r,o){return I2(this,i,r,o)}}}class X2{constructor(e,n){this._fields=e,this._normalizer=n}findJsonName(e){if(!this.jsonNames){const n={};for(const i of this.list())n[i.jsonName]=n[i.name]=i;this.jsonNames=n}return this.jsonNames[e]}find(e){if(!this.numbers){const n={};for(const i of this.list())n[i.no]=i;this.numbers=n}return this.numbers[e]}list(){return this.all||(this.all=this._normalizer(this._fields)),this.all}byNumber(){return this.numbersAsc||(this.numbersAsc=this.list().concat().sort((e,n)=>e.no-n.no)),this.numbersAsc}byMember(){if(!this.members){this.members=[];const e=this.members;let n;for(const i of this.list())i.oneof?i.oneof!==n&&(n=i.oneof,e.push(n)):e.push(i)}return this.members}}function hx(t,e){const n=fx(t);return e?n:t3(e3(n))}function Y2(t){return hx(t,!1)}const J2=fx;function fx(t){let e=!1;const n=[];for(let i=0;i<t.length;i++){let r=t.charAt(i);switch(r){case"_":e=!0;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n.push(r),e=!1;break;default:e&&(e=!1,r=r.toUpperCase()),n.push(r);break}}return n.join("")}const Q2=new Set(["constructor","toString","toJSON","valueOf"]),Z2=new Set(["getType","clone","equals","fromBinary","fromJson","fromJsonString","toBinary","toJson","toJsonString","toObject"]),px=t=>"".concat(t,"$"),e3=t=>Z2.has(t)?px(t):t,t3=t=>Q2.has(t)?px(t):t;class n3{constructor(e){this.kind="oneof",this.repeated=!1,this.packed=!1,this.opt=!1,this.req=!1,this.default=void 0,this.fields=[],this.name=e,this.localName=Y2(e)}addField(e){ut(e.oneof===this,"field ".concat(e.name," not one of ").concat(this.name)),this.fields.push(e)}findField(e){if(!this._lookup){this._lookup=Object.create(null);for(let n=0;n<this.fields.length;n++)this._lookup[this.fields[n].localName]=this.fields[n]}return this._lookup[e]}}function i3(t,e){var n,i,r,o,l,c;const d=[];let h;for(const f of typeof t=="function"?t():t){const m=f;if(m.localName=hx(f.name,f.oneof!==void 0),m.jsonName=(n=f.jsonName)!==null&&n!==void 0?n:J2(f.name),m.repeated=(i=f.repeated)!==null&&i!==void 0?i:!1,f.kind=="scalar"&&(m.L=(r=f.L)!==null&&r!==void 0?r:Wr.BIGINT),m.delimited=(o=f.delimited)!==null&&o!==void 0?o:!1,m.req=(l=f.req)!==null&&l!==void 0?l:!1,m.opt=(c=f.opt)!==null&&c!==void 0?c:!1,f.packed===void 0&&(m.packed=f.kind=="enum"||f.kind=="scalar"&&f.T!=X.BYTES&&f.T!=X.STRING),f.oneof!==void 0){const v=typeof f.oneof=="string"?f.oneof:f.oneof.name;(!h||h.name!=v)&&(h=new n3(v)),m.oneof=h,h.addField(m)}d.push(m)}return d}const V=G2("proto3",t=>new X2(t,e=>i3(e)),t=>{for(const e of t.getType().fields.byMember()){if(e.opt)continue;const n=e.localName,i=t;if(e.repeated){i[n]=[];continue}switch(e.kind){case"oneof":i[n]={case:void 0};break;case"enum":i[n]=0;break;case"map":i[n]={};break;case"scalar":i[n]=Mo(e.T,e.L);break}}});class fn extends Xm{constructor(e){super(),this.seconds=et.zero,this.nanos=0,V.util.initPartial(e,this)}fromJson(e,n){if(typeof e!="string")throw new Error("cannot decode google.protobuf.Timestamp from JSON: ".concat(V.json.debug(e)));const i=e.match(/^([0-9]{4})-([0-9]{2})-([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})(?:Z|\.([0-9]{3,9})Z|([+-][0-9][0-9]:[0-9][0-9]))$/);if(!i)throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");const r=Date.parse(i[1]+"-"+i[2]+"-"+i[3]+"T"+i[4]+":"+i[5]+":"+i[6]+(i[8]?i[8]:"Z"));if(Number.isNaN(r))throw new Error("cannot decode google.protobuf.Timestamp from JSON: invalid RFC 3339 string");if(r<Date.parse("0001-01-01T00:00:00Z")||r>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot decode message google.protobuf.Timestamp from JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");return this.seconds=et.parse(r/1e3),this.nanos=0,i[7]&&(this.nanos=parseInt("1"+i[7]+"0".repeat(9-i[7].length))-1e9),this}toJson(e){const n=Number(this.seconds)*1e3;if(n<Date.parse("0001-01-01T00:00:00Z")||n>Date.parse("9999-12-31T23:59:59Z"))throw new Error("cannot encode google.protobuf.Timestamp to JSON: must be from 0001-01-01T00:00:00Z to 9999-12-31T23:59:59Z inclusive");if(this.nanos<0)throw new Error("cannot encode google.protobuf.Timestamp to JSON: nanos must not be negative");let i="Z";if(this.nanos>0){const r=(this.nanos+1e9).toString().substring(1);r.substring(3)==="000000"?i="."+r.substring(0,3)+"Z":r.substring(6)==="000"?i="."+r.substring(0,6)+"Z":i="."+r+"Z"}return new Date(n).toISOString().replace(".000Z",i)}toDate(){return new Date(Number(this.seconds)*1e3+Math.ceil(this.nanos/1e6))}static now(){return fn.fromDate(new Date)}static fromDate(e){const n=e.getTime();return new fn({seconds:et.parse(Math.floor(n/1e3)),nanos:n%1e3*1e6})}static fromBinary(e,n){return new fn().fromBinary(e,n)}static fromJson(e,n){return new fn().fromJson(e,n)}static fromJsonString(e,n){return new fn().fromJsonString(e,n)}static equals(e,n){return V.util.equals(fn,e,n)}}fn.runtime=V;fn.typeName="google.protobuf.Timestamp";fn.fields=V.util.newFieldList(()=>[{no:1,name:"seconds",kind:"scalar",T:3},{no:2,name:"nanos",kind:"scalar",T:5}]);const r3=V.makeMessageType("livekit.MetricsBatch",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:fn},{no:3,name:"str_data",kind:"scalar",T:9,repeated:!0},{no:4,name:"time_series",kind:"message",T:s3,repeated:!0},{no:5,name:"events",kind:"message",T:a3,repeated:!0}]),s3=V.makeMessageType("livekit.TimeSeriesMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"samples",kind:"message",T:o3,repeated:!0},{no:5,name:"rid",kind:"scalar",T:13}]),o3=V.makeMessageType("livekit.MetricSample",()=>[{no:1,name:"timestamp_ms",kind:"scalar",T:3},{no:2,name:"normalized_timestamp",kind:"message",T:fn},{no:3,name:"value",kind:"scalar",T:2}]),a3=V.makeMessageType("livekit.EventMetric",()=>[{no:1,name:"label",kind:"scalar",T:13},{no:2,name:"participant_identity",kind:"scalar",T:13},{no:3,name:"track_sid",kind:"scalar",T:13},{no:4,name:"start_timestamp_ms",kind:"scalar",T:3},{no:5,name:"end_timestamp_ms",kind:"scalar",T:3,opt:!0},{no:6,name:"normalized_start_timestamp",kind:"message",T:fn},{no:7,name:"normalized_end_timestamp",kind:"message",T:fn,opt:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"rid",kind:"scalar",T:13}]),mx=V.makeEnum("livekit.BackupCodecPolicy",[{no:0,name:"PREFER_REGRESSION"},{no:1,name:"SIMULCAST"},{no:2,name:"REGRESSION"}]),ti=V.makeEnum("livekit.TrackType",[{no:0,name:"AUDIO"},{no:1,name:"VIDEO"},{no:2,name:"DATA"}]),St=V.makeEnum("livekit.TrackSource",[{no:0,name:"UNKNOWN"},{no:1,name:"CAMERA"},{no:2,name:"MICROPHONE"},{no:3,name:"SCREEN_SHARE"},{no:4,name:"SCREEN_SHARE_AUDIO"}]),Jm=V.makeEnum("livekit.VideoQuality",[{no:0,name:"LOW"},{no:1,name:"MEDIUM"},{no:2,name:"HIGH"},{no:3,name:"OFF"}]),ja=V.makeEnum("livekit.ConnectionQuality",[{no:0,name:"POOR"},{no:1,name:"GOOD"},{no:2,name:"EXCELLENT"},{no:3,name:"LOST"}]),sl=V.makeEnum("livekit.ClientConfigSetting",[{no:0,name:"UNSET"},{no:1,name:"DISABLED"},{no:2,name:"ENABLED"}]),ii=V.makeEnum("livekit.DisconnectReason",[{no:0,name:"UNKNOWN_REASON"},{no:1,name:"CLIENT_INITIATED"},{no:2,name:"DUPLICATE_IDENTITY"},{no:3,name:"SERVER_SHUTDOWN"},{no:4,name:"PARTICIPANT_REMOVED"},{no:5,name:"ROOM_DELETED"},{no:6,name:"STATE_MISMATCH"},{no:7,name:"JOIN_FAILURE"},{no:8,name:"MIGRATION"},{no:9,name:"SIGNAL_CLOSE"},{no:10,name:"ROOM_CLOSED"},{no:11,name:"USER_UNAVAILABLE"},{no:12,name:"USER_REJECTED"},{no:13,name:"SIP_TRUNK_FAILURE"},{no:14,name:"CONNECTION_TIMEOUT"},{no:15,name:"MEDIA_FAILURE"}]),gs=V.makeEnum("livekit.ReconnectReason",[{no:0,name:"RR_UNKNOWN"},{no:1,name:"RR_SIGNAL_DISCONNECTED"},{no:2,name:"RR_PUBLISHER_FAILED"},{no:3,name:"RR_SUBSCRIBER_FAILED"},{no:4,name:"RR_SWITCH_CANDIDATE"}]),l3=V.makeEnum("livekit.SubscriptionError",[{no:0,name:"SE_UNKNOWN"},{no:1,name:"SE_CODEC_UNSUPPORTED"},{no:2,name:"SE_TRACK_NOTFOUND"}]),Nt=V.makeEnum("livekit.AudioTrackFeature",[{no:0,name:"TF_STEREO"},{no:1,name:"TF_NO_DTX"},{no:2,name:"TF_AUTO_GAIN_CONTROL"},{no:3,name:"TF_ECHO_CANCELLATION"},{no:4,name:"TF_NOISE_SUPPRESSION"},{no:5,name:"TF_ENHANCED_NOISE_CANCELLATION"},{no:6,name:"TF_PRECONNECT_BUFFER"}]),ed=V.makeMessageType("livekit.Room",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"empty_timeout",kind:"scalar",T:13},{no:14,name:"departure_timeout",kind:"scalar",T:13},{no:4,name:"max_participants",kind:"scalar",T:13},{no:5,name:"creation_time",kind:"scalar",T:3},{no:15,name:"creation_time_ms",kind:"scalar",T:3},{no:6,name:"turn_password",kind:"scalar",T:9},{no:7,name:"enabled_codecs",kind:"message",T:Eu,repeated:!0},{no:8,name:"metadata",kind:"scalar",T:9},{no:9,name:"num_participants",kind:"scalar",T:13},{no:11,name:"num_publishers",kind:"scalar",T:13},{no:10,name:"active_recording",kind:"scalar",T:8},{no:13,name:"version",kind:"message",T:Rx}]),Eu=V.makeMessageType("livekit.Codec",()=>[{no:1,name:"mime",kind:"scalar",T:9},{no:2,name:"fmtp_line",kind:"scalar",T:9}]),c3=V.makeMessageType("livekit.ParticipantPermission",()=>[{no:1,name:"can_subscribe",kind:"scalar",T:8},{no:2,name:"can_publish",kind:"scalar",T:8},{no:3,name:"can_publish_data",kind:"scalar",T:8},{no:9,name:"can_publish_sources",kind:"enum",T:V.getEnumType(St),repeated:!0},{no:7,name:"hidden",kind:"scalar",T:8},{no:8,name:"recorder",kind:"scalar",T:8},{no:10,name:"can_update_metadata",kind:"scalar",T:8},{no:11,name:"agent",kind:"scalar",T:8},{no:12,name:"can_subscribe_metrics",kind:"scalar",T:8}]),Ps=V.makeMessageType("livekit.ParticipantInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"identity",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:V.getEnumType(Co)},{no:4,name:"tracks",kind:"message",T:go,repeated:!0},{no:5,name:"metadata",kind:"scalar",T:9},{no:6,name:"joined_at",kind:"scalar",T:3},{no:17,name:"joined_at_ms",kind:"scalar",T:3},{no:9,name:"name",kind:"scalar",T:9},{no:10,name:"version",kind:"scalar",T:13},{no:11,name:"permission",kind:"message",T:c3},{no:12,name:"region",kind:"scalar",T:9},{no:13,name:"is_publisher",kind:"scalar",T:8},{no:14,name:"kind",kind:"enum",T:V.getEnumType(ol)},{no:15,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:16,name:"disconnect_reason",kind:"enum",T:V.getEnumType(ii)},{no:18,name:"kind_details",kind:"enum",T:V.getEnumType(u3),repeated:!0}]),Co=V.makeEnum("livekit.ParticipantInfo.State",[{no:0,name:"JOINING"},{no:1,name:"JOINED"},{no:2,name:"ACTIVE"},{no:3,name:"DISCONNECTED"}]),ol=V.makeEnum("livekit.ParticipantInfo.Kind",[{no:0,name:"STANDARD"},{no:1,name:"INGRESS"},{no:2,name:"EGRESS"},{no:3,name:"SIP"},{no:4,name:"AGENT"},{no:7,name:"CONNECTOR"}]),u3=V.makeEnum("livekit.ParticipantInfo.KindDetail",[{no:0,name:"CLOUD_AGENT"},{no:1,name:"FORWARDED"}]),Rt=V.makeEnum("livekit.Encryption.Type",[{no:0,name:"NONE"},{no:1,name:"GCM"},{no:2,name:"CUSTOM"}]),d3=V.makeMessageType("livekit.SimulcastCodecInfo",()=>[{no:1,name:"mime_type",kind:"scalar",T:9},{no:2,name:"mid",kind:"scalar",T:9},{no:3,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:Or,repeated:!0},{no:5,name:"video_layer_mode",kind:"enum",T:V.getEnumType(gx)},{no:6,name:"sdp_cid",kind:"scalar",T:9}]),go=V.makeMessageType("livekit.TrackInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"type",kind:"enum",T:V.getEnumType(ti)},{no:3,name:"name",kind:"scalar",T:9},{no:4,name:"muted",kind:"scalar",T:8},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"simulcast",kind:"scalar",T:8},{no:8,name:"disable_dtx",kind:"scalar",T:8},{no:9,name:"source",kind:"enum",T:V.getEnumType(St)},{no:10,name:"layers",kind:"message",T:Or,repeated:!0},{no:11,name:"mime_type",kind:"scalar",T:9},{no:12,name:"mid",kind:"scalar",T:9},{no:13,name:"codecs",kind:"message",T:d3,repeated:!0},{no:14,name:"stereo",kind:"scalar",T:8},{no:15,name:"disable_red",kind:"scalar",T:8},{no:16,name:"encryption",kind:"enum",T:V.getEnumType(Rt)},{no:17,name:"stream",kind:"scalar",T:9},{no:18,name:"version",kind:"message",T:Rx},{no:19,name:"audio_features",kind:"enum",T:V.getEnumType(Nt),repeated:!0},{no:20,name:"backup_codec_policy",kind:"enum",T:V.getEnumType(mx)}]),Or=V.makeMessageType("livekit.VideoLayer",()=>[{no:1,name:"quality",kind:"enum",T:V.getEnumType(Jm)},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13},{no:4,name:"bitrate",kind:"scalar",T:13},{no:5,name:"ssrc",kind:"scalar",T:13},{no:6,name:"spatial_layer",kind:"scalar",T:5},{no:7,name:"rid",kind:"scalar",T:9}]),gx=V.makeEnum("livekit.VideoLayer.Mode",[{no:0,name:"MODE_UNUSED"},{no:1,name:"ONE_SPATIAL_LAYER_PER_STREAM"},{no:2,name:"MULTIPLE_SPATIAL_LAYERS_PER_STREAM"},{no:3,name:"ONE_SPATIAL_LAYER_PER_STREAM_INCOMPLETE_RTCP_SR"}]),en=V.makeMessageType("livekit.DataPacket",()=>[{no:1,name:"kind",kind:"enum",T:V.getEnumType(De)},{no:4,name:"participant_identity",kind:"scalar",T:9},{no:5,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:2,name:"user",kind:"message",T:Qm,oneof:"value"},{no:3,name:"speaker",kind:"message",T:h3,oneof:"value"},{no:6,name:"sip_dtmf",kind:"message",T:Sx,oneof:"value"},{no:7,name:"transcription",kind:"message",T:f3,oneof:"value"},{no:8,name:"metrics",kind:"message",T:r3,oneof:"value"},{no:9,name:"chat_message",kind:"message",T:Pu,oneof:"value"},{no:10,name:"rpc_request",kind:"message",T:Zm,oneof:"value"},{no:11,name:"rpc_ack",kind:"message",T:eg,oneof:"value"},{no:12,name:"rpc_response",kind:"message",T:tg,oneof:"value"},{no:13,name:"stream_header",kind:"message",T:Ru,oneof:"value"},{no:14,name:"stream_chunk",kind:"message",T:_u,oneof:"value"},{no:15,name:"stream_trailer",kind:"message",T:Iu,oneof:"value"},{no:18,name:"encrypted_packet",kind:"message",T:vx,oneof:"value"},{no:16,name:"sequence",kind:"scalar",T:13},{no:17,name:"participant_sid",kind:"scalar",T:9}]),De=V.makeEnum("livekit.DataPacket.Kind",[{no:0,name:"RELIABLE"},{no:1,name:"LOSSY"}]),vx=V.makeMessageType("livekit.EncryptedPacket",()=>[{no:1,name:"encryption_type",kind:"enum",T:V.getEnumType(Rt)},{no:2,name:"iv",kind:"scalar",T:12},{no:3,name:"key_index",kind:"scalar",T:13},{no:4,name:"encrypted_value",kind:"scalar",T:12}]),yx=V.makeMessageType("livekit.EncryptedPacketPayload",()=>[{no:1,name:"user",kind:"message",T:Qm,oneof:"value"},{no:3,name:"chat_message",kind:"message",T:Pu,oneof:"value"},{no:4,name:"rpc_request",kind:"message",T:Zm,oneof:"value"},{no:5,name:"rpc_ack",kind:"message",T:eg,oneof:"value"},{no:6,name:"rpc_response",kind:"message",T:tg,oneof:"value"},{no:7,name:"stream_header",kind:"message",T:Ru,oneof:"value"},{no:8,name:"stream_chunk",kind:"message",T:_u,oneof:"value"},{no:9,name:"stream_trailer",kind:"message",T:Iu,oneof:"value"}]),h3=V.makeMessageType("livekit.ActiveSpeakerUpdate",()=>[{no:1,name:"speakers",kind:"message",T:bx,repeated:!0}]),bx=V.makeMessageType("livekit.SpeakerInfo",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"level",kind:"scalar",T:2},{no:3,name:"active",kind:"scalar",T:8}]),Qm=V.makeMessageType("livekit.UserPacket",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:5,name:"participant_identity",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:12},{no:3,name:"destination_sids",kind:"scalar",T:9,repeated:!0},{no:6,name:"destination_identities",kind:"scalar",T:9,repeated:!0},{no:4,name:"topic",kind:"scalar",T:9,opt:!0},{no:8,name:"id",kind:"scalar",T:9,opt:!0},{no:9,name:"start_time",kind:"scalar",T:4,opt:!0},{no:10,name:"end_time",kind:"scalar",T:4,opt:!0},{no:11,name:"nonce",kind:"scalar",T:12}]),Sx=V.makeMessageType("livekit.SipDTMF",()=>[{no:3,name:"code",kind:"scalar",T:13},{no:4,name:"digit",kind:"scalar",T:9}]),f3=V.makeMessageType("livekit.Transcription",()=>[{no:2,name:"transcribed_participant_identity",kind:"scalar",T:9},{no:3,name:"track_id",kind:"scalar",T:9},{no:4,name:"segments",kind:"message",T:p3,repeated:!0}]),p3=V.makeMessageType("livekit.TranscriptionSegment",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"text",kind:"scalar",T:9},{no:3,name:"start_time",kind:"scalar",T:4},{no:4,name:"end_time",kind:"scalar",T:4},{no:5,name:"final",kind:"scalar",T:8},{no:6,name:"language",kind:"scalar",T:9}]),Pu=V.makeMessageType("livekit.ChatMessage",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"edit_timestamp",kind:"scalar",T:3,opt:!0},{no:4,name:"message",kind:"scalar",T:9},{no:5,name:"deleted",kind:"scalar",T:8},{no:6,name:"generated",kind:"scalar",T:8}]),Zm=V.makeMessageType("livekit.RpcRequest",()=>[{no:1,name:"id",kind:"scalar",T:9},{no:2,name:"method",kind:"scalar",T:9},{no:3,name:"payload",kind:"scalar",T:9},{no:4,name:"response_timeout_ms",kind:"scalar",T:13},{no:5,name:"version",kind:"scalar",T:13}]),eg=V.makeMessageType("livekit.RpcAck",()=>[{no:1,name:"request_id",kind:"scalar",T:9}]),tg=V.makeMessageType("livekit.RpcResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:9},{no:2,name:"payload",kind:"scalar",T:9,oneof:"value"},{no:3,name:"error",kind:"message",T:kx,oneof:"value"}]),kx=V.makeMessageType("livekit.RpcError",()=>[{no:1,name:"code",kind:"scalar",T:13},{no:2,name:"message",kind:"scalar",T:9},{no:3,name:"data",kind:"scalar",T:9}]),Cx=V.makeMessageType("livekit.ParticipantTracks",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sids",kind:"scalar",T:9,repeated:!0}]),Tx=V.makeMessageType("livekit.ServerInfo",()=>[{no:1,name:"edition",kind:"enum",T:V.getEnumType(wx)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"region",kind:"scalar",T:9},{no:5,name:"node_id",kind:"scalar",T:9},{no:6,name:"debug_info",kind:"scalar",T:9},{no:7,name:"agent_protocol",kind:"scalar",T:5}]),wx=V.makeEnum("livekit.ServerInfo.Edition",[{no:0,name:"Standard"},{no:1,name:"Cloud"}]),xx=V.makeMessageType("livekit.ClientInfo",()=>[{no:1,name:"sdk",kind:"enum",T:V.getEnumType(Ex)},{no:2,name:"version",kind:"scalar",T:9},{no:3,name:"protocol",kind:"scalar",T:5},{no:4,name:"os",kind:"scalar",T:9},{no:5,name:"os_version",kind:"scalar",T:9},{no:6,name:"device_model",kind:"scalar",T:9},{no:7,name:"browser",kind:"scalar",T:9},{no:8,name:"browser_version",kind:"scalar",T:9},{no:9,name:"address",kind:"scalar",T:9},{no:10,name:"network",kind:"scalar",T:9},{no:11,name:"other_sdks",kind:"scalar",T:9}]),Ex=V.makeEnum("livekit.ClientInfo.SDK",[{no:0,name:"UNKNOWN"},{no:1,name:"JS"},{no:2,name:"SWIFT"},{no:3,name:"ANDROID"},{no:4,name:"FLUTTER"},{no:5,name:"GO"},{no:6,name:"UNITY"},{no:7,name:"REACT_NATIVE"},{no:8,name:"RUST"},{no:9,name:"PYTHON"},{no:10,name:"CPP"},{no:11,name:"UNITY_WEB"},{no:12,name:"NODE"},{no:13,name:"UNREAL"},{no:14,name:"ESP32"}]),Px=V.makeMessageType("livekit.ClientConfiguration",()=>[{no:1,name:"video",kind:"message",T:SS},{no:2,name:"screen",kind:"message",T:SS},{no:3,name:"resume_connection",kind:"enum",T:V.getEnumType(sl)},{no:4,name:"disabled_codecs",kind:"message",T:m3},{no:5,name:"force_relay",kind:"enum",T:V.getEnumType(sl)}]),SS=V.makeMessageType("livekit.VideoConfiguration",()=>[{no:1,name:"hardware_encoder",kind:"enum",T:V.getEnumType(sl)}]),m3=V.makeMessageType("livekit.DisabledCodecs",()=>[{no:1,name:"codecs",kind:"message",T:Eu,repeated:!0},{no:2,name:"publish",kind:"message",T:Eu,repeated:!0}]),Rx=V.makeMessageType("livekit.TimedVersion",()=>[{no:1,name:"unix_micro",kind:"scalar",T:3},{no:2,name:"ticks",kind:"scalar",T:5}]),Tp=V.makeEnum("livekit.DataStream.OperationType",[{no:0,name:"CREATE"},{no:1,name:"UPDATE"},{no:2,name:"DELETE"},{no:3,name:"REACTION"}]),_x=V.makeMessageType("livekit.DataStream.TextHeader",()=>[{no:1,name:"operation_type",kind:"enum",T:V.getEnumType(Tp)},{no:2,name:"version",kind:"scalar",T:5},{no:3,name:"reply_to_stream_id",kind:"scalar",T:9},{no:4,name:"attached_stream_ids",kind:"scalar",T:9,repeated:!0},{no:5,name:"generated",kind:"scalar",T:8}],{localName:"DataStream_TextHeader"}),Ix=V.makeMessageType("livekit.DataStream.ByteHeader",()=>[{no:1,name:"name",kind:"scalar",T:9}],{localName:"DataStream_ByteHeader"}),Ru=V.makeMessageType("livekit.DataStream.Header",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"timestamp",kind:"scalar",T:3},{no:3,name:"topic",kind:"scalar",T:9},{no:4,name:"mime_type",kind:"scalar",T:9},{no:5,name:"total_length",kind:"scalar",T:4,opt:!0},{no:7,name:"encryption_type",kind:"enum",T:V.getEnumType(Rt)},{no:8,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:9,name:"text_header",kind:"message",T:_x,oneof:"content_header"},{no:10,name:"byte_header",kind:"message",T:Ix,oneof:"content_header"}],{localName:"DataStream_Header"}),_u=V.makeMessageType("livekit.DataStream.Chunk",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"chunk_index",kind:"scalar",T:4},{no:3,name:"content",kind:"scalar",T:12},{no:4,name:"version",kind:"scalar",T:5},{no:5,name:"iv",kind:"scalar",T:12,opt:!0}],{localName:"DataStream_Chunk"}),Iu=V.makeMessageType("livekit.DataStream.Trailer",()=>[{no:1,name:"stream_id",kind:"scalar",T:9},{no:2,name:"reason",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}}],{localName:"DataStream_Trailer"}),g3=V.makeMessageType("livekit.SubscribedAudioCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"enabled",kind:"scalar",T:8}]),ni=V.makeEnum("livekit.SignalTarget",[{no:0,name:"PUBLISHER"},{no:1,name:"SUBSCRIBER"}]),wp=V.makeEnum("livekit.StreamState",[{no:0,name:"ACTIVE"},{no:1,name:"PAUSED"}]),v3=V.makeEnum("livekit.CandidateProtocol",[{no:0,name:"UDP"},{no:1,name:"TCP"},{no:2,name:"TLS"}]),y3=V.makeMessageType("livekit.SignalRequest",()=>[{no:1,name:"offer",kind:"message",T:qr,oneof:"message"},{no:2,name:"answer",kind:"message",T:qr,oneof:"message"},{no:3,name:"trickle",kind:"message",T:td,oneof:"message"},{no:4,name:"add_track",kind:"message",T:al,oneof:"message"},{no:5,name:"mute",kind:"message",T:nd,oneof:"message"},{no:6,name:"subscription",kind:"message",T:id,oneof:"message"},{no:7,name:"track_setting",kind:"message",T:Ax,oneof:"message"},{no:8,name:"leave",kind:"message",T:rd,oneof:"message"},{no:10,name:"update_layers",kind:"message",T:Nx,oneof:"message"},{no:11,name:"subscription_permission",kind:"message",T:Lx,oneof:"message"},{no:12,name:"sync_state",kind:"message",T:og,oneof:"message"},{no:13,name:"simulate",kind:"message",T:fi,oneof:"message"},{no:14,name:"ping",kind:"scalar",T:3,oneof:"message"},{no:15,name:"update_metadata",kind:"message",T:rg,oneof:"message"},{no:16,name:"ping_req",kind:"message",T:Ux,oneof:"message"},{no:17,name:"update_audio_track",kind:"message",T:ig,oneof:"message"},{no:18,name:"update_video_track",kind:"message",T:Mx,oneof:"message"}]),kS=V.makeMessageType("livekit.SignalResponse",()=>[{no:1,name:"join",kind:"message",T:b3,oneof:"message"},{no:2,name:"answer",kind:"message",T:qr,oneof:"message"},{no:3,name:"offer",kind:"message",T:qr,oneof:"message"},{no:4,name:"trickle",kind:"message",T:td,oneof:"message"},{no:5,name:"update",kind:"message",T:C3,oneof:"message"},{no:6,name:"track_published",kind:"message",T:ng,oneof:"message"},{no:8,name:"leave",kind:"message",T:rd,oneof:"message"},{no:9,name:"mute",kind:"message",T:nd,oneof:"message"},{no:10,name:"speakers_changed",kind:"message",T:T3,oneof:"message"},{no:11,name:"room_update",kind:"message",T:w3,oneof:"message"},{no:12,name:"connection_quality",kind:"message",T:E3,oneof:"message"},{no:13,name:"stream_state_update",kind:"message",T:R3,oneof:"message"},{no:14,name:"subscribed_quality_update",kind:"message",T:I3,oneof:"message"},{no:15,name:"subscription_permission_update",kind:"message",T:M3,oneof:"message"},{no:16,name:"refresh_token",kind:"scalar",T:9,oneof:"message"},{no:17,name:"track_unpublished",kind:"message",T:k3,oneof:"message"},{no:18,name:"pong",kind:"scalar",T:3,oneof:"message"},{no:19,name:"reconnect",kind:"message",T:S3,oneof:"message"},{no:20,name:"pong_resp",kind:"message",T:D3,oneof:"message"},{no:21,name:"subscription_response",kind:"message",T:F3,oneof:"message"},{no:22,name:"request_response",kind:"message",T:j3,oneof:"message"},{no:23,name:"track_subscribed",kind:"message",T:U3,oneof:"message"},{no:24,name:"room_moved",kind:"message",T:N3,oneof:"message"},{no:25,name:"media_sections_requirement",kind:"message",T:W3,oneof:"message"},{no:26,name:"subscribed_audio_codec_update",kind:"message",T:A3,oneof:"message"}]),xp=V.makeMessageType("livekit.SimulcastCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"cid",kind:"scalar",T:9},{no:4,name:"layers",kind:"message",T:Or,repeated:!0},{no:5,name:"video_layer_mode",kind:"enum",T:V.getEnumType(gx)}]),al=V.makeMessageType("livekit.AddTrackRequest",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"type",kind:"enum",T:V.getEnumType(ti)},{no:4,name:"width",kind:"scalar",T:13},{no:5,name:"height",kind:"scalar",T:13},{no:6,name:"muted",kind:"scalar",T:8},{no:7,name:"disable_dtx",kind:"scalar",T:8},{no:8,name:"source",kind:"enum",T:V.getEnumType(St)},{no:9,name:"layers",kind:"message",T:Or,repeated:!0},{no:10,name:"simulcast_codecs",kind:"message",T:xp,repeated:!0},{no:11,name:"sid",kind:"scalar",T:9},{no:12,name:"stereo",kind:"scalar",T:8},{no:13,name:"disable_red",kind:"scalar",T:8},{no:14,name:"encryption",kind:"enum",T:V.getEnumType(Rt)},{no:15,name:"stream",kind:"scalar",T:9},{no:16,name:"backup_codec_policy",kind:"enum",T:V.getEnumType(mx)},{no:17,name:"audio_features",kind:"enum",T:V.getEnumType(Nt),repeated:!0}]),td=V.makeMessageType("livekit.TrickleRequest",()=>[{no:1,name:"candidateInit",kind:"scalar",T:9},{no:2,name:"target",kind:"enum",T:V.getEnumType(ni)},{no:3,name:"final",kind:"scalar",T:8}]),nd=V.makeMessageType("livekit.MuteTrackRequest",()=>[{no:1,name:"sid",kind:"scalar",T:9},{no:2,name:"muted",kind:"scalar",T:8}]),b3=V.makeMessageType("livekit.JoinResponse",()=>[{no:1,name:"room",kind:"message",T:ed},{no:2,name:"participant",kind:"message",T:Ps},{no:3,name:"other_participants",kind:"message",T:Ps,repeated:!0},{no:4,name:"server_version",kind:"scalar",T:9},{no:5,name:"ice_servers",kind:"message",T:Dx,repeated:!0},{no:6,name:"subscriber_primary",kind:"scalar",T:8},{no:7,name:"alternative_url",kind:"scalar",T:9},{no:8,name:"client_configuration",kind:"message",T:Px},{no:9,name:"server_region",kind:"scalar",T:9},{no:10,name:"ping_timeout",kind:"scalar",T:5},{no:11,name:"ping_interval",kind:"scalar",T:5},{no:12,name:"server_info",kind:"message",T:Tx},{no:13,name:"sif_trailer",kind:"scalar",T:12},{no:14,name:"enabled_publish_codecs",kind:"message",T:Eu,repeated:!0},{no:15,name:"fast_publish",kind:"scalar",T:8}]),S3=V.makeMessageType("livekit.ReconnectResponse",()=>[{no:1,name:"ice_servers",kind:"message",T:Dx,repeated:!0},{no:2,name:"client_configuration",kind:"message",T:Px},{no:3,name:"server_info",kind:"message",T:Tx},{no:4,name:"last_message_seq",kind:"scalar",T:13}]),ng=V.makeMessageType("livekit.TrackPublishedResponse",()=>[{no:1,name:"cid",kind:"scalar",T:9},{no:2,name:"track",kind:"message",T:go}]),k3=V.makeMessageType("livekit.TrackUnpublishedResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),qr=V.makeMessageType("livekit.SessionDescription",()=>[{no:1,name:"type",kind:"scalar",T:9},{no:2,name:"sdp",kind:"scalar",T:9},{no:3,name:"id",kind:"scalar",T:13},{no:4,name:"mid_to_track_id",kind:"map",K:9,V:{kind:"scalar",T:9}}]),C3=V.makeMessageType("livekit.ParticipantUpdate",()=>[{no:1,name:"participants",kind:"message",T:Ps,repeated:!0}]),id=V.makeMessageType("livekit.UpdateSubscription",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:2,name:"subscribe",kind:"scalar",T:8},{no:3,name:"participant_tracks",kind:"message",T:Cx,repeated:!0}]),Ax=V.makeMessageType("livekit.UpdateTrackSettings",()=>[{no:1,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:3,name:"disabled",kind:"scalar",T:8},{no:4,name:"quality",kind:"enum",T:V.getEnumType(Jm)},{no:5,name:"width",kind:"scalar",T:13},{no:6,name:"height",kind:"scalar",T:13},{no:7,name:"fps",kind:"scalar",T:13},{no:8,name:"priority",kind:"scalar",T:13}]),ig=V.makeMessageType("livekit.UpdateLocalAudioTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"features",kind:"enum",T:V.getEnumType(Nt),repeated:!0}]),Mx=V.makeMessageType("livekit.UpdateLocalVideoTrack",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"width",kind:"scalar",T:13},{no:3,name:"height",kind:"scalar",T:13}]),rd=V.makeMessageType("livekit.LeaveRequest",()=>[{no:1,name:"can_reconnect",kind:"scalar",T:8},{no:2,name:"reason",kind:"enum",T:V.getEnumType(ii)},{no:3,name:"action",kind:"enum",T:V.getEnumType(To)},{no:4,name:"regions",kind:"message",T:O3}]),To=V.makeEnum("livekit.LeaveRequest.Action",[{no:0,name:"DISCONNECT"},{no:1,name:"RESUME"},{no:2,name:"RECONNECT"}]),Nx=V.makeMessageType("livekit.UpdateVideoLayers",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"layers",kind:"message",T:Or,repeated:!0}]),rg=V.makeMessageType("livekit.UpdateParticipantMetadata",()=>[{no:1,name:"metadata",kind:"scalar",T:9},{no:2,name:"name",kind:"scalar",T:9},{no:3,name:"attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:4,name:"request_id",kind:"scalar",T:13}]),Dx=V.makeMessageType("livekit.ICEServer",()=>[{no:1,name:"urls",kind:"scalar",T:9,repeated:!0},{no:2,name:"username",kind:"scalar",T:9},{no:3,name:"credential",kind:"scalar",T:9}]),T3=V.makeMessageType("livekit.SpeakersChanged",()=>[{no:1,name:"speakers",kind:"message",T:bx,repeated:!0}]),w3=V.makeMessageType("livekit.RoomUpdate",()=>[{no:1,name:"room",kind:"message",T:ed}]),x3=V.makeMessageType("livekit.ConnectionQualityInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"quality",kind:"enum",T:V.getEnumType(ja)},{no:3,name:"score",kind:"scalar",T:2}]),E3=V.makeMessageType("livekit.ConnectionQualityUpdate",()=>[{no:1,name:"updates",kind:"message",T:x3,repeated:!0}]),P3=V.makeMessageType("livekit.StreamStateInfo",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"state",kind:"enum",T:V.getEnumType(wp)}]),R3=V.makeMessageType("livekit.StreamStateUpdate",()=>[{no:1,name:"stream_states",kind:"message",T:P3,repeated:!0}]),sg=V.makeMessageType("livekit.SubscribedQuality",()=>[{no:1,name:"quality",kind:"enum",T:V.getEnumType(Jm)},{no:2,name:"enabled",kind:"scalar",T:8}]),_3=V.makeMessageType("livekit.SubscribedCodec",()=>[{no:1,name:"codec",kind:"scalar",T:9},{no:2,name:"qualities",kind:"message",T:sg,repeated:!0}]),I3=V.makeMessageType("livekit.SubscribedQualityUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_qualities",kind:"message",T:sg,repeated:!0},{no:3,name:"subscribed_codecs",kind:"message",T:_3,repeated:!0}]),A3=V.makeMessageType("livekit.SubscribedAudioCodecUpdate",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"subscribed_audio_codecs",kind:"message",T:g3,repeated:!0}]),Ox=V.makeMessageType("livekit.TrackPermission",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"all_tracks",kind:"scalar",T:8},{no:3,name:"track_sids",kind:"scalar",T:9,repeated:!0},{no:4,name:"participant_identity",kind:"scalar",T:9}]),Lx=V.makeMessageType("livekit.SubscriptionPermission",()=>[{no:1,name:"all_participants",kind:"scalar",T:8},{no:2,name:"track_permissions",kind:"message",T:Ox,repeated:!0}]),M3=V.makeMessageType("livekit.SubscriptionPermissionUpdate",()=>[{no:1,name:"participant_sid",kind:"scalar",T:9},{no:2,name:"track_sid",kind:"scalar",T:9},{no:3,name:"allowed",kind:"scalar",T:8}]),N3=V.makeMessageType("livekit.RoomMovedResponse",()=>[{no:1,name:"room",kind:"message",T:ed},{no:2,name:"token",kind:"scalar",T:9},{no:3,name:"participant",kind:"message",T:Ps},{no:4,name:"other_participants",kind:"message",T:Ps,repeated:!0}]),og=V.makeMessageType("livekit.SyncState",()=>[{no:1,name:"answer",kind:"message",T:qr},{no:2,name:"subscription",kind:"message",T:id},{no:3,name:"publish_tracks",kind:"message",T:ng,repeated:!0},{no:4,name:"data_channels",kind:"message",T:jx,repeated:!0},{no:5,name:"offer",kind:"message",T:qr},{no:6,name:"track_sids_disabled",kind:"scalar",T:9,repeated:!0},{no:7,name:"datachannel_receive_states",kind:"message",T:Fx,repeated:!0}]),Fx=V.makeMessageType("livekit.DataChannelReceiveState",()=>[{no:1,name:"publisher_sid",kind:"scalar",T:9},{no:2,name:"last_seq",kind:"scalar",T:13}]),jx=V.makeMessageType("livekit.DataChannelInfo",()=>[{no:1,name:"label",kind:"scalar",T:9},{no:2,name:"id",kind:"scalar",T:13},{no:3,name:"target",kind:"enum",T:V.getEnumType(ni)}]),fi=V.makeMessageType("livekit.SimulateScenario",()=>[{no:1,name:"speaker_update",kind:"scalar",T:5,oneof:"scenario"},{no:2,name:"node_failure",kind:"scalar",T:8,oneof:"scenario"},{no:3,name:"migration",kind:"scalar",T:8,oneof:"scenario"},{no:4,name:"server_leave",kind:"scalar",T:8,oneof:"scenario"},{no:5,name:"switch_candidate_protocol",kind:"enum",T:V.getEnumType(v3),oneof:"scenario"},{no:6,name:"subscriber_bandwidth",kind:"scalar",T:3,oneof:"scenario"},{no:7,name:"disconnect_signal_on_resume",kind:"scalar",T:8,oneof:"scenario"},{no:8,name:"disconnect_signal_on_resume_no_messages",kind:"scalar",T:8,oneof:"scenario"},{no:9,name:"leave_request_full_reconnect",kind:"scalar",T:8,oneof:"scenario"}]),Ux=V.makeMessageType("livekit.Ping",()=>[{no:1,name:"timestamp",kind:"scalar",T:3},{no:2,name:"rtt",kind:"scalar",T:3}]),D3=V.makeMessageType("livekit.Pong",()=>[{no:1,name:"last_ping_timestamp",kind:"scalar",T:3},{no:2,name:"timestamp",kind:"scalar",T:3}]),O3=V.makeMessageType("livekit.RegionSettings",()=>[{no:1,name:"regions",kind:"message",T:L3,repeated:!0}]),L3=V.makeMessageType("livekit.RegionInfo",()=>[{no:1,name:"region",kind:"scalar",T:9},{no:2,name:"url",kind:"scalar",T:9},{no:3,name:"distance",kind:"scalar",T:3}]),F3=V.makeMessageType("livekit.SubscriptionResponse",()=>[{no:1,name:"track_sid",kind:"scalar",T:9},{no:2,name:"err",kind:"enum",T:V.getEnumType(l3)}]),j3=V.makeMessageType("livekit.RequestResponse",()=>[{no:1,name:"request_id",kind:"scalar",T:13},{no:2,name:"reason",kind:"enum",T:V.getEnumType(ag)},{no:3,name:"message",kind:"scalar",T:9},{no:4,name:"trickle",kind:"message",T:td,oneof:"request"},{no:5,name:"add_track",kind:"message",T:al,oneof:"request"},{no:6,name:"mute",kind:"message",T:nd,oneof:"request"},{no:7,name:"update_metadata",kind:"message",T:rg,oneof:"request"},{no:8,name:"update_audio_track",kind:"message",T:ig,oneof:"request"},{no:9,name:"update_video_track",kind:"message",T:Mx,oneof:"request"}]),ag=V.makeEnum("livekit.RequestResponse.Reason",[{no:0,name:"OK"},{no:1,name:"NOT_FOUND"},{no:2,name:"NOT_ALLOWED"},{no:3,name:"LIMIT_EXCEEDED"},{no:4,name:"QUEUED"},{no:5,name:"UNSUPPORTED_TYPE"},{no:6,name:"UNCLASSIFIED_ERROR"}]),U3=V.makeMessageType("livekit.TrackSubscribed",()=>[{no:1,name:"track_sid",kind:"scalar",T:9}]),Bx=V.makeMessageType("livekit.ConnectionSettings",()=>[{no:1,name:"auto_subscribe",kind:"scalar",T:8},{no:2,name:"adaptive_stream",kind:"scalar",T:8},{no:3,name:"subscriber_allow_pause",kind:"scalar",T:8,opt:!0},{no:4,name:"disable_ice_lite",kind:"scalar",T:8}]),B3=V.makeMessageType("livekit.JoinRequest",()=>[{no:1,name:"client_info",kind:"message",T:xx},{no:2,name:"connection_settings",kind:"message",T:Bx},{no:3,name:"metadata",kind:"scalar",T:9},{no:4,name:"participant_attributes",kind:"map",K:9,V:{kind:"scalar",T:9}},{no:5,name:"add_track_requests",kind:"message",T:al,repeated:!0},{no:6,name:"publisher_offer",kind:"message",T:qr},{no:7,name:"reconnect",kind:"scalar",T:8},{no:8,name:"reconnect_reason",kind:"enum",T:V.getEnumType(gs)},{no:9,name:"participant_sid",kind:"scalar",T:9},{no:10,name:"sync_state",kind:"message",T:og}]),V3=V.makeMessageType("livekit.WrappedJoinRequest",()=>[{no:1,name:"compression",kind:"enum",T:V.getEnumType(z3)},{no:2,name:"join_request",kind:"scalar",T:12}]),z3=V.makeEnum("livekit.WrappedJoinRequest.Compression",[{no:0,name:"NONE"},{no:1,name:"GZIP"}]),W3=V.makeMessageType("livekit.MediaSectionsRequirement",()=>[{no:1,name:"num_audios",kind:"scalar",T:13},{no:2,name:"num_videos",kind:"scalar",T:13}]);function q3(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var su={exports:{}},H3=su.exports,CS;function $3(){return CS||(CS=1,(function(t){(function(e,n){t.exports?t.exports=n():e.log=n()})(H3,function(){var e=function(){},n="undefined",i=typeof window!==n&&typeof window.navigator!==n&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],o={},l=null;function c(b,C){var T=b[C];if(typeof T.bind=="function")return T.bind(b);try{return Function.prototype.bind.call(T,b)}catch{return function(){return Function.prototype.apply.apply(T,[b,arguments])}}}function d(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function h(b){return b==="debug"&&(b="log"),typeof console===n?!1:b==="trace"&&i?d:console[b]!==void 0?c(console,b):console.log!==void 0?c(console,"log"):e}function f(){for(var b=this.getLevel(),C=0;C<r.length;C++){var T=r[C];this[T]=C<b?e:this.methodFactory(T,b,this.name)}if(this.log=this.debug,typeof console===n&&b<this.levels.SILENT)return"No console available for logging"}function m(b){return function(){typeof console!==n&&(f.call(this),this[b].apply(this,arguments))}}function v(b,C,T){return h(b)||m.apply(this,arguments)}function S(b,C){var T=this,_,R,P,I="loglevel";typeof b=="string"?I+=":"+b:typeof b=="symbol"&&(I=void 0);function D(G){var ce=(r[G]||"silent").toUpperCase();if(!(typeof window===n||!I)){try{window.localStorage[I]=ce;return}catch{}try{window.document.cookie=encodeURIComponent(I)+"="+ce+";"}catch{}}}function O(){var G;if(!(typeof window===n||!I)){try{G=window.localStorage[I]}catch{}if(typeof G===n)try{var ce=window.document.cookie,pe=encodeURIComponent(I),me=ce.indexOf(pe+"=");me!==-1&&(G=/^([^;]+)/.exec(ce.slice(me+pe.length+1))[1])}catch{}return T.levels[G]===void 0&&(G=void 0),G}}function N(){if(!(typeof window===n||!I)){try{window.localStorage.removeItem(I)}catch{}try{window.document.cookie=encodeURIComponent(I)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch{}}}function q(G){var ce=G;if(typeof ce=="string"&&T.levels[ce.toUpperCase()]!==void 0&&(ce=T.levels[ce.toUpperCase()]),typeof ce=="number"&&ce>=0&&ce<=T.levels.SILENT)return ce;throw new TypeError("log.setLevel() called with invalid level: "+G)}T.name=b,T.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},T.methodFactory=C||v,T.getLevel=function(){return P??R??_},T.setLevel=function(G,ce){return P=q(G),ce!==!1&&D(P),f.call(T)},T.setDefaultLevel=function(G){R=q(G),O()||T.setLevel(G,!1)},T.resetLevel=function(){P=null,N(),f.call(T)},T.enableAll=function(G){T.setLevel(T.levels.TRACE,G)},T.disableAll=function(G){T.setLevel(T.levels.SILENT,G)},T.rebuild=function(){if(l!==T&&(_=q(l.getLevel())),f.call(T),l===T)for(var G in o)o[G].rebuild()},_=q(l?l.getLevel():"WARN");var H=O();H!=null&&(P=q(H)),f.call(T)}l=new S,l.getLogger=function(C){if(typeof C!="symbol"&&typeof C!="string"||C==="")throw new TypeError("You must supply a name when creating a logger.");var T=o[C];return T||(T=o[C]=new S(C,l.methodFactory)),T};var k=typeof window!==n?window.log:void 0;return l.noConflict=function(){return typeof window!==n&&window.log===l&&(window.log=k),l},l.getLoggers=function(){return o},l.default=l,l})})(su)),su.exports}var sd=$3(),Ep;(function(t){t[t.trace=0]="trace",t[t.debug=1]="debug",t[t.info=2]="info",t[t.warn=3]="warn",t[t.error=4]="error",t[t.silent=5]="silent"})(Ep||(Ep={}));var oi;(function(t){t.Default="livekit",t.Room="livekit-room",t.TokenSource="livekit-token-source",t.Participant="livekit-participant",t.Track="livekit-track",t.Publication="livekit-track-publication",t.Engine="livekit-engine",t.Signal="livekit-signal",t.PCManager="livekit-pc-manager",t.PCTransport="livekit-pc-transport",t.E2EE="lk-e2ee"})(oi||(oi={}));let Oe=sd.getLogger("livekit");Object.values(oi).map(t=>sd.getLogger(t));Oe.setDefaultLevel(Ep.info);function Ji(t){const e=sd.getLogger(t);return e.setDefaultLevel(Oe.getLevel()),e}const K3=sd.getLogger("lk-e2ee"),Aa=7e3,G3=[0,300,4*300,9*300,16*300,Aa,Aa,Aa,Aa,Aa];class X3{constructor(e){this._retryDelays=e!==void 0?[...e]:G3}nextRetryDelayInMs(e){if(e.retryCount>=this._retryDelays.length)return null;const n=this._retryDelays[e.retryCount];return e.retryCount<=1?n:n+Math.random()*1e3}}function Y3(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]]);return n}function M(t,e,n,i){function r(o){return o instanceof n?o:new n(function(l){l(o)})}return new(n||(n=Promise))(function(o,l){function c(f){try{h(i.next(f))}catch(m){l(m)}}function d(f){try{h(i.throw(f))}catch(m){l(m)}}function h(f){f.done?o(f.value):r(f.value).then(c,d)}h((i=i.apply(t,e||[])).next())})}function TS(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function qi(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof TS=="function"?TS(t):t[Symbol.iterator](),n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n);function i(o){n[o]=t[o]&&function(l){return new Promise(function(c,d){l=t[o](l),r(c,d,l.done,l.value)})}}function r(o,l,c,d){Promise.resolve(d).then(function(h){o({value:h,done:c})},l)}}var Hc={exports:{}},wS;function J3(){if(wS)return Hc.exports;wS=1;var t=typeof Reflect=="object"?Reflect:null,e=t&&typeof t.apply=="function"?t.apply:function(I,D,O){return Function.prototype.apply.call(I,D,O)},n;t&&typeof t.ownKeys=="function"?n=t.ownKeys:Object.getOwnPropertySymbols?n=function(I){return Object.getOwnPropertyNames(I).concat(Object.getOwnPropertySymbols(I))}:n=function(I){return Object.getOwnPropertyNames(I)};function i(P){console&&console.warn&&console.warn(P)}var r=Number.isNaN||function(I){return I!==I};function o(){o.init.call(this)}Hc.exports=o,Hc.exports.once=T,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var l=10;function c(P){if(typeof P!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof P)}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(P){if(typeof P!="number"||P<0||r(P))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+P+".");l=P}}),o.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(I){if(typeof I!="number"||I<0||r(I))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+I+".");return this._maxListeners=I,this};function d(P){return P._maxListeners===void 0?o.defaultMaxListeners:P._maxListeners}o.prototype.getMaxListeners=function(){return d(this)},o.prototype.emit=function(I){for(var D=[],O=1;O<arguments.length;O++)D.push(arguments[O]);var N=I==="error",q=this._events;if(q!==void 0)N=N&&q.error===void 0;else if(!N)return!1;if(N){var H;if(D.length>0&&(H=D[0]),H instanceof Error)throw H;var G=new Error("Unhandled error."+(H?" ("+H.message+")":""));throw G.context=H,G}var ce=q[I];if(ce===void 0)return!1;if(typeof ce=="function")e(ce,this,D);else for(var pe=ce.length,me=k(ce,pe),O=0;O<pe;++O)e(me[O],this,D);return!0};function h(P,I,D,O){var N,q,H;if(c(D),q=P._events,q===void 0?(q=P._events=Object.create(null),P._eventsCount=0):(q.newListener!==void 0&&(P.emit("newListener",I,D.listener?D.listener:D),q=P._events),H=q[I]),H===void 0)H=q[I]=D,++P._eventsCount;else if(typeof H=="function"?H=q[I]=O?[D,H]:[H,D]:O?H.unshift(D):H.push(D),N=d(P),N>0&&H.length>N&&!H.warned){H.warned=!0;var G=new Error("Possible EventEmitter memory leak detected. "+H.length+" "+String(I)+" listeners added. Use emitter.setMaxListeners() to increase limit");G.name="MaxListenersExceededWarning",G.emitter=P,G.type=I,G.count=H.length,i(G)}return P}o.prototype.addListener=function(I,D){return h(this,I,D,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(I,D){return h(this,I,D,!0)};function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function m(P,I,D){var O={fired:!1,wrapFn:void 0,target:P,type:I,listener:D},N=f.bind(O);return N.listener=D,O.wrapFn=N,N}o.prototype.once=function(I,D){return c(D),this.on(I,m(this,I,D)),this},o.prototype.prependOnceListener=function(I,D){return c(D),this.prependListener(I,m(this,I,D)),this},o.prototype.removeListener=function(I,D){var O,N,q,H,G;if(c(D),N=this._events,N===void 0)return this;if(O=N[I],O===void 0)return this;if(O===D||O.listener===D)--this._eventsCount===0?this._events=Object.create(null):(delete N[I],N.removeListener&&this.emit("removeListener",I,O.listener||D));else if(typeof O!="function"){for(q=-1,H=O.length-1;H>=0;H--)if(O[H]===D||O[H].listener===D){G=O[H].listener,q=H;break}if(q<0)return this;q===0?O.shift():b(O,q),O.length===1&&(N[I]=O[0]),N.removeListener!==void 0&&this.emit("removeListener",I,G||D)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(I){var D,O,N;if(O=this._events,O===void 0)return this;if(O.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):O[I]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete O[I]),this;if(arguments.length===0){var q=Object.keys(O),H;for(N=0;N<q.length;++N)H=q[N],H!=="removeListener"&&this.removeAllListeners(H);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(D=O[I],typeof D=="function")this.removeListener(I,D);else if(D!==void 0)for(N=D.length-1;N>=0;N--)this.removeListener(I,D[N]);return this};function v(P,I,D){var O=P._events;if(O===void 0)return[];var N=O[I];return N===void 0?[]:typeof N=="function"?D?[N.listener||N]:[N]:D?C(N):k(N,N.length)}o.prototype.listeners=function(I){return v(this,I,!0)},o.prototype.rawListeners=function(I){return v(this,I,!1)},o.listenerCount=function(P,I){return typeof P.listenerCount=="function"?P.listenerCount(I):S.call(P,I)},o.prototype.listenerCount=S;function S(P){var I=this._events;if(I!==void 0){var D=I[P];if(typeof D=="function")return 1;if(D!==void 0)return D.length}return 0}o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]};function k(P,I){for(var D=new Array(I),O=0;O<I;++O)D[O]=P[O];return D}function b(P,I){for(;I+1<P.length;I++)P[I]=P[I+1];P.pop()}function C(P){for(var I=new Array(P.length),D=0;D<I.length;++D)I[D]=P[D].listener||P[D];return I}function T(P,I){return new Promise(function(D,O){function N(H){P.removeListener(I,q),O(H)}function q(){typeof P.removeListener=="function"&&P.removeListener("error",N),D([].slice.call(arguments))}R(P,I,q,{once:!0}),I!=="error"&&_(P,N,{once:!0})})}function _(P,I,D){typeof P.on=="function"&&R(P,"error",I,D)}function R(P,I,D,O){if(typeof P.on=="function")O.once?P.once(I,D):P.on(I,D);else if(typeof P.addEventListener=="function")P.addEventListener(I,function N(q){O.once&&P.removeEventListener(I,N),D(q)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof P)}return Hc.exports}var Ei=J3();let Vx=!0,zx=!0;function Ua(t,e,n){const i=t.match(e);return i&&i.length>=n&&parseFloat(i[n],10)}function As(t,e,n){if(!t.RTCPeerConnection)return;const i=t.RTCPeerConnection.prototype,r=i.addEventListener;i.addEventListener=function(l,c){if(l!==e)return r.apply(this,arguments);const d=h=>{const f=n(h);f&&(c.handleEvent?c.handleEvent(f):c(f))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(c,d),r.apply(this,[l,d])};const o=i.removeEventListener;i.removeEventListener=function(l,c){if(l!==e||!this._eventMap||!this._eventMap[e])return o.apply(this,arguments);if(!this._eventMap[e].has(c))return o.apply(this,arguments);const d=this._eventMap[e].get(c);return this._eventMap[e].delete(c),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[l,d])},Object.defineProperty(i,"on"+e,{get(){return this["_on"+e]},set(l){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),l&&this.addEventListener(e,this["_on"+e]=l)},enumerable:!0,configurable:!0})}function Q3(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(Vx=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function Z3(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(zx=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function Wx(){if(typeof window=="object"){if(Vx)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function lg(t,e){zx&&console.warn(t+" is deprecated, please use "+e+" instead.")}function eU(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator||!t.navigator.userAgent)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.userAgentData&&n.userAgentData.brands){const i=n.userAgentData.brands.find(r=>r.brand==="Chromium");if(i)return{browser:"chrome",version:parseInt(i.version,10)}}if(n.mozGetUserMedia)e.browser="firefox",e.version=parseInt(Ua(n.userAgent,/Firefox\/(\d+)\./,1));else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection)e.browser="chrome",e.version=parseInt(Ua(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2));else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=parseInt(Ua(n.userAgent,/AppleWebKit\/(\d+)\./,1)),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype,e._safariVersion=Ua(n.userAgent,/Version\/(\d+(\.?\d+))/,1);else return e.browser="Not a supported browser.",e;return e}function xS(t){return Object.prototype.toString.call(t)==="[object Object]"}function qx(t){return xS(t)?Object.keys(t).reduce(function(e,n){const i=xS(t[n]),r=i?qx(t[n]):t[n],o=i&&!Object.keys(r).length;return r===void 0||o?e:Object.assign(e,{[n]:r})},{}):t}function Pp(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(i=>{i.endsWith("Id")?Pp(t,t.get(e[i]),n):i.endsWith("Ids")&&e[i].forEach(r=>{Pp(t,t.get(r),n)})}))}function ES(t,e,n){const i=n?"outbound-rtp":"inbound-rtp",r=new Map;if(e===null)return r;const o=[];return t.forEach(l=>{l.type==="track"&&l.trackIdentifier===e.id&&o.push(l)}),o.forEach(l=>{t.forEach(c=>{c.type===i&&c.trackId===l.id&&Pp(t,c,r)})}),r}const PS=Wx;function Hx(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const i=function(c){if(typeof c!="object"||c.mandatory||c.optional)return c;const d={};return Object.keys(c).forEach(h=>{if(h==="require"||h==="advanced"||h==="mediaSource")return;const f=typeof c[h]=="object"?c[h]:{ideal:c[h]};f.exact!==void 0&&typeof f.exact=="number"&&(f.min=f.max=f.exact);const m=function(v,S){return v?v+S.charAt(0).toUpperCase()+S.slice(1):S==="deviceId"?"sourceId":S};if(f.ideal!==void 0){d.optional=d.optional||[];let v={};typeof f.ideal=="number"?(v[m("min",h)]=f.ideal,d.optional.push(v),v={},v[m("max",h)]=f.ideal,d.optional.push(v)):(v[m("",h)]=f.ideal,d.optional.push(v))}f.exact!==void 0&&typeof f.exact!="number"?(d.mandatory=d.mandatory||{},d.mandatory[m("",h)]=f.exact):["min","max"].forEach(v=>{f[v]!==void 0&&(d.mandatory=d.mandatory||{},d.mandatory[m(v,h)]=f[v])})}),c.advanced&&(d.optional=(d.optional||[]).concat(c.advanced)),d},r=function(c,d){if(e.version>=61)return d(c);if(c=JSON.parse(JSON.stringify(c)),c&&typeof c.audio=="object"){const h=function(f,m,v){m in f&&!(v in f)&&(f[v]=f[m],delete f[m])};c=JSON.parse(JSON.stringify(c)),h(c.audio,"autoGainControl","googAutoGainControl"),h(c.audio,"noiseSuppression","googNoiseSuppression"),c.audio=i(c.audio)}if(c&&typeof c.video=="object"){let h=c.video.facingMode;h=h&&(typeof h=="object"?h:{ideal:h});const f=e.version<66;if(h&&(h.exact==="user"||h.exact==="environment"||h.ideal==="user"||h.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!f)){delete c.video.facingMode;let m;if(h.exact==="environment"||h.ideal==="environment"?m=["back","rear"]:(h.exact==="user"||h.ideal==="user")&&(m=["front"]),m)return n.mediaDevices.enumerateDevices().then(v=>{v=v.filter(k=>k.kind==="videoinput");let S=v.find(k=>m.some(b=>k.label.toLowerCase().includes(b)));return!S&&v.length&&m.includes("back")&&(S=v[v.length-1]),S&&(c.video.deviceId=h.exact?{exact:S.deviceId}:{ideal:S.deviceId}),c.video=i(c.video),PS("chrome: "+JSON.stringify(c)),d(c)})}c.video=i(c.video)}return PS("chrome: "+JSON.stringify(c)),d(c)},o=function(c){return e.version>=64?c:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[c.name]||c.name,message:c.message,constraint:c.constraint||c.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},l=function(c,d,h){r(c,f=>{n.webkitGetUserMedia(f,d,m=>{h&&h(o(m))})})};if(n.getUserMedia=l.bind(n),n.mediaDevices.getUserMedia){const c=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(d){return r(d,h=>c(h).then(f=>{if(h.audio&&!f.getAudioTracks().length||h.video&&!f.getVideoTracks().length)throw f.getTracks().forEach(m=>{m.stop()}),new DOMException("","NotFoundError");return f},f=>Promise.reject(o(f))))}}}function $x(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function Kx(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=i=>{i.stream.addEventListener("addtrack",r=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(c=>c.track&&c.track.id===r.track.id):o={track:r.track};const l=new Event("track");l.track=r.track,l.receiver=o,l.transceiver={receiver:o},l.streams=[i.stream],this.dispatchEvent(l)}),i.stream.getTracks().forEach(r=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(c=>c.track&&c.track.id===r.id):o={track:r};const l=new Event("track");l.track=r,l.receiver=o,l.transceiver={receiver:o},l.streams=[i.stream],this.dispatchEvent(l)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else As(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function Gx(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(r,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=r.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:r}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const r=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(c,d){let h=r.apply(this,arguments);return h||(h=e(this,c),this._senders.push(h)),h};const o=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(c){o.apply(this,arguments);const d=this._senders.indexOf(c);d!==-1&&this._senders.splice(d,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(l=>{this._senders.push(e(this,l))})};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],i.apply(this,[o]),o.getTracks().forEach(l=>{const c=this._senders.find(d=>d.track===l);c&&this._senders.splice(this._senders.indexOf(c),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(r=>r._pc=this),i},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function Xx(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const o=n.apply(this,[]);return o.forEach(l=>l._pc=this),o});const i=t.RTCPeerConnection.prototype.addTrack;i&&(t.RTCPeerConnection.prototype.addTrack=function(){const o=i.apply(this,arguments);return o._pc=this,o}),t.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(l=>ES(l,o.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=n.apply(this,[]);return r.forEach(o=>o._pc=this),r}),As(t,"track",i=>(i.receiver._pc=i.srcElement,i)),t.RTCRtpReceiver.prototype.getStats=function(){const r=this;return this._pc.getStats().then(o=>ES(o,r.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const i=arguments[0];let r,o,l;return this.getSenders().forEach(c=>{c.track===i&&(r?l=!0:r=c)}),this.getReceivers().forEach(c=>(c.track===i&&(o?l=!0:o=c),c.track===i)),l||r&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):r?r.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function Yx(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(l=>this._shimmedLocalStreams[l][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(l,c){if(!c)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const d=e.apply(this,arguments);return this._shimmedLocalStreams[c.id]?this._shimmedLocalStreams[c.id].indexOf(d)===-1&&this._shimmedLocalStreams[c.id].push(d):this._shimmedLocalStreams[c.id]=[c,d],d};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(l){this._shimmedLocalStreams=this._shimmedLocalStreams||{},l.getTracks().forEach(h=>{if(this.getSenders().find(m=>m.track===h))throw new DOMException("Track already exists.","InvalidAccessError")});const c=this.getSenders();n.apply(this,arguments);const d=this.getSenders().filter(h=>c.indexOf(h)===-1);this._shimmedLocalStreams[l.id]=[l].concat(d)};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[l.id],i.apply(this,arguments)};const r=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(l){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},l&&Object.keys(this._shimmedLocalStreams).forEach(c=>{const d=this._shimmedLocalStreams[c].indexOf(l);d!==-1&&this._shimmedLocalStreams[c].splice(d,1),this._shimmedLocalStreams[c].length===1&&delete this._shimmedLocalStreams[c]}),r.apply(this,arguments)}}function Jx(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return Yx(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const f=n.apply(this);return this._reverseStreams=this._reverseStreams||{},f.map(m=>this._reverseStreams[m.id])};const i=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(f){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},f.getTracks().forEach(m=>{if(this.getSenders().find(S=>S.track===m))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[f.id]){const m=new t.MediaStream(f.getTracks());this._streams[f.id]=m,this._reverseStreams[m.id]=f,f=m}i.apply(this,[f])};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(f){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},r.apply(this,[this._streams[f.id]||f]),delete this._reverseStreams[this._streams[f.id]?this._streams[f.id].id:f.id],delete this._streams[f.id]},t.RTCPeerConnection.prototype.addTrack=function(f,m){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const v=[].slice.call(arguments,1);if(v.length!==1||!v[0].getTracks().find(b=>b===f))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(b=>b.track===f))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const k=this._streams[m.id];if(k)k.addTrack(f),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const b=new t.MediaStream([f]);this._streams[m.id]=b,this._reverseStreams[b.id]=m,this.addStream(b)}return this.getSenders().find(b=>b.track===f)};function o(h,f){let m=f.sdp;return Object.keys(h._reverseStreams||[]).forEach(v=>{const S=h._reverseStreams[v],k=h._streams[S.id];m=m.replace(new RegExp(k.id,"g"),S.id)}),new RTCSessionDescription({type:f.type,sdp:m})}function l(h,f){let m=f.sdp;return Object.keys(h._reverseStreams||[]).forEach(v=>{const S=h._reverseStreams[v],k=h._streams[S.id];m=m.replace(new RegExp(S.id,"g"),k.id)}),new RTCSessionDescription({type:f.type,sdp:m})}["createOffer","createAnswer"].forEach(function(h){const f=t.RTCPeerConnection.prototype[h],m={[h](){const v=arguments;return arguments.length&&typeof arguments[0]=="function"?f.apply(this,[k=>{const b=o(this,k);v[0].apply(null,[b])},k=>{v[1]&&v[1].apply(null,k)},arguments[2]]):f.apply(this,arguments).then(k=>o(this,k))}};t.RTCPeerConnection.prototype[h]=m[h]});const c=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?c.apply(this,arguments):(arguments[0]=l(this,arguments[0]),c.apply(this,arguments))};const d=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const h=d.get.apply(this);return h.type===""?h:o(this,h)}}),t.RTCPeerConnection.prototype.removeTrack=function(f){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!f._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(f._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let v;Object.keys(this._streams).forEach(S=>{this._streams[S].getTracks().find(b=>f.track===b)&&(v=this._streams[S])}),v&&(v.getTracks().length===1?this.removeStream(this._reverseStreams[v.id]):v.removeTrack(f.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Rp(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const i=t.RTCPeerConnection.prototype[n],r={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),i.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=r[n]})}function Qx(t,e){As(t,"negotiationneeded",n=>{const i=n.target;if(!((e.version<72||i.getConfiguration&&i.getConfiguration().sdpSemantics==="plan-b")&&i.signalingState!=="stable"))return n})}var RS=Object.freeze({__proto__:null,fixNegotiationNeeded:Qx,shimAddTrackRemoveTrack:Jx,shimAddTrackRemoveTrackWithNative:Yx,shimGetSendersWithDtmf:Gx,shimGetUserMedia:Hx,shimMediaStream:$x,shimOnTrack:Kx,shimPeerConnection:Rp,shimSenderReceiverGetStats:Xx});function Zx(t,e){const n=t&&t.navigator,i=t&&t.MediaStreamTrack;if(n.getUserMedia=function(r,o,l){lg("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(r).then(o,l)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const r=function(l,c,d){c in l&&!(d in l)&&(l[d]=l[c],delete l[c])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(l){return typeof l=="object"&&typeof l.audio=="object"&&(l=JSON.parse(JSON.stringify(l)),r(l.audio,"autoGainControl","mozAutoGainControl"),r(l.audio,"noiseSuppression","mozNoiseSuppression")),o(l)},i&&i.prototype.getSettings){const l=i.prototype.getSettings;i.prototype.getSettings=function(){const c=l.apply(this,arguments);return r(c,"mozAutoGainControl","autoGainControl"),r(c,"mozNoiseSuppression","noiseSuppression"),c}}if(i&&i.prototype.applyConstraints){const l=i.prototype.applyConstraints;i.prototype.applyConstraints=function(c){return this.kind==="audio"&&typeof c=="object"&&(c=JSON.parse(JSON.stringify(c)),r(c,"autoGainControl","mozAutoGainControl"),r(c,"noiseSuppression","mozNoiseSuppression")),l.apply(this,[c])}}}}function tU(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(i){if(!(i&&i.video)){const r=new DOMException("getDisplayMedia without video constraints is undefined");return r.name="NotFoundError",r.code=8,Promise.reject(r)}return i.video===!0?i.video={mediaSource:e}:i.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(i)})}function eE(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function _p(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(r){const o=t.RTCPeerConnection.prototype[r],l={[r](){return arguments[0]=new(r==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};t.RTCPeerConnection.prototype[r]=l[r]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},i=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[o,l,c]=arguments;return i.apply(this,[o||null]).then(d=>{if(e.version<53&&!l)try{d.forEach(h=>{h.type=n[h.type]||h.type})}catch(h){if(h.name!=="TypeError")throw h;d.forEach((f,m)=>{d.set(m,Object.assign({},f,{type:n[f.type]||f.type}))})}return d}).then(l,c)}}function tE(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(o=>o._pc=this),r});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const r=n.apply(this,arguments);return r._pc=this,r}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function nE(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=e.apply(this,[]);return i.forEach(r=>r._pc=this),i}),As(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function iE(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){lg("removeStream","removeTrack"),this.getSenders().forEach(i=>{i.track&&n.getTracks().includes(i.track)&&this.removeTrack(i)})})}function rE(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function sE(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];let i=arguments[1]&&arguments[1].sendEncodings;i===void 0&&(i=[]),i=[...i];const r=i.length>0;r&&i.forEach(l=>{if("rid"in l&&!/^[a-z0-9]{0,16}$/i.test(l.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in l&&!(parseFloat(l.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in l&&!(parseFloat(l.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=e.apply(this,arguments);if(r){const{sender:l}=o,c=l.getParameters();(!("encodings"in c)||c.encodings.length===1&&Object.keys(c.encodings[0]).length===0)&&(c.encodings=i,l.sendEncodings=i,this.setParametersPromises.push(l.setParameters(c).then(()=>{delete l.sendEncodings}).catch(()=>{delete l.sendEncodings})))}return o})}function oE(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const i=e.apply(this,arguments);return"encodings"in i||(i.encodings=[].concat(this.sendEncodings||[{}])),i})}function aE(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function lE(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}var _S=Object.freeze({__proto__:null,shimAddTransceiver:sE,shimCreateAnswer:lE,shimCreateOffer:aE,shimGetDisplayMedia:tU,shimGetParameters:oE,shimGetUserMedia:Zx,shimOnTrack:eE,shimPeerConnection:_p,shimRTCDataChannel:rE,shimReceiverGetStats:nE,shimRemoveStream:iE,shimSenderGetStats:tE});function cE(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(i){this._localStreams||(this._localStreams=[]),this._localStreams.includes(i)||this._localStreams.push(i),i.getAudioTracks().forEach(r=>e.call(this,r,i)),i.getVideoTracks().forEach(r=>e.call(this,r,i))},t.RTCPeerConnection.prototype.addTrack=function(i){for(var r=arguments.length,o=new Array(r>1?r-1:0),l=1;l<r;l++)o[l-1]=arguments[l];return o&&o.forEach(c=>{this._localStreams?this._localStreams.includes(c)||this._localStreams.push(c):this._localStreams=[c]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const i=this._localStreams.indexOf(n);if(i===-1)return;this._localStreams.splice(i,1);const r=n.getTracks();this.getSenders().forEach(o=>{r.includes(o.track)&&this.removeTrack(o)})})}}function uE(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=i=>{i.streams.forEach(r=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(r))return;this._remoteStreams.push(r);const o=new Event("addstream");o.stream=r,this.dispatchEvent(o)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const i=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(r){r.streams.forEach(o=>{if(i._remoteStreams||(i._remoteStreams=[]),i._remoteStreams.indexOf(o)>=0)return;i._remoteStreams.push(o);const l=new Event("addstream");l.stream=o,i.dispatchEvent(l)})}),e.apply(i,arguments)}}}function dE(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,i=e.createAnswer,r=e.setLocalDescription,o=e.setRemoteDescription,l=e.addIceCandidate;e.createOffer=function(h,f){const m=arguments.length>=2?arguments[2]:arguments[0],v=n.apply(this,[m]);return f?(v.then(h,f),Promise.resolve()):v},e.createAnswer=function(h,f){const m=arguments.length>=2?arguments[2]:arguments[0],v=i.apply(this,[m]);return f?(v.then(h,f),Promise.resolve()):v};let c=function(d,h,f){const m=r.apply(this,[d]);return f?(m.then(h,f),Promise.resolve()):m};e.setLocalDescription=c,c=function(d,h,f){const m=o.apply(this,[d]);return f?(m.then(h,f),Promise.resolve()):m},e.setRemoteDescription=c,c=function(d,h,f){const m=l.apply(this,[d]);return f?(m.then(h,f),Promise.resolve()):m},e.addIceCandidate=c}function hE(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,i=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=r=>i(fE(r))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=function(i,r,o){e.mediaDevices.getUserMedia(i).then(r,o)}.bind(e))}function fE(t){return t&&t.video!==void 0?Object.assign({},t,{video:qx(t.video)}):t}function pE(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(i,r){if(i&&i.iceServers){const o=[];for(let l=0;l<i.iceServers.length;l++){let c=i.iceServers[l];c.urls===void 0&&c.url?(lg("RTCIceServer.url","RTCIceServer.urls"),c=JSON.parse(JSON.stringify(c)),c.urls=c.url,delete c.url,o.push(c)):o.push(i.iceServers[l])}i.iceServers=o}return new e(i,r)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function mE(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function gE(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(i){if(i){typeof i.offerToReceiveAudio<"u"&&(i.offerToReceiveAudio=!!i.offerToReceiveAudio);const r=this.getTransceivers().find(l=>l.receiver.track.kind==="audio");i.offerToReceiveAudio===!1&&r?r.direction==="sendrecv"?r.setDirection?r.setDirection("sendonly"):r.direction="sendonly":r.direction==="recvonly"&&(r.setDirection?r.setDirection("inactive"):r.direction="inactive"):i.offerToReceiveAudio===!0&&!r&&this.addTransceiver("audio",{direction:"recvonly"}),typeof i.offerToReceiveVideo<"u"&&(i.offerToReceiveVideo=!!i.offerToReceiveVideo);const o=this.getTransceivers().find(l=>l.receiver.track.kind==="video");i.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):i.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video",{direction:"recvonly"})}return e.apply(this,arguments)}}function vE(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}var IS=Object.freeze({__proto__:null,shimAudioContext:vE,shimCallbacksAPI:dE,shimConstraints:fE,shimCreateOfferLegacy:gE,shimGetUserMedia:hE,shimLocalStreamsAPI:cE,shimRTCIceServerUrls:pE,shimRemoteStreamsAPI:uE,shimTrackEventTransceiver:mE}),xf={exports:{}},AS;function nU(){return AS||(AS=1,(function(t){const e={};e.generateIdentifier=function(){return Math.random().toString(36).substring(2,12)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(i=>i.trim())},e.splitSections=function(n){return n.split(`
m=`).map((r,o)=>(o>0?"m="+r:r).trim()+`\r
`)},e.getDescription=function(n){const i=e.splitSections(n);return i&&i[0]},e.getMediaSections=function(n){const i=e.splitSections(n);return i.shift(),i},e.matchPrefix=function(n,i){return e.splitLines(n).filter(r=>r.indexOf(i)===0)},e.parseCandidate=function(n){let i;n.indexOf("a=candidate:")===0?i=n.substring(12).split(" "):i=n.substring(10).split(" ");const r={foundation:i[0],component:{1:"rtp",2:"rtcp"}[i[1]]||i[1],protocol:i[2].toLowerCase(),priority:parseInt(i[3],10),ip:i[4],address:i[4],port:parseInt(i[5],10),type:i[7]};for(let o=8;o<i.length;o+=2)switch(i[o]){case"raddr":r.relatedAddress=i[o+1];break;case"rport":r.relatedPort=parseInt(i[o+1],10);break;case"tcptype":r.tcpType=i[o+1];break;case"ufrag":r.ufrag=i[o+1],r.usernameFragment=i[o+1];break;default:r[i[o]]===void 0&&(r[i[o]]=i[o+1]);break}return r},e.writeCandidate=function(n){const i=[];i.push(n.foundation);const r=n.component;r==="rtp"?i.push(1):r==="rtcp"?i.push(2):i.push(r),i.push(n.protocol.toUpperCase()),i.push(n.priority),i.push(n.address||n.ip),i.push(n.port);const o=n.type;return i.push("typ"),i.push(o),o!=="host"&&n.relatedAddress&&n.relatedPort&&(i.push("raddr"),i.push(n.relatedAddress),i.push("rport"),i.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(i.push("tcptype"),i.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(i.push("ufrag"),i.push(n.usernameFragment||n.ufrag)),"candidate:"+i.join(" ")},e.parseIceOptions=function(n){return n.substring(14).split(" ")},e.parseRtpMap=function(n){let i=n.substring(9).split(" ");const r={payloadType:parseInt(i.shift(),10)};return i=i[0].split("/"),r.name=i[0],r.clockRate=parseInt(i[1],10),r.channels=i.length===3?parseInt(i[2],10):1,r.numChannels=r.channels,r},e.writeRtpMap=function(n){let i=n.payloadType;n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType);const r=n.channels||n.numChannels||1;return"a=rtpmap:"+i+" "+n.name+"/"+n.clockRate+(r!==1?"/"+r:"")+`\r
`},e.parseExtmap=function(n){const i=n.substring(9).split(" ");return{id:parseInt(i[0],10),direction:i[0].indexOf("/")>0?i[0].split("/")[1]:"sendrecv",uri:i[1],attributes:i.slice(2).join(" ")}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+(n.attributes?" "+n.attributes:"")+`\r
`},e.parseFmtp=function(n){const i={};let r;const o=n.substring(n.indexOf(" ")+1).split(";");for(let l=0;l<o.length;l++)r=o[l].trim().split("="),i[r[0].trim()]=r[1];return i},e.writeFmtp=function(n){let i="",r=n.payloadType;if(n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){const o=[];Object.keys(n.parameters).forEach(l=>{n.parameters[l]!==void 0?o.push(l+"="+n.parameters[l]):o.push(l)}),i+="a=fmtp:"+r+" "+o.join(";")+`\r
`}return i},e.parseRtcpFb=function(n){const i=n.substring(n.indexOf(" ")+1).split(" ");return{type:i.shift(),parameter:i.join(" ")}},e.writeRtcpFb=function(n){let i="",r=n.payloadType;return n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(o=>{i+="a=rtcp-fb:"+r+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),i},e.parseSsrcMedia=function(n){const i=n.indexOf(" "),r={ssrc:parseInt(n.substring(7,i),10)},o=n.indexOf(":",i);return o>-1?(r.attribute=n.substring(i+1,o),r.value=n.substring(o+1)):r.attribute=n.substring(i+1),r},e.parseSsrcGroup=function(n){const i=n.substring(13).split(" ");return{semantics:i.shift(),ssrcs:i.map(r=>parseInt(r,10))}},e.getMid=function(n){const i=e.matchPrefix(n,"a=mid:")[0];if(i)return i.substring(6)},e.parseFingerprint=function(n){const i=n.substring(14).split(" ");return{algorithm:i[0].toLowerCase(),value:i[1].toUpperCase()}},e.getDtlsParameters=function(n,i){return{role:"auto",fingerprints:e.matchPrefix(n+i,"a=fingerprint:").map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,i){let r="a=setup:"+i+`\r
`;return n.fingerprints.forEach(o=>{r+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),r},e.parseCryptoLine=function(n){const i=n.substring(9).split(" ");return{tag:parseInt(i[0],10),cryptoSuite:i[1],keyParams:i[2],sessionParams:i.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;const i=n.substring(7).split("|");return{keyMethod:"inline",keySalt:i[0],lifeTime:i[1],mkiValue:i[2]?i[2].split(":")[0]:void 0,mkiLength:i[2]?i[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,i){return e.matchPrefix(n+i,"a=crypto:").map(e.parseCryptoLine)},e.getIceParameters=function(n,i){const r=e.matchPrefix(n+i,"a=ice-ufrag:")[0],o=e.matchPrefix(n+i,"a=ice-pwd:")[0];return r&&o?{usernameFragment:r.substring(12),password:o.substring(10)}:null},e.writeIceParameters=function(n){let i="a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`;return n.iceLite&&(i+=`a=ice-lite\r
`),i},e.parseRtpParameters=function(n){const i={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},o=e.splitLines(n)[0].split(" ");i.profile=o[2];for(let c=3;c<o.length;c++){const d=o[c],h=e.matchPrefix(n,"a=rtpmap:"+d+" ")[0];if(h){const f=e.parseRtpMap(h),m=e.matchPrefix(n,"a=fmtp:"+d+" ");switch(f.parameters=m.length?e.parseFmtp(m[0]):{},f.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+d+" ").map(e.parseRtcpFb),i.codecs.push(f),f.name.toUpperCase()){case"RED":case"ULPFEC":i.fecMechanisms.push(f.name.toUpperCase());break}}}e.matchPrefix(n,"a=extmap:").forEach(c=>{i.headerExtensions.push(e.parseExtmap(c))});const l=e.matchPrefix(n,"a=rtcp-fb:* ").map(e.parseRtcpFb);return i.codecs.forEach(c=>{l.forEach(d=>{c.rtcpFeedback.find(f=>f.type===d.type&&f.parameter===d.parameter)||c.rtcpFeedback.push(d)})}),i},e.writeRtpDescription=function(n,i){let r="";r+="m="+n+" ",r+=i.codecs.length>0?"9":"0",r+=" "+(i.profile||"UDP/TLS/RTP/SAVPF")+" ",r+=i.codecs.map(l=>l.preferredPayloadType!==void 0?l.preferredPayloadType:l.payloadType).join(" ")+`\r
`,r+=`c=IN IP4 0.0.0.0\r
`,r+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,i.codecs.forEach(l=>{r+=e.writeRtpMap(l),r+=e.writeFmtp(l),r+=e.writeRtcpFb(l)});let o=0;return i.codecs.forEach(l=>{l.maxptime>o&&(o=l.maxptime)}),o>0&&(r+="a=maxptime:"+o+`\r
`),i.headerExtensions&&i.headerExtensions.forEach(l=>{r+=e.writeExtmap(l)}),r},e.parseRtpEncodingParameters=function(n){const i=[],r=e.parseRtpParameters(n),o=r.fecMechanisms.indexOf("RED")!==-1,l=r.fecMechanisms.indexOf("ULPFEC")!==-1,c=e.matchPrefix(n,"a=ssrc:").map(v=>e.parseSsrcMedia(v)).filter(v=>v.attribute==="cname"),d=c.length>0&&c[0].ssrc;let h;const f=e.matchPrefix(n,"a=ssrc-group:FID").map(v=>v.substring(17).split(" ").map(k=>parseInt(k,10)));f.length>0&&f[0].length>1&&f[0][0]===d&&(h=f[0][1]),r.codecs.forEach(v=>{if(v.name.toUpperCase()==="RTX"&&v.parameters.apt){let S={ssrc:d,codecPayloadType:parseInt(v.parameters.apt,10)};d&&h&&(S.rtx={ssrc:h}),i.push(S),o&&(S=JSON.parse(JSON.stringify(S)),S.fec={ssrc:d,mechanism:l?"red+ulpfec":"red"},i.push(S))}}),i.length===0&&d&&i.push({ssrc:d});let m=e.matchPrefix(n,"b=");return m.length&&(m[0].indexOf("b=TIAS:")===0?m=parseInt(m[0].substring(7),10):m[0].indexOf("b=AS:")===0?m=parseInt(m[0].substring(5),10)*1e3*.95-2e3*8:m=void 0,i.forEach(v=>{v.maxBitrate=m})),i},e.parseRtcpParameters=function(n){const i={},r=e.matchPrefix(n,"a=ssrc:").map(c=>e.parseSsrcMedia(c)).filter(c=>c.attribute==="cname")[0];r&&(i.cname=r.value,i.ssrc=r.ssrc);const o=e.matchPrefix(n,"a=rtcp-rsize");i.reducedSize=o.length>0,i.compound=o.length===0;const l=e.matchPrefix(n,"a=rtcp-mux");return i.mux=l.length>0,i},e.writeRtcpParameters=function(n){let i="";return n.reducedSize&&(i+=`a=rtcp-rsize\r
`),n.mux&&(i+=`a=rtcp-mux\r
`),n.ssrc!==void 0&&n.cname&&(i+="a=ssrc:"+n.ssrc+" cname:"+n.cname+`\r
`),i},e.parseMsid=function(n){let i;const r=e.matchPrefix(n,"a=msid:");if(r.length===1)return i=r[0].substring(7).split(" "),{stream:i[0],track:i[1]};const o=e.matchPrefix(n,"a=ssrc:").map(l=>e.parseSsrcMedia(l)).filter(l=>l.attribute==="msid");if(o.length>0)return i=o[0].value.split(" "),{stream:i[0],track:i[1]}},e.parseSctpDescription=function(n){const i=e.parseMLine(n),r=e.matchPrefix(n,"a=max-message-size:");let o;r.length>0&&(o=parseInt(r[0].substring(19),10)),isNaN(o)&&(o=65536);const l=e.matchPrefix(n,"a=sctp-port:");if(l.length>0)return{port:parseInt(l[0].substring(12),10),protocol:i.fmt,maxMessageSize:o};const c=e.matchPrefix(n,"a=sctpmap:");if(c.length>0){const d=c[0].substring(10).split(" ");return{port:parseInt(d[0],10),protocol:d[1],maxMessageSize:o}}},e.writeSctpDescription=function(n,i){let r=[];return n.protocol!=="DTLS/SCTP"?r=["m="+n.kind+" 9 "+n.protocol+" "+i.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+i.port+`\r
`]:r=["m="+n.kind+" 9 "+n.protocol+" "+i.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+i.port+" "+i.protocol+` 65535\r
`],i.maxMessageSize!==void 0&&r.push("a=max-message-size:"+i.maxMessageSize+`\r
`),r.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,22)},e.writeSessionBoilerplate=function(n,i,r){let o;const l=i!==void 0?i:2;return n?o=n:o=e.generateSessionId(),`v=0\r
o=`+(r||"thisisadapterortc")+" "+o+" "+l+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.getDirection=function(n,i){const r=e.splitLines(n);for(let o=0;o<r.length;o++)switch(r[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return r[o].substring(2)}return i?e.getDirection(i):"sendrecv"},e.getKind=function(n){return e.splitLines(n)[0].split(" ")[0].substring(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){const r=e.splitLines(n)[0].substring(2).split(" ");return{kind:r[0],port:parseInt(r[1],10),protocol:r[2],fmt:r.slice(3).join(" ")}},e.parseOLine=function(n){const r=e.matchPrefix(n,"o=")[0].substring(2).split(" ");return{username:r[0],sessionId:r[1],sessionVersion:parseInt(r[2],10),netType:r[3],addressType:r[4],address:r[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;const i=e.splitLines(n);for(let r=0;r<i.length;r++)if(i[r].length<2||i[r].charAt(1)!=="=")return!1;return!0},t.exports=e})(xf)),xf.exports}var yE=nU(),wo=q3(yE),iU=h2({__proto__:null,default:wo},[yE]);function ou(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(i){if(typeof i=="object"&&i.candidate&&i.candidate.indexOf("a=")===0&&(i=JSON.parse(JSON.stringify(i)),i.candidate=i.candidate.substring(2)),i.candidate&&i.candidate.length){const r=new e(i),o=wo.parseCandidate(i.candidate);for(const l in o)l in r||Object.defineProperty(r,l,{value:o[l]});return r.toJSON=function(){return{candidate:r.candidate,sdpMid:r.sdpMid,sdpMLineIndex:r.sdpMLineIndex,usernameFragment:r.usernameFragment}},r}return new e(i)},t.RTCIceCandidate.prototype=e.prototype,As(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function Ip(t){!t.RTCIceCandidate||t.RTCIceCandidate&&"relayProtocol"in t.RTCIceCandidate.prototype||As(t,"icecandidate",e=>{if(e.candidate){const n=wo.parseCandidate(e.candidate.candidate);n.type==="relay"&&(e.candidate.relayProtocol={0:"tls",1:"tcp",2:"udp"}[n.priority>>24])}return e})}function au(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(c){if(!c||!c.sdp)return!1;const d=wo.splitSections(c.sdp);return d.shift(),d.some(h=>{const f=wo.parseMLine(h);return f&&f.kind==="application"&&f.protocol.indexOf("SCTP")!==-1})},i=function(c){const d=c.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(d===null||d.length<2)return-1;const h=parseInt(d[1],10);return h!==h?-1:h},r=function(c){let d=65536;return e.browser==="firefox"&&(e.version<57?c===-1?d=16384:d=2147483637:e.version<60?d=e.version===57?65535:65536:d=2147483637),d},o=function(c,d){let h=65536;e.browser==="firefox"&&e.version===57&&(h=65535);const f=wo.matchPrefix(c.sdp,"a=max-message-size:");return f.length>0?h=parseInt(f[0].substring(19),10):e.browser==="firefox"&&d!==-1&&(h=2147483637),h},l=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:d}=this.getConfiguration();d==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const d=i(arguments[0]),h=r(d),f=o(arguments[0],d);let m;h===0&&f===0?m=Number.POSITIVE_INFINITY:h===0||f===0?m=Math.max(h,f):m=Math.min(h,f);const v={};Object.defineProperty(v,"maxMessageSize",{get(){return m}}),this._sctp=v}return l.apply(this,arguments)}}function lu(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(i,r){const o=i.send;i.send=function(){const c=arguments[0],d=c.length||c.size||c.byteLength;if(i.readyState==="open"&&r.sctp&&d>r.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+r.sctp.maxMessageSize+" bytes)");return o.apply(i,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const r=n.apply(this,arguments);return e(r,this),r},As(t,"datachannel",i=>(e(i.channel,i.target),i))}function Ap(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const i=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=r=>{const o=r.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const l=new Event("connectionstatechange",r);o.dispatchEvent(l)}return r},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),i.apply(this,arguments)}})}function Mp(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e._safariVersion>=13.1)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(r){if(r&&r.sdp&&r.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=r.sdp.split(`
`).filter(l=>l.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&r instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:r.type,sdp:o}):r.sdp=o}return n.apply(this,arguments)}}function cu(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}function uu(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.setLocalDescription;!n||n.length===0||(t.RTCPeerConnection.prototype.setLocalDescription=function(){let r=arguments[0]||{};if(typeof r!="object"||r.type&&r.sdp)return n.apply(this,arguments);if(r={type:r.type,sdp:r.sdp},!r.type)switch(this.signalingState){case"stable":case"have-local-offer":case"have-remote-pranswer":r.type="offer";break;default:r.type="answer";break}return r.sdp||r.type!=="offer"&&r.type!=="answer"?n.apply(this,[r]):(r.type==="offer"?this.createOffer:this.createAnswer).apply(this).then(l=>n.apply(this,[l]))})}var rU=Object.freeze({__proto__:null,removeExtmapAllowMixed:Mp,shimAddIceCandidateNullOrEmpty:cu,shimConnectionState:Ap,shimMaxMessageSize:au,shimParameterlessSetLocalDescription:uu,shimRTCIceCandidate:ou,shimRTCIceCandidateRelayProtocol:Ip,shimSendThrowTypeError:lu});function sU(){let{window:t}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{shimChrome:!0,shimFirefox:!0,shimSafari:!0};const n=Wx,i=eU(t),r={browserDetails:i,commonShim:rU,extractVersion:Ua,disableLog:Q3,disableWarnings:Z3,sdp:iU};switch(i.browser){case"chrome":if(!RS||!Rp||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),r;if(i.version===null)return n("Chrome shim can not determine version, not shimming."),r;n("adapter.js shimming chrome."),r.browserShim=RS,cu(t,i),uu(t),Hx(t,i),$x(t),Rp(t,i),Kx(t),Jx(t,i),Gx(t),Xx(t),Qx(t,i),ou(t),Ip(t),Ap(t),au(t,i),lu(t),Mp(t,i);break;case"firefox":if(!_S||!_p||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),r;n("adapter.js shimming firefox."),r.browserShim=_S,cu(t,i),uu(t),Zx(t,i),_p(t,i),eE(t),iE(t),tE(t),nE(t),rE(t),sE(t),oE(t),aE(t),lE(t),ou(t),Ap(t),au(t,i),lu(t);break;case"safari":if(!IS||!e.shimSafari)return n("Safari shim is not included in this adapter release."),r;n("adapter.js shimming safari."),r.browserShim=IS,cu(t,i),uu(t),pE(t),gE(t),dE(t),cE(t),uE(t),mE(t),hE(t),vE(t),ou(t),Ip(t),au(t,i),lu(t),Mp(t,i);break;default:n("Unsupported browser!");break}return r}sU({window:typeof window>"u"?void 0:window});const oU=10,Ma="lk_e2ee",aU="LKFrameEncryptionKey",lU={sharedKey:!1,ratchetSalt:aU,ratchetWindowSize:8,failureTolerance:oU,keyringSize:16};var Lr;(function(t){t.SetKey="setKey",t.RatchetRequest="ratchetRequest",t.KeyRatcheted="keyRatcheted"})(Lr||(Lr={}));var MS;(function(t){t.KeyRatcheted="keyRatcheted"})(MS||(MS={}));var Nr;(function(t){t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError"})(Nr||(Nr={}));var NS;(function(t){t.Error="cryptorError"})(NS||(NS={}));function cU(){return uU()||Np()}function Np(){return typeof window.RTCRtpScriptTransform<"u"}function uU(){return typeof window.RTCRtpSender<"u"&&typeof window.RTCRtpSender.prototype.createEncodedStreams<"u"}function dU(t){var e,n,i,r,o;if(((e=t.value)===null||e===void 0?void 0:e.case)!=="sipDtmf"&&((n=t.value)===null||n===void 0?void 0:n.case)!=="metrics"&&((i=t.value)===null||i===void 0?void 0:i.case)!=="speaker"&&((r=t.value)===null||r===void 0?void 0:r.case)!=="transcription"&&((o=t.value)===null||o===void 0?void 0:o.case)!=="encryptedPacket")return new yx({value:t.value})}class VV extends Ei.EventEmitter{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(),this.onKeyRatcheted=(n,i,r)=>{Oe.debug("key ratcheted event received",{ratchetResult:n,participantId:i,keyIndex:r})},this.keyInfoMap=new Map,this.options=Object.assign(Object.assign({},lU),e),this.on(Lr.KeyRatcheted,this.onKeyRatcheted)}onSetEncryptionKey(e,n,i){const r={key:e,participantIdentity:n,keyIndex:i};if(!this.options.sharedKey&&!n)throw new Error("participant identity needs to be passed for encryption key if sharedKey option is false");this.keyInfoMap.set("".concat(n??"shared","-").concat(i??0),r),this.emit(Lr.SetKey,r)}getKeys(){return Array.from(this.keyInfoMap.values())}getOptions(){return this.options}ratchetKey(e,n){this.emit(Lr.RatchetRequest,e,n)}}class Qi extends Error{constructor(e,n){super(n||"an error has occured"),this.name="LiveKitError",this.code=e}}var Be;(function(t){t[t.NotAllowed=0]="NotAllowed",t[t.ServerUnreachable=1]="ServerUnreachable",t[t.InternalError=2]="InternalError",t[t.Cancelled=3]="Cancelled",t[t.LeaveRequest=4]="LeaveRequest",t[t.Timeout=5]="Timeout"})(Be||(Be={}));class He extends Qi{constructor(e,n,i,r){super(1,e),this.name="ConnectionError",this.status=i,this.reason=n,this.context=r,this.reasonName=Be[n]}}class cg extends Qi{constructor(e){super(21,e??"device is unsupported"),this.name="DeviceUnsupportedError"}}class Hi extends Qi{constructor(e){super(20,e??"track is invalid"),this.name="TrackInvalidError"}}class hU extends Qi{constructor(e){super(10,e??"unsupported server"),this.name="UnsupportedServer"}}class Et extends Qi{constructor(e){super(12,e??"unexpected connection state"),this.name="UnexpectedConnectionState"}}class Dp extends Qi{constructor(e){super(13,e??"unable to negotiate"),this.name="NegotiationError"}}class DS extends Qi{constructor(e,n){super(15,e),this.name="PublishTrackError",this.status=n}}class OS extends Qi{constructor(e,n){super(15,e),this.reason=n,this.reasonName=typeof n=="string"?n:ag[n]}}var Zt;(function(t){t[t.AlreadyOpened=0]="AlreadyOpened",t[t.AbnormalEnd=1]="AbnormalEnd",t[t.DecodeFailed=2]="DecodeFailed",t[t.LengthExceeded=3]="LengthExceeded",t[t.Incomplete=4]="Incomplete",t[t.HandlerAlreadyRegistered=7]="HandlerAlreadyRegistered",t[t.EncryptionTypeMismatch=8]="EncryptionTypeMismatch"})(Zt||(Zt={}));class Bn extends Qi{constructor(e,n){super(16,e),this.name="DataStreamError",this.reason=n,this.reasonName=Zt[n]}}var Au;(function(t){t.PermissionDenied="PermissionDenied",t.NotFound="NotFound",t.DeviceInUse="DeviceInUse",t.Other="Other"})(Au||(Au={}));(function(t){function e(n){if(n&&"name"in n)return n.name==="NotFoundError"||n.name==="DevicesNotFoundError"?t.NotFound:n.name==="NotAllowedError"||n.name==="PermissionDeniedError"?t.PermissionDenied:n.name==="NotReadableError"||n.name==="TrackStartError"?t.DeviceInUse:t.Other}t.getFailure=e})(Au||(Au={}));var LS;(function(t){t[t.InvalidKey=0]="InvalidKey",t[t.MissingKey=1]="MissingKey",t[t.InternalError=2]="InternalError"})(LS||(LS={}));var ne;(function(t){t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting",t.Reconnected="reconnected",t.Disconnected="disconnected",t.ConnectionStateChanged="connectionStateChanged",t.Moved="moved",t.MediaDevicesChanged="mediaDevicesChanged",t.ParticipantConnected="participantConnected",t.ParticipantDisconnected="participantDisconnected",t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalAudioSilenceDetected="localAudioSilenceDetected",t.ActiveSpeakersChanged="activeSpeakersChanged",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.ParticipantAttributesChanged="participantAttributesChanged",t.ParticipantActive="participantActive",t.RoomMetadataChanged="roomMetadataChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.AudioPlaybackStatusChanged="audioPlaybackChanged",t.VideoPlaybackStatusChanged="videoPlaybackChanged",t.MediaDevicesError="mediaDevicesError",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.SignalConnected="signalConnected",t.RecordingStatusChanged="recordingStatusChanged",t.ParticipantEncryptionStatusChanged="participantEncryptionStatusChanged",t.EncryptionError="encryptionError",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ActiveDeviceChanged="activeDeviceChanged",t.ChatMessage="chatMessage",t.LocalTrackSubscribed="localTrackSubscribed",t.MetricsReceived="metricsReceived"})(ne||(ne={}));var fe;(function(t){t.TrackPublished="trackPublished",t.TrackSubscribed="trackSubscribed",t.TrackSubscriptionFailed="trackSubscriptionFailed",t.TrackUnpublished="trackUnpublished",t.TrackUnsubscribed="trackUnsubscribed",t.TrackMuted="trackMuted",t.TrackUnmuted="trackUnmuted",t.LocalTrackPublished="localTrackPublished",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackCpuConstrained="localTrackCpuConstrained",t.LocalSenderCreated="localSenderCreated",t.ParticipantMetadataChanged="participantMetadataChanged",t.ParticipantNameChanged="participantNameChanged",t.DataReceived="dataReceived",t.SipDTMFReceived="sipDTMFReceived",t.TranscriptionReceived="transcriptionReceived",t.IsSpeakingChanged="isSpeakingChanged",t.ConnectionQualityChanged="connectionQualityChanged",t.TrackStreamStateChanged="trackStreamStateChanged",t.TrackSubscriptionPermissionChanged="trackSubscriptionPermissionChanged",t.TrackSubscriptionStatusChanged="trackSubscriptionStatusChanged",t.TrackCpuConstrained="trackCpuConstrained",t.MediaDevicesError="mediaDevicesError",t.AudioStreamAcquired="audioStreamAcquired",t.ParticipantPermissionsChanged="participantPermissionsChanged",t.PCTrackAdded="pcTrackAdded",t.AttributesChanged="attributesChanged",t.LocalTrackSubscribed="localTrackSubscribed",t.ChatMessage="chatMessage",t.Active="active"})(fe||(fe={}));var de;(function(t){t.TransportsCreated="transportsCreated",t.Connected="connected",t.Disconnected="disconnected",t.Resuming="resuming",t.Resumed="resumed",t.Restarting="restarting",t.Restarted="restarted",t.SignalResumed="signalResumed",t.SignalRestarted="signalRestarted",t.Closing="closing",t.MediaTrackAdded="mediaTrackAdded",t.ActiveSpeakersUpdate="activeSpeakersUpdate",t.DataPacketReceived="dataPacketReceived",t.RTPVideoMapUpdate="rtpVideoMapUpdate",t.DCBufferStatusChanged="dcBufferStatusChanged",t.ParticipantUpdate="participantUpdate",t.RoomUpdate="roomUpdate",t.SpeakersChanged="speakersChanged",t.StreamStateChanged="streamStateChanged",t.ConnectionQualityUpdate="connectionQualityUpdate",t.SubscriptionError="subscriptionError",t.SubscriptionPermissionUpdate="subscriptionPermissionUpdate",t.RemoteMute="remoteMute",t.SubscribedQualityUpdate="subscribedQualityUpdate",t.LocalTrackUnpublished="localTrackUnpublished",t.LocalTrackSubscribed="localTrackSubscribed",t.Offline="offline",t.SignalRequestResponse="signalRequestResponse",t.SignalConnected="signalConnected",t.RoomMoved="roomMoved"})(de||(de={}));var le;(function(t){t.Message="message",t.Muted="muted",t.Unmuted="unmuted",t.Restarted="restarted",t.Ended="ended",t.Subscribed="subscribed",t.Unsubscribed="unsubscribed",t.CpuConstrained="cpuConstrained",t.UpdateSettings="updateSettings",t.UpdateSubscription="updateSubscription",t.AudioPlaybackStarted="audioPlaybackStarted",t.AudioPlaybackFailed="audioPlaybackFailed",t.AudioSilenceDetected="audioSilenceDetected",t.VisibilityChanged="visibilityChanged",t.VideoDimensionsChanged="videoDimensionsChanged",t.VideoPlaybackStarted="videoPlaybackStarted",t.VideoPlaybackFailed="videoPlaybackFailed",t.ElementAttached="elementAttached",t.ElementDetached="elementDetached",t.UpstreamPaused="upstreamPaused",t.UpstreamResumed="upstreamResumed",t.SubscriptionPermissionChanged="subscriptionPermissionChanged",t.SubscriptionStatusChanged="subscriptionStatusChanged",t.SubscriptionFailed="subscriptionFailed",t.TrackProcessorUpdate="trackProcessorUpdate",t.AudioTrackFeatureUpdate="audioTrackFeatureUpdate",t.TranscriptionReceived="transcriptionReceived",t.TimeSyncUpdate="timeSyncUpdate",t.PreConnectBufferFlushed="preConnectBufferFlushed"})(le||(le={}));function fU(t){return typeof t>"u"?t:typeof structuredClone=="function"?typeof t=="object"&&t!==null?structuredClone(Object.assign({},t)):structuredClone(t):JSON.parse(JSON.stringify(t))}const pU=/version\/(\d+(\.?_?\d+)+)/i;let Ef;function gn(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(typeof navigator>"u")return;const n=navigator.userAgent.toLowerCase();if(Ef===void 0||e){const i=mU.find(r=>{let{test:o}=r;return o.test(n)});Ef=i?.describe(n)}return Ef}const mU=[{test:/firefox|iceweasel|fxios/i,describe(t){return{name:"Firefox",version:du(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("fxios")?"iOS":void 0,osVersion:Pf(t)}}},{test:/chrom|crios|crmo/i,describe(t){return{name:"Chrome",version:du(/(?:chrome|chromium|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t),os:t.toLowerCase().includes("crios")?"iOS":void 0,osVersion:Pf(t)}}},{test:/safari|applewebkit/i,describe(t){return{name:"Safari",version:du(pU,t),os:t.includes("mobile/")?"iOS":"macOS",osVersion:Pf(t)}}}];function du(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1;const i=e.match(t);return i&&i.length>=n&&i[n]||""}function Pf(t){return t.includes("mac os")?du(/\(.+?(\d+_\d+(:?_\d+)?)/,t,1).replace(/_/g,"."):void 0}var gU="2.15.14";const vU=gU,yU=16;class Bt{}Bt.setTimeout=function(){return setTimeout(...arguments)};Bt.setInterval=function(){return setInterval(...arguments)};Bt.clearTimeout=function(){return clearTimeout(...arguments)};Bt.clearInterval=function(){return clearInterval(...arguments)};const bU=5e3,Na=[];var En;(function(t){t[t.LOW=0]="LOW",t[t.MEDIUM=1]="MEDIUM",t[t.HIGH=2]="HIGH"})(En||(En={}));class K extends Ei.EventEmitter{get streamState(){return this._streamState}setStreamState(e){this._streamState=e}constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};var r;super(),this.attachedElements=[],this.isMuted=!1,this._streamState=K.StreamState.Active,this.isInBackground=!1,this._currentBitrate=0,this.log=Oe,this.appVisibilityChangedListener=()=>{this.backgroundTimeout&&clearTimeout(this.backgroundTimeout),document.visibilityState==="hidden"?this.backgroundTimeout=setTimeout(()=>this.handleAppVisibilityChanged(),bU):this.handleAppVisibilityChanged()},this.log=Ji((r=i.loggerName)!==null&&r!==void 0?r:oi.Track),this.loggerContextCb=i.loggerContextCb,this.setMaxListeners(100),this.kind=n,this._mediaStreamTrack=e,this._mediaStreamID=e.id,this.source=K.Source.Unknown}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),je(this))}get currentBitrate(){return this._currentBitrate}get mediaStreamTrack(){return this._mediaStreamTrack}get mediaStreamID(){return this._mediaStreamID}attach(e){let n="audio";this.kind===K.Kind.Video&&(n="video"),this.attachedElements.length===0&&this.kind===K.Kind.Video&&this.addAppVisibilityListener(),e||(n==="audio"&&(Na.forEach(o=>{o.parentElement===null&&!e&&(e=o)}),e&&Na.splice(Na.indexOf(e),1)),e||(e=document.createElement(n))),this.attachedElements.includes(e)||this.attachedElements.push(e),vo(this.mediaStreamTrack,e);const i=e.srcObject.getTracks(),r=i.some(o=>o.kind==="audio");return e.play().then(()=>{this.emit(r?le.AudioPlaybackStarted:le.VideoPlaybackStarted)}).catch(o=>{o.name==="NotAllowedError"?this.emit(r?le.AudioPlaybackFailed:le.VideoPlaybackFailed,o):o.name==="AbortError"?Oe.debug("".concat(r?"audio":"video"," playback aborted, likely due to new play request")):Oe.warn("could not playback ".concat(r?"audio":"video"),o),r&&e&&i.some(l=>l.kind==="video")&&o.name==="NotAllowedError"&&(e.muted=!0,e.play().catch(()=>{}))}),this.emit(le.ElementAttached,e),e}detach(e){try{if(e){xo(this.mediaStreamTrack,e);const i=this.attachedElements.indexOf(e);return i>=0&&(this.attachedElements.splice(i,1),this.recycleElement(e),this.emit(le.ElementDetached,e)),e}const n=[];return this.attachedElements.forEach(i=>{xo(this.mediaStreamTrack,i),n.push(i),this.recycleElement(i),this.emit(le.ElementDetached,i)}),this.attachedElements=[],n}finally{this.attachedElements.length===0&&this.removeAppVisibilityListener()}}stop(){this.stopMonitor(),this._mediaStreamTrack.stop()}enable(){this._mediaStreamTrack.enabled=!0}disable(){this._mediaStreamTrack.enabled=!1}stopMonitor(){this.monitorInterval&&clearInterval(this.monitorInterval),this.timeSyncHandle&&cancelAnimationFrame(this.timeSyncHandle)}updateLoggerOptions(e){e.loggerName&&(this.log=Ji(e.loggerName)),e.loggerContextCb&&(this.loggerContextCb=e.loggerContextCb)}recycleElement(e){if(e instanceof HTMLAudioElement){let n=!0;e.pause(),Na.forEach(i=>{i.parentElement||(n=!1)}),n&&Na.push(e)}}handleAppVisibilityChanged(){return M(this,void 0,void 0,function*(){this.isInBackground=document.visibilityState==="hidden",!this.isInBackground&&this.kind===K.Kind.Video&&setTimeout(()=>this.attachedElements.forEach(e=>e.play().catch(()=>{})),0)})}addAppVisibilityListener(){mn()?(this.isInBackground=document.visibilityState==="hidden",document.addEventListener("visibilitychange",this.appVisibilityChangedListener)):this.isInBackground=!1}removeAppVisibilityListener(){mn()&&document.removeEventListener("visibilitychange",this.appVisibilityChangedListener)}}function vo(t,e){let n;e.srcObject instanceof MediaStream?n=e.srcObject:n=new MediaStream;let i;t.kind==="audio"?i=n.getAudioTracks():i=n.getVideoTracks(),i.includes(t)||(i.forEach(r=>{n.removeTrack(r)}),n.addTrack(t)),(!_s()||!(e instanceof HTMLVideoElement))&&(e.autoplay=!0),e.muted=n.getAudioTracks().length===0,e instanceof HTMLVideoElement&&(e.playsInline=!0),e.srcObject!==n&&(e.srcObject=n,(_s()||Rs())&&e instanceof HTMLVideoElement&&setTimeout(()=>{e.srcObject=n,e.play().catch(()=>{})},0))}function xo(t,e){if(e.srcObject instanceof MediaStream){const n=e.srcObject;n.removeTrack(t),n.getTracks().length>0?e.srcObject=n:e.srcObject=null}}(function(t){let e;(function(h){h.Audio="audio",h.Video="video",h.Unknown="unknown"})(e=t.Kind||(t.Kind={}));let n;(function(h){h.Camera="camera",h.Microphone="microphone",h.ScreenShare="screen_share",h.ScreenShareAudio="screen_share_audio",h.Unknown="unknown"})(n=t.Source||(t.Source={}));let i;(function(h){h.Active="active",h.Paused="paused",h.Unknown="unknown"})(i=t.StreamState||(t.StreamState={}));function r(h){switch(h){case e.Audio:return ti.AUDIO;case e.Video:return ti.VIDEO;default:return ti.DATA}}t.kindToProto=r;function o(h){switch(h){case ti.AUDIO:return e.Audio;case ti.VIDEO:return e.Video;default:return e.Unknown}}t.kindFromProto=o;function l(h){switch(h){case n.Camera:return St.CAMERA;case n.Microphone:return St.MICROPHONE;case n.ScreenShare:return St.SCREEN_SHARE;case n.ScreenShareAudio:return St.SCREEN_SHARE_AUDIO;default:return St.UNKNOWN}}t.sourceToProto=l;function c(h){switch(h){case St.CAMERA:return n.Camera;case St.MICROPHONE:return n.Microphone;case St.SCREEN_SHARE:return n.ScreenShare;case St.SCREEN_SHARE_AUDIO:return n.ScreenShareAudio;default:return n.Unknown}}t.sourceFromProto=c;function d(h){switch(h){case wp.ACTIVE:return i.Active;case wp.PAUSED:return i.Paused;default:return i.Unknown}}t.streamStateFromProto=d})(K||(K={}));class Xe{constructor(e,n,i,r,o){if(typeof e=="object")this.width=e.width,this.height=e.height,this.aspectRatio=e.aspectRatio,this.encoding={maxBitrate:e.maxBitrate,maxFramerate:e.maxFramerate,priority:e.priority};else if(n!==void 0&&i!==void 0)this.width=e,this.height=n,this.aspectRatio=e/n,this.encoding={maxBitrate:i,maxFramerate:r,priority:o};else throw new TypeError("Unsupported options: provide at least width, height and maxBitrate")}get resolution(){return{width:this.width,height:this.height,frameRate:this.encoding.maxFramerate,aspectRatio:this.aspectRatio}}}const SU=["vp8","h264"],kU=["vp8","h264","vp9","av1","h265"];function CU(t){return!!SU.find(e=>e===t)}const TU=CU;var FS;(function(t){t[t.PREFER_REGRESSION=0]="PREFER_REGRESSION",t[t.SIMULCAST=1]="SIMULCAST",t[t.REGRESSION=2]="REGRESSION"})(FS||(FS={}));var Op;(function(t){t.telephone={maxBitrate:12e3},t.speech={maxBitrate:24e3},t.music={maxBitrate:48e3},t.musicStereo={maxBitrate:64e3},t.musicHighQuality={maxBitrate:96e3},t.musicHighQualityStereo={maxBitrate:128e3}})(Op||(Op={}));const ll={h90:new Xe(160,90,9e4,20),h180:new Xe(320,180,16e4,20),h216:new Xe(384,216,18e4,20),h360:new Xe(640,360,45e4,20),h540:new Xe(960,540,8e5,25),h720:new Xe(1280,720,17e5,30),h1080:new Xe(1920,1080,3e6,30),h1440:new Xe(2560,1440,5e6,30),h2160:new Xe(3840,2160,8e6,30)},Lp={h120:new Xe(160,120,7e4,20),h180:new Xe(240,180,125e3,20),h240:new Xe(320,240,14e4,20),h360:new Xe(480,360,33e4,20),h480:new Xe(640,480,5e5,20),h540:new Xe(720,540,6e5,25),h720:new Xe(960,720,13e5,30),h1080:new Xe(1440,1080,23e5,30),h1440:new Xe(1920,1440,38e5,30)},ug={h360fps3:new Xe(640,360,2e5,3,"medium"),h360fps15:new Xe(640,360,4e5,15,"medium"),h720fps5:new Xe(1280,720,8e5,5,"medium"),h720fps15:new Xe(1280,720,15e5,15,"medium"),h720fps30:new Xe(1280,720,2e6,30,"medium"),h1080fps15:new Xe(1920,1080,25e5,15,"medium"),h1080fps30:new Xe(1920,1080,5e6,30,"medium"),original:new Xe(0,0,7e6,30,"medium")},wU="|",jS="https://aomediacodec.github.io/av1-rtp-spec/#dependency-descriptor-rtp-header-extension";function xU(t){const e=t.split(wU);return e.length>1?[e[0],t.substr(e[0].length+1)]:[t,""]}function rn(t){return M(this,void 0,void 0,function*(){return new Promise(e=>Bt.setTimeout(e,t))})}function Fp(){return"addTransceiver"in RTCPeerConnection.prototype}function jp(){return"addTrack"in RTCPeerConnection.prototype}function EU(){if(!("getCapabilities"in RTCRtpSender)||_s()||Rs())return!1;const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType.toLowerCase()==="video/av1"){e=!0;break}}return e}function PU(){if(!("getCapabilities"in RTCRtpSender)||Rs())return!1;if(_s()){const n=gn();if(n?.version&&wi(n.version,"16")<0||n?.os==="iOS"&&n?.osVersion&&wi(n.osVersion,"16")<0)return!1}const t=RTCRtpSender.getCapabilities("video");let e=!1;if(t){for(const n of t.codecs)if(n.mimeType.toLowerCase()==="video/vp9"){e=!0;break}}return e}function gi(t){return t==="av1"||t==="vp9"}function Up(t){return!document||cl()?!1:(t||(t=document.createElement("audio")),"setSinkId"in t)}function RU(){return typeof RTCPeerConnection>"u"?!1:Fp()||jp()}function Rs(){var t;return((t=gn())===null||t===void 0?void 0:t.name)==="Firefox"}function US(){const t=gn();return!!t&&t.name==="Chrome"&&t.os!=="iOS"}function _s(){var t;return((t=gn())===null||t===void 0?void 0:t.name)==="Safari"}function cl(){const t=gn();return t?.name==="Safari"||t?.os==="iOS"}function _U(){const t=gn();return t?.name==="Safari"&&t.version.startsWith("17.")||t?.os==="iOS"&&!!t?.osVersion&&wi(t.osVersion,"17")>=0}function IU(t){return t||(t=gn()),t?.name==="Safari"&&wi(t.version,"18.3")>0||t?.os==="iOS"&&!!t?.osVersion&&wi(t.osVersion,"18.3")>0}function bE(){var t,e;return mn()?(e=(t=navigator.userAgentData)===null||t===void 0?void 0:t.mobile)!==null&&e!==void 0?e:/Tablet|iPad|Mobile|Android|BlackBerry/.test(navigator.userAgent):!1}function AU(){const t=gn(),e="17.2";if(t)return t.name!=="Safari"&&t.os!=="iOS"||t.os==="iOS"&&t.osVersion&&wi(t.osVersion,e)>=0?!0:t.name==="Safari"&&wi(t.version,e)>=0}function mn(){return typeof document<"u"}function Ti(){return navigator.product=="ReactNative"}function Bp(t){return t.hostname.endsWith(".livekit.cloud")||t.hostname.endsWith(".livekit.run")}function SE(){if(global&&global.LiveKitReactNativeGlobal)return global.LiveKitReactNativeGlobal}function kE(){if(!Ti())return;let t=SE();if(t)return t.platform}function BS(){if(mn())return window.devicePixelRatio;if(Ti()){let t=SE();if(t)return t.devicePixelRatio}return 1}function wi(t,e){const n=t.split("."),i=e.split("."),r=Math.min(n.length,i.length);for(let o=0;o<r;++o){const l=parseInt(n[o],10),c=parseInt(i[o],10);if(l>c)return 1;if(l<c)return-1;if(o===r-1&&l===c)return 0}return t===""&&e!==""?-1:e===""?1:n.length==i.length?0:n.length<i.length?-1:1}function MU(t){for(const e of t)e.target.handleResize(e)}function NU(t){for(const e of t)e.target.handleVisibilityChanged(e)}let Rf=null;const VS=()=>(Rf||(Rf=new ResizeObserver(MU)),Rf);let _f=null;const zS=()=>(_f||(_f=new IntersectionObserver(NU,{root:null,rootMargin:"0px"})),_f);function DU(){var t;const e=new xx({sdk:Ex.JS,protocol:yU,version:vU});return Ti()&&(e.os=(t=kE())!==null&&t!==void 0?t:""),e}function WS(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:16,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:16,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;const r=document.createElement("canvas");r.width=t,r.height=e;const o=r.getContext("2d");o?.fillRect(0,0,r.width,r.height),i&&o&&(o.beginPath(),o.arc(t/2,e/2,50,0,Math.PI*2,!0),o.closePath(),o.fillStyle="grey",o.fill());const l=r.captureStream(),[c]=l.getTracks();if(!c)throw Error("Could not get empty media stream video track");return c.enabled=n,c}let Da;function If(){if(!Da){const t=new AudioContext,e=t.createOscillator(),n=t.createGain();n.gain.setValueAtTime(0,0);const i=t.createMediaStreamDestination();if(e.connect(n),n.connect(i),e.start(),[Da]=i.stream.getAudioTracks(),!Da)throw Error("Could not get empty media stream audio track");Da.enabled=!1}return Da.clone()}class zn{get isResolved(){return this._isResolved}constructor(e,n){this._isResolved=!1,this.onFinally=n,this.promise=new Promise((i,r)=>M(this,void 0,void 0,function*(){this.resolve=i,this.reject=r,e&&(yield e(i,r))})).finally(()=>{var i;this._isResolved=!0,(i=this.onFinally)===null||i===void 0||i.call(this)})}}function OU(t){return kU.includes(t)}function Fr(t){if(typeof t=="string"||typeof t=="number")return t;if(Array.isArray(t))return t[0];if(t.exact!==void 0)return Array.isArray(t.exact)?t.exact[0]:t.exact;if(t.ideal!==void 0)return Array.isArray(t.ideal)?t.ideal[0]:t.ideal;throw Error("could not unwrap constraint")}function LU(t){return t.startsWith("http")?t.replace(/^(http)/,"ws"):t}function Vp(t){return t.startsWith("ws")?t.replace(/^(ws)/,"http"):t}function FU(t,e){return t.segments.map(n=>{let{id:i,text:r,language:o,startTime:l,endTime:c,final:d}=n;var h;const f=(h=e.get(i))!==null&&h!==void 0?h:Date.now(),m=Date.now();return d?e.delete(i):e.set(i,f),{id:i,text:r,startTime:Number.parseInt(l.toString()),endTime:Number.parseInt(c.toString()),final:d,language:o,firstReceivedTime:f,lastReceivedTime:m}})}function jU(t){const{id:e,timestamp:n,message:i,editTimestamp:r}=t;return{id:e,timestamp:Number.parseInt(n.toString()),editTimestamp:r?Number.parseInt(r.toString()):void 0,message:i}}function qS(t){switch(t.reason){case Be.LeaveRequest:return t.context;case Be.Cancelled:return ii.CLIENT_INITIATED;case Be.NotAllowed:return ii.USER_REJECTED;case Be.ServerUnreachable:return ii.JOIN_FAILURE;default:return ii.UNKNOWN_REASON}}function hu(t){return t!==void 0?Number(t):void 0}function vs(t){return t!==void 0?BigInt(t):void 0}function Eo(t){return!!t&&!(t instanceof MediaStreamTrack)&&t.isLocal}function ki(t){return!!t&&t.kind==K.Kind.Audio}function Gr(t){return!!t&&t.kind==K.Kind.Video}function Rr(t){return Eo(t)&&Gr(t)}function Ui(t){return Eo(t)&&ki(t)}function zp(t){return!!t&&!t.isLocal}function UU(t){return!!t&&!t.isLocal}function Af(t){return zp(t)&&Gr(t)}function BU(t){return t.isLocal}function VU(t,e){const n=[];let i=new TextEncoder().encode(t);for(;i.length>e;){let r=e;for(;r>0;){const o=i[r];if(o!==void 0&&(o&192)!==128)break;r--}n.push(i.slice(0,r)),i=i.slice(r)}return i.length>0&&n.push(i),n}function zU(t){var e;const n=t.get("Cache-Control");if(n){const i=(e=n.match(/(?:^|[,\s])max-age=(\d+)/))===null||e===void 0?void 0:e[1];if(i)return parseInt(i,10)}}function CE(t,e,n){var i,r,o,l;const{optionsWithoutProcessor:c,audioProcessor:d,videoProcessor:h}=xE(t??{}),f=e?.processor,m=n?.processor,v=c??{};return v.audio===!0&&(v.audio={}),v.video===!0&&(v.video={}),v.audio&&(Wp(v.audio,e),(i=(o=v.audio).deviceId)!==null&&i!==void 0||(o.deviceId={ideal:"default"}),(d||f)&&(v.audio.processor=d??f)),v.video&&(Wp(v.video,n),(r=(l=v.video).deviceId)!==null&&r!==void 0||(l.deviceId={ideal:"default"}),(h||m)&&(v.video.processor=h??m)),v}function Wp(t,e){return Object.keys(e).forEach(n=>{t[n]===void 0&&(t[n]=e[n])}),t}function dg(t){var e,n,i,r;const o={};if(t.video)if(typeof t.video=="object"){const l={},c=l,d=t.video;Object.keys(d).forEach(h=>{switch(h){case"resolution":Wp(c,d.resolution);break;default:c[h]=d[h]}}),o.video=l,(e=(i=o.video).deviceId)!==null&&e!==void 0||(i.deviceId={ideal:"default"})}else o.video=t.video?{deviceId:{ideal:"default"}}:!1;else o.video=!1;return t.audio?typeof t.audio=="object"?(o.audio=t.audio,(n=(r=o.audio).deviceId)!==null&&n!==void 0||(r.deviceId={ideal:"default"})):o.audio={deviceId:{ideal:"default"}}:o.audio=!1,o}function TE(t){return M(this,arguments,void 0,function(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:200;return(function*(){const i=wE();if(i){const r=i.createAnalyser();r.fftSize=2048;const o=r.frequencyBinCount,l=new Uint8Array(o);i.createMediaStreamSource(new MediaStream([e.mediaStreamTrack])).connect(r),yield rn(n),r.getByteTimeDomainData(l);const d=l.some(h=>h!==128&&h!==0);return i.close(),!d}return!1})()})}function wE(){var t;const e=typeof window<"u"&&(window.AudioContext||window.webkitAudioContext);if(e){const n=new e({latencyHint:"interactive"});if(n.state==="suspended"&&typeof window<"u"&&(!((t=window.document)===null||t===void 0)&&t.body)){const i=()=>M(this,void 0,void 0,function*(){var r;try{n.state==="suspended"&&(yield n.resume())}catch(o){console.warn("Error trying to auto-resume audio context",o)}finally{(r=window.document.body)===null||r===void 0||r.removeEventListener("click",i)}});n.addEventListener("statechange",()=>{var r;n.state==="closed"&&((r=window.document.body)===null||r===void 0||r.removeEventListener("click",i))}),window.document.body.addEventListener("click",i)}return n}}function WU(t){return t==="audioinput"?K.Source.Microphone:t==="videoinput"?K.Source.Camera:K.Source.Unknown}function qp(t){return t===K.Source.Microphone?"audioinput":t===K.Source.Camera?"videoinput":void 0}function qU(t){var e,n;let i=(e=t.video)!==null&&e!==void 0?e:!0;return t.resolution&&t.resolution.width>0&&t.resolution.height>0&&(i=typeof i=="boolean"?{}:i,_s()?i=Object.assign(Object.assign({},i),{width:{max:t.resolution.width},height:{max:t.resolution.height},frameRate:t.resolution.frameRate}):i=Object.assign(Object.assign({},i),{width:{ideal:t.resolution.width},height:{ideal:t.resolution.height},frameRate:t.resolution.frameRate})),{audio:(n=t.audio)!==null&&n!==void 0?n:!1,video:i,controller:t.controller,selfBrowserSurface:t.selfBrowserSurface,surfaceSwitching:t.surfaceSwitching,systemAudio:t.systemAudio,preferCurrentTab:t.preferCurrentTab}}function Ka(t){return t.split("/")[1].toLowerCase()}function HU(t){const e=[];return t.forEach(n=>{n.track!==void 0&&e.push(new ng({cid:n.track.mediaStreamID,track:n.trackInfo}))}),e}function je(t){return"mediaStreamTrack"in t?{trackID:t.sid,source:t.source,muted:t.isMuted,enabled:t.mediaStreamTrack.enabled,kind:t.kind,streamID:t.mediaStreamID,streamTrackID:t.mediaStreamTrack.id}:{trackID:t.trackSid,enabled:t.isEnabled,muted:t.isMuted,trackInfo:Object.assign({mimeType:t.mimeType,name:t.trackName,encrypted:t.isEncrypted,kind:t.kind,source:t.source},t.track?je(t.track):{})}}function $U(){return typeof RTCRtpReceiver<"u"&&"getSynchronizationSources"in RTCRtpReceiver}function KU(t,e){var n;t===void 0&&(t={}),e===void 0&&(e={});const i=[...Object.keys(e),...Object.keys(t)],r={};for(const o of i)t[o]!==e[o]&&(r[o]=(n=e[o])!==null&&n!==void 0?n:"");return r}function xE(t){const e=Object.assign({},t);let n,i;return typeof e.audio=="object"&&e.audio.processor&&(n=e.audio.processor,e.audio=Object.assign(Object.assign({},e.audio),{processor:void 0})),typeof e.video=="object"&&e.video.processor&&(i=e.video.processor,e.video=Object.assign(Object.assign({},e.video),{processor:void 0})),{audioProcessor:n,videoProcessor:i,optionsWithoutProcessor:fU(e)}}function GU(t){switch(t){case St.CAMERA:return K.Source.Camera;case St.MICROPHONE:return K.Source.Microphone;case St.SCREEN_SHARE:return K.Source.ScreenShare;case St.SCREEN_SHARE_AUDIO:return K.Source.ScreenShareAudio;default:return K.Source.Unknown}}function HS(t,e){return t.width*t.height<e.width*e.height}function XU(t,e){var n;return(n=t.layers)===null||n===void 0?void 0:n.find(i=>i.quality===e)}class YU extends Ei.EventEmitter{constructor(e,n){super(),this.decryptDataRequests=new Map,this.encryptDataRequests=new Map,this.onWorkerMessage=i=>{var r,o;const{kind:l,data:c}=i.data;switch(l){case"error":Oe.error(c.error.message),this.emit(Nr.EncryptionError,c.error);break;case"initAck":c.enabled&&this.keyProvider.getKeys().forEach(f=>{this.postKey(f)});break;case"enable":if(c.enabled&&this.keyProvider.getKeys().forEach(f=>{this.postKey(f)}),this.encryptionEnabled!==c.enabled&&c.participantIdentity===((r=this.room)===null||r===void 0?void 0:r.localParticipant.identity))this.emit(Nr.ParticipantEncryptionStatusChanged,c.enabled,this.room.localParticipant),this.encryptionEnabled=c.enabled;else if(c.participantIdentity){const f=(o=this.room)===null||o===void 0?void 0:o.getParticipantByIdentity(c.participantIdentity);if(!f)throw TypeError("couldn't set encryption status, participant not found".concat(c.participantIdentity));this.emit(Nr.ParticipantEncryptionStatusChanged,c.enabled,f)}break;case"ratchetKey":this.keyProvider.emit(Lr.KeyRatcheted,c.ratchetResult,c.participantIdentity,c.keyIndex);break;case"decryptDataResponse":const d=this.decryptDataRequests.get(c.uuid);d?.resolve&&d.resolve(c);break;case"encryptDataResponse":const h=this.encryptDataRequests.get(c.uuid);h?.resolve&&h.resolve(c);break}},this.onWorkerError=i=>{Oe.error("e2ee worker encountered an error:",{error:i.error}),this.emit(Nr.EncryptionError,i.error)},this.keyProvider=e.keyProvider,this.worker=e.worker,this.encryptionEnabled=!1,this.dataChannelEncryptionEnabled=n}get isEnabled(){return this.encryptionEnabled}get isDataChannelEncryptionEnabled(){return this.isEnabled&&this.dataChannelEncryptionEnabled}setup(e){if(!cU())throw new cg("tried to setup end-to-end encryption on an unsupported browser");if(Oe.info("setting up e2ee"),e!==this.room){this.room=e,this.setupEventListeners(e,this.keyProvider);const n={kind:"init",data:{keyProviderOptions:this.keyProvider.getOptions(),loglevel:K3.getLevel()}};this.worker&&(Oe.info("initializing worker",{worker:this.worker}),this.worker.onmessage=this.onWorkerMessage,this.worker.onerror=this.onWorkerError,this.worker.postMessage(n))}}setParticipantCryptorEnabled(e,n){Oe.debug("set e2ee to ".concat(e," for participant ").concat(n)),this.postEnable(e,n)}setSifTrailer(e){!e||e.length===0?Oe.warn("ignoring server sent trailer as it's empty"):this.postSifTrailer(e)}setupEngine(e){e.on(de.RTPVideoMapUpdate,n=>{this.postRTPMap(n)})}setupEventListeners(e,n){e.on(ne.TrackPublished,(i,r)=>this.setParticipantCryptorEnabled(i.trackInfo.encryption!==Rt.NONE,r.identity)),e.on(ne.ConnectionStateChanged,i=>{i===qe.Connected&&e.remoteParticipants.forEach(r=>{r.trackPublications.forEach(o=>{this.setParticipantCryptorEnabled(o.trackInfo.encryption!==Rt.NONE,r.identity)})})}).on(ne.TrackUnsubscribed,(i,r,o)=>{var l;const c={kind:"removeTransform",data:{participantIdentity:o.identity,trackId:i.mediaStreamID}};(l=this.worker)===null||l===void 0||l.postMessage(c)}).on(ne.TrackSubscribed,(i,r,o)=>{this.setupE2EEReceiver(i,o.identity,r.trackInfo)}).on(ne.SignalConnected,()=>{if(!this.room)throw new TypeError("expected room to be present on signal connect");n.getKeys().forEach(i=>{this.postKey(i)}),this.setParticipantCryptorEnabled(this.room.localParticipant.isE2EEEnabled,this.room.localParticipant.identity)}),e.localParticipant.on(fe.LocalSenderCreated,(i,r)=>M(this,void 0,void 0,function*(){this.setupE2EESender(r,i)})),e.localParticipant.on(fe.LocalTrackPublished,i=>{if(!Gr(i.track)||!cl())return;const r={kind:"updateCodec",data:{trackId:i.track.mediaStreamID,codec:Ka(i.trackInfo.codecs[0].mimeType),participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(r)}),n.on(Lr.SetKey,i=>this.postKey(i)).on(Lr.RatchetRequest,(i,r)=>this.postRatchetRequest(i,r))}encryptData(e){return M(this,void 0,void 0,function*(){if(!this.worker)throw Error("could not encrypt data, worker is missing");const n=crypto.randomUUID(),i={kind:"encryptDataRequest",data:{uuid:n,payload:e,participantIdentity:this.room.localParticipant.identity}},r=new zn;return r.onFinally=()=>{this.encryptDataRequests.delete(n)},this.encryptDataRequests.set(n,r),this.worker.postMessage(i),r.promise})}handleEncryptedData(e,n,i,r){if(!this.worker)throw Error("could not handle encrypted data, worker is missing");const o=crypto.randomUUID(),l={kind:"decryptDataRequest",data:{uuid:o,payload:e,iv:n,participantIdentity:i,keyIndex:r}},c=new zn;return c.onFinally=()=>{this.decryptDataRequests.delete(o)},this.decryptDataRequests.set(o,c),this.worker.postMessage(l),c.promise}postRatchetRequest(e,n){if(!this.worker)throw Error("could not ratchet key, worker is missing");const i={kind:"ratchetRequest",data:{participantIdentity:e,keyIndex:n}};this.worker.postMessage(i)}postKey(e){let{key:n,participantIdentity:i,keyIndex:r}=e;var o;if(!this.worker)throw Error("could not set key, worker is missing");const l={kind:"setKey",data:{participantIdentity:i,isPublisher:i===((o=this.room)===null||o===void 0?void 0:o.localParticipant.identity),key:n,keyIndex:r}};this.worker.postMessage(l)}postEnable(e,n){if(this.worker){const i={kind:"enable",data:{enabled:e,participantIdentity:n}};this.worker.postMessage(i)}else throw new ReferenceError("failed to enable e2ee, worker is not ready")}postRTPMap(e){var n;if(!this.worker)throw TypeError("could not post rtp map, worker is missing");if(!(!((n=this.room)===null||n===void 0)&&n.localParticipant.identity))throw TypeError("could not post rtp map, local participant identity is missing");const i={kind:"setRTPMap",data:{map:e,participantIdentity:this.room.localParticipant.identity}};this.worker.postMessage(i)}postSifTrailer(e){if(!this.worker)throw Error("could not post SIF trailer, worker is missing");const n={kind:"setSifTrailer",data:{trailer:e}};this.worker.postMessage(n)}setupE2EEReceiver(e,n,i){if(e.receiver){if(!i?.mimeType||i.mimeType==="")throw new TypeError("MimeType missing from trackInfo, cannot set up E2EE cryptor");this.handleReceiver(e.receiver,e.mediaStreamID,n,e.kind==="video"?Ka(i.mimeType):void 0)}}setupE2EESender(e,n){if(!Eo(e)||!n){n||Oe.warn("early return because sender is not ready");return}this.handleSender(n,e.mediaStreamID,void 0)}handleReceiver(e,n,i,r){return M(this,void 0,void 0,function*(){if(this.worker){if(Np()&&!US()){const o={kind:"decode",participantIdentity:i,trackId:n,codec:r};e.transform=new RTCRtpScriptTransform(this.worker,o)}else{if(Ma in e&&r){const d={kind:"updateCodec",data:{trackId:n,codec:r,participantIdentity:i}};this.worker.postMessage(d);return}let o=e.writableStream,l=e.readableStream;if(!o||!l){const d=e.createEncodedStreams();e.writableStream=d.writable,o=d.writable,e.readableStream=d.readable,l=d.readable}const c={kind:"decode",data:{readableStream:l,writableStream:o,trackId:n,codec:r,participantIdentity:i,isReuse:Ma in e}};this.worker.postMessage(c,[l,o])}e[Ma]=!0}})}handleSender(e,n,i){var r;if(!(Ma in e||!this.worker)){if(!(!((r=this.room)===null||r===void 0)&&r.localParticipant.identity)||this.room.localParticipant.identity==="")throw TypeError("local identity needs to be known in order to set up encrypted sender");if(Np()&&!US()){Oe.info("initialize script transform");const o={kind:"encode",participantIdentity:this.room.localParticipant.identity,trackId:n,codec:i};e.transform=new RTCRtpScriptTransform(this.worker,o)}else{Oe.info("initialize encoded streams");const o=e.createEncodedStreams(),l={kind:"encode",data:{readableStream:o.readable,writableStream:o.writable,codec:i,trackId:n,participantIdentity:this.room.localParticipant.identity,isReuse:!1}};this.worker.postMessage(l,[o.readable,o.writable])}e[Ma]=!0}}}const Mf="default";class Dt{constructor(){this._previousDevices=[]}static getInstance(){return this.instance===void 0&&(this.instance=new Dt),this.instance}get previousDevices(){return this._previousDevices}getDevices(e){return M(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){var o;if(((o=Dt.userMediaPromiseMap)===null||o===void 0?void 0:o.size)>0){Oe.debug("awaiting getUserMedia promise");try{n?yield Dt.userMediaPromiseMap.get(n):yield Promise.all(Dt.userMediaPromiseMap.values())}catch{Oe.warn("error waiting for media permissons")}}let l=yield navigator.mediaDevices.enumerateDevices();if(r&&!(_s()&&i.hasDeviceInUse(n))&&(l.filter(d=>d.kind===n).length===0||l.some(d=>{const h=d.label==="",f=n?d.kind===n:!0;return h&&f}))){const d={video:n!=="audioinput"&&n!=="audiooutput",audio:n!=="videoinput"&&{deviceId:{ideal:"default"}}},h=yield navigator.mediaDevices.getUserMedia(d);l=yield navigator.mediaDevices.enumerateDevices(),h.getTracks().forEach(f=>{f.stop()})}return i._previousDevices=l,n&&(l=l.filter(c=>c.kind===n)),l})()})}normalizeDeviceId(e,n,i){return M(this,void 0,void 0,function*(){if(n!==Mf)return n;const r=yield this.getDevices(e),o=r.find(c=>c.deviceId===Mf);if(!o){Oe.warn("could not reliably determine default device");return}const l=r.find(c=>c.deviceId!==Mf&&c.groupId===(i??o.groupId));if(!l){Oe.warn("could not reliably determine default device");return}return l?.deviceId})}hasDeviceInUse(e){return e?Dt.userMediaPromiseMap.has(e):Dt.userMediaPromiseMap.size>0}}Dt.mediaDeviceKinds=["audioinput","audiooutput","videoinput"];Dt.userMediaPromiseMap=new Map;var Ga;(function(t){t[t.WAITING=0]="WAITING",t[t.RUNNING=1]="RUNNING",t[t.COMPLETED=2]="COMPLETED"})(Ga||(Ga={}));class JU{constructor(){this.pendingTasks=new Map,this.taskMutex=new nn,this.nextTaskIndex=0}run(e){return M(this,void 0,void 0,function*(){const n={id:this.nextTaskIndex++,enqueuedAt:Date.now(),status:Ga.WAITING};this.pendingTasks.set(n.id,n);const i=yield this.taskMutex.lock();try{return n.executedAt=Date.now(),n.status=Ga.RUNNING,yield e()}finally{n.status=Ga.COMPLETED,this.pendingTasks.delete(n.id),i()}})}flush(){return M(this,void 0,void 0,function*(){return this.run(()=>M(this,void 0,void 0,function*(){}))})}snapshot(){return Array.from(this.pendingTasks.values())}}class QU{get readyState(){return this.ws.readyState}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var i,r;if(!((i=n.signal)===null||i===void 0)&&i.aborted)throw new DOMException("This operation was aborted","AbortError");this.url=e;const o=new WebSocket(e,(r=n.protocols)!==null&&r!==void 0?r:[]);o.binaryType="arraybuffer",this.ws=o;const l=function(){let{closeCode:c,reason:d}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return o.close(c,d)};this.opened=new Promise((c,d)=>{o.onopen=()=>{c({readable:new ReadableStream({start(h){o.onmessage=f=>{let{data:m}=f;return h.enqueue(m)},o.onerror=f=>h.error(f)},cancel:l}),writable:new WritableStream({write(h){o.send(h)},abort(){o.close()},close:l}),protocol:o.protocol,extensions:o.extensions}),o.removeEventListener("error",d)},o.addEventListener("error",d)}),this.closed=new Promise((c,d)=>{const h=()=>M(this,void 0,void 0,function*(){const f=new Promise(v=>{o.readyState!==WebSocket.CLOSED&&o.addEventListener("close",S=>{v(S)},{once:!0})}),m=yield Promise.race([rn(250),f]);m?c(m):d(new Error("Encountered unspecified websocket error without a timely close event"))});o.onclose=f=>{let{code:m,reason:v}=f;c({closeCode:m,reason:v}),o.removeEventListener("error",h)},o.addEventListener("error",h)}),n.signal&&(n.signal.onabort=()=>o.close()),this.close=l}}function ZU(t,e){const n=new URL(LU(t));return e.forEach((i,r)=>{n.searchParams.set(r,i)}),EE(n,"rtc")}function eB(t){const e=new URL(Vp(t));return EE(e,"validate")}function tB(t){return t.endsWith("/")?t:"".concat(t,"/")}function EE(t,e){return t.pathname="".concat(tB(t.pathname)).concat(e),t.toString()}function $S(t){if(typeof t=="string")return kS.fromJson(JSON.parse(t),{ignoreUnknownFields:!0});if(t instanceof ArrayBuffer)return kS.fromBinary(new Uint8Array(t));throw new Error("could not decode websocket message: ".concat(typeof t))}function nB(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Unknown reason";if(!(t instanceof AbortSignal))return e;const n=t.reason;switch(typeof n){case"string":return n;case"object":return n instanceof Error?n.message:e;default:return"toString"in n?n.toString():e}}const iB=["syncState","trickle","offer","answer","simulate","leave"];function rB(t){const e=iB.indexOf(t.case)>=0;return Oe.trace("request allowed to bypass queue:",{canPass:e,req:t}),e}var st;(function(t){t[t.CONNECTING=0]="CONNECTING",t[t.CONNECTED=1]="CONNECTED",t[t.RECONNECTING=2]="RECONNECTING",t[t.DISCONNECTING=3]="DISCONNECTING",t[t.DISCONNECTED=4]="DISCONNECTED"})(st||(st={}));const sB=250;class hg{get currentState(){return this.state}get isDisconnected(){return this.state===st.DISCONNECTING||this.state===st.DISCONNECTED}get isEstablishingConnection(){return this.state===st.CONNECTING||this.state===st.RECONNECTING}getNextRequestId(){return this._requestId+=1,this._requestId}constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var i;this.rtt=0,this.state=st.DISCONNECTED,this.log=Oe,this._requestId=0,this.resetCallbacks=()=>{this.onAnswer=void 0,this.onLeave=void 0,this.onLocalTrackPublished=void 0,this.onLocalTrackUnpublished=void 0,this.onNegotiateRequested=void 0,this.onOffer=void 0,this.onRemoteMuteChanged=void 0,this.onSubscribedQualityUpdate=void 0,this.onTokenRefresh=void 0,this.onTrickle=void 0,this.onClose=void 0,this.onMediaSectionsRequirement=void 0},this.log=Ji((i=n.loggerName)!==null&&i!==void 0?i:oi.Signal),this.loggerContextCb=n.loggerContextCb,this.useJSON=e,this.requestQueue=new JU,this.queuedRequests=[],this.closingLock=new nn,this.connectionLock=new nn,this.state=st.DISCONNECTED}get logContext(){var e,n;return(n=(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this))!==null&&n!==void 0?n:{}}join(e,n,i,r){return M(this,void 0,void 0,function*(){return this.state=st.CONNECTING,this.options=i,yield this.connect(e,n,i,r)})}reconnect(e,n,i,r){return M(this,void 0,void 0,function*(){if(!this.options){this.log.warn("attempted to reconnect without signal options being set, ignoring",this.logContext);return}return this.state=st.RECONNECTING,this.clearPingInterval(),yield this.connect(e,n,Object.assign(Object.assign({},this.options),{reconnect:!0,sid:i,reconnectReason:r}))})}connect(e,n,i,r){return M(this,void 0,void 0,function*(){const o=yield this.connectionLock.lock();this.connectOptions=i;const l=DU(),c=i.singlePeerConnection?aB(n,l,i):oB(n,l,i),d=ZU(e,c),h=eB(d);return new Promise((f,m)=>M(this,void 0,void 0,function*(){var v,S;try{let k=!1;const b=P=>M(this,void 0,void 0,function*(){if(k)return;k=!0;const I=P instanceof Event?P.currentTarget:P,D=nB(I,"Abort handler called");this.streamWriter&&!this.isDisconnected?this.sendLeave().then(()=>this.close(D)).catch(O=>{this.log.error(O),this.close()}):this.close(),C(),m(I instanceof AbortSignal?I.reason:I)});r?.addEventListener("abort",b);const C=()=>{clearTimeout(T),r?.removeEventListener("abort",b)},T=setTimeout(()=>{b(new He("room connection has timed out (signal)",Be.ServerUnreachable))},i.websocketTimeout),_=(P,I)=>{this.handleSignalConnected(P,T,I)},R=new URL(d);R.searchParams.has("access_token")&&R.searchParams.set("access_token","<redacted>"),this.log.debug("connecting to ".concat(R),Object.assign({reconnect:i.reconnect,reconnectReason:i.reconnectReason},this.logContext)),this.ws&&(yield this.close(!1)),this.ws=new QU(d);try{this.ws.closed.then(H=>{this.isEstablishingConnection&&m(new He("Websocket got closed during a (re)connection attempt: ".concat(H.reason),Be.InternalError)),H.closeCode!==1e3&&this.log.warn("websocket closed",Object.assign(Object.assign({},this.logContext),{reason:H.reason,code:H.closeCode,wasClean:H.closeCode===1e3,state:this.state}))}).catch(H=>{this.isEstablishingConnection&&m(new He("Websocket error during a (re)connection attempt: ".concat(H),Be.InternalError))});const P=yield this.ws.opened.catch(H=>M(this,void 0,void 0,function*(){if(this.state!==st.CONNECTED){this.state=st.DISCONNECTED,clearTimeout(T);const G=yield this.handleConnectionError(H,h);m(G);return}this.handleWSError(H),m(H)}));if(clearTimeout(T),!P)return;const I=P.readable.getReader();this.streamWriter=P.writable.getWriter();const D=yield I.read();if(I.releaseLock(),!D.value)throw new He("no message received as first message",Be.InternalError);const O=$S(D.value),N=this.validateFirstMessage(O,(v=i.reconnect)!==null&&v!==void 0?v:!1);if(!N.isValid){m(N.error);return}((S=O.message)===null||S===void 0?void 0:S.case)==="join"&&(this.pingTimeoutDuration=O.message.value.pingTimeout,this.pingIntervalDuration=O.message.value.pingInterval,this.pingTimeoutDuration&&this.pingTimeoutDuration>0&&this.log.debug("ping config",Object.assign(Object.assign({},this.logContext),{timeout:this.pingTimeoutDuration,interval:this.pingIntervalDuration})));const q=N.shouldProcessFirstMessage?O:void 0;_(P,q),f(N.response)}catch(P){m(P)}finally{C()}}finally{o()}}))})}startReadingLoop(e,n){return M(this,void 0,void 0,function*(){for(n&&this.handleSignalResponse(n);;){this.signalLatency&&(yield rn(this.signalLatency));const{done:i,value:r}=yield e.read();if(i)break;const o=$S(r);this.handleSignalResponse(o)}})}close(){return M(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Close method called on signal client";return(function*(){const r=yield e.closingLock.lock();try{if(e.clearPingInterval(),n&&(e.state=st.DISCONNECTING),e.ws){e.ws.close({closeCode:1e3,reason:i});const o=e.ws.closed;e.ws=void 0,e.streamWriter=void 0,yield Promise.race([o,rn(sB)])}}catch(o){e.log.debug("websocket error while closing",Object.assign(Object.assign({},e.logContext),{error:o}))}finally{n&&(e.state=st.DISCONNECTED),r()}})()})}sendOffer(e,n){this.log.debug("sending offer",Object.assign(Object.assign({},this.logContext),{offerSdp:e.sdp})),this.sendRequest({case:"offer",value:yo(e,n)})}sendAnswer(e,n){return this.log.debug("sending answer",Object.assign(Object.assign({},this.logContext),{answerSdp:e.sdp})),this.sendRequest({case:"answer",value:yo(e,n)})}sendIceCandidate(e,n){return this.log.debug("sending ice candidate",Object.assign(Object.assign({},this.logContext),{candidate:e})),this.sendRequest({case:"trickle",value:new td({candidateInit:JSON.stringify(e),target:n})})}sendMuteTrack(e,n){return this.sendRequest({case:"mute",value:new nd({sid:e,muted:n})})}sendAddTrack(e){return this.sendRequest({case:"addTrack",value:e})}sendUpdateLocalMetadata(e,n){return M(this,arguments,void 0,function(i,r){var o=this;let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return(function*(){const c=o.getNextRequestId();return yield o.sendRequest({case:"updateMetadata",value:new rg({requestId:c,metadata:i,name:r,attributes:l})}),c})()})}sendUpdateTrackSettings(e){this.sendRequest({case:"trackSetting",value:e})}sendUpdateSubscription(e){return this.sendRequest({case:"subscription",value:e})}sendSyncState(e){return this.sendRequest({case:"syncState",value:e})}sendUpdateVideoLayers(e,n){return this.sendRequest({case:"updateLayers",value:new Nx({trackSid:e,layers:n})})}sendUpdateSubscriptionPermissions(e,n){return this.sendRequest({case:"subscriptionPermission",value:new Lx({allParticipants:e,trackPermissions:n})})}sendSimulateScenario(e){return this.sendRequest({case:"simulate",value:e})}sendPing(){return Promise.all([this.sendRequest({case:"ping",value:et.parse(Date.now())}),this.sendRequest({case:"pingReq",value:new Ux({timestamp:et.parse(Date.now()),rtt:et.parse(this.rtt)})})])}sendUpdateLocalAudioTrack(e,n){return this.sendRequest({case:"updateAudioTrack",value:new ig({trackSid:e,features:n})})}sendLeave(){return this.sendRequest({case:"leave",value:new rd({reason:ii.CLIENT_INITIATED,action:To.DISCONNECT})})}sendRequest(e){return M(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return(function*(){if(!r&&!rB(n)&&i.state===st.RECONNECTING){i.queuedRequests.push(()=>M(i,void 0,void 0,function*(){yield this.sendRequest(n,!0)}));return}if(r||(yield i.requestQueue.flush()),i.signalLatency&&(yield rn(i.signalLatency)),i.isDisconnected){i.log.debug("skipping signal request (type: ".concat(n.case,") - SignalClient disconnected"));return}if(!i.streamWriter){i.log.error("cannot send signal request before connected, type: ".concat(n?.case),i.logContext);return}const l=new y3({message:n});try{i.useJSON?yield i.streamWriter.write(l.toJsonString()):yield i.streamWriter.write(l.toBinary())}catch(c){i.log.error("error sending signal message",Object.assign(Object.assign({},i.logContext),{error:c}))}})()})}handleSignalResponse(e){var n,i;const r=e.message;if(r==null){this.log.debug("received unsupported message",this.logContext);return}let o=!1;if(r.case==="answer"){const l=KS(r.value);this.onAnswer&&this.onAnswer(l,r.value.id,r.value.midToTrackId)}else if(r.case==="offer"){const l=KS(r.value);this.onOffer&&this.onOffer(l,r.value.id,r.value.midToTrackId)}else if(r.case==="trickle"){const l=JSON.parse(r.value.candidateInit);this.onTrickle&&this.onTrickle(l,r.value.target)}else r.case==="update"?this.onParticipantUpdate&&this.onParticipantUpdate((n=r.value.participants)!==null&&n!==void 0?n:[]):r.case==="trackPublished"?this.onLocalTrackPublished&&this.onLocalTrackPublished(r.value):r.case==="speakersChanged"?this.onSpeakersChanged&&this.onSpeakersChanged((i=r.value.speakers)!==null&&i!==void 0?i:[]):r.case==="leave"?this.onLeave&&this.onLeave(r.value):r.case==="mute"?this.onRemoteMuteChanged&&this.onRemoteMuteChanged(r.value.sid,r.value.muted):r.case==="roomUpdate"?this.onRoomUpdate&&r.value.room&&this.onRoomUpdate(r.value.room):r.case==="connectionQuality"?this.onConnectionQuality&&this.onConnectionQuality(r.value):r.case==="streamStateUpdate"?this.onStreamStateUpdate&&this.onStreamStateUpdate(r.value):r.case==="subscribedQualityUpdate"?this.onSubscribedQualityUpdate&&this.onSubscribedQualityUpdate(r.value):r.case==="subscriptionPermissionUpdate"?this.onSubscriptionPermissionUpdate&&this.onSubscriptionPermissionUpdate(r.value):r.case==="refreshToken"?this.onTokenRefresh&&this.onTokenRefresh(r.value):r.case==="trackUnpublished"?this.onLocalTrackUnpublished&&this.onLocalTrackUnpublished(r.value):r.case==="subscriptionResponse"?this.onSubscriptionError&&this.onSubscriptionError(r.value):r.case==="pong"||(r.case==="pongResp"?(this.rtt=Date.now()-Number.parseInt(r.value.lastPingTimestamp.toString()),this.resetPingTimeout(),o=!0):r.case==="requestResponse"?this.onRequestResponse&&this.onRequestResponse(r.value):r.case==="trackSubscribed"?this.onLocalTrackSubscribed&&this.onLocalTrackSubscribed(r.value.trackSid):r.case==="roomMoved"?(this.onTokenRefresh&&this.onTokenRefresh(r.value.token),this.onRoomMoved&&this.onRoomMoved(r.value)):r.case==="mediaSectionsRequirement"?this.onMediaSectionsRequirement&&this.onMediaSectionsRequirement(r.value):this.log.debug("unsupported message",Object.assign(Object.assign({},this.logContext),{msgCase:r.case})));o||this.resetPingTimeout()}setReconnected(){for(;this.queuedRequests.length>0;){const e=this.queuedRequests.shift();e&&this.requestQueue.run(e)}}handleOnClose(e){return M(this,void 0,void 0,function*(){if(this.state===st.DISCONNECTED)return;const n=this.onClose;yield this.close(void 0,e),this.log.debug("websocket connection closed: ".concat(e),Object.assign(Object.assign({},this.logContext),{reason:e})),n&&n(e)})}handleWSError(e){this.log.error("websocket error",Object.assign(Object.assign({},this.logContext),{error:e}))}resetPingTimeout(){if(this.clearPingTimeout(),!this.pingTimeoutDuration){this.log.warn("ping timeout duration not set",this.logContext);return}this.pingTimeout=Bt.setTimeout(()=>{this.log.warn("ping timeout triggered. last pong received at: ".concat(new Date(Date.now()-this.pingTimeoutDuration*1e3).toUTCString()),this.logContext),this.handleOnClose("ping timeout")},this.pingTimeoutDuration*1e3)}clearPingTimeout(){this.pingTimeout&&Bt.clearTimeout(this.pingTimeout)}startPingInterval(){if(this.clearPingInterval(),this.resetPingTimeout(),!this.pingIntervalDuration){this.log.warn("ping interval duration not set",this.logContext);return}this.log.debug("start ping interval",this.logContext),this.pingInterval=Bt.setInterval(()=>{this.sendPing()},this.pingIntervalDuration*1e3)}clearPingInterval(){this.log.debug("clearing ping interval",this.logContext),this.clearPingTimeout(),this.pingInterval&&Bt.clearInterval(this.pingInterval)}handleSignalConnected(e,n,i){this.state=st.CONNECTED,clearTimeout(n),this.startPingInterval(),this.startReadingLoop(e.readable.getReader(),i)}validateFirstMessage(e,n){var i,r,o,l,c;return((i=e.message)===null||i===void 0?void 0:i.case)==="join"?{isValid:!0,response:e.message.value}:this.state===st.RECONNECTING&&((r=e.message)===null||r===void 0?void 0:r.case)!=="leave"?((o=e.message)===null||o===void 0?void 0:o.case)==="reconnect"?{isValid:!0,response:e.message.value}:(this.log.debug("declaring signal reconnected without reconnect response received",this.logContext),{isValid:!0,response:void 0,shouldProcessFirstMessage:!0}):this.isEstablishingConnection&&((l=e.message)===null||l===void 0?void 0:l.case)==="leave"?{isValid:!1,error:new He("Received leave request while trying to (re)connect",Be.LeaveRequest,void 0,e.message.value.reason)}:n?{isValid:!1,error:new He("Unexpected first message",Be.InternalError)}:{isValid:!1,error:new He("did not receive join response, got ".concat((c=e.message)===null||c===void 0?void 0:c.case," instead"),Be.InternalError)}}handleConnectionError(e,n){return M(this,void 0,void 0,function*(){try{const i=yield fetch(n);if(i.status.toFixed(0).startsWith("4")){const r=yield i.text();return new He(r,Be.NotAllowed,i.status)}else return e instanceof He?e:new He("Encountered unknown websocket error during connection: ".concat(e),Be.InternalError,i.status)}catch(i){return i instanceof He?i:new He(i instanceof Error?i.message:"server was not reachable",Be.ServerUnreachable)}})}}function KS(t){const e={type:"offer",sdp:t.sdp};switch(t.type){case"answer":case"offer":case"pranswer":case"rollback":e.type=t.type;break}return e}function yo(t,e){return new qr({sdp:t.sdp,type:t.type,id:e})}function oB(t,e,n){var i;const r=new URLSearchParams;return r.set("access_token",t),n.reconnect&&(r.set("reconnect","1"),n.sid&&r.set("sid",n.sid)),r.set("auto_subscribe",n.autoSubscribe?"1":"0"),r.set("sdk",Ti()?"reactnative":"js"),r.set("version",e.version),r.set("protocol",e.protocol.toString()),e.deviceModel&&r.set("device_model",e.deviceModel),e.os&&r.set("os",e.os),e.osVersion&&r.set("os_version",e.osVersion),e.browser&&r.set("browser",e.browser),e.browserVersion&&r.set("browser_version",e.browserVersion),n.adaptiveStream&&r.set("adaptive_stream","1"),n.reconnectReason&&r.set("reconnect_reason",n.reconnectReason.toString()),!((i=navigator.connection)===null||i===void 0)&&i.type&&r.set("network",navigator.connection.type),r}function aB(t,e,n){const i=new URLSearchParams;i.set("access_token",t);const r=new B3({clientInfo:e,connectionSettings:new Bx({autoSubscribe:!!n.autoSubscribe,adaptiveStream:!!n.adaptiveStream}),reconnect:!!n.reconnect,participantSid:n.sid?n.sid:void 0});n.reconnectReason&&(r.reconnectReason=n.reconnectReason);const o=new V3({joinRequest:r.toBinary()});return i.set("join_request",btoa(new TextDecoder("utf-8").decode(o.toBinary()))),i}class GS{constructor(){this.buffer=[],this._totalSize=0}push(e){this.buffer.push(e),this._totalSize+=e.data.byteLength}pop(){const e=this.buffer.shift();return e&&(this._totalSize-=e.data.byteLength),e}getAll(){return this.buffer.slice()}popToSequence(e){for(;this.buffer.length>0&&this.buffer[0].sequence<=e;)this.pop()}alignBufferedAmount(e){for(;this.buffer.length>0;){const n=this.buffer[0];if(this._totalSize-n.data.byteLength<=e)break;this.pop()}}get length(){return this.buffer.length}}class lB{constructor(e){this._map=new Map,this._lastCleanup=0,this.ttl=e}set(e,n){const i=Date.now();i-this._lastCleanup>this.ttl/2&&this.cleanup();const r=i+this.ttl;return this._map.set(e,{value:n,expiresAt:r}),this}get(e){const n=this._map.get(e);if(n){if(n.expiresAt<Date.now()){this._map.delete(e);return}return n.value}}has(e){const n=this._map.get(e);return n?n.expiresAt<Date.now()?(this._map.delete(e),!1):!0:!1}delete(e){return this._map.delete(e)}clear(){this._map.clear()}cleanup(){const e=Date.now();for(const[n,i]of this._map.entries())i.expiresAt<e&&this._map.delete(n);this._lastCleanup=e}get size(){return this.cleanup(),this._map.size}forEach(e){this.cleanup();for(const[n,i]of this._map.entries())i.expiresAt>=Date.now()&&e(i.value,n,this.asValueMap())}map(e){this.cleanup();const n=[],i=this.asValueMap();for(const[r,o]of i.entries())n.push(e(o,r,i));return n}asValueMap(){const e=new Map;for(const[n,i]of this._map.entries())i.expiresAt>=Date.now()&&e.set(n,i.value);return e}}var Jn={},Nf={},Df={exports:{}},XS;function fg(){if(XS)return Df.exports;XS=1;var t=Df.exports={v:[{name:"version",reg:/^(\d*)$/}],o:[{name:"origin",reg:/^(\S*) (\d*) (\d*) (\S*) IP(\d) (\S*)/,names:["username","sessionId","sessionVersion","netType","ipVer","address"],format:"%s %s %d %s IP%d %s"}],s:[{name:"name"}],i:[{name:"description"}],u:[{name:"uri"}],e:[{name:"email"}],p:[{name:"phone"}],z:[{name:"timezones"}],r:[{name:"repeats"}],t:[{name:"timing",reg:/^(\d*) (\d*)/,names:["start","stop"],format:"%d %d"}],c:[{name:"connection",reg:/^IN IP(\d) (\S*)/,names:["version","ip"],format:"IN IP%d %s"}],b:[{push:"bandwidth",reg:/^(TIAS|AS|CT|RR|RS):(\d*)/,names:["type","limit"],format:"%s:%s"}],m:[{reg:/^(\w*) (\d*) ([\w/]*)(?: (.*))?/,names:["type","port","protocol","payloads"],format:"%s %d %s %s"}],a:[{push:"rtp",reg:/^rtpmap:(\d*) ([\w\-.]*)(?:\s*\/(\d*)(?:\s*\/(\S*))?)?/,names:["payload","codec","rate","encoding"],format:function(e){return e.encoding?"rtpmap:%d %s/%s/%s":e.rate?"rtpmap:%d %s/%s":"rtpmap:%d %s"}},{push:"fmtp",reg:/^fmtp:(\d*) ([\S| ]*)/,names:["payload","config"],format:"fmtp:%d %s"},{name:"control",reg:/^control:(.*)/,format:"control:%s"},{name:"rtcp",reg:/^rtcp:(\d*)(?: (\S*) IP(\d) (\S*))?/,names:["port","netType","ipVer","address"],format:function(e){return e.address!=null?"rtcp:%d %s IP%d %s":"rtcp:%d"}},{push:"rtcpFbTrrInt",reg:/^rtcp-fb:(\*|\d*) trr-int (\d*)/,names:["payload","value"],format:"rtcp-fb:%s trr-int %d"},{push:"rtcpFb",reg:/^rtcp-fb:(\*|\d*) ([\w-_]*)(?: ([\w-_]*))?/,names:["payload","type","subtype"],format:function(e){return e.subtype!=null?"rtcp-fb:%s %s %s":"rtcp-fb:%s %s"}},{push:"ext",reg:/^extmap:(\d+)(?:\/(\w+))?(?: (urn:ietf:params:rtp-hdrext:encrypt))? (\S*)(?: (\S*))?/,names:["value","direction","encrypt-uri","uri","config"],format:function(e){return"extmap:%d"+(e.direction?"/%s":"%v")+(e["encrypt-uri"]?" %s":"%v")+" %s"+(e.config?" %s":"")}},{name:"extmapAllowMixed",reg:/^(extmap-allow-mixed)/},{push:"crypto",reg:/^crypto:(\d*) ([\w_]*) (\S*)(?: (\S*))?/,names:["id","suite","config","sessionConfig"],format:function(e){return e.sessionConfig!=null?"crypto:%d %s %s %s":"crypto:%d %s %s"}},{name:"setup",reg:/^setup:(\w*)/,format:"setup:%s"},{name:"connectionType",reg:/^connection:(new|existing)/,format:"connection:%s"},{name:"mid",reg:/^mid:([^\s]*)/,format:"mid:%s"},{name:"msid",reg:/^msid:(.*)/,format:"msid:%s"},{name:"ptime",reg:/^ptime:(\d*(?:\.\d*)*)/,format:"ptime:%d"},{name:"maxptime",reg:/^maxptime:(\d*(?:\.\d*)*)/,format:"maxptime:%d"},{name:"direction",reg:/^(sendrecv|recvonly|sendonly|inactive)/},{name:"icelite",reg:/^(ice-lite)/},{name:"iceUfrag",reg:/^ice-ufrag:(\S*)/,format:"ice-ufrag:%s"},{name:"icePwd",reg:/^ice-pwd:(\S*)/,format:"ice-pwd:%s"},{name:"fingerprint",reg:/^fingerprint:(\S*) (\S*)/,names:["type","hash"],format:"fingerprint:%s %s"},{push:"candidates",reg:/^candidate:(\S*) (\d*) (\S*) (\d*) (\S*) (\d*) typ (\S*)(?: raddr (\S*) rport (\d*))?(?: tcptype (\S*))?(?: generation (\d*))?(?: network-id (\d*))?(?: network-cost (\d*))?/,names:["foundation","component","transport","priority","ip","port","type","raddr","rport","tcptype","generation","network-id","network-cost"],format:function(e){var n="candidate:%s %d %s %d %s %d typ %s";return n+=e.raddr!=null?" raddr %s rport %d":"%v%v",n+=e.tcptype!=null?" tcptype %s":"%v",e.generation!=null&&(n+=" generation %d"),n+=e["network-id"]!=null?" network-id %d":"%v",n+=e["network-cost"]!=null?" network-cost %d":"%v",n}},{name:"endOfCandidates",reg:/^(end-of-candidates)/},{name:"remoteCandidates",reg:/^remote-candidates:(.*)/,format:"remote-candidates:%s"},{name:"iceOptions",reg:/^ice-options:(\S*)/,format:"ice-options:%s"},{push:"ssrcs",reg:/^ssrc:(\d*) ([\w_-]*)(?::(.*))?/,names:["id","attribute","value"],format:function(e){var n="ssrc:%d";return e.attribute!=null&&(n+=" %s",e.value!=null&&(n+=":%s")),n}},{push:"ssrcGroups",reg:/^ssrc-group:([\x21\x23\x24\x25\x26\x27\x2A\x2B\x2D\x2E\w]*) (.*)/,names:["semantics","ssrcs"],format:"ssrc-group:%s %s"},{name:"msidSemantic",reg:/^msid-semantic:\s?(\w*) (\S*)/,names:["semantic","token"],format:"msid-semantic: %s %s"},{push:"groups",reg:/^group:(\w*) (.*)/,names:["type","mids"],format:"group:%s %s"},{name:"rtcpMux",reg:/^(rtcp-mux)/},{name:"rtcpRsize",reg:/^(rtcp-rsize)/},{name:"sctpmap",reg:/^sctpmap:([\w_/]*) (\S*)(?: (\S*))?/,names:["sctpmapNumber","app","maxMessageSize"],format:function(e){return e.maxMessageSize!=null?"sctpmap:%s %s %s":"sctpmap:%s %s"}},{name:"xGoogleFlag",reg:/^x-google-flag:([^\s]*)/,format:"x-google-flag:%s"},{push:"rids",reg:/^rid:([\d\w]+) (\w+)(?: ([\S| ]*))?/,names:["id","direction","params"],format:function(e){return e.params?"rid:%s %s %s":"rid:%s %s"}},{push:"imageattrs",reg:new RegExp("^imageattr:(\\d+|\\*)[\\s\\t]+(send|recv)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*)(?:[\\s\\t]+(recv|send)[\\s\\t]+(\\*|\\[\\S+\\](?:[\\s\\t]+\\[\\S+\\])*))?"),names:["pt","dir1","attrs1","dir2","attrs2"],format:function(e){return"imageattr:%s %s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast",reg:new RegExp("^simulcast:(send|recv) ([a-zA-Z0-9\\-_~;,]+)(?:\\s?(send|recv) ([a-zA-Z0-9\\-_~;,]+))?$"),names:["dir1","list1","dir2","list2"],format:function(e){return"simulcast:%s %s"+(e.dir2?" %s %s":"")}},{name:"simulcast_03",reg:/^simulcast:[\s\t]+([\S+\s\t]+)$/,names:["value"],format:"simulcast: %s"},{name:"framerate",reg:/^framerate:(\d+(?:$|\.\d+))/,format:"framerate:%s"},{name:"sourceFilter",reg:/^source-filter: *(excl|incl) (\S*) (IP4|IP6|\*) (\S*) (.*)/,names:["filterMode","netType","addressTypes","destAddress","srcList"],format:"source-filter: %s %s %s %s %s"},{name:"bundleOnly",reg:/^(bundle-only)/},{name:"label",reg:/^label:(.+)/,format:"label:%s"},{name:"sctpPort",reg:/^sctp-port:(\d+)$/,format:"sctp-port:%s"},{name:"maxMessageSize",reg:/^max-message-size:(\d+)$/,format:"max-message-size:%s"},{push:"tsRefClocks",reg:/^ts-refclk:([^\s=]*)(?:=(\S*))?/,names:["clksrc","clksrcExt"],format:function(e){return"ts-refclk:%s"+(e.clksrcExt!=null?"=%s":"")}},{name:"mediaClk",reg:/^mediaclk:(?:id=(\S*))? *([^\s=]*)(?:=(\S*))?(?: *rate=(\d+)\/(\d+))?/,names:["id","mediaClockName","mediaClockValue","rateNumerator","rateDenominator"],format:function(e){var n="mediaclk:";return n+=e.id!=null?"id=%s %s":"%v%s",n+=e.mediaClockValue!=null?"=%s":"",n+=e.rateNumerator!=null?" rate=%s":"",n+=e.rateDenominator!=null?"/%s":"",n}},{name:"keywords",reg:/^keywds:(.+)$/,format:"keywds:%s"},{name:"content",reg:/^content:(.+)/,format:"content:%s"},{name:"bfcpFloorCtrl",reg:/^floorctrl:(c-only|s-only|c-s)/,format:"floorctrl:%s"},{name:"bfcpConfId",reg:/^confid:(\d+)/,format:"confid:%s"},{name:"bfcpUserId",reg:/^userid:(\d+)/,format:"userid:%s"},{name:"bfcpFloorId",reg:/^floorid:(.+) (?:m-stream|mstrm):(.+)/,names:["id","mStream"],format:"floorid:%s mstrm:%s"},{push:"invalid",names:["value"]}]};return Object.keys(t).forEach(function(e){var n=t[e];n.forEach(function(i){i.reg||(i.reg=/(.*)/),i.format||(i.format="%s")})}),Df.exports}var YS;function cB(){return YS||(YS=1,(function(t){var e=function(c){return String(Number(c))===c?Number(c):c},n=function(c,d,h,f){if(f&&!h)d[f]=e(c[1]);else for(var m=0;m<h.length;m+=1)c[m+1]!=null&&(d[h[m]]=e(c[m+1]))},i=function(c,d,h){var f=c.name&&c.names;c.push&&!d[c.push]?d[c.push]=[]:f&&!d[c.name]&&(d[c.name]={});var m=c.push?{}:f?d[c.name]:d;n(h.match(c.reg),m,c.names,c.name),c.push&&d[c.push].push(m)},r=fg(),o=RegExp.prototype.test.bind(/^([a-z])=(.*)/);t.parse=function(c){var d={},h=[],f=d;return c.split(/(\r\n|\r|\n)/).filter(o).forEach(function(m){var v=m[0],S=m.slice(2);v==="m"&&(h.push({rtp:[],fmtp:[]}),f=h[h.length-1]);for(var k=0;k<(r[v]||[]).length;k+=1){var b=r[v][k];if(b.reg.test(S))return i(b,f,S)}}),d.media=h,d};var l=function(c,d){var h=d.split(/=(.+)/,2);return h.length===2?c[h[0]]=e(h[1]):h.length===1&&d.length>1&&(c[h[0]]=void 0),c};t.parseParams=function(c){return c.split(/;\s?/).reduce(l,{})},t.parseFmtpConfig=t.parseParams,t.parsePayloads=function(c){return c.toString().split(" ").map(Number)},t.parseRemoteCandidates=function(c){for(var d=[],h=c.split(" ").map(e),f=0;f<h.length;f+=3)d.push({component:h[f],ip:h[f+1],port:h[f+2]});return d},t.parseImageAttributes=function(c){return c.split(" ").map(function(d){return d.substring(1,d.length-1).split(",").reduce(l,{})})},t.parseSimulcastStreamList=function(c){return c.split(";").map(function(d){return d.split(",").map(function(h){var f,m=!1;return h[0]!=="~"?f=e(h):(f=e(h.substring(1,h.length)),m=!0),{scid:f,paused:m}})})}})(Nf)),Nf}var Of,JS;function uB(){if(JS)return Of;JS=1;var t=fg(),e=/%[sdv%]/g,n=function(l){var c=1,d=arguments,h=d.length;return l.replace(e,function(f){if(c>=h)return f;var m=d[c];switch(c+=1,f){case"%%":return"%";case"%s":return String(m);case"%d":return Number(m);case"%v":return""}})},i=function(l,c,d){var h=c.format instanceof Function?c.format(c.push?d:d[c.name]):c.format,f=[l+"="+h];if(c.names)for(var m=0;m<c.names.length;m+=1){var v=c.names[m];c.name?f.push(d[c.name][v]):f.push(d[c.names[m]])}else f.push(d[c.name]);return n.apply(null,f)},r=["v","o","s","i","u","e","p","c","b","t","r","z","a"],o=["i","c","b","a"];return Of=function(l,c){c=c||{},l.version==null&&(l.version=0),l.name==null&&(l.name=" "),l.media.forEach(function(m){m.payloads==null&&(m.payloads="")});var d=c.outerOrder||r,h=c.innerOrder||o,f=[];return d.forEach(function(m){t[m].forEach(function(v){v.name in l&&l[v.name]!=null?f.push(i(m,v,l)):v.push in l&&l[v.push]!=null&&l[v.push].forEach(function(S){f.push(i(m,v,S))})})}),l.media.forEach(function(m){f.push(i("m",t.m[0],m)),h.forEach(function(v){t[v].forEach(function(S){S.name in m&&m[S.name]!=null?f.push(i(v,S,m)):S.push in m&&m[S.push]!=null&&m[S.push].forEach(function(k){f.push(i(v,S,k))})})})}),f.join(`\r
`)+`\r
`},Of}var QS;function dB(){if(QS)return Jn;QS=1;var t=cB(),e=uB(),n=fg();return Jn.grammar=n,Jn.write=e,Jn.parse=t.parse,Jn.parseParams=t.parseParams,Jn.parseFmtpConfig=t.parseFmtpConfig,Jn.parsePayloads=t.parsePayloads,Jn.parseRemoteCandidates=t.parseRemoteCandidates,Jn.parseImageAttributes=t.parseImageAttributes,Jn.parseSimulcastStreamList=t.parseSimulcastStreamList,Jn}var Ar=dB();function pg(t,e,n){var i,r,o;e===void 0&&(e=50),n===void 0&&(n={});var l=(i=n.isImmediate)!=null&&i,c=(r=n.callback)!=null&&r,d=n.maxWait,h=Date.now(),f=[];function m(){if(d!==void 0){var S=Date.now()-h;if(S+e>=d)return d-S}return e}var v=function(){var S=[].slice.call(arguments),k=this;return new Promise(function(b,C){var T=l&&o===void 0;if(o!==void 0&&clearTimeout(o),o=setTimeout(function(){if(o=void 0,h=Date.now(),!l){var R=t.apply(k,S);c&&c(R),f.forEach(function(P){return(0,P.resolve)(R)}),f=[]}},m()),T){var _=t.apply(k,S);return c&&c(_),b(_)}f.push({resolve:b,reject:C})})};return v.cancel=function(S){o!==void 0&&clearTimeout(o),f.forEach(function(k){return(0,k.reject)(S)}),f=[]},v}const hB=.7,fB=20,Po={NegotiationStarted:"negotiationStarted",NegotiationComplete:"negotiationComplete",RTPVideoPayloadTypes:"rtpVideoPayloadTypes"};class ZS extends Ei.EventEmitter{get pc(){return this._pc||(this._pc=this.createPC()),this._pc}constructor(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};var i;super(),this.log=Oe,this.ddExtID=0,this.latestOfferId=0,this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate=!1,this.trackBitrates=[],this.remoteStereoMids=[],this.remoteNackMids=[],this.negotiate=pg(r=>M(this,void 0,void 0,function*(){this.emit(Po.NegotiationStarted);try{yield this.createAndSendOffer()}catch(o){if(r)r(o);else throw o}}),fB),this.close=()=>{this._pc&&(this._pc.close(),this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc.onicegatheringstatechange=null,this._pc.ondatachannel=null,this._pc.onnegotiationneeded=null,this._pc.onsignalingstatechange=null,this._pc.onicecandidate=null,this._pc.ondatachannel=null,this._pc.ontrack=null,this._pc.onconnectionstatechange=null,this._pc.oniceconnectionstatechange=null,this._pc=null)},this.log=Ji((i=n.loggerName)!==null&&i!==void 0?i:oi.PCTransport),this.loggerOptions=n,this.config=e,this._pc=this.createPC(),this.offerLock=new nn}createPC(){const e=new RTCPeerConnection(this.config);return e.onicecandidate=n=>{var i;n.candidate&&((i=this.onIceCandidate)===null||i===void 0||i.call(this,n.candidate))},e.onicecandidateerror=n=>{var i;(i=this.onIceCandidateError)===null||i===void 0||i.call(this,n)},e.oniceconnectionstatechange=()=>{var n;(n=this.onIceConnectionStateChange)===null||n===void 0||n.call(this,e.iceConnectionState)},e.onsignalingstatechange=()=>{var n;(n=this.onSignalingStatechange)===null||n===void 0||n.call(this,e.signalingState)},e.onconnectionstatechange=()=>{var n;(n=this.onConnectionStateChange)===null||n===void 0||n.call(this,e.connectionState)},e.ondatachannel=n=>{var i;(i=this.onDataChannel)===null||i===void 0||i.call(this,n)},e.ontrack=n=>{var i;(i=this.onTrack)===null||i===void 0||i.call(this,n)},e}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isICEConnected(){return this._pc!==null&&(this.pc.iceConnectionState==="connected"||this.pc.iceConnectionState==="completed")}addIceCandidate(e){return M(this,void 0,void 0,function*(){if(this.pc.remoteDescription&&!this.restartingIce)return this.pc.addIceCandidate(e);this.pendingCandidates.push(e)})}setRemoteDescription(e,n){return M(this,void 0,void 0,function*(){var i;if(e.type==="answer"&&this.latestOfferId>0&&n>0&&n!==this.latestOfferId)return this.log.warn("ignoring answer for old offer",Object.assign(Object.assign({},this.logContext),{offerId:n,latestOfferId:this.latestOfferId})),!1;let r;if(e.type==="offer"){let{stereoMids:o,nackMids:l}=pB(e);this.remoteStereoMids=o,this.remoteNackMids=l}else if(e.type==="answer"){const o=Ar.parse((i=e.sdp)!==null&&i!==void 0?i:"");o.media.forEach(l=>{const c=mg(l.mid);l.type==="audio"&&this.trackBitrates.some(d=>{if(!d.transceiver||c!=d.transceiver.mid)return!1;let h=0;if(l.rtp.some(m=>m.codec.toUpperCase()===d.codec.toUpperCase()?(h=m.payload,!0):!1),h===0)return!0;let f=!1;for(const m of l.fmtp)if(m.payload===h){m.config=m.config.split(";").filter(v=>!v.includes("maxaveragebitrate")).join(";"),d.maxbr>0&&(m.config+=";maxaveragebitrate=".concat(d.maxbr*1e3)),f=!0;break}return f||d.maxbr>0&&l.fmtp.push({payload:h,config:"maxaveragebitrate=".concat(d.maxbr*1e3)}),!0})}),r=Ar.write(o)}return yield this.setMungedSDP(e,r,!0),this.pendingCandidates.forEach(o=>{this.pc.addIceCandidate(o)}),this.pendingCandidates=[],this.restartingIce=!1,this.renegotiate?(this.renegotiate=!1,yield this.createAndSendOffer()):e.type==="answer"&&(this.emit(Po.NegotiationComplete),e.sdp&&Ar.parse(e.sdp).media.forEach(l=>{l.type==="video"&&this.emit(Po.RTPVideoPayloadTypes,l.rtp)})),!0})}createAndSendOffer(e){return M(this,void 0,void 0,function*(){var n;const i=yield this.offerLock.lock();try{if(this.onOffer===void 0)return;if(e?.iceRestart&&(this.log.debug("restarting ICE",this.logContext),this.restartingIce=!0),this._pc&&this._pc.signalingState==="have-local-offer"){const c=this._pc.remoteDescription;if(e?.iceRestart&&c)yield this._pc.setRemoteDescription(c);else{this.renegotiate=!0;return}}else if(!this._pc||this._pc.signalingState==="closed"){this.log.warn("could not createOffer with closed peer connection",this.logContext);return}this.log.debug("starting to negotiate",this.logContext);const r=this.latestOfferId+1;this.latestOfferId=r;const o=yield this.pc.createOffer(e);this.log.debug("original offer",Object.assign({sdp:o.sdp},this.logContext));const l=Ar.parse((n=o.sdp)!==null&&n!==void 0?n:"");if(l.media.forEach(c=>{tk(c),c.type==="audio"?ek(c,["all"],[]):c.type==="video"&&this.trackBitrates.some(d=>{if(!c.msid||!d.cid||!c.msid.includes(d.cid))return!1;let h=0;if(c.rtp.some(m=>m.codec.toUpperCase()===d.codec.toUpperCase()?(h=m.payload,!0):!1),h===0||(gi(d.codec)&&!_s()&&this.ensureVideoDDExtensionForSVC(c,l),d.codec!=="av1"))return!0;const f=Math.round(d.maxbr*hB);for(const m of c.fmtp)if(m.payload===h){m.config.includes("x-google-start-bitrate")||(m.config+=";x-google-start-bitrate=".concat(f));break}return!0})}),this.latestOfferId>r){this.log.warn("latestOfferId mismatch",Object.assign(Object.assign({},this.logContext),{latestOfferId:this.latestOfferId,offerId:r}));return}yield this.setMungedSDP(o,Ar.write(l)),this.onOffer(o,this.latestOfferId)}finally{i()}})}createAndSetAnswer(){return M(this,void 0,void 0,function*(){var e;const n=yield this.pc.createAnswer(),i=Ar.parse((e=n.sdp)!==null&&e!==void 0?e:"");return i.media.forEach(r=>{tk(r),r.type==="audio"&&ek(r,this.remoteStereoMids,this.remoteNackMids)}),yield this.setMungedSDP(n,Ar.write(i)),n})}createDataChannel(e,n){return this.pc.createDataChannel(e,n)}addTransceiver(e,n){return this.pc.addTransceiver(e,n)}addTransceiverOfKind(e,n){return this.pc.addTransceiver(e,n)}addTrack(e){if(!this._pc)throw new Et("PC closed, cannot add track");return this._pc.addTrack(e)}setTrackCodecBitrate(e){this.trackBitrates.push(e)}setConfiguration(e){var n;if(!this._pc)throw new Et("PC closed, cannot configure");return(n=this._pc)===null||n===void 0?void 0:n.setConfiguration(e)}canRemoveTrack(){var e;return!!(!((e=this._pc)===null||e===void 0)&&e.removeTrack)}removeTrack(e){var n;return(n=this._pc)===null||n===void 0?void 0:n.removeTrack(e)}getConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.connectionState)!==null&&n!==void 0?n:"closed"}getICEConnectionState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.iceConnectionState)!==null&&n!==void 0?n:"closed"}getSignallingState(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.signalingState)!==null&&n!==void 0?n:"closed"}getTransceivers(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getTransceivers())!==null&&n!==void 0?n:[]}getSenders(){var e,n;return(n=(e=this._pc)===null||e===void 0?void 0:e.getSenders())!==null&&n!==void 0?n:[]}getLocalDescription(){var e;return(e=this._pc)===null||e===void 0?void 0:e.localDescription}getRemoteDescription(){var e;return(e=this.pc)===null||e===void 0?void 0:e.remoteDescription}getStats(){return this.pc.getStats()}getConnectedAddress(){return M(this,void 0,void 0,function*(){var e;if(!this._pc)return;let n="";const i=new Map,r=new Map;if((yield this._pc.getStats()).forEach(c=>{switch(c.type){case"transport":n=c.selectedCandidatePairId;break;case"candidate-pair":n===""&&c.selected&&(n=c.id),i.set(c.id,c);break;case"remote-candidate":r.set(c.id,"".concat(c.address,":").concat(c.port));break}}),n==="")return;const l=(e=i.get(n))===null||e===void 0?void 0:e.remoteCandidateId;if(l!==void 0)return r.get(l)})}setMungedSDP(e,n,i){return M(this,void 0,void 0,function*(){if(n){const r=e.sdp;e.sdp=n;try{this.log.debug("setting munged ".concat(i?"remote":"local"," description"),this.logContext),i?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e);return}catch(o){this.log.warn("not able to set ".concat(e.type,", falling back to unmodified sdp"),Object.assign(Object.assign({},this.logContext),{error:o,sdp:n})),e.sdp=r}}try{i?yield this.pc.setRemoteDescription(e):yield this.pc.setLocalDescription(e)}catch(r){let o="unknown error";r instanceof Error?o=r.message:typeof r=="string"&&(o=r);const l={error:o,sdp:e.sdp};throw!i&&this.pc.remoteDescription&&(l.remoteSdp=this.pc.remoteDescription),this.log.error("unable to set ".concat(e.type),Object.assign(Object.assign({},this.logContext),{fields:l})),new Dp(o)}})}ensureVideoDDExtensionForSVC(e,n){var i,r;if(!((i=e.ext)===null||i===void 0?void 0:i.some(l=>l.uri===jS))){if(this.ddExtID===0){let l=0;n.media.forEach(c=>{var d;c.type==="video"&&((d=c.ext)===null||d===void 0||d.forEach(h=>{h.value>l&&(l=h.value)}))}),this.ddExtID=l+1}(r=e.ext)===null||r===void 0||r.push({value:this.ddExtID,uri:jS})}}}function ek(t,e,n){const i=mg(t.mid);let r=0;t.rtp.some(o=>o.codec==="opus"?(r=o.payload,!0):!1),r>0&&(t.rtcpFb||(t.rtcpFb=[]),n.includes(i)&&!t.rtcpFb.some(o=>o.payload===r&&o.type==="nack")&&t.rtcpFb.push({payload:r,type:"nack"}),(e.includes(i)||e.length===1&&e[0]==="all")&&t.fmtp.some(o=>o.payload===r?(o.config.includes("stereo=1")||(o.config+=";stereo=1"),!0):!1))}function pB(t){var e;const n=[],i=[],r=Ar.parse((e=t.sdp)!==null&&e!==void 0?e:"");let o=0;return r.media.forEach(l=>{var c;const d=mg(l.mid);l.type==="audio"&&(l.rtp.some(h=>h.codec==="opus"?(o=h.payload,!0):!1),!((c=l.rtcpFb)===null||c===void 0)&&c.some(h=>h.payload===o&&h.type==="nack")&&i.push(d),l.fmtp.some(h=>h.payload===o?(h.config.includes("sprop-stereo=1")&&n.push(d),!0):!1))}),{stereoMids:n,nackMids:i}}function tk(t){if(t.connection){const e=t.connection.ip.indexOf(":")>=0;(t.connection.version===4&&e||t.connection.version===6&&!e)&&(t.connection.ip="0.0.0.0",t.connection.version=4)}}function mg(t){return typeof t=="number"?t.toFixed(0):t}const Hp="vp8",mB={audioPreset:Op.music,dtx:!0,red:!0,forceStereo:!1,simulcast:!0,screenShareEncoding:ug.h1080fps15.encoding,stopMicTrackOnMute:!1,videoCodec:Hp,backupCodec:!0,preConnectBuffer:!1},PE={deviceId:{ideal:"default"},autoGainControl:!0,echoCancellation:!0,noiseSuppression:!0,voiceIsolation:!0},RE={deviceId:{ideal:"default"},resolution:ll.h720.resolution},gB={adaptiveStream:!1,dynacast:!1,stopLocalTrackOnUnpublish:!0,reconnectPolicy:new X3,disconnectOnPageLeave:!0,webAudioMix:!1,singlePeerConnection:!1},gg={autoSubscribe:!0,maxRetries:1,peerConnectionTimeout:15e3,websocketTimeout:15e3};var ct;(function(t){t[t.NEW=0]="NEW",t[t.CONNECTING=1]="CONNECTING",t[t.CONNECTED=2]="CONNECTED",t[t.FAILED=3]="FAILED",t[t.CLOSING=4]="CLOSING",t[t.CLOSED=5]="CLOSED"})(ct||(ct={}));class vB{get needsPublisher(){return this.isPublisherConnectionRequired}get needsSubscriber(){return this.isSubscriberConnectionRequired}get currentState(){return this.state}constructor(e,n,i){var r;this.peerConnectionTimeout=gg.peerConnectionTimeout,this.log=Oe,this.updateState=()=>{var o,l;const c=this.state,d=this.requiredTransports.map(h=>h.getConnectionState());d.every(h=>h==="connected")?this.state=ct.CONNECTED:d.some(h=>h==="failed")?this.state=ct.FAILED:d.some(h=>h==="connecting")?this.state=ct.CONNECTING:d.every(h=>h==="closed")?this.state=ct.CLOSED:d.some(h=>h==="closed")?this.state=ct.CLOSING:d.every(h=>h==="new")&&(this.state=ct.NEW),c!==this.state&&(this.log.debug("pc state change: from ".concat(ct[c]," to ").concat(ct[this.state]),this.logContext),(o=this.onStateChange)===null||o===void 0||o.call(this,this.state,this.publisher.getConnectionState(),(l=this.subscriber)===null||l===void 0?void 0:l.getConnectionState()))},this.log=Ji((r=i.loggerName)!==null&&r!==void 0?r:oi.PCManager),this.loggerOptions=i,this.isPublisherConnectionRequired=n!=="subscriber-primary",this.isSubscriberConnectionRequired=n==="subscriber-primary",this.publisher=new ZS(e,i),n!=="publisher-only"&&(this.subscriber=new ZS(e,i),this.subscriber.onConnectionStateChange=this.updateState,this.subscriber.onIceConnectionStateChange=this.updateState,this.subscriber.onSignalingStatechange=this.updateState,this.subscriber.onIceCandidate=o=>{var l;(l=this.onIceCandidate)===null||l===void 0||l.call(this,o,ni.SUBSCRIBER)},this.subscriber.onDataChannel=o=>{var l;(l=this.onDataChannel)===null||l===void 0||l.call(this,o)},this.subscriber.onTrack=o=>{var l;(l=this.onTrack)===null||l===void 0||l.call(this,o)}),this.publisher.onConnectionStateChange=this.updateState,this.publisher.onIceConnectionStateChange=this.updateState,this.publisher.onSignalingStatechange=this.updateState,this.publisher.onIceCandidate=o=>{var l;(l=this.onIceCandidate)===null||l===void 0||l.call(this,o,ni.PUBLISHER)},this.publisher.onTrack=o=>{var l;(l=this.onTrack)===null||l===void 0||l.call(this,o)},this.publisher.onOffer=(o,l)=>{var c;(c=this.onPublisherOffer)===null||c===void 0||c.call(this,o,l)},this.state=ct.NEW,this.connectionLock=new nn,this.remoteOfferLock=new nn}get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions).loggerContextCb)===null||n===void 0?void 0:n.call(e))}requirePublisher(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.isPublisherConnectionRequired=e,this.updateState()}createAndSendPublisherOffer(e){return this.publisher.createAndSendOffer(e)}setPublisherAnswer(e,n){return this.publisher.setRemoteDescription(e,n)}removeTrack(e){return this.publisher.removeTrack(e)}close(){return M(this,void 0,void 0,function*(){var e;if(this.publisher&&this.publisher.getSignallingState()!=="closed"){const n=this.publisher;for(const i of n.getSenders())try{n.canRemoveTrack()&&n.removeTrack(i)}catch(r){this.log.warn("could not removeTrack",Object.assign(Object.assign({},this.logContext),{error:r}))}}yield Promise.all([this.publisher.close(),(e=this.subscriber)===null||e===void 0?void 0:e.close()]),this.updateState()})}triggerIceRestart(){return M(this,void 0,void 0,function*(){this.subscriber&&(this.subscriber.restartingIce=!0),this.needsPublisher&&(yield this.createAndSendPublisherOffer({iceRestart:!0}))})}addIceCandidate(e,n){return M(this,void 0,void 0,function*(){var i;n===ni.PUBLISHER?yield this.publisher.addIceCandidate(e):yield(i=this.subscriber)===null||i===void 0?void 0:i.addIceCandidate(e)})}createSubscriberAnswerFromOffer(e,n){return M(this,void 0,void 0,function*(){var i,r,o;this.log.debug("received server offer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,signalingState:(i=this.subscriber)===null||i===void 0?void 0:i.getSignallingState().toString()}));const l=yield this.remoteOfferLock.lock();try{return(yield(r=this.subscriber)===null||r===void 0?void 0:r.setRemoteDescription(e,n))?yield(o=this.subscriber)===null||o===void 0?void 0:o.createAndSetAnswer():void 0}finally{l()}})}updateConfiguration(e,n){var i;this.publisher.setConfiguration(e),(i=this.subscriber)===null||i===void 0||i.setConfiguration(e),n&&this.triggerIceRestart()}ensurePCTransportConnection(e,n){return M(this,void 0,void 0,function*(){var i;const r=yield this.connectionLock.lock();try{this.isPublisherConnectionRequired&&this.publisher.getConnectionState()!=="connected"&&this.publisher.getConnectionState()!=="connecting"&&(this.log.debug("negotiation required, start negotiating",this.logContext),this.publisher.negotiate()),yield Promise.all((i=this.requiredTransports)===null||i===void 0?void 0:i.map(o=>this.ensureTransportConnected(o,e,n)))}finally{r()}})}negotiate(e){return M(this,void 0,void 0,function*(){return new Promise((n,i)=>M(this,void 0,void 0,function*(){const r=setTimeout(()=>{i("negotiation timed out")},this.peerConnectionTimeout),o=()=>{clearTimeout(r),i("negotiation aborted")};e.signal.addEventListener("abort",o),this.publisher.once(Po.NegotiationStarted,()=>{e.signal.aborted||this.publisher.once(Po.NegotiationComplete,()=>{clearTimeout(r),n()})}),yield this.publisher.negotiate(l=>{clearTimeout(r),i(l)})}))})}addPublisherTransceiver(e,n){return this.publisher.addTransceiver(e,n)}addPublisherTransceiverOfKind(e,n){return this.publisher.addTransceiverOfKind(e,n)}getMidForReceiver(e){const i=(this.subscriber?this.subscriber.getTransceivers():this.publisher.getTransceivers()).find(r=>r.receiver===e);return i?.mid}addPublisherTrack(e){return this.publisher.addTrack(e)}createPublisherDataChannel(e,n){return this.publisher.createDataChannel(e,n)}getConnectedAddress(e){return e===ni.PUBLISHER?this.publisher.getConnectedAddress():e===ni.SUBSCRIBER?this.publisher.getConnectedAddress():this.requiredTransports[0].getConnectedAddress()}get requiredTransports(){const e=[];return this.isPublisherConnectionRequired&&e.push(this.publisher),this.isSubscriberConnectionRequired&&this.subscriber&&e.push(this.subscriber),e}ensureTransportConnected(e,n){return M(this,arguments,void 0,function(i,r){var o=this;let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.peerConnectionTimeout;return(function*(){if(i.getConnectionState()!=="connected")return new Promise((d,h)=>M(o,void 0,void 0,function*(){const f=()=>{this.log.warn("abort transport connection",this.logContext),Bt.clearTimeout(m),h(new He("room connection has been cancelled",Be.Cancelled))};r?.signal.aborted&&f(),r?.signal.addEventListener("abort",f);const m=Bt.setTimeout(()=>{r?.signal.removeEventListener("abort",f),h(new He("could not establish pc connection",Be.InternalError))},l);for(;this.state!==ct.CONNECTED;)if(yield rn(50),r?.signal.aborted){h(new He("room connection has been cancelled",Be.Cancelled));return}Bt.clearTimeout(m),r?.signal.removeEventListener("abort",f),d()}))})()})}}const _E=5e3;class Pt{static fetchRegionSettings(e,n,i){return M(this,void 0,void 0,function*(){const r=yield Pt.fetchLock.lock();try{const o=yield fetch("".concat(yB(e),"/regions"),{headers:{authorization:"Bearer ".concat(n)},signal:i});if(o.ok){const l=zU(o.headers),c=l?l*1e3:_E;return{regionSettings:yield o.json(),updatedAtInMs:Date.now(),maxAgeInMs:c}}else throw new He("Could not fetch region settings: ".concat(o.statusText),o.status===401?Be.NotAllowed:Be.InternalError,o.status)}finally{r()}})}static scheduleRefetch(e,n,i){return M(this,void 0,void 0,function*(){const r=Pt.settingsTimeouts.get(e.hostname);clearTimeout(r),Pt.settingsTimeouts.set(e.hostname,setTimeout(()=>M(this,void 0,void 0,function*(){try{const o=yield Pt.fetchRegionSettings(e,n);Pt.updateCachedRegionSettings(e,n,o)}catch(o){Oe.debug("auto refetching of region settings failed",{error:o}),Pt.scheduleRefetch(e,n,i)}}),i))})}static updateCachedRegionSettings(e,n,i){Pt.cache.set(e.hostname,i),Pt.scheduleRefetch(e,n,i.maxAgeInMs)}constructor(e,n){this.attemptedRegions=[],this.serverUrl=new URL(e),this.token=n}updateToken(e){this.token=e}isCloud(){return Bp(this.serverUrl)}getServerUrl(){return this.serverUrl}fetchRegionSettings(e){return M(this,void 0,void 0,function*(){return Pt.fetchRegionSettings(this.serverUrl,this.token,e)})}getNextBestRegionUrl(e){return M(this,void 0,void 0,function*(){if(!this.isCloud())throw Error("region availability is only supported for LiveKit Cloud domains");let n=Pt.cache.get(this.serverUrl.hostname);(!n||Date.now()-n.updatedAtInMs>n.maxAgeInMs)&&(n=yield this.fetchRegionSettings(e),Pt.updateCachedRegionSettings(this.serverUrl,this.token,n));const i=n.regionSettings.regions.filter(r=>!this.attemptedRegions.find(o=>o.url===r.url));if(i.length>0){const r=i[0];return this.attemptedRegions.push(r),Oe.debug("next region: ".concat(r.region)),r.url}else return null})}resetAttempts(){this.attemptedRegions=[]}setServerReportedRegions(e){Pt.updateCachedRegionSettings(this.serverUrl,this.token,e)}}Pt.cache=new Map;Pt.settingsTimeouts=new Map;Pt.fetchLock=new nn;function yB(t){return"".concat(t.protocol.replace("ws","http"),"//").concat(t.host,"/settings")}class dt extends Error{constructor(e,n,i){super(n),this.code=e,this.message=nk(n,dt.MAX_MESSAGE_BYTES),this.data=i?nk(i,dt.MAX_DATA_BYTES):void 0}static fromProto(e){return new dt(e.code,e.message,e.data)}toProto(){return new kx({code:this.code,message:this.message,data:this.data})}static builtIn(e,n){return new dt(dt.ErrorCode[e],dt.ErrorMessage[e],n)}}dt.MAX_MESSAGE_BYTES=256;dt.MAX_DATA_BYTES=15360;dt.ErrorCode={APPLICATION_ERROR:1500,CONNECTION_TIMEOUT:1501,RESPONSE_TIMEOUT:1502,RECIPIENT_DISCONNECTED:1503,RESPONSE_PAYLOAD_TOO_LARGE:1504,SEND_FAILED:1505,UNSUPPORTED_METHOD:1400,RECIPIENT_NOT_FOUND:1401,REQUEST_PAYLOAD_TOO_LARGE:1402,UNSUPPORTED_SERVER:1403,UNSUPPORTED_VERSION:1404};dt.ErrorMessage={APPLICATION_ERROR:"Application error in method handler",CONNECTION_TIMEOUT:"Connection timeout",RESPONSE_TIMEOUT:"Response timeout",RECIPIENT_DISCONNECTED:"Recipient disconnected",RESPONSE_PAYLOAD_TOO_LARGE:"Response payload too large",SEND_FAILED:"Failed to send",UNSUPPORTED_METHOD:"Method not supported at destination",RECIPIENT_NOT_FOUND:"Recipient not found",REQUEST_PAYLOAD_TOO_LARGE:"Request payload too large",UNSUPPORTED_SERVER:"RPC not supported by server",UNSUPPORTED_VERSION:"Unsupported RPC version"};const IE=15360;function vg(t){return new TextEncoder().encode(t).length}function nk(t,e){if(vg(t)<=e)return t;let n=0,i=t.length;const r=new TextEncoder;for(;n<i;){const o=Math.floor((n+i+1)/2);r.encode(t.slice(0,o)).length<=e?n=o:i=o-1}return t.slice(0,n)}const yg=2e3;function od(t,e){if(!e)return 0;let n,i;return"bytesReceived"in t?(n=t.bytesReceived,i=e.bytesReceived):"bytesSent"in t&&(n=t.bytesSent,i=e.bytesSent),n===void 0||i===void 0||t.timestamp===void 0||e.timestamp===void 0?0:(n-i)*8*1e3/(t.timestamp-e.timestamp)}const bg=typeof MediaRecorder<"u";class bB{constructor(){throw new Error("MediaRecorder is not available in this environment")}}const SB=bg?MediaRecorder:bB;class kB extends SB{constructor(e,n){if(!bg)throw new Error("MediaRecorder is not available in this environment");super(new MediaStream([e.mediaStreamTrack]),n);let i,r;const o=()=>r===void 0,l=()=>{this.removeEventListener("dataavailable",i),this.removeEventListener("stop",l),this.removeEventListener("error",c),r?.close(),r=void 0},c=d=>{r?.error(d),this.removeEventListener("dataavailable",i),this.removeEventListener("stop",l),this.removeEventListener("error",c),r=void 0};this.byteStream=new ReadableStream({start:d=>{r=d,i=h=>M(this,void 0,void 0,function*(){let f;if(h.data.arrayBuffer){const m=yield h.data.arrayBuffer();f=new Uint8Array(m)}else if(h.data.byteArray)f=h.data.byteArray;else throw new Error("no data available!");o()||d.enqueue(f)}),this.addEventListener("dataavailable",i)},cancel:()=>{l()}}),this.addEventListener("stop",l),this.addEventListener("error",c)}}function CB(){return bg}const TB=1e3,wB=1e4;class AE extends K{get sender(){return this._sender}set sender(e){this._sender=e}get constraints(){return this._constraints}get hasPreConnectBuffer(){return!!this.localTrackRecorder}constructor(e,n,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,o=arguments.length>4?arguments[4]:void 0;super(e,n,o),this.manuallyStopped=!1,this._isUpstreamPaused=!1,this.handleTrackMuteEvent=()=>this.debouncedTrackMuteHandler().catch(()=>this.log.debug("track mute bounce got cancelled by an unmute event",this.logContext)),this.debouncedTrackMuteHandler=pg(()=>M(this,void 0,void 0,function*(){yield this.pauseUpstream()}),5e3),this.handleTrackUnmuteEvent=()=>M(this,void 0,void 0,function*(){this.debouncedTrackMuteHandler.cancel("unmute"),yield this.resumeUpstream()}),this.handleEnded=()=>{this.isInBackground&&(this.reacquireTrack=!0),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),this.emit(le.Ended,this)},this.reacquireTrack=!1,this.providedByUser=r,this.muteLock=new nn,this.pauseUpstreamLock=new nn,this.trackChangeLock=new nn,this.trackChangeLock.lock().then(l=>M(this,void 0,void 0,function*(){try{yield this.setMediaStreamTrack(e,!0)}finally{l()}})),this._constraints=e.getConstraints(),i&&(this._constraints=i)}get id(){return this._mediaStreamTrack.id}get dimensions(){if(this.kind!==K.Kind.Video)return;const{width:e,height:n}=this._mediaStreamTrack.getSettings();if(e&&n)return{width:e,height:n}}get isUpstreamPaused(){return this._isUpstreamPaused}get isUserProvided(){return this.providedByUser}get mediaStreamTrack(){var e,n;return(n=(e=this.processor)===null||e===void 0?void 0:e.processedTrack)!==null&&n!==void 0?n:this._mediaStreamTrack}get isLocal(){return!0}getSourceTrackSettings(){return this._mediaStreamTrack.getSettings()}setMediaStreamTrack(e,n){return M(this,void 0,void 0,function*(){var i;if(e===this._mediaStreamTrack&&!n)return;this._mediaStreamTrack&&(this.attachedElements.forEach(o=>{xo(this._mediaStreamTrack,o)}),this.debouncedTrackMuteHandler.cancel("new-track"),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent)),this.mediaStream=new MediaStream([e]),e&&(e.addEventListener("ended",this.handleEnded),e.addEventListener("mute",this.handleTrackMuteEvent),e.addEventListener("unmute",this.handleTrackUnmuteEvent),this._constraints=e.getConstraints());let r;if(this.processor&&e){if(this.log.debug("restarting processor",this.logContext),this.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");this.processorElement&&(vo(e,this.processorElement),this.processorElement.muted=!0),yield this.processor.restart({track:e,kind:this.kind,element:this.processorElement}),r=this.processor.processedTrack}this.sender&&((i=this.sender.transport)===null||i===void 0?void 0:i.state)!=="closed"&&(yield this.sender.replaceTrack(r??e)),!this.providedByUser&&this._mediaStreamTrack!==e&&this._mediaStreamTrack.stop(),this._mediaStreamTrack=e,e&&(this._mediaStreamTrack.enabled=!this.isMuted,yield this.resumeUpstream(),this.attachedElements.forEach(o=>{vo(r??e,o)}))})}waitForDimensions(){return M(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:TB;return(function*(){var i;if(e.kind===K.Kind.Audio)throw new Error("cannot get dimensions for audio tracks");((i=gn())===null||i===void 0?void 0:i.os)==="iOS"&&(yield rn(10));const r=Date.now();for(;Date.now()-r<n;){const o=e.dimensions;if(o)return o;yield rn(50)}throw new Hi("unable to get track dimensions after timeout")})()})}setDeviceId(e){return M(this,void 0,void 0,function*(){return this._constraints.deviceId===e&&this._mediaStreamTrack.getSettings().deviceId===Fr(e)||(this._constraints.deviceId=e,this.isMuted)?!0:(yield this.restartTrack(),Fr(e)===this._mediaStreamTrack.getSettings().deviceId)})}getDeviceId(){return M(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){if(e.source===K.Source.ScreenShare)return;const{deviceId:i,groupId:r}=e._mediaStreamTrack.getSettings(),o=e.kind===K.Kind.Audio?"audioinput":"videoinput";return n?Dt.getInstance().normalizeDeviceId(o,i,r):i})()})}mute(){return M(this,void 0,void 0,function*(){return this.setTrackMuted(!0),this})}unmute(){return M(this,void 0,void 0,function*(){return this.setTrackMuted(!1),this})}replaceTrack(e,n){return M(this,void 0,void 0,function*(){const i=yield this.trackChangeLock.lock();try{if(!this.sender)throw new Hi("unable to replace an unpublished track");let r,o;return typeof n=="boolean"?r=n:n!==void 0&&(r=n.userProvidedTrack,o=n.stopProcessor),this.providedByUser=r??!0,this.log.debug("replace MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(e),o&&this.processor&&(yield this.internalStopProcessor()),this}finally{i()}})}restart(e){return M(this,void 0,void 0,function*(){this.manuallyStopped=!1;const n=yield this.trackChangeLock.lock();try{e||(e=this._constraints);const{deviceId:i,facingMode:r}=e,o=Y3(e,["deviceId","facingMode"]);this.log.debug("restarting track with constraints",Object.assign(Object.assign({},this.logContext),{constraints:e}));const l={audio:!1,video:!1};this.kind===K.Kind.Video?l.video=i||r?{deviceId:i,facingMode:r}:!0:l.audio=i?Object.assign({deviceId:i},o):!0,this.attachedElements.forEach(h=>{xo(this.mediaStreamTrack,h)}),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.stop();const d=(yield navigator.mediaDevices.getUserMedia(l)).getTracks()[0];return this.kind===K.Kind.Video&&(yield d.applyConstraints(o)),d.addEventListener("ended",this.handleEnded),this.log.debug("re-acquired MediaStreamTrack",this.logContext),yield this.setMediaStreamTrack(d),this._constraints=e,this.emit(le.Restarted,this),this.manuallyStopped&&(this.log.warn("track was stopped during a restart, stopping restarted track",this.logContext),this.stop()),this}finally{n()}})}setTrackMuted(e){this.log.debug("setting ".concat(this.kind," track ").concat(e?"muted":"unmuted"),this.logContext),!(this.isMuted===e&&this._mediaStreamTrack.enabled!==e)&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?le.Muted:le.Unmuted,this))}get needsReAcquisition(){return this._mediaStreamTrack.readyState!=="live"||this._mediaStreamTrack.muted||!this._mediaStreamTrack.enabled||this.reacquireTrack}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return M(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),bE()&&(this.log.debug("visibility changed, is in Background: ".concat(this.isInBackground),this.logContext),!this.isInBackground&&this.needsReAcquisition&&!this.isUserProvided&&!this.isMuted&&(this.log.debug("track needs to be reacquired, restarting ".concat(this.source),this.logContext),yield this.restart(),this.reacquireTrack=!1))})}stop(){var e;this.manuallyStopped=!0,super.stop(),this._mediaStreamTrack.removeEventListener("ended",this.handleEnded),this._mediaStreamTrack.removeEventListener("mute",this.handleTrackMuteEvent),this._mediaStreamTrack.removeEventListener("unmute",this.handleTrackUnmuteEvent),(e=this.processor)===null||e===void 0||e.destroy(),this.processor=void 0}pauseUpstream(){return M(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!0)return;if(!this.sender){this.log.warn("unable to pause upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!0,this.emit(le.UpstreamPaused,this);const i=gn();if(i?.name==="Safari"&&wi(i.version,"12.0")<0)throw new cg("pauseUpstream is not supported on Safari < 12.");((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(null))}finally{n()}})}resumeUpstream(){return M(this,void 0,void 0,function*(){var e;const n=yield this.pauseUpstreamLock.lock();try{if(this._isUpstreamPaused===!1)return;if(!this.sender){this.log.warn("unable to resume upstream for an unpublished track",this.logContext);return}this._isUpstreamPaused=!1,this.emit(le.UpstreamResumed,this),((e=this.sender.transport)===null||e===void 0?void 0:e.state)!=="closed"&&(yield this.sender.replaceTrack(this.mediaStreamTrack))}finally{n()}})}getRTCStatsReport(){return M(this,void 0,void 0,function*(){var e;return!((e=this.sender)===null||e===void 0)&&e.getStats?yield this.sender.getStats():void 0})}setProcessor(e){return M(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){var o;const l=yield i.trackChangeLock.lock();try{i.log.debug("setting up processor",i.logContext);const c=document.createElement(i.kind),d={kind:i.kind,track:i._mediaStreamTrack,element:c,audioContext:i.audioContext};if(yield n.init(d),i.log.debug("processor initialized",i.logContext),i.processor&&(yield i.internalStopProcessor()),i.kind==="unknown")throw TypeError("cannot set processor on track of unknown kind");if(vo(i._mediaStreamTrack,c),c.muted=!0,c.play().catch(h=>{h instanceof DOMException&&h.name==="AbortError"?(i.log.warn("failed to play processor element, retrying",Object.assign(Object.assign({},i.logContext),{error:h})),setTimeout(()=>{c.play().catch(f=>{i.log.error("failed to play processor element",Object.assign(Object.assign({},i.logContext),{err:f}))})},100)):i.log.error("failed to play processor element",Object.assign(Object.assign({},i.logContext),{error:h}))}),i.processor=n,i.processorElement=c,i.processor.processedTrack){for(const h of i.attachedElements)h!==i.processorElement&&r&&(xo(i._mediaStreamTrack,h),vo(i.processor.processedTrack,h));yield(o=i.sender)===null||o===void 0?void 0:o.replaceTrack(i.processor.processedTrack)}i.emit(le.TrackProcessorUpdate,i.processor)}finally{l()}})()})}getProcessor(){return this.processor}stopProcessor(){return M(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){const i=yield e.trackChangeLock.lock();try{yield e.internalStopProcessor(n)}finally{i()}})()})}internalStopProcessor(){return M(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){var i,r;e.processor&&(e.log.debug("stopping processor",e.logContext),(i=e.processor.processedTrack)===null||i===void 0||i.stop(),yield e.processor.destroy(),e.processor=void 0,n||((r=e.processorElement)===null||r===void 0||r.remove(),e.processorElement=void 0),yield e._mediaStreamTrack.applyConstraints(e._constraints),yield e.setMediaStreamTrack(e._mediaStreamTrack,!0),e.emit(le.TrackProcessorUpdate))})()})}startPreConnectBuffer(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100;if(!CB()){this.log.warn("MediaRecorder is not available, cannot start preconnect buffer",this.logContext);return}if(this.localTrackRecorder){this.log.warn("preconnect buffer already started");return}else{let n="audio/webm;codecs=opus";MediaRecorder.isTypeSupported(n)||(n="video/mp4"),this.localTrackRecorder=new kB(this,{mimeType:n})}this.localTrackRecorder.start(e),this.autoStopPreConnectBuffer=setTimeout(()=>{this.log.warn("preconnect buffer timed out, stopping recording automatically",this.logContext),this.stopPreConnectBuffer()},wB)}stopPreConnectBuffer(){clearTimeout(this.autoStopPreConnectBuffer),this.localTrackRecorder&&(this.localTrackRecorder.stop(),this.localTrackRecorder=void 0)}getPreConnectBuffer(){var e;return(e=this.localTrackRecorder)===null||e===void 0?void 0:e.byteStream}getPreConnectBufferMimeType(){var e;return(e=this.localTrackRecorder)===null||e===void 0?void 0:e.mimeType}}class Mu extends AE{get enhancedNoiseCancellation(){return this.isKrispNoiseFilterEnabled}constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=arguments.length>3?arguments[3]:void 0,o=arguments.length>4?arguments[4]:void 0;super(e,K.Kind.Audio,n,i,o),this.stopOnMute=!1,this.isKrispNoiseFilterEnabled=!1,this.monitorSender=()=>M(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let l;try{l=yield this.getSenderStats()}catch(c){this.log.error("could not get audio sender stats",Object.assign(Object.assign({},this.logContext),{error:c}));return}l&&this.prevStats&&(this._currentBitrate=od(l,this.prevStats)),this.prevStats=l}),this.handleKrispNoiseFilterEnable=()=>{this.isKrispNoiseFilterEnabled=!0,this.log.debug("Krisp noise filter enabled",this.logContext),this.emit(le.AudioTrackFeatureUpdate,this,Nt.TF_ENHANCED_NOISE_CANCELLATION,!0)},this.handleKrispNoiseFilterDisable=()=>{this.isKrispNoiseFilterEnabled=!1,this.log.debug("Krisp noise filter disabled",this.logContext),this.emit(le.AudioTrackFeatureUpdate,this,Nt.TF_ENHANCED_NOISE_CANCELLATION,!1)},this.audioContext=r,this.checkForSilence()}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return M(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===K.Source.Microphone&&this.stopOnMute&&!this.isUserProvided&&(this.log.debug("stopping mic track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return M(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{if(!this.isMuted)return this.log.debug("Track already unmuted",this.logContext),this;const i=this._constraints.deviceId&&this._mediaStreamTrack.getSettings().deviceId!==Fr(this._constraints.deviceId);return this.source===K.Source.Microphone&&(this.stopOnMute||this._mediaStreamTrack.readyState==="ended"||i)&&!this.isUserProvided&&(this.log.debug("reacquiring mic track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this}finally{n()}})}restartTrack(e){return M(this,void 0,void 0,function*(){let n;if(e){const i=dg({audio:e});typeof i.audio!="boolean"&&(n=i.audio)}yield this.restart(n)})}restart(e){const n=Object.create(null,{restart:{get:()=>super.restart}});return M(this,void 0,void 0,function*(){const i=yield n.restart.call(this,e);return this.checkForSilence(),i})}startMonitor(){mn()&&(this.monitorInterval||(this.monitorInterval=setInterval(()=>{this.monitorSender()},yg)))}setProcessor(e){return M(this,void 0,void 0,function*(){var n;const i=yield this.trackChangeLock.lock();try{if(!Ti()&&!this.audioContext)throw Error("Audio context needs to be set on LocalAudioTrack in order to enable processors");this.processor&&(yield this.internalStopProcessor());const r={kind:this.kind,track:this._mediaStreamTrack,audioContext:this.audioContext};this.log.debug("setting up audio processor ".concat(e.name),this.logContext),yield e.init(r),this.processor=e,this.processor.processedTrack&&(yield(n=this.sender)===null||n===void 0?void 0:n.replaceTrack(this.processor.processedTrack),this.processor.processedTrack.addEventListener("enable-lk-krisp-noise-filter",this.handleKrispNoiseFilterEnable),this.processor.processedTrack.addEventListener("disable-lk-krisp-noise-filter",this.handleKrispNoiseFilterDisable)),this.emit(le.TrackProcessorUpdate,this.processor)}finally{i()}})}setAudioContext(e){this.audioContext=e}getSenderStats(){return M(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return;const n=yield this.sender.getStats();let i;return n.forEach(r=>{r.type==="outbound-rtp"&&(i={type:"audio",streamId:r.id,packetsSent:r.packetsSent,packetsLost:r.packetsLost,bytesSent:r.bytesSent,timestamp:r.timestamp,roundTripTime:r.roundTripTime,jitter:r.jitter})}),i})}checkForSilence(){return M(this,void 0,void 0,function*(){const e=yield TE(this);return e&&(this.isMuted||this.log.debug("silence detected on local audio track",this.logContext),this.emit(le.AudioSilenceDetected)),e})}}function xB(t,e,n){switch(t.kind){case"audio":return new Mu(t,e,!1,void 0,n);case"video":return new Nu(t,e,!1,n);default:throw new Hi("unsupported track type: ".concat(t.kind))}}const EB=Object.values(ll),PB=Object.values(Lp),RB=Object.values(ug),_B=[ll.h180,ll.h360],IB=[Lp.h180,Lp.h360],AB=t=>[{scaleResolutionDownBy:2,fps:t.encoding.maxFramerate}].map(n=>{var i,r;return new Xe(Math.floor(t.width/n.scaleResolutionDownBy),Math.floor(t.height/n.scaleResolutionDownBy),Math.max(15e4,Math.floor(t.encoding.maxBitrate/(Math.pow(n.scaleResolutionDownBy,2)*(((i=t.encoding.maxFramerate)!==null&&i!==void 0?i:30)/((r=n.fps)!==null&&r!==void 0?r:30))))),n.fps,t.encoding.priority)}),$p=["q","h","f"];function Kp(t,e,n,i){var r,o;let l=i?.videoEncoding;t&&(l=i?.screenShareEncoding);const c=i?.simulcast,d=i?.scalabilityMode,h=i?.videoCodec;if(!l&&!c&&!d||!e||!n)return[{}];l||(l=NB(t,e,n,h),Oe.debug("using video encoding",l));const f=l.maxFramerate,m=new Xe(e,n,l.maxBitrate,l.maxFramerate,l.priority);if(d&&gi(h)){const k=new ME(d),b=[];if(k.spatial>3)throw new Error("unsupported scalabilityMode: ".concat(d));const C=gn();if(cl()||Ti()||C?.name==="Chrome"&&wi(C?.version,"113")<0){const T=k.suffix=="h"?2:3,_=IU(C);for(let R=0;R<k.spatial;R+=1)b.push({rid:$p[2-R],maxBitrate:l.maxBitrate/Math.pow(T,R),maxFramerate:m.encoding.maxFramerate,scaleResolutionDownBy:_?Math.pow(2,R):void 0});b[0].scalabilityMode=d}else b.push({maxBitrate:l.maxBitrate,maxFramerate:m.encoding.maxFramerate,scalabilityMode:d});return m.encoding.priority&&(b[0].priority=m.encoding.priority,b[0].networkPriority=m.encoding.priority),Oe.debug("using svc encoding",{encodings:b}),b}if(!c)return[l];let v=[];t?v=(r=rk(i?.screenShareSimulcastLayers))!==null&&r!==void 0?r:ik(t,m):v=(o=rk(i?.videoSimulcastLayers))!==null&&o!==void 0?o:ik(t,m);let S;if(v.length>0){const k=v[0];v.length>1&&([,S]=v);const b=Math.max(e,n);if(b>=960&&S)return Lf(e,n,[k,S,m],f);if(b>=480)return Lf(e,n,[k,m],f)}return Lf(e,n,[m])}function MB(t,e,n){var i,r,o,l;if(!n.backupCodec||n.backupCodec===!0||n.backupCodec.codec===n.videoCodec)return;e!==n.backupCodec.codec&&Oe.warn("requested a different codec than specified as backup",{serverRequested:e,backup:n.backupCodec.codec}),n.videoCodec=e,n.videoEncoding=n.backupCodec.encoding;const c=t.mediaStreamTrack.getSettings(),d=(i=c.width)!==null&&i!==void 0?i:(r=t.dimensions)===null||r===void 0?void 0:r.width,h=(o=c.height)!==null&&o!==void 0?o:(l=t.dimensions)===null||l===void 0?void 0:l.height;return t.source===K.Source.ScreenShare&&n.simulcast&&(n.simulcast=!1),Kp(t.source===K.Source.ScreenShare,d,h,n)}function NB(t,e,n,i){const r=DB(t,e,n);let{encoding:o}=r[0];const l=Math.max(e,n);for(let c=0;c<r.length;c+=1){const d=r[c];if(o=d.encoding,d.width>=l)break}if(i)switch(i){case"av1":case"h265":o=Object.assign({},o),o.maxBitrate=o.maxBitrate*.7;break;case"vp9":o=Object.assign({},o),o.maxBitrate=o.maxBitrate*.85;break}return o}function DB(t,e,n){if(t)return RB;const i=e>n?e/n:n/e;return Math.abs(i-16/9)<Math.abs(i-4/3)?EB:PB}function ik(t,e){if(t)return AB(e);const{width:n,height:i}=e,r=n>i?n/i:i/n;return Math.abs(r-16/9)<Math.abs(r-4/3)?_B:IB}function Lf(t,e,n,i){const r=[];if(n.forEach((o,l)=>{if(l>=$p.length)return;const c=Math.min(t,e),h={rid:$p[l],scaleResolutionDownBy:Math.max(1,c/Math.min(o.width,o.height)),maxBitrate:o.encoding.maxBitrate},f=i&&o.encoding.maxFramerate?Math.min(i,o.encoding.maxFramerate):o.encoding.maxFramerate;f&&(h.maxFramerate=f);const m=Rs()||l===0;o.encoding.priority&&m&&(h.priority=o.encoding.priority,h.networkPriority=o.encoding.priority),r.push(h)}),Ti()&&kE()==="ios"){let o;r.forEach(c=>{o?c.maxFramerate&&c.maxFramerate>o&&(o=c.maxFramerate):o=c.maxFramerate});let l=!0;r.forEach(c=>{var d;c.maxFramerate!=o&&(l&&(l=!1,Oe.info("Simulcast on iOS React-Native requires all encodings to share the same framerate.")),Oe.info('Setting framerate of encoding "'.concat((d=c.rid)!==null&&d!==void 0?d:"",'" to ').concat(o)),c.maxFramerate=o)})}return r}function rk(t){if(t)return t.sort((e,n)=>{const{encoding:i}=e,{encoding:r}=n;return i.maxBitrate>r.maxBitrate?1:i.maxBitrate<r.maxBitrate?-1:i.maxBitrate===r.maxBitrate&&i.maxFramerate&&r.maxFramerate?i.maxFramerate>r.maxFramerate?1:-1:0})}class ME{constructor(e){const n=e.match(/^L(\d)T(\d)(h|_KEY|_KEY_SHIFT){0,1}$/);if(!n)throw new Error("invalid scalability mode");if(this.spatial=parseInt(n[1]),this.temporal=parseInt(n[2]),n.length>3)switch(n[3]){case"h":case"_KEY":case"_KEY_SHIFT":this.suffix=n[3]}}toString(){var e;return"L".concat(this.spatial,"T").concat(this.temporal).concat((e=this.suffix)!==null&&e!==void 0?e:"")}}function OB(t){return t.source===K.Source.ScreenShare||t.constraints.height&&Fr(t.constraints.height)>=1080?"maintain-resolution":"balanced"}const LB=5e3;class Nu extends AE{get sender(){return this._sender}set sender(e){this._sender=e,this.degradationPreference&&this.setDegradationPreference(this.degradationPreference)}constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,r=arguments.length>3?arguments[3]:void 0;super(e,K.Kind.Video,n,i,r),this.simulcastCodecs=new Map,this.degradationPreference="balanced",this.isCpuConstrained=!1,this.optimizeForPerformance=!1,this.monitorSender=()=>M(this,void 0,void 0,function*(){if(!this.sender){this._currentBitrate=0;return}let o;try{o=yield this.getSenderStats()}catch(d){this.log.error("could not get video sender stats",Object.assign(Object.assign({},this.logContext),{error:d}));return}const l=new Map(o.map(d=>[d.rid,d])),c=o.some(d=>d.qualityLimitationReason==="cpu");if(c!==this.isCpuConstrained&&(this.isCpuConstrained=c,this.isCpuConstrained&&this.emit(le.CpuConstrained)),this.prevStats){let d=0;l.forEach((h,f)=>{var m;const v=(m=this.prevStats)===null||m===void 0?void 0:m.get(f);d+=od(h,v)}),this._currentBitrate=d}this.prevStats=l}),this.senderLock=new nn}get isSimulcast(){return!!(this.sender&&this.sender.getParameters().encodings.length>1)}startMonitor(e){var n;if(this.signalClient=e,!mn())return;const i=(n=this.sender)===null||n===void 0?void 0:n.getParameters();i&&(this.encodings=i.encodings),!this.monitorInterval&&(this.monitorInterval=setInterval(()=>{this.monitorSender()},yg))}stop(){this._mediaStreamTrack.getConstraints(),this.simulcastCodecs.forEach(e=>{e.mediaStreamTrack.stop()}),super.stop()}pauseUpstream(){const e=Object.create(null,{pauseUpstream:{get:()=>super.pauseUpstream}});return M(this,void 0,void 0,function*(){var n,i,r,o,l;yield e.pauseUpstream.call(this);try{for(var c=!0,d=qi(this.simulcastCodecs.values()),h;h=yield d.next(),n=h.done,!n;c=!0)o=h.value,c=!1,yield(l=o.sender)===null||l===void 0?void 0:l.replaceTrack(null)}catch(f){i={error:f}}finally{try{!c&&!n&&(r=d.return)&&(yield r.call(d))}finally{if(i)throw i.error}}})}resumeUpstream(){const e=Object.create(null,{resumeUpstream:{get:()=>super.resumeUpstream}});return M(this,void 0,void 0,function*(){var n,i,r,o,l;yield e.resumeUpstream.call(this);try{for(var c=!0,d=qi(this.simulcastCodecs.values()),h;h=yield d.next(),n=h.done,!n;c=!0){o=h.value,c=!1;const f=o;yield(l=f.sender)===null||l===void 0?void 0:l.replaceTrack(f.mediaStreamTrack)}}catch(f){i={error:f}}finally{try{!c&&!n&&(r=d.return)&&(yield r.call(d))}finally{if(i)throw i.error}}})}mute(){const e=Object.create(null,{mute:{get:()=>super.mute}});return M(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.log.debug("Track already muted",this.logContext),this):(this.source===K.Source.Camera&&!this.isUserProvided&&(this.log.debug("stopping camera track",this.logContext),this._mediaStreamTrack.stop()),yield e.mute.call(this),this)}finally{n()}})}unmute(){const e=Object.create(null,{unmute:{get:()=>super.unmute}});return M(this,void 0,void 0,function*(){const n=yield this.muteLock.lock();try{return this.isMuted?(this.source===K.Source.Camera&&!this.isUserProvided&&(this.log.debug("reacquiring camera track",this.logContext),yield this.restartTrack()),yield e.unmute.call(this),this):(this.log.debug("Track already unmuted",this.logContext),this)}finally{n()}})}setTrackMuted(e){super.setTrackMuted(e);for(const n of this.simulcastCodecs.values())n.mediaStreamTrack.enabled=!e}getSenderStats(){return M(this,void 0,void 0,function*(){var e;if(!(!((e=this.sender)===null||e===void 0)&&e.getStats))return[];const n=[],i=yield this.sender.getStats();return i.forEach(r=>{var o;if(r.type==="outbound-rtp"){const l={type:"video",streamId:r.id,frameHeight:r.frameHeight,frameWidth:r.frameWidth,framesPerSecond:r.framesPerSecond,framesSent:r.framesSent,firCount:r.firCount,pliCount:r.pliCount,nackCount:r.nackCount,packetsSent:r.packetsSent,bytesSent:r.bytesSent,qualityLimitationReason:r.qualityLimitationReason,qualityLimitationDurations:r.qualityLimitationDurations,qualityLimitationResolutionChanges:r.qualityLimitationResolutionChanges,rid:(o=r.rid)!==null&&o!==void 0?o:r.id,retransmittedPacketsSent:r.retransmittedPacketsSent,targetBitrate:r.targetBitrate,timestamp:r.timestamp},c=i.get(r.remoteId);c&&(l.jitter=c.jitter,l.packetsLost=c.packetsLost,l.roundTripTime=c.roundTripTime),n.push(l)}}),n.sort((r,o)=>{var l,c;return((l=o.frameWidth)!==null&&l!==void 0?l:0)-((c=r.frameWidth)!==null&&c!==void 0?c:0)}),n})}setPublishingQuality(e){const n=[];for(let i=En.LOW;i<=En.HIGH;i+=1)n.push(new sg({quality:i,enabled:i<=e}));this.log.debug("setting publishing quality. max quality ".concat(e),this.logContext),this.setPublishingLayers(gi(this.codec),n)}restartTrack(e){return M(this,void 0,void 0,function*(){var n,i,r,o,l;let c;if(e){const m=dg({video:e});typeof m.video!="boolean"&&(c=m.video)}yield this.restart(c),this.isCpuConstrained=!1;try{for(var d=!0,h=qi(this.simulcastCodecs.values()),f;f=yield h.next(),n=f.done,!n;d=!0){o=f.value,d=!1;const m=o;m.sender&&((l=m.sender.transport)===null||l===void 0?void 0:l.state)!=="closed"&&(m.mediaStreamTrack=this.mediaStreamTrack.clone(),yield m.sender.replaceTrack(m.mediaStreamTrack))}}catch(m){i={error:m}}finally{try{!d&&!n&&(r=h.return)&&(yield r.call(h))}finally{if(i)throw i.error}}})}setProcessor(e){const n=Object.create(null,{setProcessor:{get:()=>super.setProcessor}});return M(this,arguments,void 0,function(i){var r=this;let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){var l,c,d,h,f,m;if(yield n.setProcessor.call(r,i,o),!((f=r.processor)===null||f===void 0)&&f.processedTrack)try{for(var v=!0,S=qi(r.simulcastCodecs.values()),k;k=yield S.next(),l=k.done,!l;v=!0)h=k.value,v=!1,yield(m=h.sender)===null||m===void 0?void 0:m.replaceTrack(r.processor.processedTrack)}catch(b){c={error:b}}finally{try{!v&&!l&&(d=S.return)&&(yield d.call(S))}finally{if(c)throw c.error}}})()})}setDegradationPreference(e){return M(this,void 0,void 0,function*(){if(this.degradationPreference=e,this.sender)try{this.log.debug("setting degradationPreference to ".concat(e),this.logContext);const n=this.sender.getParameters();n.degradationPreference=e,this.sender.setParameters(n)}catch(n){this.log.warn("failed to set degradationPreference",Object.assign({error:n},this.logContext))}})}addSimulcastTrack(e,n){if(this.simulcastCodecs.has(e)){this.log.error("".concat(e," already added, skipping adding simulcast codec"),this.logContext);return}const i={codec:e,mediaStreamTrack:this.mediaStreamTrack.clone(),sender:void 0,encodings:n};return this.simulcastCodecs.set(e,i),i}setSimulcastTrackSender(e,n){const i=this.simulcastCodecs.get(e);i&&(i.sender=n,setTimeout(()=>{this.subscribedCodecs&&this.setPublishingCodecs(this.subscribedCodecs)},LB))}setPublishingCodecs(e){return M(this,void 0,void 0,function*(){var n,i,r,o,l,c,d;if(this.log.debug("setting publishing codecs",Object.assign(Object.assign({},this.logContext),{codecs:e,currentCodec:this.codec})),!this.codec&&e.length>0)return yield this.setPublishingLayers(gi(e[0].codec),e[0].qualities),[];this.subscribedCodecs=e;const h=[];try{for(n=!0,i=qi(e);r=yield i.next(),o=r.done,!o;n=!0){d=r.value,n=!1;const f=d;if(!this.codec||this.codec===f.codec)yield this.setPublishingLayers(gi(f.codec),f.qualities);else{const m=this.simulcastCodecs.get(f.codec);if(this.log.debug("try setPublishingCodec for ".concat(f.codec),Object.assign(Object.assign({},this.logContext),{simulcastCodecInfo:m})),!m||!m.sender){for(const v of f.qualities)if(v.enabled){h.push(f.codec);break}}else m.encodings&&(this.log.debug("try setPublishingLayersForSender ".concat(f.codec),this.logContext),yield sk(m.sender,m.encodings,f.qualities,this.senderLock,gi(f.codec),this.log,this.logContext))}}}catch(f){l={error:f}}finally{try{!n&&!o&&(c=i.return)&&(yield c.call(i))}finally{if(l)throw l.error}}return h})}setPublishingLayers(e,n){return M(this,void 0,void 0,function*(){if(this.optimizeForPerformance){this.log.info("skipping setPublishingLayers due to optimized publishing performance",Object.assign(Object.assign({},this.logContext),{qualities:n}));return}this.log.debug("setting publishing layers",Object.assign(Object.assign({},this.logContext),{qualities:n})),!(!this.sender||!this.encodings)&&(yield sk(this.sender,this.encodings,n,this.senderLock,e,this.log,this.logContext))})}prioritizePerformance(){return M(this,void 0,void 0,function*(){if(!this.sender)throw new Error("sender not found");const e=yield this.senderLock.lock();try{this.optimizeForPerformance=!0;const n=this.sender.getParameters();n.encodings=n.encodings.map((i,r)=>{var o;return Object.assign(Object.assign({},i),{active:r===0,scaleResolutionDownBy:Math.max(1,Math.ceil(((o=this.mediaStreamTrack.getSettings().height)!==null&&o!==void 0?o:360)/360)),scalabilityMode:r===0&&gi(this.codec)?"L1T3":void 0,maxFramerate:r===0?15:0,maxBitrate:r===0?i.maxBitrate:0})}),this.log.debug("setting performance optimised encodings",Object.assign(Object.assign({},this.logContext),{encodings:n.encodings})),this.encodings=n.encodings,yield this.sender.setParameters(n)}catch(n){this.log.error("failed to set performance optimised encodings",Object.assign(Object.assign({},this.logContext),{error:n})),this.optimizeForPerformance=!1}finally{e()}})}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return M(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),bE()&&this.isInBackground&&this.source===K.Source.Camera&&(this._mediaStreamTrack.enabled=!1)})}}function sk(t,e,n,i,r,o,l){return M(this,void 0,void 0,function*(){const c=yield i.lock();o.debug("setPublishingLayersForSender",Object.assign(Object.assign({},l),{sender:t,qualities:n,senderEncodings:e}));try{const d=t.getParameters(),{encodings:h}=d;if(!h)return;if(h.length!==e.length){o.warn("cannot set publishing layers, encodings mismatch",Object.assign(Object.assign({},l),{encodings:h,senderEncodings:e}));return}let f=!1;!1&&h[0].scalabilityMode||(r&&n.some(S=>S.enabled)&&n.forEach(S=>S.enabled=!0),h.forEach((v,S)=>{var k;let b=(k=v.rid)!==null&&k!==void 0?k:"";b===""&&(b="q");const C=NE(b),T=n.find(_=>_.quality===C);T&&v.active!==T.enabled&&(f=!0,v.active=T.enabled,o.debug("setting layer ".concat(T.quality," to ").concat(v.active?"enabled":"disabled"),l),Rs()&&(T.enabled?(v.scaleResolutionDownBy=e[S].scaleResolutionDownBy,v.maxBitrate=e[S].maxBitrate,v.maxFrameRate=e[S].maxFrameRate):(v.scaleResolutionDownBy=4,v.maxBitrate=10,v.maxFrameRate=2)))})),f&&(d.encodings=h,o.debug("setting encodings",Object.assign(Object.assign({},l),{encodings:d.encodings})),yield t.setParameters(d))}finally{c()}})}function NE(t){switch(t){case"f":return En.HIGH;case"h":return En.MEDIUM;case"q":return En.LOW;default:return En.HIGH}}function ok(t,e,n,i){if(!n)return[new Or({quality:En.HIGH,width:t,height:e,bitrate:0,ssrc:0})];if(i){const r=n[0].scalabilityMode,o=new ME(r),l=[],c=o.suffix=="h"?1.5:2,d=o.suffix=="h"?2:3;for(let h=0;h<o.spatial;h+=1)l.push(new Or({quality:Math.min(En.HIGH,o.spatial-1)-h,width:Math.ceil(t/Math.pow(c,h)),height:Math.ceil(e/Math.pow(c,h)),bitrate:n[0].maxBitrate?Math.ceil(n[0].maxBitrate/Math.pow(d,h)):0,ssrc:0}));return l}return n.map(r=>{var o,l,c;const d=(o=r.scaleResolutionDownBy)!==null&&o!==void 0?o:1;let h=NE((l=r.rid)!==null&&l!==void 0?l:"");return new Or({quality:h,width:Math.ceil(t/d),height:Math.ceil(e/d),bitrate:(c=r.maxBitrate)!==null&&c!==void 0?c:0,ssrc:0})})}const ak="_lossy",lk="_reliable",FB=2*1e3,Ff="leave-reconnect",jB=3e4;var Un;(function(t){t[t.New=0]="New",t[t.Connected=1]="Connected",t[t.Disconnected=2]="Disconnected",t[t.Reconnecting=3]="Reconnecting",t[t.Closed=4]="Closed"})(Un||(Un={}));class UB extends Ei.EventEmitter{get isClosed(){return this._isClosed}get pendingReconnect(){return!!this.reconnectTimeout}constructor(e){var n;super(),this.options=e,this.rtcConfig={},this.peerConnectionTimeout=gg.peerConnectionTimeout,this.fullReconnectOnNext=!1,this.latestRemoteOfferId=0,this.subscriberPrimary=!1,this.pcState=Un.New,this._isClosed=!0,this.pendingTrackResolvers={},this.reconnectAttempts=0,this.reconnectStart=0,this.attemptingReconnect=!1,this.joinAttempts=0,this.maxJoinAttempts=1,this.shouldFailNext=!1,this.log=Oe,this.reliableDataSequence=1,this.reliableMessageBuffer=new GS,this.reliableReceivedState=new lB(jB),this.midToTrackId={},this.handleDataChannel=i=>M(this,[i],void 0,function(r){var o=this;let{channel:l}=r;return(function*(){if(l){if(l.label===lk)o.reliableDCSub=l;else if(l.label===ak)o.lossyDCSub=l;else return;o.log.debug("on data channel ".concat(l.id,", ").concat(l.label),o.logContext),l.onmessage=o.handleDataMessage}})()}),this.handleDataMessage=i=>M(this,void 0,void 0,function*(){var r,o,l,c,d;const h=yield this.dataProcessLock.lock();try{let f;if(i.data instanceof ArrayBuffer)f=i.data;else if(i.data instanceof Blob)f=yield i.data.arrayBuffer();else{this.log.error("unsupported data type",Object.assign(Object.assign({},this.logContext),{data:i.data}));return}const m=en.fromBinary(new Uint8Array(f));if(m.sequence>0&&m.participantSid!==""){const v=this.reliableReceivedState.get(m.participantSid);if(v&&m.sequence<=v)return;this.reliableReceivedState.set(m.participantSid,m.sequence)}if(((r=m.value)===null||r===void 0?void 0:r.case)==="speaker")this.emit(de.ActiveSpeakersUpdate,m.value.value.speakers);else if(((o=m.value)===null||o===void 0?void 0:o.case)==="encryptedPacket"){if(!this.e2eeManager){this.log.error("Received encrypted packet but E2EE not set up",this.logContext);return}const v=yield(l=this.e2eeManager)===null||l===void 0?void 0:l.handleEncryptedData(m.value.value.encryptedValue,m.value.value.iv,m.participantIdentity,m.value.value.keyIndex),S=yx.fromBinary(v.payload),k=new en({value:S.value,participantIdentity:m.participantIdentity,participantSid:m.participantSid});((c=k.value)===null||c===void 0?void 0:c.case)==="user"&&ck(k,k.value.value),this.emit(de.DataPacketReceived,k,m.value.value.encryptionType)}else((d=m.value)===null||d===void 0?void 0:d.case)==="user"&&ck(m,m.value.value),this.emit(de.DataPacketReceived,m,Rt.NONE)}finally{h()}}),this.handleDataError=i=>{const o=i.currentTarget.maxRetransmits===0?"lossy":"reliable";if(i instanceof ErrorEvent&&i.error){const{error:l}=i.error;this.log.error("DataChannel error on ".concat(o,": ").concat(i.message),Object.assign(Object.assign({},this.logContext),{error:l}))}else this.log.error("Unknown DataChannel error on ".concat(o),Object.assign(Object.assign({},this.logContext),{event:i}))},this.handleBufferedAmountLow=i=>{const o=i.currentTarget.maxRetransmits===0?De.LOSSY:De.RELIABLE;this.updateAndEmitDCBufferStatus(o)},this.handleDisconnect=(i,r)=>{if(this._isClosed)return;this.log.warn("".concat(i," disconnected"),this.logContext),this.reconnectAttempts===0&&(this.reconnectStart=Date.now());const o=d=>{this.log.warn("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(d,"ms. giving up"),this.logContext),this.emit(de.Disconnected),this.close()},l=Date.now()-this.reconnectStart;let c=this.getNextRetryDelay({elapsedMs:l,retryCount:this.reconnectAttempts});if(c===null){o(l);return}i===Ff&&(c=0),this.log.debug("reconnecting in ".concat(c,"ms"),this.logContext),this.clearReconnectTimeout(),this.token&&this.regionUrlProvider&&this.regionUrlProvider.updateToken(this.token),this.reconnectTimeout=Bt.setTimeout(()=>this.attemptReconnect(r).finally(()=>this.reconnectTimeout=void 0),c)},this.waitForRestarted=()=>new Promise((i,r)=>{this.pcState===Un.Connected&&i();const o=()=>{this.off(de.Disconnected,l),i()},l=()=>{this.off(de.Restarted,o),r()};this.once(de.Restarted,o),this.once(de.Disconnected,l)}),this.updateAndEmitDCBufferStatus=i=>{const r=this.isBufferStatusLow(i);typeof r<"u"&&r!==this.dcBufferStatus.get(i)&&(this.dcBufferStatus.set(i,r),this.emit(de.DCBufferStatusChanged,r,i))},this.isBufferStatusLow=i=>{const r=this.dataChannelForKind(i);if(r)return i===De.RELIABLE&&this.reliableMessageBuffer.alignBufferedAmount(r.bufferedAmount),r.bufferedAmount<=r.bufferedAmountLowThreshold},this.handleBrowserOnLine=()=>{this.client.currentState===st.RECONNECTING&&(this.clearReconnectTimeout(),this.attemptReconnect(gs.RR_SIGNAL_DISCONNECTED))},this.log=Ji((n=e.loggerName)!==null&&n!==void 0?n:oi.Engine),this.loggerOptions={loggerName:e.loggerName,loggerContextCb:()=>this.logContext},this.client=new hg(void 0,this.loggerOptions),this.client.signalLatency=this.options.expSignalLatency,this.reconnectPolicy=this.options.reconnectPolicy,this.closingLock=new nn,this.dataProcessLock=new nn,this.dcBufferStatus=new Map([[De.LOSSY,!0],[De.RELIABLE,!0]]),this.client.onParticipantUpdate=i=>this.emit(de.ParticipantUpdate,i),this.client.onConnectionQuality=i=>this.emit(de.ConnectionQualityUpdate,i),this.client.onRoomUpdate=i=>this.emit(de.RoomUpdate,i),this.client.onSubscriptionError=i=>this.emit(de.SubscriptionError,i),this.client.onSubscriptionPermissionUpdate=i=>this.emit(de.SubscriptionPermissionUpdate,i),this.client.onSpeakersChanged=i=>this.emit(de.SpeakersChanged,i),this.client.onStreamStateUpdate=i=>this.emit(de.StreamStateChanged,i),this.client.onRequestResponse=i=>this.emit(de.SignalRequestResponse,i)}get logContext(){var e,n,i,r,o,l;return{room:(n=(e=this.latestJoinResponse)===null||e===void 0?void 0:e.room)===null||n===void 0?void 0:n.name,roomID:(r=(i=this.latestJoinResponse)===null||i===void 0?void 0:i.room)===null||r===void 0?void 0:r.sid,participant:(l=(o=this.latestJoinResponse)===null||o===void 0?void 0:o.participant)===null||l===void 0?void 0:l.identity,pID:this.participantSid}}join(e,n,i,r){return M(this,void 0,void 0,function*(){this.url=e,this.token=n,this.signalOpts=i,this.maxJoinAttempts=i.maxRetries;try{this.joinAttempts+=1,this.setupSignalClientCallbacks();const o=yield this.client.join(e,n,i,r);return this._isClosed=!1,this.latestJoinResponse=o,this.subscriberPrimary=o.subscriberPrimary,this.pcManager||(yield this.configure(o)),(!this.subscriberPrimary||o.fastPublish)&&this.negotiate().catch(l=>{Oe.error(l,this.logContext)}),this.registerOnLineListener(),this.clientConfiguration=o.clientConfiguration,this.emit(de.SignalConnected,o),o}catch(o){if(o instanceof He&&o.reason===Be.ServerUnreachable&&(this.log.warn("Couldn't connect to server, attempt ".concat(this.joinAttempts," of ").concat(this.maxJoinAttempts),this.logContext),this.joinAttempts<this.maxJoinAttempts))return this.join(e,n,i,r);throw o}})}close(){return M(this,void 0,void 0,function*(){const e=yield this.closingLock.lock();if(this.isClosed){e();return}try{this._isClosed=!0,this.joinAttempts=0,this.emit(de.Closing),this.removeAllListeners(),this.deregisterOnLineListener(),this.clearPendingReconnect(),yield this.cleanupPeerConnections(),yield this.cleanupClient()}finally{e()}})}cleanupPeerConnections(){return M(this,void 0,void 0,function*(){var e;yield(e=this.pcManager)===null||e===void 0?void 0:e.close(),this.pcManager=void 0;const n=i=>{i&&(i.close(),i.onbufferedamountlow=null,i.onclose=null,i.onclosing=null,i.onerror=null,i.onmessage=null,i.onopen=null)};n(this.lossyDC),n(this.lossyDCSub),n(this.reliableDC),n(this.reliableDCSub),this.lossyDC=void 0,this.lossyDCSub=void 0,this.reliableDC=void 0,this.reliableDCSub=void 0,this.reliableMessageBuffer=new GS,this.reliableDataSequence=1,this.reliableReceivedState.clear()})}cleanupClient(){return M(this,void 0,void 0,function*(){yield this.client.close(),this.client.resetCallbacks()})}addTrack(e){if(this.pendingTrackResolvers[e.cid])throw new Hi("a track with the same ID has already been published");return new Promise((n,i)=>{const r=setTimeout(()=>{delete this.pendingTrackResolvers[e.cid],i(new He("publication of local track timed out, no response from server",Be.Timeout))},1e4);this.pendingTrackResolvers[e.cid]={resolve:o=>{clearTimeout(r),n(o)},reject:()=>{clearTimeout(r),i(new Error("Cancelled publication by calling unpublish"))}},this.client.sendAddTrack(e)})}removeTrack(e){if(e.track&&this.pendingTrackResolvers[e.track.id]){const{reject:n}=this.pendingTrackResolvers[e.track.id];n&&n(),delete this.pendingTrackResolvers[e.track.id]}try{return this.pcManager.removeTrack(e),!0}catch(n){this.log.warn("failed to remove track",Object.assign(Object.assign({},this.logContext),{error:n}))}return!1}updateMuteStatus(e,n){this.client.sendMuteTrack(e,n)}get dataSubscriberReadyState(){var e;return(e=this.reliableDCSub)===null||e===void 0?void 0:e.readyState}getConnectedServerAddress(){return M(this,void 0,void 0,function*(){var e;return(e=this.pcManager)===null||e===void 0?void 0:e.getConnectedAddress()})}setRegionUrlProvider(e){this.regionUrlProvider=e}configure(e){return M(this,void 0,void 0,function*(){var n,i;if(this.pcManager&&this.pcManager.currentState!==ct.NEW)return;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid;const r=this.makeRTCConfiguration(e);this.pcManager=new vB(r,this.options.singlePeerConnection?"publisher-only":e.subscriberPrimary?"subscriber-primary":"publisher-primary",this.loggerOptions),this.emit(de.TransportsCreated,this.pcManager.publisher,this.pcManager.subscriber),this.pcManager.onIceCandidate=(o,l)=>{this.client.sendIceCandidate(o,l)},this.pcManager.onPublisherOffer=(o,l)=>{this.client.sendOffer(o,l)},this.pcManager.onDataChannel=this.handleDataChannel,this.pcManager.onStateChange=(o,l,c)=>M(this,void 0,void 0,function*(){if(this.log.debug("primary PC state changed ".concat(o),this.logContext),["closed","disconnected","failed"].includes(l)&&(this.publisherConnectionPromise=void 0),o===ct.CONNECTED){const f=this.pcState===Un.New;this.pcState=Un.Connected,f&&this.emit(de.Connected,e)}else o===ct.FAILED&&(this.pcState===Un.Connected||this.pcState===Un.Reconnecting)&&(this.pcState=Un.Disconnected,this.handleDisconnect("peerconnection failed",c==="failed"?gs.RR_SUBSCRIBER_FAILED:gs.RR_PUBLISHER_FAILED));const d=this.client.isDisconnected||this.client.currentState===st.RECONNECTING,h=[ct.FAILED,ct.CLOSING,ct.CLOSED].includes(o);d&&h&&!this._isClosed&&this.emit(de.Offline)}),this.pcManager.onTrack=o=>{o.streams.length!==0&&this.emit(de.MediaTrackAdded,o.track,o.streams[0],o.receiver)},BB((i=e.serverInfo)===null||i===void 0?void 0:i.protocol)||this.createDataChannels()})}setupSignalClientCallbacks(){this.client.onAnswer=(e,n,i)=>M(this,void 0,void 0,function*(){this.pcManager&&(this.log.debug("received server answer",Object.assign(Object.assign({},this.logContext),{RTCSdpType:e.type,sdp:e.sdp,midToTrackId:i})),this.midToTrackId=i,yield this.pcManager.setPublisherAnswer(e,n))}),this.client.onTrickle=(e,n)=>{this.pcManager&&(this.log.debug("got ICE candidate from peer",Object.assign(Object.assign({},this.logContext),{candidate:e,target:n})),this.pcManager.addIceCandidate(e,n))},this.client.onOffer=(e,n,i)=>M(this,void 0,void 0,function*(){if(this.latestRemoteOfferId=n,!this.pcManager)return;this.midToTrackId=i;const r=yield this.pcManager.createSubscriberAnswerFromOffer(e,n);r&&this.client.sendAnswer(r,n)}),this.client.onLocalTrackPublished=e=>{var n;if(this.log.debug("received trackPublishedResponse",Object.assign(Object.assign({},this.logContext),{cid:e.cid,track:(n=e.track)===null||n===void 0?void 0:n.sid})),!this.pendingTrackResolvers[e.cid]){this.log.error("missing track resolver for ".concat(e.cid),Object.assign(Object.assign({},this.logContext),{cid:e.cid}));return}const{resolve:i}=this.pendingTrackResolvers[e.cid];delete this.pendingTrackResolvers[e.cid],i(e.track)},this.client.onLocalTrackUnpublished=e=>{this.emit(de.LocalTrackUnpublished,e)},this.client.onLocalTrackSubscribed=e=>{this.emit(de.LocalTrackSubscribed,e)},this.client.onTokenRefresh=e=>{this.token=e},this.client.onRemoteMuteChanged=(e,n)=>{this.emit(de.RemoteMute,e,n)},this.client.onSubscribedQualityUpdate=e=>{this.emit(de.SubscribedQualityUpdate,e)},this.client.onRoomMoved=e=>{var n;this.participantSid=(n=e.participant)===null||n===void 0?void 0:n.sid,this.latestJoinResponse&&(this.latestJoinResponse.room=e.room),this.emit(de.RoomMoved,e)},this.client.onMediaSectionsRequirement=e=>{var n,i;const r={direction:"recvonly"};for(let o=0;o<e.numAudios;o++)(n=this.pcManager)===null||n===void 0||n.addPublisherTransceiverOfKind("audio",r);for(let o=0;o<e.numVideos;o++)(i=this.pcManager)===null||i===void 0||i.addPublisherTransceiverOfKind("video",r);this.negotiate()},this.client.onClose=()=>{this.handleDisconnect("signal",gs.RR_SIGNAL_DISCONNECTED)},this.client.onLeave=e=>{switch(this.log.debug("client leave request",Object.assign(Object.assign({},this.logContext),{reason:e?.reason})),e.regions&&this.regionUrlProvider&&(this.log.debug("updating regions",this.logContext),this.regionUrlProvider.setServerReportedRegions({updatedAtInMs:Date.now(),maxAgeInMs:_E,regionSettings:e.regions})),e.action){case To.DISCONNECT:this.emit(de.Disconnected,e?.reason),this.close();break;case To.RECONNECT:this.fullReconnectOnNext=!0,this.handleDisconnect(Ff);break;case To.RESUME:this.handleDisconnect(Ff)}}}makeRTCConfiguration(e){var n;const i=Object.assign({},this.rtcConfig);if(!((n=this.signalOpts)===null||n===void 0)&&n.e2eeEnabled&&(this.log.debug("E2EE - setting up transports with insertable streams",this.logContext),i.encodedInsertableStreams=!0),e.iceServers&&!i.iceServers){const r=[];e.iceServers.forEach(o=>{const l={urls:o.urls};o.username&&(l.username=o.username),o.credential&&(l.credential=o.credential),r.push(l)}),i.iceServers=r}return e.clientConfiguration&&e.clientConfiguration.forceRelay===sl.ENABLED&&(i.iceTransportPolicy="relay"),i.sdpSemantics="unified-plan",i.continualGatheringPolicy="gather_continually",i}createDataChannels(){this.pcManager&&(this.lossyDC&&(this.lossyDC.onmessage=null,this.lossyDC.onerror=null),this.reliableDC&&(this.reliableDC.onmessage=null,this.reliableDC.onerror=null),this.lossyDC=this.pcManager.createPublisherDataChannel(ak,{ordered:!1,maxRetransmits:0}),this.reliableDC=this.pcManager.createPublisherDataChannel(lk,{ordered:!0}),this.lossyDC.onmessage=this.handleDataMessage,this.reliableDC.onmessage=this.handleDataMessage,this.lossyDC.onerror=this.handleDataError,this.reliableDC.onerror=this.handleDataError,this.lossyDC.bufferedAmountLowThreshold=65535,this.reliableDC.bufferedAmountLowThreshold=65535,this.lossyDC.onbufferedamountlow=this.handleBufferedAmountLow,this.reliableDC.onbufferedamountlow=this.handleBufferedAmountLow)}createSender(e,n,i){return M(this,void 0,void 0,function*(){if(Fp())return yield this.createTransceiverRTCRtpSender(e,n,i);if(jp())return this.log.warn("using add-track fallback",this.logContext),yield this.createRTCRtpSender(e.mediaStreamTrack);throw new Et("Required webRTC APIs not supported on this device")})}createSimulcastSender(e,n,i,r){return M(this,void 0,void 0,function*(){if(Fp())return this.createSimulcastTransceiverSender(e,n,i,r);if(jp())return this.log.debug("using add-track fallback",this.logContext),this.createRTCRtpSender(e.mediaStreamTrack);throw new Et("Cannot stream on this device")})}createTransceiverRTCRtpSender(e,n,i){return M(this,void 0,void 0,function*(){if(!this.pcManager)throw new Et("publisher is closed");const r=[];e.mediaStream&&r.push(e.mediaStream),Gr(e)&&(e.codec=n.videoCodec);const o={direction:"sendonly",streams:r};return i&&(o.sendEncodings=i),(yield this.pcManager.addPublisherTransceiver(e.mediaStreamTrack,o)).sender})}createSimulcastTransceiverSender(e,n,i,r){return M(this,void 0,void 0,function*(){if(!this.pcManager)throw new Et("publisher is closed");const o={direction:"sendonly"};r&&(o.sendEncodings=r);const l=yield this.pcManager.addPublisherTransceiver(n.mediaStreamTrack,o);if(i.videoCodec)return e.setSimulcastTrackSender(i.videoCodec,l.sender),l.sender})}createRTCRtpSender(e){return M(this,void 0,void 0,function*(){if(!this.pcManager)throw new Et("publisher is closed");return this.pcManager.addPublisherTrack(e)})}attemptReconnect(e){return M(this,void 0,void 0,function*(){var n,i,r;if(!this._isClosed){if(this.attemptingReconnect){Oe.warn("already attempting reconnect, returning early",this.logContext);return}(((n=this.clientConfiguration)===null||n===void 0?void 0:n.resumeConnection)===sl.DISABLED||((r=(i=this.pcManager)===null||i===void 0?void 0:i.currentState)!==null&&r!==void 0?r:ct.NEW)===ct.NEW)&&(this.fullReconnectOnNext=!0);try{this.attemptingReconnect=!0,this.fullReconnectOnNext?yield this.restartConnection():yield this.resumeConnection(e),this.clearPendingReconnect(),this.fullReconnectOnNext=!1}catch(o){this.reconnectAttempts+=1;let l=!0;o instanceof Et?(this.log.debug("received unrecoverable error",Object.assign(Object.assign({},this.logContext),{error:o})),l=!1):o instanceof lo||(this.fullReconnectOnNext=!0),l?this.handleDisconnect("reconnect",gs.RR_UNKNOWN):(this.log.info("could not recover connection after ".concat(this.reconnectAttempts," attempts, ").concat(Date.now()-this.reconnectStart,"ms. giving up"),this.logContext),this.emit(de.Disconnected),yield this.close())}finally{this.attemptingReconnect=!1}}})}getNextRetryDelay(e){try{return this.reconnectPolicy.nextRetryDelayInMs(e)}catch(n){this.log.warn("encountered error in reconnect policy",Object.assign(Object.assign({},this.logContext),{error:n}))}return null}restartConnection(e){return M(this,void 0,void 0,function*(){var n,i,r;try{if(!this.url||!this.token)throw new Et("could not reconnect, url or token not saved");this.log.info("reconnecting, attempt: ".concat(this.reconnectAttempts),this.logContext),this.emit(de.Restarting),this.client.isDisconnected||(yield this.client.sendLeave()),yield this.cleanupPeerConnections(),yield this.cleanupClient();let o;try{if(!this.signalOpts)throw this.log.warn("attempted connection restart, without signal options present",this.logContext),new lo;o=yield this.join(e??this.url,this.token,this.signalOpts)}catch(l){throw l instanceof He&&l.reason===Be.NotAllowed?new Et("could not reconnect, token might be expired"):new lo}if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(this.client.setReconnected(),this.emit(de.SignalRestarted,o),yield this.waitForPCReconnected(),this.client.currentState!==st.CONNECTED)throw new lo("Signal connection got severed during reconnect");(n=this.regionUrlProvider)===null||n===void 0||n.resetAttempts(),this.emit(de.Restarted)}catch(o){const l=yield(i=this.regionUrlProvider)===null||i===void 0?void 0:i.getNextBestRegionUrl();if(l){yield this.restartConnection(l);return}else throw(r=this.regionUrlProvider)===null||r===void 0||r.resetAttempts(),o}})}resumeConnection(e){return M(this,void 0,void 0,function*(){var n;if(!this.url||!this.token)throw new Et("could not reconnect, url or token not saved");if(!this.pcManager)throw new Et("publisher and subscriber connections unset");this.log.info("resuming signal connection, attempt ".concat(this.reconnectAttempts),this.logContext),this.emit(de.Resuming);let i;try{this.setupSignalClientCallbacks(),i=yield this.client.reconnect(this.url,this.token,this.participantSid,e)}catch(r){let o="";throw r instanceof Error&&(o=r.message,this.log.error(r.message,Object.assign(Object.assign({},this.logContext),{error:r}))),r instanceof He&&r.reason===Be.NotAllowed?new Et("could not reconnect, token might be expired"):r instanceof He&&r.reason===Be.LeaveRequest?r:new lo(o)}if(this.emit(de.SignalResumed),i){const r=this.makeRTCConfiguration(i);this.pcManager.updateConfiguration(r),this.latestJoinResponse&&(this.latestJoinResponse.serverInfo=i.serverInfo)}else this.log.warn("Did not receive reconnect response",this.logContext);if(this.shouldFailNext)throw this.shouldFailNext=!1,new Error("simulated failure");if(yield this.pcManager.triggerIceRestart(),yield this.waitForPCReconnected(),this.client.currentState!==st.CONNECTED)throw new lo("Signal connection got severed during reconnect");this.client.setReconnected(),((n=this.reliableDC)===null||n===void 0?void 0:n.readyState)==="open"&&this.reliableDC.id===null&&this.createDataChannels(),i?.lastMessageSeq&&this.resendReliableMessagesForResume(i.lastMessageSeq),this.emit(de.Resumed)})}waitForPCInitialConnection(e,n){return M(this,void 0,void 0,function*(){if(!this.pcManager)throw new Et("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(n,e)})}waitForPCReconnected(){return M(this,void 0,void 0,function*(){this.pcState=Un.Reconnecting,this.log.debug("waiting for peer connection to reconnect",this.logContext);try{if(yield rn(FB),!this.pcManager)throw new Et("PC manager is closed");yield this.pcManager.ensurePCTransportConnection(void 0,this.peerConnectionTimeout),this.pcState=Un.Connected}catch(e){throw this.pcState=Un.Disconnected,new He("could not establish PC connection, ".concat(e.message),Be.InternalError)}})}publishRpcResponse(e,n,i,r){return M(this,void 0,void 0,function*(){const o=new en({destinationIdentities:[e],kind:De.RELIABLE,value:{case:"rpcResponse",value:new tg({requestId:n,value:r?{case:"error",value:r.toProto()}:{case:"payload",value:i??""}})}});yield this.sendDataPacket(o,De.RELIABLE)})}publishRpcAck(e,n){return M(this,void 0,void 0,function*(){const i=new en({destinationIdentities:[e],kind:De.RELIABLE,value:{case:"rpcAck",value:new eg({requestId:n})}});yield this.sendDataPacket(i,De.RELIABLE)})}sendDataPacket(e,n){return M(this,void 0,void 0,function*(){if(yield this.ensurePublisherConnected(n),this.e2eeManager&&this.e2eeManager.isDataChannelEncryptionEnabled){const o=dU(e);if(o){const l=yield this.e2eeManager.encryptData(o.toBinary());e.value={case:"encryptedPacket",value:new vx({encryptedValue:l.payload,iv:l.iv,keyIndex:l.keyIndex})}}}n===De.RELIABLE&&(e.sequence=this.reliableDataSequence,this.reliableDataSequence+=1);const i=e.toBinary(),r=this.dataChannelForKind(n);if(r){if(n===De.RELIABLE&&this.reliableMessageBuffer.push({data:i,sequence:e.sequence}),this.attemptingReconnect)return;r.send(i)}this.updateAndEmitDCBufferStatus(n)})}resendReliableMessagesForResume(e){return M(this,void 0,void 0,function*(){yield this.ensurePublisherConnected(De.RELIABLE);const n=this.dataChannelForKind(De.RELIABLE);n&&(this.reliableMessageBuffer.popToSequence(e),this.reliableMessageBuffer.getAll().forEach(i=>{n.send(i.data)})),this.updateAndEmitDCBufferStatus(De.RELIABLE)})}waitForBufferStatusLow(e){return new Promise((n,i)=>M(this,void 0,void 0,function*(){if(this.isBufferStatusLow(e))n();else{const r=()=>i("Engine closed");for(this.once(de.Closing,r);!this.dcBufferStatus.get(e);)yield rn(10);this.off(de.Closing,r),n()}}))}ensureDataTransportConnected(e){return M(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.subscriberPrimary;return(function*(){var o;if(!i.pcManager)throw new Et("PC manager is closed");const l=r?i.pcManager.subscriber:i.pcManager.publisher,c=r?"Subscriber":"Publisher";if(!l)throw new He("".concat(c," connection not set"),Be.InternalError);let d=!1;!r&&!i.dataChannelForKind(n,r)&&(i.createDataChannels(),d=!0),!d&&!r&&!i.pcManager.publisher.isICEConnected&&i.pcManager.publisher.getICEConnectionState()!=="checking"&&(d=!0),d&&i.negotiate().catch(m=>{Oe.error(m,i.logContext)});const h=i.dataChannelForKind(n,r);if(h?.readyState==="open")return;const f=new Date().getTime()+i.peerConnectionTimeout;for(;new Date().getTime()<f;){if(l.isICEConnected&&((o=i.dataChannelForKind(n,r))===null||o===void 0?void 0:o.readyState)==="open")return;yield rn(50)}throw new He("could not establish ".concat(c," connection, state: ").concat(l.getICEConnectionState()),Be.InternalError)})()})}ensurePublisherConnected(e){return M(this,void 0,void 0,function*(){this.publisherConnectionPromise||(this.publisherConnectionPromise=this.ensureDataTransportConnected(e,!1)),yield this.publisherConnectionPromise})}verifyTransport(){return!(!this.pcManager||this.pcManager.currentState!==ct.CONNECTED||!this.client.ws||this.client.ws.readyState===WebSocket.CLOSED)}negotiate(){return M(this,void 0,void 0,function*(){return new Promise((e,n)=>M(this,void 0,void 0,function*(){if(!this.pcManager){n(new Dp("PC manager is closed"));return}this.pcManager.requirePublisher(),this.pcManager.publisher.getTransceivers().length==0&&!this.lossyDC&&!this.reliableDC&&this.createDataChannels();const i=new AbortController,r=()=>{i.abort(),this.log.debug("engine disconnected while negotiation was ongoing",this.logContext),e()};this.isClosed&&n("cannot negotiate on closed engine"),this.on(de.Closing,r),this.pcManager.publisher.once(Po.RTPVideoPayloadTypes,o=>{const l=new Map;o.forEach(c=>{const d=c.codec.toLowerCase();OU(d)&&l.set(c.payload,d)}),this.emit(de.RTPVideoMapUpdate,l)});try{yield this.pcManager.negotiate(i),e()}catch(o){o instanceof Dp&&(this.fullReconnectOnNext=!0),this.handleDisconnect("negotiation",gs.RR_UNKNOWN),n(o)}finally{this.off(de.Closing,r)}}))})}dataChannelForKind(e,n){if(n){if(e===De.LOSSY)return this.lossyDCSub;if(e===De.RELIABLE)return this.reliableDCSub}else{if(e===De.LOSSY)return this.lossyDC;if(e===De.RELIABLE)return this.reliableDC}}sendSyncState(e,n){var i,r,o,l;if(!this.pcManager){this.log.warn("sync state cannot be sent without peer connection setup",this.logContext);return}const c=this.pcManager.publisher.getLocalDescription(),d=this.pcManager.publisher.getRemoteDescription(),h=(i=this.pcManager.subscriber)===null||i===void 0?void 0:i.getRemoteDescription(),f=(r=this.pcManager.subscriber)===null||r===void 0?void 0:r.getLocalDescription(),m=(l=(o=this.signalOpts)===null||o===void 0?void 0:o.autoSubscribe)!==null&&l!==void 0?l:!0,v=new Array,S=new Array;e.forEach(k=>{k.isDesired!==m&&v.push(k.trackSid),k.isEnabled||S.push(k.trackSid)}),this.client.sendSyncState(new og({answer:this.options.singlePeerConnection?d?yo({sdp:d.sdp,type:d.type}):void 0:f?yo({sdp:f.sdp,type:f.type}):void 0,offer:this.options.singlePeerConnection?c?yo({sdp:c.sdp,type:c.type}):void 0:h?yo({sdp:h.sdp,type:h.type}):void 0,subscription:new id({trackSids:v,subscribe:!m,participantTracks:[]}),publishTracks:HU(n),dataChannels:this.dataChannelsInfo(),trackSidsDisabled:S,datachannelReceiveStates:this.reliableReceivedState.map((k,b)=>new Fx({publisherSid:b,lastSeq:k}))}))}failNext(){this.shouldFailNext=!0}dataChannelsInfo(){const e=[],n=(i,r)=>{i?.id!==void 0&&i.id!==null&&e.push(new jx({label:i.label,id:i.id,target:r}))};return n(this.dataChannelForKind(De.LOSSY),ni.PUBLISHER),n(this.dataChannelForKind(De.RELIABLE),ni.PUBLISHER),n(this.dataChannelForKind(De.LOSSY,!0),ni.SUBSCRIBER),n(this.dataChannelForKind(De.RELIABLE,!0),ni.SUBSCRIBER),e}clearReconnectTimeout(){this.reconnectTimeout&&Bt.clearTimeout(this.reconnectTimeout)}clearPendingReconnect(){this.clearReconnectTimeout(),this.reconnectAttempts=0}registerOnLineListener(){mn()&&window.addEventListener("online",this.handleBrowserOnLine)}deregisterOnLineListener(){mn()&&window.removeEventListener("online",this.handleBrowserOnLine)}getTrackIdForReceiver(e){var n;const i=(n=this.pcManager)===null||n===void 0?void 0:n.getMidForReceiver(e);if(i){const r=Object.entries(this.midToTrackId).find(o=>{let[l]=o;return l===i});if(r)return r[1]}}}class lo extends Error{}function BB(t){return t!==void 0&&t>13}function ck(t,e){const n=t.participantIdentity?t.participantIdentity:e.participantIdentity;t.participantIdentity=n,e.participantIdentity=n;const i=t.destinationIdentities.length!==0?t.destinationIdentities:e.destinationIdentities;t.destinationIdentities=i,e.destinationIdentities=i}class DE{get info(){return this._info}validateBytesReceived(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(typeof this.totalByteSize!="number"||this.totalByteSize===0)){if(e&&this.bytesReceived<this.totalByteSize)throw new Bn("Not enough chunk(s) received - expected ".concat(this.totalByteSize," bytes of data total, only received ").concat(this.bytesReceived," bytes"),Zt.Incomplete);if(this.bytesReceived>this.totalByteSize)throw new Bn("Extra chunk(s) received - expected ".concat(this.totalByteSize," bytes of data total, received ").concat(this.bytesReceived," bytes"),Zt.LengthExceeded)}}constructor(e,n,i,r){this.reader=n,this.totalByteSize=i,this._info=e,this.bytesReceived=0,this.outOfBandFailureRejectingFuture=r}}class VB extends DE{handleChunkReceived(e){var n;this.bytesReceived+=e.content.byteLength,this.validateBytesReceived();const i=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,i)}[Symbol.asyncIterator](){const e=this.reader.getReader();let n=new zn,i=null,r=null;if(this.signal){const l=this.signal;r=()=>{var c;(c=n.reject)===null||c===void 0||c.call(n,l.reason)},l.addEventListener("abort",r),i=l}const o=()=>{e.releaseLock(),i&&r&&i.removeEventListener("abort",r),this.signal=void 0};return{next:()=>M(this,void 0,void 0,function*(){var l,c;try{const{done:d,value:h}=yield Promise.race([e.read(),n.promise,(c=(l=this.outOfBandFailureRejectingFuture)===null||l===void 0?void 0:l.promise)!==null&&c!==void 0?c:new Promise(()=>{})]);return d?(this.validateBytesReceived(!0),{done:!0,value:void 0}):(this.handleChunkReceived(h),{done:!1,value:h.content})}catch(d){throw o(),d}}),return(){return M(this,void 0,void 0,function*(){return o(),{done:!0,value:void 0}})}}}withAbortSignal(e){return this.signal=e,this}readAll(){return M(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(function*(){var i,r,o,l;let c=new Set;const d=n.signal?e.withAbortSignal(n.signal):e;try{for(var h=!0,f=qi(d),m;m=yield f.next(),i=m.done,!i;h=!0){l=m.value,h=!1;const v=l;c.add(v)}}catch(v){r={error:v}}finally{try{!h&&!i&&(o=f.return)&&(yield o.call(f))}finally{if(r)throw r.error}}return Array.from(c)})()})}}class zB extends DE{constructor(e,n,i,r){super(e,n,i,r),this.receivedChunks=new Map}handleChunkReceived(e){var n;const i=hu(e.chunkIndex),r=this.receivedChunks.get(i);if(r&&r.version>e.version)return;this.receivedChunks.set(i,e),this.bytesReceived+=e.content.byteLength,this.validateBytesReceived();const o=this.totalByteSize?this.bytesReceived/this.totalByteSize:void 0;(n=this.onProgress)===null||n===void 0||n.call(this,o)}[Symbol.asyncIterator](){const e=this.reader.getReader(),n=new TextDecoder("utf-8",{fatal:!0});let i=new zn,r=null,o=null;if(this.signal){const c=this.signal;o=()=>{var d;(d=i.reject)===null||d===void 0||d.call(i,c.reason)},c.addEventListener("abort",o),r=c}const l=()=>{e.releaseLock(),r&&o&&r.removeEventListener("abort",o),this.signal=void 0};return{next:()=>M(this,void 0,void 0,function*(){var c,d;try{const{done:h,value:f}=yield Promise.race([e.read(),i.promise,(d=(c=this.outOfBandFailureRejectingFuture)===null||c===void 0?void 0:c.promise)!==null&&d!==void 0?d:new Promise(()=>{})]);if(h)return this.validateBytesReceived(!0),{done:!0,value:void 0};{this.handleChunkReceived(f);let m;try{m=n.decode(f.content)}catch(v){throw new Bn("Cannot decode datastream chunk ".concat(f.chunkIndex," as text: ").concat(v),Zt.DecodeFailed)}return{done:!1,value:m}}}catch(h){throw l(),h}}),return(){return M(this,void 0,void 0,function*(){return l(),{done:!0,value:void 0}})}}}withAbortSignal(e){return this.signal=e,this}readAll(){return M(this,arguments,void 0,function(){var e=this;let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(function*(){var i,r,o,l;let c="";const d=n.signal?e.withAbortSignal(n.signal):e;try{for(var h=!0,f=qi(d),m;m=yield f.next(),i=m.done,!i;h=!0)l=m.value,h=!1,c+=l}catch(v){r={error:v}}finally{try{!h&&!i&&(o=f.return)&&(yield o.call(f))}finally{if(r)throw r.error}}return c})()})}}class WB{constructor(){this.log=Oe,this.byteStreamControllers=new Map,this.textStreamControllers=new Map,this.byteStreamHandlers=new Map,this.textStreamHandlers=new Map}registerTextStreamHandler(e,n){if(this.textStreamHandlers.has(e))throw new Bn('A text stream handler for topic "'.concat(e,'" has already been set.'),Zt.HandlerAlreadyRegistered);this.textStreamHandlers.set(e,n)}unregisterTextStreamHandler(e){this.textStreamHandlers.delete(e)}registerByteStreamHandler(e,n){if(this.byteStreamHandlers.has(e))throw new Bn('A byte stream handler for topic "'.concat(e,'" has already been set.'),Zt.HandlerAlreadyRegistered);this.byteStreamHandlers.set(e,n)}unregisterByteStreamHandler(e){this.byteStreamHandlers.delete(e)}clearHandlersAndControllers(){this.byteStreamControllers.clear(),this.textStreamControllers.clear(),this.byteStreamHandlers.clear(),this.textStreamHandlers.clear()}validateParticipantHasNoActiveDataStreams(e){var n,i,r,o;const l=Array.from(this.textStreamControllers.entries()).filter(d=>d[1].sendingParticipantIdentity===e),c=Array.from(this.byteStreamControllers.entries()).filter(d=>d[1].sendingParticipantIdentity===e);if(l.length>0||c.length>0){const d=new Bn("Participant ".concat(e," unexpectedly disconnected in the middle of sending data"),Zt.AbnormalEnd);for(const[h,f]of c)(i=(n=f.outOfBandFailureRejectingFuture).reject)===null||i===void 0||i.call(n,d),this.byteStreamControllers.delete(h);for(const[h,f]of l)(o=(r=f.outOfBandFailureRejectingFuture).reject)===null||o===void 0||o.call(r,d),this.textStreamControllers.delete(h)}}handleDataStreamPacket(e,n){return M(this,void 0,void 0,function*(){switch(e.value.case){case"streamHeader":return this.handleStreamHeader(e.value.value,e.participantIdentity,n);case"streamChunk":return this.handleStreamChunk(e.value.value,n);case"streamTrailer":return this.handleStreamTrailer(e.value.value,n);default:throw new Error('DataPacket of value "'.concat(e.value.case,'" is not data stream related!'))}})}handleStreamHeader(e,n,i){return M(this,void 0,void 0,function*(){var r;if(e.contentHeader.case==="byteHeader"){const o=this.byteStreamHandlers.get(e.topic);if(!o){this.log.debug("ignoring incoming byte stream due to no handler for topic",e.topic);return}let l;const c=new zn;c.promise.catch(f=>{this.log.error(f)});const d={id:e.streamId,name:(r=e.contentHeader.value.name)!==null&&r!==void 0?r:"unknown",mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:hu(e.timestamp),attributes:e.attributes,encryptionType:i},h=new ReadableStream({start:f=>{if(l=f,this.textStreamControllers.has(e.streamId))throw new Bn("A data stream read is already in progress for a stream with id ".concat(e.streamId,"."),Zt.AlreadyOpened);this.byteStreamControllers.set(e.streamId,{info:d,controller:l,startTime:Date.now(),sendingParticipantIdentity:n,outOfBandFailureRejectingFuture:c})}});o(new VB(d,h,hu(e.totalLength),c),{identity:n})}else if(e.contentHeader.case==="textHeader"){const o=this.textStreamHandlers.get(e.topic);if(!o){this.log.debug("ignoring incoming text stream due to no handler for topic",e.topic);return}let l;const c=new zn;c.promise.catch(f=>{this.log.error(f)});const d={id:e.streamId,mimeType:e.mimeType,size:e.totalLength?Number(e.totalLength):void 0,topic:e.topic,timestamp:Number(e.timestamp),attributes:e.attributes,encryptionType:i},h=new ReadableStream({start:f=>{if(l=f,this.textStreamControllers.has(e.streamId))throw new Bn("A data stream read is already in progress for a stream with id ".concat(e.streamId,"."),Zt.AlreadyOpened);this.textStreamControllers.set(e.streamId,{info:d,controller:l,startTime:Date.now(),sendingParticipantIdentity:n,outOfBandFailureRejectingFuture:c})}});o(new zB(d,h,hu(e.totalLength),c),{identity:n})}})}handleStreamChunk(e,n){const i=this.byteStreamControllers.get(e.streamId);i&&(i.info.encryptionType!==n?(i.controller.error(new Bn("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(i.info.encryptionType),Zt.EncryptionTypeMismatch)),this.byteStreamControllers.delete(e.streamId)):e.content.length>0&&i.controller.enqueue(e));const r=this.textStreamControllers.get(e.streamId);r&&(r.info.encryptionType!==n?(r.controller.error(new Bn("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(r.info.encryptionType),Zt.EncryptionTypeMismatch)),this.textStreamControllers.delete(e.streamId)):e.content.length>0&&r.controller.enqueue(e))}handleStreamTrailer(e,n){const i=this.textStreamControllers.get(e.streamId);i&&(i.info.encryptionType!==n?i.controller.error(new Bn("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(i.info.encryptionType),Zt.EncryptionTypeMismatch)):(i.info.attributes=Object.assign(Object.assign({},i.info.attributes),e.attributes),i.controller.close(),this.textStreamControllers.delete(e.streamId)));const r=this.byteStreamControllers.get(e.streamId);r&&(r.info.encryptionType!==n?r.controller.error(new Bn("Encryption type mismatch for stream ".concat(e.streamId,". Expected ").concat(n,", got ").concat(r.info.encryptionType),Zt.EncryptionTypeMismatch)):(r.info.attributes=Object.assign(Object.assign({},r.info.attributes),e.attributes),r.controller.close()),this.byteStreamControllers.delete(e.streamId))}}class OE{constructor(e,n,i){this.writableStream=e,this.defaultWriter=e.getWriter(),this.onClose=i,this.info=n}write(e){return this.defaultWriter.write(e)}close(){return M(this,void 0,void 0,function*(){var e;yield this.defaultWriter.close(),this.defaultWriter.releaseLock(),(e=this.onClose)===null||e===void 0||e.call(this)})}}class qB extends OE{}class HB extends OE{}const uk=15e3;class $B{constructor(e,n){this.engine=e,this.log=n}setupEngine(e){this.engine=e}sendText(e,n){return M(this,void 0,void 0,function*(){var i;const r=crypto.randomUUID(),l=new TextEncoder().encode(e).byteLength,c=(i=n?.attachments)===null||i===void 0?void 0:i.map(()=>crypto.randomUUID()),d=new Array(c?c.length+1:1).fill(0),h=(m,v)=>{var S;d[v]=m;const k=d.reduce((b,C)=>b+C,0);(S=n?.onProgress)===null||S===void 0||S.call(n,k)},f=yield this.streamText({streamId:r,totalSize:l,destinationIdentities:n?.destinationIdentities,topic:n?.topic,attachedStreamIds:c,attributes:n?.attributes});return yield f.write(e),h(1,0),yield f.close(),n?.attachments&&c&&(yield Promise.all(n.attachments.map((m,v)=>M(this,void 0,void 0,function*(){return this._sendFile(c[v],m,{topic:n.topic,mimeType:m.type,onProgress:S=>{h(S,v+1)}})})))),f.info})}streamText(e){return M(this,void 0,void 0,function*(){var n,i,r;const o=(n=e?.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),l={id:o,mimeType:"text/plain",timestamp:Date.now(),topic:(i=e?.topic)!==null&&i!==void 0?i:"",size:e?.totalSize,attributes:e?.attributes,encryptionType:!((r=this.engine.e2eeManager)===null||r===void 0)&&r.isDataChannelEncryptionEnabled?Rt.GCM:Rt.NONE},c=new Ru({streamId:o,mimeType:l.mimeType,topic:l.topic,timestamp:vs(l.timestamp),totalLength:vs(e?.totalSize),attributes:l.attributes,contentHeader:{case:"textHeader",value:new _x({version:e?.version,attachedStreamIds:e?.attachedStreamIds,replyToStreamId:e?.replyToStreamId,operationType:e?.type==="update"?Tp.UPDATE:Tp.CREATE})}}),d=e?.destinationIdentities,h=new en({destinationIdentities:d,value:{case:"streamHeader",value:c}});yield this.engine.sendDataPacket(h,De.RELIABLE);let f=0;const m=this.engine,v=new WritableStream({write(b){return M(this,void 0,void 0,function*(){for(const C of VU(b,uk)){yield m.waitForBufferStatusLow(De.RELIABLE);const T=new _u({content:C,streamId:o,chunkIndex:vs(f)}),_=new en({destinationIdentities:d,value:{case:"streamChunk",value:T}});yield m.sendDataPacket(_,De.RELIABLE),f+=1}})},close(){return M(this,void 0,void 0,function*(){const b=new Iu({streamId:o}),C=new en({destinationIdentities:d,value:{case:"streamTrailer",value:b}});yield m.sendDataPacket(C,De.RELIABLE)})},abort(b){console.log("Sink error:",b)}});let S=()=>M(this,void 0,void 0,function*(){yield k.close()});m.once(de.Closing,S);const k=new qB(v,l,()=>this.engine.off(de.Closing,S));return k})}sendFile(e,n){return M(this,void 0,void 0,function*(){const i=crypto.randomUUID();return yield this._sendFile(i,e,n),{id:i}})}_sendFile(e,n,i){return M(this,void 0,void 0,function*(){var r;const o=yield this.streamBytes({streamId:e,totalSize:n.size,name:n.name,mimeType:(r=i?.mimeType)!==null&&r!==void 0?r:n.type,topic:i?.topic,destinationIdentities:i?.destinationIdentities}),l=n.stream().getReader();for(;;){const{done:c,value:d}=yield l.read();if(c)break;yield o.write(d)}return yield o.close(),o.info})}streamBytes(e){return M(this,void 0,void 0,function*(){var n,i,r,o,l,c;const d=(n=e?.streamId)!==null&&n!==void 0?n:crypto.randomUUID(),h=e?.destinationIdentities,f={id:d,mimeType:(i=e?.mimeType)!==null&&i!==void 0?i:"application/octet-stream",topic:(r=e?.topic)!==null&&r!==void 0?r:"",timestamp:Date.now(),attributes:e?.attributes,size:e?.totalSize,name:(o=e?.name)!==null&&o!==void 0?o:"unknown",encryptionType:!((l=this.engine.e2eeManager)===null||l===void 0)&&l.isDataChannelEncryptionEnabled?Rt.GCM:Rt.NONE},m=new Ru({totalLength:vs((c=f.size)!==null&&c!==void 0?c:0),mimeType:f.mimeType,streamId:d,topic:f.topic,timestamp:vs(Date.now()),attributes:f.attributes,contentHeader:{case:"byteHeader",value:new Ix({name:f.name})}}),v=new en({destinationIdentities:h,value:{case:"streamHeader",value:m}});yield this.engine.sendDataPacket(v,De.RELIABLE);let S=0;const k=new nn,b=this.engine,C=this.log,T=new WritableStream({write(R){return M(this,void 0,void 0,function*(){const P=yield k.lock();let I=0;try{for(;I<R.byteLength;){const D=R.slice(I,I+uk);yield b.waitForBufferStatusLow(De.RELIABLE);const O=new en({destinationIdentities:h,value:{case:"streamChunk",value:new _u({content:D,streamId:d,chunkIndex:vs(S)})}});yield b.sendDataPacket(O,De.RELIABLE),S+=1,I+=D.byteLength}}finally{P()}})},close(){return M(this,void 0,void 0,function*(){const R=new Iu({streamId:d}),P=new en({destinationIdentities:h,value:{case:"streamTrailer",value:R}});yield b.sendDataPacket(P,De.RELIABLE)})},abort(R){C.error("Sink error:",R)}});return new HB(T,f)})}}class LE extends K{constructor(e,n,i,r,o){super(e,i,o),this.sid=n,this.receiver=r}get isLocal(){return!1}setMuted(e){this.isMuted!==e&&(this.isMuted=e,this._mediaStreamTrack.enabled=!e,this.emit(e?le.Muted:le.Unmuted,this))}setMediaStream(e){this.mediaStream=e;const n=i=>{i.track===this._mediaStreamTrack&&(e.removeEventListener("removetrack",n),this.receiver&&"playoutDelayHint"in this.receiver&&(this.receiver.playoutDelayHint=void 0),this.receiver=void 0,this._currentBitrate=0,this.emit(le.Ended,this))};e.addEventListener("removetrack",n)}start(){this.startMonitor(),super.enable()}stop(){this.stopMonitor(),super.disable()}getRTCStatsReport(){return M(this,void 0,void 0,function*(){var e;return!((e=this.receiver)===null||e===void 0)&&e.getStats?yield this.receiver.getStats():void 0})}setPlayoutDelay(e){this.receiver?"playoutDelayHint"in this.receiver?this.receiver.playoutDelayHint=e:this.log.warn("Playout delay not supported in this browser"):this.log.warn("Cannot set playout delay, track already ended")}getPlayoutDelay(){if(this.receiver){if("playoutDelayHint"in this.receiver)return this.receiver.playoutDelayHint;this.log.warn("Playout delay not supported in this browser")}else this.log.warn("Cannot get playout delay, track already ended");return 0}startMonitor(){this.monitorInterval||(this.monitorInterval=setInterval(()=>this.monitorReceiver(),yg)),$U()&&this.registerTimeSyncUpdate()}registerTimeSyncUpdate(){const e=()=>{var n;this.timeSyncHandle=requestAnimationFrame(()=>e());const i=(n=this.receiver)===null||n===void 0?void 0:n.getSynchronizationSources()[0];if(i){const{timestamp:r,rtpTimestamp:o}=i;o&&this.rtpTimestamp!==o&&(this.emit(le.TimeSyncUpdate,{timestamp:r,rtpTimestamp:o}),this.rtpTimestamp=o)}};e()}}class KB extends LE{constructor(e,n,i,r,o,l){super(e,n,K.Kind.Audio,i,l),this.monitorReceiver=()=>M(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const c=yield this.getReceiverStats();c&&this.prevStats&&this.receiver&&(this._currentBitrate=od(c,this.prevStats)),this.prevStats=c}),this.audioContext=r,this.webAudioPluginNodes=[],o&&(this.sinkId=o.deviceId)}setVolume(e){var n;for(const i of this.attachedElements)this.audioContext?(n=this.gainNode)===null||n===void 0||n.gain.setTargetAtTime(e,0,.1):i.volume=e;Ti()&&this._mediaStreamTrack._setVolume(e),this.elementVolume=e}getVolume(){if(this.elementVolume)return this.elementVolume;if(Ti())return 1;let e=0;return this.attachedElements.forEach(n=>{n.volume>e&&(e=n.volume)}),e}setSinkId(e){return M(this,void 0,void 0,function*(){this.sinkId=e,yield Promise.all(this.attachedElements.map(n=>{if(Up(n))return n.setSinkId(e)}))})}attach(e){const n=this.attachedElements.length===0;return e?super.attach(e):e=super.attach(),this.sinkId&&Up(e)&&e.setSinkId(this.sinkId).catch(i=>{this.log.error("Failed to set sink id on remote audio track",i,this.logContext)}),this.audioContext&&n&&(this.log.debug("using audio context mapping",this.logContext),this.connectWebAudio(this.audioContext,e),e.volume=0,e.muted=!0),this.elementVolume&&this.setVolume(this.elementVolume),e}detach(e){let n;return e?(n=super.detach(e),this.audioContext&&(this.attachedElements.length>0?this.connectWebAudio(this.audioContext,this.attachedElements[0]):this.disconnectWebAudio())):(n=super.detach(),this.disconnectWebAudio()),n}setAudioContext(e){this.audioContext=e,e&&this.attachedElements.length>0?this.connectWebAudio(e,this.attachedElements[0]):e||this.disconnectWebAudio()}setWebAudioPlugins(e){this.webAudioPluginNodes=e,this.attachedElements.length>0&&this.audioContext&&this.connectWebAudio(this.audioContext,this.attachedElements[0])}connectWebAudio(e,n){this.disconnectWebAudio(),this.sourceNode=e.createMediaStreamSource(n.srcObject);let i=this.sourceNode;this.webAudioPluginNodes.forEach(r=>{i.connect(r),i=r}),this.gainNode=e.createGain(),i.connect(this.gainNode),this.gainNode.connect(e.destination),this.elementVolume&&this.gainNode.gain.setTargetAtTime(this.elementVolume,0,.1),e.state!=="running"&&e.resume().then(()=>{e.state!=="running"&&this.emit(le.AudioPlaybackFailed,new Error("Audio Context couldn't be started automatically"))}).catch(r=>{this.emit(le.AudioPlaybackFailed,r)})}disconnectWebAudio(){var e,n;(e=this.gainNode)===null||e===void 0||e.disconnect(),(n=this.sourceNode)===null||n===void 0||n.disconnect(),this.gainNode=void 0,this.sourceNode=void 0}getReceiverStats(){return M(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n;return e.forEach(i=>{i.type==="inbound-rtp"&&(n={type:"audio",streamId:i.id,timestamp:i.timestamp,jitter:i.jitter,bytesReceived:i.bytesReceived,concealedSamples:i.concealedSamples,concealmentEvents:i.concealmentEvents,silentConcealedSamples:i.silentConcealedSamples,silentConcealmentEvents:i.silentConcealmentEvents,totalAudioEnergy:i.totalAudioEnergy,totalSamplesDuration:i.totalSamplesDuration})}),n})}}const jf=100;class GB extends LE{constructor(e,n,i,r,o){super(e,n,K.Kind.Video,i,o),this.elementInfos=[],this.monitorReceiver=()=>M(this,void 0,void 0,function*(){if(!this.receiver){this._currentBitrate=0;return}const l=yield this.getReceiverStats();l&&this.prevStats&&this.receiver&&(this._currentBitrate=od(l,this.prevStats)),this.prevStats=l}),this.debouncedHandleResize=pg(()=>{this.updateDimensions()},jf),this.adaptiveStreamSettings=r}get isAdaptiveStream(){return this.adaptiveStreamSettings!==void 0}setStreamState(e){super.setStreamState(e),this.log.debug("setStreamState",e),this.isAdaptiveStream&&e===K.StreamState.Active&&this.updateVisibility()}get mediaStreamTrack(){return this._mediaStreamTrack}setMuted(e){super.setMuted(e),this.attachedElements.forEach(n=>{e?xo(this._mediaStreamTrack,n):vo(this._mediaStreamTrack,n)})}attach(e){if(e?super.attach(e):e=super.attach(),this.adaptiveStreamSettings&&this.elementInfos.find(n=>n.element===e)===void 0){const n=new XB(e);this.observeElementInfo(n)}return e}observeElementInfo(e){this.adaptiveStreamSettings&&this.elementInfos.find(n=>n===e)===void 0?(e.handleResize=()=>{this.debouncedHandleResize()},e.handleVisibilityChanged=()=>{this.updateVisibility()},this.elementInfos.push(e),e.observe(),this.debouncedHandleResize(),this.updateVisibility()):this.log.warn("visibility resize observer not triggered",this.logContext)}stopObservingElementInfo(e){if(!this.isAdaptiveStream){this.log.warn("stopObservingElementInfo ignored",this.logContext);return}const n=this.elementInfos.filter(i=>i===e);for(const i of n)i.stopObserving();this.elementInfos=this.elementInfos.filter(i=>i!==e),this.updateVisibility(),this.debouncedHandleResize()}detach(e){let n=[];if(e)return this.stopObservingElement(e),super.detach(e);n=super.detach();for(const i of n)this.stopObservingElement(i);return n}getDecoderImplementation(){var e;return(e=this.prevStats)===null||e===void 0?void 0:e.decoderImplementation}getReceiverStats(){return M(this,void 0,void 0,function*(){if(!this.receiver||!this.receiver.getStats)return;const e=yield this.receiver.getStats();let n,i="",r=new Map;return e.forEach(o=>{o.type==="inbound-rtp"?(i=o.codecId,n={type:"video",streamId:o.id,framesDecoded:o.framesDecoded,framesDropped:o.framesDropped,framesReceived:o.framesReceived,packetsReceived:o.packetsReceived,packetsLost:o.packetsLost,frameWidth:o.frameWidth,frameHeight:o.frameHeight,pliCount:o.pliCount,firCount:o.firCount,nackCount:o.nackCount,jitter:o.jitter,timestamp:o.timestamp,bytesReceived:o.bytesReceived,decoderImplementation:o.decoderImplementation}):o.type==="codec"&&r.set(o.id,o)}),n&&i!==""&&r.get(i)&&(n.mimeType=r.get(i).mimeType),n})}stopObservingElement(e){const n=this.elementInfos.filter(i=>i.element===e);for(const i of n)this.stopObservingElementInfo(i)}handleAppVisibilityChanged(){const e=Object.create(null,{handleAppVisibilityChanged:{get:()=>super.handleAppVisibilityChanged}});return M(this,void 0,void 0,function*(){yield e.handleAppVisibilityChanged.call(this),this.isAdaptiveStream&&this.updateVisibility()})}updateVisibility(e){var n,i;const r=this.elementInfos.reduce((d,h)=>Math.max(d,h.visibilityChangedAt||0),0),o=!((i=(n=this.adaptiveStreamSettings)===null||n===void 0?void 0:n.pauseVideoInBackground)!==null&&i!==void 0)||i?this.isInBackground:!1,l=this.elementInfos.some(d=>d.pictureInPicture),c=this.elementInfos.some(d=>d.visible)&&!o||l;if(!(this.lastVisible===c&&!e)){if(!c&&Date.now()-r<jf){Bt.setTimeout(()=>{this.updateVisibility()},jf);return}this.lastVisible=c,this.emit(le.VisibilityChanged,c,this)}}updateDimensions(){var e,n;let i=0,r=0;const o=this.getPixelDensity();for(const l of this.elementInfos){const c=l.width()*o,d=l.height()*o;c+d>i+r&&(i=c,r=d)}((e=this.lastDimensions)===null||e===void 0?void 0:e.width)===i&&((n=this.lastDimensions)===null||n===void 0?void 0:n.height)===r||(this.lastDimensions={width:i,height:r},this.emit(le.VideoDimensionsChanged,this.lastDimensions,this))}getPixelDensity(){var e;const n=(e=this.adaptiveStreamSettings)===null||e===void 0?void 0:e.pixelDensity;return n==="screen"?BS():n||(BS()>2?2:1)}}class XB{get visible(){return this.isPiP||this.isIntersecting}get pictureInPicture(){return this.isPiP}constructor(e,n){this.onVisibilityChanged=i=>{var r;const{target:o,isIntersecting:l}=i;o===this.element&&(this.isIntersecting=l,this.isPiP=Oa(this.element),this.visibilityChangedAt=Date.now(),(r=this.handleVisibilityChanged)===null||r===void 0||r.call(this))},this.onEnterPiP=()=>{var i,r,o;(r=(i=window.documentPictureInPicture)===null||i===void 0?void 0:i.window)===null||r===void 0||r.addEventListener("pagehide",this.onLeavePiP),this.isPiP=Oa(this.element),(o=this.handleVisibilityChanged)===null||o===void 0||o.call(this)},this.onLeavePiP=()=>{var i;this.isPiP=Oa(this.element),(i=this.handleVisibilityChanged)===null||i===void 0||i.call(this)},this.element=e,this.isIntersecting=n??Gp(e),this.isPiP=mn()&&Oa(e),this.visibilityChangedAt=0}width(){return this.element.clientWidth}height(){return this.element.clientHeight}observe(){var e,n,i;this.isIntersecting=Gp(this.element),this.isPiP=Oa(this.element),this.element.handleResize=()=>{var r;(r=this.handleResize)===null||r===void 0||r.call(this)},this.element.handleVisibilityChanged=this.onVisibilityChanged,zS().observe(this.element),VS().observe(this.element),this.element.addEventListener("enterpictureinpicture",this.onEnterPiP),this.element.addEventListener("leavepictureinpicture",this.onLeavePiP),(e=window.documentPictureInPicture)===null||e===void 0||e.addEventListener("enter",this.onEnterPiP),(i=(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window)===null||i===void 0||i.addEventListener("pagehide",this.onLeavePiP)}stopObserving(){var e,n,i,r,o;(e=zS())===null||e===void 0||e.unobserve(this.element),(n=VS())===null||n===void 0||n.unobserve(this.element),this.element.removeEventListener("enterpictureinpicture",this.onEnterPiP),this.element.removeEventListener("leavepictureinpicture",this.onLeavePiP),(i=window.documentPictureInPicture)===null||i===void 0||i.removeEventListener("enter",this.onEnterPiP),(o=(r=window.documentPictureInPicture)===null||r===void 0?void 0:r.window)===null||o===void 0||o.removeEventListener("pagehide",this.onLeavePiP)}}function Oa(t){var e,n;return document.pictureInPictureElement===t?!0:!((e=window.documentPictureInPicture)===null||e===void 0)&&e.window?Gp(t,(n=window.documentPictureInPicture)===null||n===void 0?void 0:n.window):!1}function Gp(t,e){const n=e||window;let i=t.offsetTop,r=t.offsetLeft;const o=t.offsetWidth,l=t.offsetHeight,{hidden:c}=t,{display:d}=getComputedStyle(t);for(;t.offsetParent;)t=t.offsetParent,i+=t.offsetTop,r+=t.offsetLeft;return i<n.pageYOffset+n.innerHeight&&r<n.pageXOffset+n.innerWidth&&i+l>n.pageYOffset&&r+o>n.pageXOffset&&!c&&d!=="none"}class Bi extends Ei.EventEmitter{constructor(e,n,i,r){var o;super(),this.metadataMuted=!1,this.encryption=Rt.NONE,this.log=Oe,this.handleMuted=()=>{this.emit(le.Muted)},this.handleUnmuted=()=>{this.emit(le.Unmuted)},this.log=Ji((o=r?.loggerName)!==null&&o!==void 0?o:oi.Publication),this.loggerContextCb=this.loggerContextCb,this.setMaxListeners(100),this.kind=e,this.trackSid=n,this.trackName=i,this.source=K.Source.Unknown}setTrack(e){this.track&&(this.track.off(le.Muted,this.handleMuted),this.track.off(le.Unmuted,this.handleUnmuted)),this.track=e,e&&(e.on(le.Muted,this.handleMuted),e.on(le.Unmuted,this.handleUnmuted))}get logContext(){var e;return Object.assign(Object.assign({},(e=this.loggerContextCb)===null||e===void 0?void 0:e.call(this)),je(this))}get isMuted(){return this.metadataMuted}get isEnabled(){return!0}get isSubscribed(){return this.track!==void 0}get isEncrypted(){return this.encryption!==Rt.NONE}get audioTrack(){if(ki(this.track))return this.track}get videoTrack(){if(Gr(this.track))return this.track}updateInfo(e){this.trackSid=e.sid,this.trackName=e.name,this.source=K.sourceFromProto(e.source),this.mimeType=e.mimeType,this.kind===K.Kind.Video&&e.width>0&&(this.dimensions={width:e.width,height:e.height},this.simulcasted=e.simulcast),this.encryption=e.encryption,this.trackInfo=e,this.log.debug("update publication info",Object.assign(Object.assign({},this.logContext),{info:e}))}}(function(t){(function(e){e.Desired="desired",e.Subscribed="subscribed",e.Unsubscribed="unsubscribed"})(t.SubscriptionStatus||(t.SubscriptionStatus={})),(function(e){e.Allowed="allowed",e.NotAllowed="not_allowed"})(t.PermissionStatus||(t.PermissionStatus={}))})(Bi||(Bi={}));class Xp extends Bi{get isUpstreamPaused(){var e;return(e=this.track)===null||e===void 0?void 0:e.isUpstreamPaused}constructor(e,n,i,r){super(e,n.sid,n.name,r),this.track=void 0,this.handleTrackEnded=()=>{this.emit(le.Ended)},this.handleCpuConstrained=()=>{this.track&&Gr(this.track)&&this.emit(le.CpuConstrained,this.track)},this.updateInfo(n),this.setTrack(i)}setTrack(e){this.track&&(this.track.off(le.Ended,this.handleTrackEnded),this.track.off(le.CpuConstrained,this.handleCpuConstrained)),super.setTrack(e),e&&(e.on(le.Ended,this.handleTrackEnded),e.on(le.CpuConstrained,this.handleCpuConstrained))}get isMuted(){return this.track?this.track.isMuted:super.isMuted}get audioTrack(){return super.audioTrack}get videoTrack(){return super.videoTrack}get isLocal(){return!0}mute(){return M(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.mute()})}unmute(){return M(this,void 0,void 0,function*(){var e;return(e=this.track)===null||e===void 0?void 0:e.unmute()})}pauseUpstream(){return M(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.pauseUpstream()})}resumeUpstream(){return M(this,void 0,void 0,function*(){var e;yield(e=this.track)===null||e===void 0?void 0:e.resumeUpstream()})}getTrackFeatures(){var e;if(ki(this.track)){const n=this.track.getSourceTrackSettings(),i=new Set;return n.autoGainControl&&i.add(Nt.TF_AUTO_GAIN_CONTROL),n.echoCancellation&&i.add(Nt.TF_ECHO_CANCELLATION),n.noiseSuppression&&i.add(Nt.TF_NOISE_SUPPRESSION),n.channelCount&&n.channelCount>1&&i.add(Nt.TF_STEREO),!((e=this.options)===null||e===void 0)&&e.dtx||i.add(Nt.TF_NO_DTX),this.track.enhancedNoiseCancellation&&i.add(Nt.TF_ENHANCED_NOISE_CANCELLATION),Array.from(i.values())}else return[]}}function ad(t,e){return M(this,void 0,void 0,function*(){t??(t={});let n=!1;const{audioProcessor:i,videoProcessor:r,optionsWithoutProcessor:o}=xE(t);let l=o.audio,c=o.video;if(i&&typeof o.audio=="object"&&(o.audio.processor=i),r&&typeof o.video=="object"&&(o.video.processor=r),t.audio&&typeof o.audio=="object"&&typeof o.audio.deviceId=="string"){const m=o.audio.deviceId;o.audio.deviceId={exact:m},n=!0,l=Object.assign(Object.assign({},o.audio),{deviceId:{ideal:m}})}if(o.video&&typeof o.video=="object"&&typeof o.video.deviceId=="string"){const m=o.video.deviceId;o.video.deviceId={exact:m},n=!0,c=Object.assign(Object.assign({},o.video),{deviceId:{ideal:m}})}(o.audio===!0||typeof o.audio=="object"&&!o.audio.deviceId)&&(o.audio={deviceId:"default"}),o.video===!0?o.video={deviceId:"default"}:typeof o.video=="object"&&!o.video.deviceId&&(o.video.deviceId="default");const d=CE(o,PE,RE),h=dg(d),f=navigator.mediaDevices.getUserMedia(h);o.audio&&(Dt.userMediaPromiseMap.set("audioinput",f),f.catch(()=>Dt.userMediaPromiseMap.delete("audioinput"))),o.video&&(Dt.userMediaPromiseMap.set("videoinput",f),f.catch(()=>Dt.userMediaPromiseMap.delete("videoinput")));try{const m=yield f;return yield Promise.all(m.getTracks().map(v=>M(this,void 0,void 0,function*(){const S=v.kind==="audio";let k=S?d.audio:d.video;(typeof k=="boolean"||!k)&&(k={});let b;const C=S?h.audio:h.video;typeof C!="boolean"&&(b=C);const T=v.getSettings().deviceId;b?.deviceId&&Fr(b.deviceId)!==T?b.deviceId=T:b||(b={deviceId:T});const _=xB(v,b,e);return _.kind===K.Kind.Video?_.source=K.Source.Camera:_.kind===K.Kind.Audio&&(_.source=K.Source.Microphone),_.mediaStream=m,ki(_)&&i?yield _.setProcessor(i):Gr(_)&&r&&(yield _.setProcessor(r)),_})))}catch(m){if(!n)throw m;return ad(Object.assign(Object.assign({},t),{audio:l,video:c}),e)}})}function YB(t){return M(this,void 0,void 0,function*(){return(yield ad({audio:!1,video:!0}))[0]})}function FE(t){return M(this,void 0,void 0,function*(){return(yield ad({audio:t??!0,video:!1}))[0]})}var Mr;(function(t){t.Excellent="excellent",t.Good="good",t.Poor="poor",t.Lost="lost",t.Unknown="unknown"})(Mr||(Mr={}));function JB(t){switch(t){case ja.EXCELLENT:return Mr.Excellent;case ja.GOOD:return Mr.Good;case ja.POOR:return Mr.Poor;case ja.LOST:return Mr.Lost;default:return Mr.Unknown}}class jE extends Ei.EventEmitter{get logContext(){var e,n;return Object.assign({},(n=(e=this.loggerOptions)===null||e===void 0?void 0:e.loggerContextCb)===null||n===void 0?void 0:n.call(e))}get isEncrypted(){return this.trackPublications.size>0&&Array.from(this.trackPublications.values()).every(e=>e.isEncrypted)}get isAgent(){var e;return((e=this.permissions)===null||e===void 0?void 0:e.agent)||this.kind===ol.AGENT}get isActive(){var e;return((e=this.participantInfo)===null||e===void 0?void 0:e.state)===Co.ACTIVE}get kind(){return this._kind}get attributes(){return Object.freeze(Object.assign({},this._attributes))}constructor(e,n,i,r,o,l){let c=arguments.length>6&&arguments[6]!==void 0?arguments[6]:ol.STANDARD;var d;super(),this.audioLevel=0,this.isSpeaking=!1,this._connectionQuality=Mr.Unknown,this.log=Oe,this.log=Ji((d=l?.loggerName)!==null&&d!==void 0?d:oi.Participant),this.loggerOptions=l,this.setMaxListeners(100),this.sid=e,this.identity=n,this.name=i,this.metadata=r,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this._kind=c,this._attributes=o??{}}getTrackPublications(){return Array.from(this.trackPublications.values())}getTrackPublication(e){for(const[,n]of this.trackPublications)if(n.source===e)return n}getTrackPublicationByName(e){for(const[,n]of this.trackPublications)if(n.trackName===e)return n}waitUntilActive(){return this.isActive?Promise.resolve():this.activeFuture?this.activeFuture.promise:(this.activeFuture=new zn,this.once(fe.Active,()=>{var e,n;(n=(e=this.activeFuture)===null||e===void 0?void 0:e.resolve)===null||n===void 0||n.call(e),this.activeFuture=void 0}),this.activeFuture.promise)}get connectionQuality(){return this._connectionQuality}get isCameraEnabled(){var e;const n=this.getTrackPublication(K.Source.Camera);return!(!((e=n?.isMuted)!==null&&e!==void 0)||e)}get isMicrophoneEnabled(){var e;const n=this.getTrackPublication(K.Source.Microphone);return!(!((e=n?.isMuted)!==null&&e!==void 0)||e)}get isScreenShareEnabled(){return!!this.getTrackPublication(K.Source.ScreenShare)}get isLocal(){return!1}get joinedAt(){return this.participantInfo?new Date(Number.parseInt(this.participantInfo.joinedAt.toString())*1e3):new Date}updateInfo(e){var n;return this.participantInfo&&this.participantInfo.sid===e.sid&&this.participantInfo.version>e.version?!1:(this.identity=e.identity,this.sid=e.sid,this._setName(e.name),this._setMetadata(e.metadata),this._setAttributes(e.attributes),e.state===Co.ACTIVE&&((n=this.participantInfo)===null||n===void 0?void 0:n.state)!==Co.ACTIVE&&this.emit(fe.Active),e.permission&&this.setPermissions(e.permission),this.participantInfo=e,!0)}_setMetadata(e){const n=this.metadata!==e,i=this.metadata;this.metadata=e,n&&this.emit(fe.ParticipantMetadataChanged,i)}_setName(e){const n=this.name!==e;this.name=e,n&&this.emit(fe.ParticipantNameChanged,e)}_setAttributes(e){const n=KU(this.attributes,e);this._attributes=e,Object.keys(n).length>0&&this.emit(fe.AttributesChanged,n)}setPermissions(e){var n,i,r,o,l,c;const d=this.permissions,h=e.canPublish!==((n=this.permissions)===null||n===void 0?void 0:n.canPublish)||e.canSubscribe!==((i=this.permissions)===null||i===void 0?void 0:i.canSubscribe)||e.canPublishData!==((r=this.permissions)===null||r===void 0?void 0:r.canPublishData)||e.hidden!==((o=this.permissions)===null||o===void 0?void 0:o.hidden)||e.recorder!==((l=this.permissions)===null||l===void 0?void 0:l.recorder)||e.canPublishSources.length!==this.permissions.canPublishSources.length||e.canPublishSources.some((f,m)=>{var v;return f!==((v=this.permissions)===null||v===void 0?void 0:v.canPublishSources[m])})||e.canSubscribeMetrics!==((c=this.permissions)===null||c===void 0?void 0:c.canSubscribeMetrics);return this.permissions=e,h&&this.emit(fe.ParticipantPermissionsChanged,d),h}setIsSpeaking(e){e!==this.isSpeaking&&(this.isSpeaking=e,e&&(this.lastSpokeAt=new Date),this.emit(fe.IsSpeakingChanged,e))}setConnectionQuality(e){const n=this._connectionQuality;this._connectionQuality=JB(e),n!==this._connectionQuality&&this.emit(fe.ConnectionQualityChanged,this._connectionQuality)}setDisconnected(){var e,n;this.activeFuture&&((n=(e=this.activeFuture).reject)===null||n===void 0||n.call(e,new Error("Participant disconnected")),this.activeFuture=void 0)}setAudioContext(e){this.audioContext=e,this.audioTrackPublications.forEach(n=>ki(n.track)&&n.track.setAudioContext(e))}addTrackPublication(e){e.on(le.Muted,()=>{this.emit(fe.TrackMuted,e)}),e.on(le.Unmuted,()=>{this.emit(fe.TrackUnmuted,e)});const n=e;switch(n.track&&(n.track.sid=e.trackSid),this.trackPublications.set(e.trackSid,e),e.kind){case K.Kind.Audio:this.audioTrackPublications.set(e.trackSid,e);break;case K.Kind.Video:this.videoTrackPublications.set(e.trackSid,e);break}}}function QB(t){var e,n,i;if(!t.participantSid&&!t.participantIdentity)throw new Error("Invalid track permission, must provide at least one of participantIdentity and participantSid");return new Ox({participantIdentity:(e=t.participantIdentity)!==null&&e!==void 0?e:"",participantSid:(n=t.participantSid)!==null&&n!==void 0?n:"",allTracks:(i=t.allowAll)!==null&&i!==void 0?i:!1,trackSids:t.allowedTrackSids||[]})}class ZB extends jE{constructor(e,n,i,r,o,l){super(e,n,void 0,void 0,void 0,{loggerName:r.loggerName,loggerContextCb:()=>this.engine.logContext}),this.pendingPublishing=new Set,this.pendingPublishPromises=new Map,this.participantTrackPermissions=[],this.allParticipantsAllowedToSubscribe=!0,this.encryptionType=Rt.NONE,this.enabledPublishVideoCodecs=[],this.pendingAcks=new Map,this.pendingResponses=new Map,this.handleReconnecting=()=>{this.reconnectFuture||(this.reconnectFuture=new zn)},this.handleReconnected=()=>{var c,d;(d=(c=this.reconnectFuture)===null||c===void 0?void 0:c.resolve)===null||d===void 0||d.call(c),this.reconnectFuture=void 0,this.updateTrackSubscriptionPermissions()},this.handleClosing=()=>{var c,d,h,f,m,v;this.reconnectFuture&&(this.reconnectFuture.promise.catch(S=>this.log.warn(S.message,this.logContext)),(d=(c=this.reconnectFuture)===null||c===void 0?void 0:c.reject)===null||d===void 0||d.call(c,"Got disconnected during reconnection attempt"),this.reconnectFuture=void 0),this.signalConnectedFuture&&((f=(h=this.signalConnectedFuture).reject)===null||f===void 0||f.call(h,"Got disconnected without signal connected"),this.signalConnectedFuture=void 0),(v=(m=this.activeAgentFuture)===null||m===void 0?void 0:m.reject)===null||v===void 0||v.call(m,"Got disconnected without active agent present"),this.activeAgentFuture=void 0,this.firstActiveAgent=void 0},this.handleSignalConnected=c=>{var d,h;c.participant&&this.updateInfo(c.participant),this.signalConnectedFuture||(this.signalConnectedFuture=new zn),(h=(d=this.signalConnectedFuture).resolve)===null||h===void 0||h.call(d)},this.handleSignalRequestResponse=c=>{const{requestId:d,reason:h,message:f}=c,m=this.pendingSignalRequests.get(d);m&&(h!==ag.OK&&m.reject(new OS(f,h)),this.pendingSignalRequests.delete(d))},this.handleDataPacket=c=>{switch(c.value.case){case"rpcResponse":let d=c.value.value,h=null,f=null;d.value.case==="payload"?h=d.value.value:d.value.case==="error"&&(f=dt.fromProto(d.value.value)),this.handleIncomingRpcResponse(d.requestId,h,f);break;case"rpcAck":let m=c.value.value;this.handleIncomingRpcAck(m.requestId);break}},this.updateTrackSubscriptionPermissions=()=>{this.log.debug("updating track subscription permissions",Object.assign(Object.assign({},this.logContext),{allParticipantsAllowed:this.allParticipantsAllowedToSubscribe,participantTrackPermissions:this.participantTrackPermissions})),this.engine.client.sendUpdateSubscriptionPermissions(this.allParticipantsAllowedToSubscribe,this.participantTrackPermissions.map(c=>QB(c)))},this.onTrackUnmuted=c=>{this.onTrackMuted(c,c.isUpstreamPaused)},this.onTrackMuted=(c,d)=>{if(d===void 0&&(d=!0),!c.sid){this.log.error("could not update mute status for unpublished track",Object.assign(Object.assign({},this.logContext),je(c)));return}this.engine.updateMuteStatus(c.sid,d)},this.onTrackUpstreamPaused=c=>{this.log.debug("upstream paused",Object.assign(Object.assign({},this.logContext),je(c))),this.onTrackMuted(c,!0)},this.onTrackUpstreamResumed=c=>{this.log.debug("upstream resumed",Object.assign(Object.assign({},this.logContext),je(c))),this.onTrackMuted(c,c.isMuted)},this.onTrackFeatureUpdate=c=>{const d=this.audioTrackPublications.get(c.sid);if(!d){this.log.warn("Could not update local audio track settings, missing publication for track ".concat(c.sid),this.logContext);return}this.engine.client.sendUpdateLocalAudioTrack(d.trackSid,d.getTrackFeatures())},this.onTrackCpuConstrained=(c,d)=>{this.log.debug("track cpu constrained",Object.assign(Object.assign({},this.logContext),je(d))),this.emit(fe.LocalTrackCpuConstrained,c,d)},this.handleSubscribedQualityUpdate=c=>M(this,void 0,void 0,function*(){var d,h,f,m,v;if(!(!((v=this.roomOptions)===null||v===void 0)&&v.dynacast))return;const S=this.videoTrackPublications.get(c.trackSid);if(!S){this.log.warn("received subscribed quality update for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:c.trackSid}));return}if(!S.videoTrack)return;const k=yield S.videoTrack.setPublishingCodecs(c.subscribedCodecs);try{for(var b=!0,C=qi(k),T;T=yield C.next(),d=T.done,!d;b=!0){m=T.value,b=!1;const _=m;TU(_)&&(this.log.debug("publish ".concat(_," for ").concat(S.videoTrack.sid),Object.assign(Object.assign({},this.logContext),je(S))),yield this.publishAdditionalCodecForTrack(S.videoTrack,_,S.options))}}catch(_){h={error:_}}finally{try{!b&&!d&&(f=C.return)&&(yield f.call(C))}finally{if(h)throw h.error}}}),this.handleLocalTrackUnpublished=c=>{const d=this.trackPublications.get(c.trackSid);if(!d){this.log.warn("received unpublished event for unknown track",Object.assign(Object.assign({},this.logContext),{trackSid:c.trackSid}));return}this.unpublishTrack(d.track)},this.handleTrackEnded=c=>M(this,void 0,void 0,function*(){if(c.source===K.Source.ScreenShare||c.source===K.Source.ScreenShareAudio)this.log.debug("unpublishing local track due to TrackEnded",Object.assign(Object.assign({},this.logContext),je(c))),this.unpublishTrack(c);else if(c.isUserProvided)yield c.mute();else if(Ui(c)||Rr(c))try{if(mn())try{const d=yield navigator?.permissions.query({name:c.source===K.Source.Camera?"camera":"microphone"});if(d&&d.state==="denied")throw this.log.warn("user has revoked access to ".concat(c.source),Object.assign(Object.assign({},this.logContext),je(c))),d.onchange=()=>{d.state!=="denied"&&(c.isMuted||c.restartTrack(),d.onchange=null)},new Error("GetUserMedia Permission denied")}catch{}c.isMuted||(this.log.debug("track ended, attempting to use a different device",Object.assign(Object.assign({},this.logContext),je(c))),Ui(c)?yield c.restartTrack({deviceId:"default"}):yield c.restartTrack())}catch{this.log.warn("could not restart track, muting instead",Object.assign(Object.assign({},this.logContext),je(c))),yield c.mute()}}),this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.trackPublications=new Map,this.engine=i,this.roomOptions=r,this.setupEngine(i),this.activeDeviceMap=new Map([["audioinput","default"],["videoinput","default"],["audiooutput","default"]]),this.pendingSignalRequests=new Map,this.rpcHandlers=o,this.roomOutgoingDataStreamManager=l}get lastCameraError(){return this.cameraError}get lastMicrophoneError(){return this.microphoneError}get isE2EEEnabled(){return this.encryptionType!==Rt.NONE}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setupEngine(e){var n;this.engine=e,this.engine.on(de.RemoteMute,(i,r)=>{const o=this.trackPublications.get(i);!o||!o.track||(r?o.mute():o.unmute())}),!((n=this.signalConnectedFuture)===null||n===void 0)&&n.isResolved&&(this.signalConnectedFuture=void 0),this.engine.on(de.Connected,this.handleReconnected).on(de.SignalConnected,this.handleSignalConnected).on(de.SignalRestarted,this.handleReconnected).on(de.SignalResumed,this.handleReconnected).on(de.Restarting,this.handleReconnecting).on(de.Resuming,this.handleReconnecting).on(de.LocalTrackUnpublished,this.handleLocalTrackUnpublished).on(de.SubscribedQualityUpdate,this.handleSubscribedQualityUpdate).on(de.Closing,this.handleClosing).on(de.SignalRequestResponse,this.handleSignalRequestResponse).on(de.DataPacketReceived,this.handleDataPacket)}setMetadata(e){return M(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({metadata:e})})}setName(e){return M(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({name:e})})}setAttributes(e){return M(this,void 0,void 0,function*(){yield this.requestMetadataUpdate({attributes:e})})}requestMetadataUpdate(e){return M(this,arguments,void 0,function(n){var i=this;let{metadata:r,name:o,attributes:l}=n;return(function*(){return new Promise((c,d)=>M(i,void 0,void 0,function*(){var h,f;try{let m=!1;const v=yield this.engine.client.sendUpdateLocalMetadata((h=r??this.metadata)!==null&&h!==void 0?h:"",(f=o??this.name)!==null&&f!==void 0?f:"",l),S=performance.now();for(this.pendingSignalRequests.set(v,{resolve:c,reject:k=>{d(k),m=!0},values:{name:o,metadata:r,attributes:l}});performance.now()-S<5e3&&!m;){if((!o||this.name===o)&&(!r||this.metadata===r)&&(!l||Object.entries(l).every(k=>{let[b,C]=k;return this.attributes[b]===C||C===""&&!this.attributes[b]}))){this.pendingSignalRequests.delete(v),c();return}yield rn(50)}d(new OS("Request to update local metadata timed out","TimeoutError"))}catch(m){m instanceof Error&&d(m)}}))})()})}setCameraEnabled(e,n,i){return this.setTrackEnabled(K.Source.Camera,e,n,i)}setMicrophoneEnabled(e,n,i){return this.setTrackEnabled(K.Source.Microphone,e,n,i)}setScreenShareEnabled(e,n,i){return this.setTrackEnabled(K.Source.ScreenShare,e,n,i)}setE2EEEnabled(e){return M(this,void 0,void 0,function*(){this.encryptionType=e?Rt.GCM:Rt.NONE,yield this.republishAllTracks(void 0,!1)})}setTrackEnabled(e,n,i,r){return M(this,void 0,void 0,function*(){var o,l;this.log.debug("setTrackEnabled",Object.assign(Object.assign({},this.logContext),{source:e,enabled:n})),this.republishPromise&&(yield this.republishPromise);let c=this.getTrackPublication(e);if(n)if(c)yield c.unmute();else{let d;if(this.pendingPublishing.has(e)){const h=yield this.waitForPendingPublicationOfSource(e);return h||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e})),yield h?.unmute(),h}this.pendingPublishing.add(e);try{switch(e){case K.Source.Camera:d=yield this.createTracks({video:(o=i)!==null&&o!==void 0?o:!0});break;case K.Source.Microphone:d=yield this.createTracks({audio:(l=i)!==null&&l!==void 0?l:!0});break;case K.Source.ScreenShare:d=yield this.createScreenTracks(Object.assign({},i));break;default:throw new Hi(e)}}catch(h){throw d?.forEach(f=>{f.stop()}),h instanceof Error&&this.emit(fe.MediaDevicesError,h,qp(e)),this.pendingPublishing.delete(e),h}for(const h of d){const f=Object.assign(Object.assign({},this.roomOptions.publishDefaults),i);e===K.Source.Microphone&&ki(h)&&f.preConnectBuffer&&(this.log.info("starting preconnect buffer for microphone",Object.assign({},this.logContext)),h.startPreConnectBuffer())}try{const h=[];for(const m of d)this.log.info("publishing track",Object.assign(Object.assign({},this.logContext),je(m))),h.push(this.publishTrack(m,r));[c]=yield Promise.all(h)}catch(h){throw d?.forEach(f=>{f.stop()}),h}finally{this.pendingPublishing.delete(e)}}else if(!c?.track&&this.pendingPublishing.has(e)&&(c=yield this.waitForPendingPublicationOfSource(e),c||this.log.info("waiting for pending publication promise timed out",Object.assign(Object.assign({},this.logContext),{source:e}))),c&&c.track)if(e===K.Source.ScreenShare){c=yield this.unpublishTrack(c.track);const d=this.getTrackPublication(K.Source.ScreenShareAudio);d&&d.track&&this.unpublishTrack(d.track)}else yield c.mute();return c})}enableCameraAndMicrophone(){return M(this,void 0,void 0,function*(){if(!(this.pendingPublishing.has(K.Source.Camera)||this.pendingPublishing.has(K.Source.Microphone))){this.pendingPublishing.add(K.Source.Camera),this.pendingPublishing.add(K.Source.Microphone);try{const e=yield this.createTracks({audio:!0,video:!0});yield Promise.all(e.map(n=>this.publishTrack(n)))}finally{this.pendingPublishing.delete(K.Source.Camera),this.pendingPublishing.delete(K.Source.Microphone)}}})}createTracks(e){return M(this,void 0,void 0,function*(){var n,i;e??(e={});const r=CE(e,(n=this.roomOptions)===null||n===void 0?void 0:n.audioCaptureDefaults,(i=this.roomOptions)===null||i===void 0?void 0:i.videoCaptureDefaults);try{return(yield ad(r,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext})).map(c=>(ki(c)&&(this.microphoneError=void 0,c.setAudioContext(this.audioContext),c.source=K.Source.Microphone,this.emit(fe.AudioStreamAcquired)),Gr(c)&&(this.cameraError=void 0,c.source=K.Source.Camera),c))}catch(o){throw o instanceof Error&&(e.audio&&(this.microphoneError=o),e.video&&(this.cameraError=o)),o}})}createScreenTracks(e){return M(this,void 0,void 0,function*(){if(e===void 0&&(e={}),navigator.mediaDevices.getDisplayMedia===void 0)throw new cg("getDisplayMedia not supported");e.resolution===void 0&&!_U()&&(e.resolution=ug.h1080fps30.resolution);const n=qU(e),i=yield navigator.mediaDevices.getDisplayMedia(n),r=i.getVideoTracks();if(r.length===0)throw new Hi("no video track found");const o=new Nu(r[0],void 0,!1,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});o.source=K.Source.ScreenShare,e.contentHint&&(o.mediaStreamTrack.contentHint=e.contentHint);const l=[o];if(i.getAudioTracks().length>0){this.emit(fe.AudioStreamAcquired);const c=new Mu(i.getAudioTracks()[0],void 0,!1,this.audioContext,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});c.source=K.Source.ScreenShareAudio,l.push(c)}return l})}publishTrack(e,n){return M(this,void 0,void 0,function*(){return this.publishOrRepublishTrack(e,n)})}publishOrRepublishTrack(e,n){return M(this,arguments,void 0,function(i,r){var o=this;let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return(function*(){var c,d,h,f;Ui(i)&&i.setAudioContext(o.audioContext),yield(c=o.reconnectFuture)===null||c===void 0?void 0:c.promise,o.republishPromise&&!l&&(yield o.republishPromise),Eo(i)&&o.pendingPublishPromises.has(i)&&(yield o.pendingPublishPromises.get(i));let m;if(i instanceof MediaStreamTrack)m=i.getConstraints();else{m=i.constraints;let T;switch(i.source){case K.Source.Microphone:T="audioinput";break;case K.Source.Camera:T="videoinput"}T&&o.activeDeviceMap.has(T)&&(m=Object.assign(Object.assign({},m),{deviceId:o.activeDeviceMap.get(T)}))}if(i instanceof MediaStreamTrack)switch(i.kind){case"audio":i=new Mu(i,m,!0,o.audioContext,{loggerName:o.roomOptions.loggerName,loggerContextCb:()=>o.logContext});break;case"video":i=new Nu(i,m,!0,{loggerName:o.roomOptions.loggerName,loggerContextCb:()=>o.logContext});break;default:throw new Hi("unsupported MediaStreamTrack kind ".concat(i.kind))}else i.updateLoggerOptions({loggerName:o.roomOptions.loggerName,loggerContextCb:()=>o.logContext});let v;if(o.trackPublications.forEach(T=>{T.track&&T.track===i&&(v=T)}),v)return o.log.warn("track has already been published, skipping",Object.assign(Object.assign({},o.logContext),je(v))),v;const S=Object.assign(Object.assign({},o.roomOptions.publishDefaults),r),k="channelCount"in i.mediaStreamTrack.getSettings()&&i.mediaStreamTrack.getSettings().channelCount===2||i.mediaStreamTrack.getConstraints().channelCount===2,b=(d=S.forceStereo)!==null&&d!==void 0?d:k;b&&(S.dtx===void 0&&o.log.info("Opus DTX will be disabled for stereo tracks by default. Enable them explicitly to make it work.",Object.assign(Object.assign({},o.logContext),je(i))),S.red===void 0&&o.log.info("Opus RED will be disabled for stereo tracks by default. Enable them explicitly to make it work."),(h=S.dtx)!==null&&h!==void 0||(S.dtx=!1),(f=S.red)!==null&&f!==void 0||(S.red=!1)),!AU()&&o.roomOptions.e2ee&&(o.log.info("End-to-end encryption is set up, simulcast publishing will be disabled on Safari versions and iOS browsers running iOS < v17.2",Object.assign({},o.logContext)),S.simulcast=!1),S.source&&(i.source=S.source);const C=new Promise((T,_)=>M(o,void 0,void 0,function*(){try{if(this.engine.client.currentState!==st.CONNECTED){this.log.debug("deferring track publication until signal is connected",Object.assign(Object.assign({},this.logContext),{track:je(i)}));const R=setTimeout(()=>{_(new DS("publishing rejected as engine not connected within timeout",408))},15e3);yield this.waitUntilEngineConnected(),clearTimeout(R);const P=yield this.publish(i,S,b);T(P)}else try{const R=yield this.publish(i,S,b);T(R)}catch(R){_(R)}}catch(R){_(R)}}));o.pendingPublishPromises.set(i,C);try{return yield C}catch(T){throw T}finally{o.pendingPublishPromises.delete(i)}})()})}waitUntilEngineConnected(){return this.signalConnectedFuture||(this.signalConnectedFuture=new zn),this.signalConnectedFuture.promise}hasPermissionsToPublish(e){if(!this.permissions)return this.log.warn("no permissions present for publishing track",Object.assign(Object.assign({},this.logContext),je(e))),!1;const{canPublish:n,canPublishSources:i}=this.permissions;return n&&(i.length===0||i.map(r=>GU(r)).includes(e.source))?!0:(this.log.warn("insufficient permissions to publish",Object.assign(Object.assign({},this.logContext),je(e))),!1)}publish(e,n,i){return M(this,void 0,void 0,function*(){var r,o,l,c,d,h,f,m,v,S;if(!this.hasPermissionsToPublish(e))throw new DS("failed to publish track, insufficient permissions",403);Array.from(this.trackPublications.values()).find(q=>Eo(e)&&q.source===e.source)&&e.source!==K.Source.Unknown&&this.log.info("publishing a second track with the same source: ".concat(e.source),Object.assign(Object.assign({},this.logContext),je(e))),n.stopMicTrackOnMute&&ki(e)&&(e.stopOnMute=!0),e.source===K.Source.ScreenShare&&Rs()&&(n.simulcast=!1),n.videoCodec==="av1"&&!EU()&&(n.videoCodec=void 0),n.videoCodec==="vp9"&&!PU()&&(n.videoCodec=void 0),n.videoCodec===void 0&&(n.videoCodec=Hp),this.enabledPublishVideoCodecs.length>0&&(this.enabledPublishVideoCodecs.some(q=>n.videoCodec===Ka(q.mime))||(n.videoCodec=Ka(this.enabledPublishVideoCodecs[0].mime)));const b=n.videoCodec;e.on(le.Muted,this.onTrackMuted),e.on(le.Unmuted,this.onTrackUnmuted),e.on(le.Ended,this.handleTrackEnded),e.on(le.UpstreamPaused,this.onTrackUpstreamPaused),e.on(le.UpstreamResumed,this.onTrackUpstreamResumed),e.on(le.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate);const C=[],T=!(!((r=n.dtx)!==null&&r!==void 0)||r),_=e.getSourceTrackSettings();_.autoGainControl&&C.push(Nt.TF_AUTO_GAIN_CONTROL),_.echoCancellation&&C.push(Nt.TF_ECHO_CANCELLATION),_.noiseSuppression&&C.push(Nt.TF_NOISE_SUPPRESSION),_.channelCount&&_.channelCount>1&&C.push(Nt.TF_STEREO),T&&C.push(Nt.TF_NO_DTX),Ui(e)&&e.hasPreConnectBuffer&&C.push(Nt.TF_PRECONNECT_BUFFER);const R=new al({cid:e.mediaStreamTrack.id,name:n.name,type:K.kindToProto(e.kind),muted:e.isMuted,source:K.sourceToProto(e.source),disableDtx:T,encryption:this.encryptionType,stereo:i,disableRed:this.isE2EEEnabled||!(!((o=n.red)!==null&&o!==void 0)||o),stream:n?.stream,backupCodecPolicy:n?.backupCodecPolicy,audioFeatures:C});let P;if(e.kind===K.Kind.Video){let q={width:0,height:0};try{q=yield e.waitForDimensions()}catch{const G=(c=(l=this.roomOptions.videoCaptureDefaults)===null||l===void 0?void 0:l.resolution)!==null&&c!==void 0?c:ll.h720.resolution;q={width:G.width,height:G.height},this.log.error("could not determine track dimensions, using defaults",Object.assign(Object.assign(Object.assign({},this.logContext),je(e)),{dims:q}))}R.width=q.width,R.height=q.height,Rr(e)&&(gi(b)&&(e.source===K.Source.ScreenShare&&(n.scalabilityMode="L1T3","contentHint"in e.mediaStreamTrack&&(e.mediaStreamTrack.contentHint="motion",this.log.info("forcing contentHint to motion for screenshare with SVC codecs",Object.assign(Object.assign({},this.logContext),je(e))))),n.scalabilityMode=(d=n.scalabilityMode)!==null&&d!==void 0?d:"L3T3_KEY"),R.simulcastCodecs=[new xp({codec:b,cid:e.mediaStreamTrack.id})],n.backupCodec===!0&&(n.backupCodec={codec:Hp}),n.backupCodec&&b!==n.backupCodec.codec&&R.encryption===Rt.NONE&&(this.roomOptions.dynacast||(this.roomOptions.dynacast=!0),R.simulcastCodecs.push(new xp({codec:n.backupCodec.codec,cid:""})))),P=Kp(e.source===K.Source.ScreenShare,R.width,R.height,n),R.layers=ok(R.width,R.height,P,gi(n.videoCodec))}else e.kind===K.Kind.Audio&&(P=[{maxBitrate:(h=n.audioPreset)===null||h===void 0?void 0:h.maxBitrate,priority:(m=(f=n.audioPreset)===null||f===void 0?void 0:f.priority)!==null&&m!==void 0?m:"high",networkPriority:(S=(v=n.audioPreset)===null||v===void 0?void 0:v.priority)!==null&&S!==void 0?S:"high"}]);if(!this.engine||this.engine.isClosed)throw new Et("cannot publish track when not connected");const I=()=>M(this,void 0,void 0,function*(){var q,H,G;if(!this.engine.pcManager)throw new Et("pcManager is not ready");if(e.sender=yield this.engine.createSender(e,n,P),this.emit(fe.LocalSenderCreated,e.sender,e),Rr(e)&&((q=n.degradationPreference)!==null&&q!==void 0||(n.degradationPreference=OB(e)),e.setDegradationPreference(n.degradationPreference)),P)if(Rs()&&e.kind===K.Kind.Audio){let ce;for(const pe of this.engine.pcManager.publisher.getTransceivers())if(pe.sender===e.sender){ce=pe;break}ce&&this.engine.pcManager.publisher.setTrackCodecBitrate({transceiver:ce,codec:"opus",maxbr:!((H=P[0])===null||H===void 0)&&H.maxBitrate?P[0].maxBitrate/1e3:0})}else e.codec&&gi(e.codec)&&(!((G=P[0])===null||G===void 0)&&G.maxBitrate)&&this.engine.pcManager.publisher.setTrackCodecBitrate({cid:R.cid,codec:e.codec,maxbr:P[0].maxBitrate/1e3});yield this.engine.negotiate()});let D;const O=new Promise((q,H)=>M(this,void 0,void 0,function*(){var G;try{D=yield this.engine.addTrack(R),q(D)}catch(ce){e.sender&&(!((G=this.engine.pcManager)===null||G===void 0)&&G.publisher)&&(this.engine.pcManager.publisher.removeTrack(e.sender),yield this.engine.negotiate().catch(pe=>{this.log.error("failed to negotiate after removing track due to failed add track request",Object.assign(Object.assign(Object.assign({},this.logContext),je(e)),{error:pe}))})),H(ce)}}));if(this.enabledPublishVideoCodecs.length>0)D=(yield Promise.all([O,I()]))[0];else{D=yield O;let q;if(D.codecs.forEach(H=>{q===void 0&&(q=H.mimeType)}),q&&e.kind===K.Kind.Video){const H=Ka(q);H!==b&&(this.log.debug("falling back to server selected codec",Object.assign(Object.assign(Object.assign({},this.logContext),je(e)),{codec:H})),n.videoCodec=H,P=Kp(e.source===K.Source.ScreenShare,R.width,R.height,n))}yield I()}const N=new Xp(e.kind,D,e,{loggerName:this.roomOptions.loggerName,loggerContextCb:()=>this.logContext});if(N.on(le.CpuConstrained,q=>this.onTrackCpuConstrained(q,N)),N.options=n,e.sid=D.sid,this.log.debug("publishing ".concat(e.kind," with encodings"),Object.assign(Object.assign({},this.logContext),{encodings:P,trackInfo:D})),Rr(e)?e.startMonitor(this.engine.client):Ui(e)&&e.startMonitor(),this.addTrackPublication(N),this.emit(fe.LocalTrackPublished,N),Ui(e)&&D.audioFeatures.includes(Nt.TF_PRECONNECT_BUFFER)){const q=e.getPreConnectBuffer(),H=e.getPreConnectBufferMimeType();this.on(fe.LocalTrackSubscribed,G=>{if(G.trackSid===D.sid){if(!e.hasPreConnectBuffer){this.log.warn("subscribe event came to late, buffer already closed",this.logContext);return}this.log.debug("finished recording preconnect buffer",Object.assign(Object.assign({},this.logContext),je(e))),e.stopPreConnectBuffer()}}),q&&new Promise((ce,pe)=>M(this,void 0,void 0,function*(){var me,ye,ie,Z,U,re;try{this.log.debug("waiting for agent",Object.assign(Object.assign({},this.logContext),je(e)));const te=setTimeout(()=>{pe(new Error("agent not active within 10 seconds"))},1e4),ue=yield this.waitUntilActiveAgentPresent();clearTimeout(te),this.log.debug("sending preconnect buffer",Object.assign(Object.assign({},this.logContext),je(e)));const ge=yield this.streamBytes({name:"preconnect-buffer",mimeType:H,topic:"lk.agent.pre-connect-audio-buffer",destinationIdentities:[ue.identity],attributes:{trackId:N.trackSid,sampleRate:String((U=_.sampleRate)!==null&&U!==void 0?U:"48000"),channels:String((re=_.channelCount)!==null&&re!==void 0?re:"1")}});try{for(var Y=!0,F=qi(q),$;$=yield F.next(),me=$.done,!me;Y=!0){Z=$.value,Y=!1;const we=Z;yield ge.write(we)}}catch(we){ye={error:we}}finally{try{!Y&&!me&&(ie=F.return)&&(yield ie.call(F))}finally{if(ye)throw ye.error}}yield ge.close(),ce()}catch(te){pe(te)}})).then(()=>{this.log.debug("preconnect buffer sent successfully",Object.assign(Object.assign({},this.logContext),je(e)))}).catch(ce=>{this.log.error("error sending preconnect buffer",Object.assign(Object.assign(Object.assign({},this.logContext),je(e)),{error:ce}))})}return N})}get isLocal(){return!0}publishAdditionalCodecForTrack(e,n,i){return M(this,void 0,void 0,function*(){var r;if(this.encryptionType!==Rt.NONE)return;let o;if(this.trackPublications.forEach(S=>{S.track&&S.track===e&&(o=S)}),!o)throw new Hi("track is not published");if(!Rr(e))throw new Hi("track is not a video track");const l=Object.assign(Object.assign({},(r=this.roomOptions)===null||r===void 0?void 0:r.publishDefaults),i),c=MB(e,n,l);if(!c){this.log.info("backup codec has been disabled, ignoring request to add additional codec for track",Object.assign(Object.assign({},this.logContext),je(e)));return}const d=e.addSimulcastTrack(n,c);if(!d)return;const h=new al({cid:d.mediaStreamTrack.id,type:K.kindToProto(e.kind),muted:e.isMuted,source:K.sourceToProto(e.source),sid:e.sid,simulcastCodecs:[{codec:l.videoCodec,cid:d.mediaStreamTrack.id}]});if(h.layers=ok(h.width,h.height,c),!this.engine||this.engine.isClosed)throw new Et("cannot publish track when not connected");const f=()=>M(this,void 0,void 0,function*(){yield this.engine.createSimulcastSender(e,d,l,c),yield this.engine.negotiate()}),v=(yield Promise.all([this.engine.addTrack(h),f()]))[0];this.log.debug("published ".concat(n," for track ").concat(e.sid),Object.assign(Object.assign({},this.logContext),{encodings:c,trackInfo:v}))})}unpublishTrack(e,n){return M(this,void 0,void 0,function*(){var i,r;if(Eo(e)){const h=this.pendingPublishPromises.get(e);h&&(this.log.info("awaiting publish promise before attempting to unpublish",Object.assign(Object.assign({},this.logContext),je(e))),yield h)}const o=this.getPublicationForTrack(e),l=o?je(o):void 0;if(this.log.debug("unpublishing track",Object.assign(Object.assign({},this.logContext),l)),!o||!o.track){this.log.warn("track was not unpublished because no publication was found",Object.assign(Object.assign({},this.logContext),l));return}e=o.track,e.off(le.Muted,this.onTrackMuted),e.off(le.Unmuted,this.onTrackUnmuted),e.off(le.Ended,this.handleTrackEnded),e.off(le.UpstreamPaused,this.onTrackUpstreamPaused),e.off(le.UpstreamResumed,this.onTrackUpstreamResumed),e.off(le.AudioTrackFeatureUpdate,this.onTrackFeatureUpdate),n===void 0&&(n=(r=(i=this.roomOptions)===null||i===void 0?void 0:i.stopLocalTrackOnUnpublish)!==null&&r!==void 0?r:!0),n?e.stop():e.stopMonitor();let c=!1;const d=e.sender;if(e.sender=void 0,this.engine.pcManager&&this.engine.pcManager.currentState<ct.FAILED&&d)try{for(const h of this.engine.pcManager.publisher.getTransceivers())h.sender===d&&(h.direction="inactive",c=!0);if(this.engine.removeTrack(d)&&(c=!0),Rr(e)){for(const[,h]of e.simulcastCodecs)h.sender&&(this.engine.removeTrack(h.sender)&&(c=!0),h.sender=void 0);e.simulcastCodecs.clear()}}catch(h){this.log.warn("failed to unpublish track",Object.assign(Object.assign(Object.assign({},this.logContext),l),{error:h}))}switch(this.trackPublications.delete(o.trackSid),o.kind){case K.Kind.Audio:this.audioTrackPublications.delete(o.trackSid);break;case K.Kind.Video:this.videoTrackPublications.delete(o.trackSid);break}return this.emit(fe.LocalTrackUnpublished,o),o.setTrack(void 0),c&&(yield this.engine.negotiate()),o})}unpublishTracks(e){return M(this,void 0,void 0,function*(){return(yield Promise.all(e.map(i=>this.unpublishTrack(i)))).filter(i=>!!i)})}republishAllTracks(e){return M(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return(function*(){i.republishPromise&&(yield i.republishPromise),i.republishPromise=new Promise((o,l)=>M(i,void 0,void 0,function*(){try{const c=[];this.trackPublications.forEach(d=>{d.track&&(n&&(d.options=Object.assign(Object.assign({},d.options),n)),c.push(d))}),yield Promise.all(c.map(d=>M(this,void 0,void 0,function*(){const h=d.track;yield this.unpublishTrack(h,!1),r&&!h.isMuted&&h.source!==K.Source.ScreenShare&&h.source!==K.Source.ScreenShareAudio&&(Ui(h)||Rr(h))&&!h.isUserProvided&&(this.log.debug("restarting existing track",Object.assign(Object.assign({},this.logContext),{track:d.trackSid})),yield h.restartTrack()),yield this.publishOrRepublishTrack(h,d.options,!0)}))),o()}catch(c){l(c)}finally{this.republishPromise=void 0}})),yield i.republishPromise})()})}publishData(e){return M(this,arguments,void 0,function(n){var i=this;let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return(function*(){const o=r.reliable?De.RELIABLE:De.LOSSY,l=r.destinationIdentities,c=r.topic;let d=new Qm({participantIdentity:i.identity,payload:n,destinationIdentities:l,topic:c});const h=new en({kind:o,value:{case:"user",value:d}});yield i.engine.sendDataPacket(h,o)})()})}publishDtmf(e,n){return M(this,void 0,void 0,function*(){const i=new en({kind:De.RELIABLE,value:{case:"sipDtmf",value:new Sx({code:e,digit:n})}});yield this.engine.sendDataPacket(i,De.RELIABLE)})}sendChatMessage(e,n){return M(this,void 0,void 0,function*(){const i={id:crypto.randomUUID(),message:e,timestamp:Date.now(),attachedFiles:n?.attachments},r=new en({value:{case:"chatMessage",value:new Pu(Object.assign(Object.assign({},i),{timestamp:et.parse(i.timestamp)}))}});return yield this.engine.sendDataPacket(r,De.RELIABLE),this.emit(fe.ChatMessage,i),i})}editChatMessage(e,n){return M(this,void 0,void 0,function*(){const i=Object.assign(Object.assign({},n),{message:e,editTimestamp:Date.now()}),r=new en({value:{case:"chatMessage",value:new Pu(Object.assign(Object.assign({},i),{timestamp:et.parse(i.timestamp),editTimestamp:et.parse(i.editTimestamp)}))}});return yield this.engine.sendDataPacket(r,De.RELIABLE),this.emit(fe.ChatMessage,i),i})}sendText(e,n){return M(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.sendText(e,n)})}streamText(e){return M(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.streamText(e)})}sendFile(e,n){return M(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.sendFile(e,n)})}streamBytes(e){return M(this,void 0,void 0,function*(){return this.roomOutgoingDataStreamManager.streamBytes(e)})}performRpc(e){return M(this,arguments,void 0,function(n){var i=this;let{destinationIdentity:r,method:o,payload:l,responseTimeout:c=15e3}=n;return(function*(){return new Promise((f,m)=>M(i,void 0,void 0,function*(){var v,S,k,b;if(vg(l)>IE){m(dt.builtIn("REQUEST_PAYLOAD_TOO_LARGE"));return}if(!((S=(v=this.engine.latestJoinResponse)===null||v===void 0?void 0:v.serverInfo)===null||S===void 0)&&S.version&&wi((b=(k=this.engine.latestJoinResponse)===null||k===void 0?void 0:k.serverInfo)===null||b===void 0?void 0:b.version,"1.8.0")<0){m(dt.builtIn("UNSUPPORTED_SERVER"));return}const C=Math.max(c,8e3),T=crypto.randomUUID();yield this.publishRpcRequest(r,T,o,l,C);const _=setTimeout(()=>{this.pendingAcks.delete(T),m(dt.builtIn("CONNECTION_TIMEOUT")),this.pendingResponses.delete(T),clearTimeout(R)},7e3);this.pendingAcks.set(T,{resolve:()=>{clearTimeout(_)},participantIdentity:r});const R=setTimeout(()=>{this.pendingResponses.delete(T),m(dt.builtIn("RESPONSE_TIMEOUT"))},c);this.pendingResponses.set(T,{resolve:(P,I)=>{clearTimeout(R),this.pendingAcks.has(T)&&(console.warn("RPC response received before ack",T),this.pendingAcks.delete(T),clearTimeout(_)),I?m(I):f(P??"")},participantIdentity:r})}))})()})}registerRpcMethod(e,n){this.rpcHandlers.has(e)&&this.log.warn("you're overriding the RPC handler for method ".concat(e,", in the future this will throw an error")),this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setTrackSubscriptionPermissions(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];this.participantTrackPermissions=n,this.allParticipantsAllowedToSubscribe=e,this.engine.client.isDisconnected||this.updateTrackSubscriptionPermissions()}handleIncomingRpcAck(e){const n=this.pendingAcks.get(e);n?(n.resolve(),this.pendingAcks.delete(e)):console.error("Ack received for unexpected RPC request",e)}handleIncomingRpcResponse(e,n,i){const r=this.pendingResponses.get(e);r?(r.resolve(n,i),this.pendingResponses.delete(e)):console.error("Response received for unexpected RPC request",e)}publishRpcRequest(e,n,i,r,o){return M(this,void 0,void 0,function*(){const l=new en({destinationIdentities:[e],kind:De.RELIABLE,value:{case:"rpcRequest",value:new Zm({id:n,method:i,payload:r,responseTimeoutMs:o,version:1})}});yield this.engine.sendDataPacket(l,De.RELIABLE)})}handleParticipantDisconnected(e){for(const[n,{participantIdentity:i}]of this.pendingAcks)i===e&&this.pendingAcks.delete(n);for(const[n,{participantIdentity:i,resolve:r}]of this.pendingResponses)i===e&&(r(null,dt.builtIn("RECIPIENT_DISCONNECTED")),this.pendingResponses.delete(n))}setEnabledPublishCodecs(e){this.enabledPublishVideoCodecs=e.filter(n=>n.mime.split("/")[0].toLowerCase()==="video")}updateInfo(e){return super.updateInfo(e)?(e.tracks.forEach(n=>{var i,r;const o=this.trackPublications.get(n.sid);if(o){const l=o.isMuted||((r=(i=o.track)===null||i===void 0?void 0:i.isUpstreamPaused)!==null&&r!==void 0?r:!1);l!==n.muted&&(this.log.debug("updating server mute state after reconcile",Object.assign(Object.assign(Object.assign({},this.logContext),je(o)),{mutedOnServer:l})),this.engine.client.sendMuteTrack(n.sid,l))}}),!0):!1}setActiveAgent(e){var n,i,r,o;this.firstActiveAgent=e,e&&!this.firstActiveAgent&&(this.firstActiveAgent=e),e?(i=(n=this.activeAgentFuture)===null||n===void 0?void 0:n.resolve)===null||i===void 0||i.call(n,e):(o=(r=this.activeAgentFuture)===null||r===void 0?void 0:r.reject)===null||o===void 0||o.call(r,"Agent disconnected"),this.activeAgentFuture=void 0}waitUntilActiveAgentPresent(){return this.firstActiveAgent?Promise.resolve(this.firstActiveAgent):(this.activeAgentFuture||(this.activeAgentFuture=new zn),this.activeAgentFuture.promise)}getPublicationForTrack(e){let n;return this.trackPublications.forEach(i=>{const r=i.track;r&&(e instanceof MediaStreamTrack?(Ui(r)||Rr(r))&&r.mediaStreamTrack===e&&(n=i):e===r&&(n=i))}),n}waitForPendingPublicationOfSource(e){return M(this,void 0,void 0,function*(){const i=Date.now();for(;Date.now()<i+1e4;){const r=Array.from(this.pendingPublishPromises.entries()).find(o=>{let[l]=o;return l.source===e});if(r)return r[1];yield rn(20)}})}}class eV extends Bi{constructor(e,n,i,r){super(e,n.sid,n.name,r),this.track=void 0,this.allowed=!0,this.requestedDisabled=void 0,this.visible=!0,this.handleEnded=o=>{this.setTrack(void 0),this.emit(le.Ended,o)},this.handleVisibilityChange=o=>{this.log.debug("adaptivestream video visibility ".concat(this.trackSid,", visible=").concat(o),this.logContext),this.visible=o,this.emitTrackUpdate()},this.handleVideoDimensionsChange=o=>{this.log.debug("adaptivestream video dimensions ".concat(o.width,"x").concat(o.height),this.logContext),this.videoDimensionsAdaptiveStream=o,this.emitTrackUpdate()},this.subscribed=i,this.updateInfo(n)}setSubscribed(e){const n=this.subscriptionStatus,i=this.permissionStatus;this.subscribed=e,e&&(this.allowed=!0);const r=new id({trackSids:[this.trackSid],subscribe:this.subscribed,participantTracks:[new Cx({participantSid:"",trackSids:[this.trackSid]})]});this.emit(le.UpdateSubscription,r),this.emitSubscriptionUpdateIfChanged(n),this.emitPermissionUpdateIfChanged(i)}get subscriptionStatus(){return this.subscribed===!1?Bi.SubscriptionStatus.Unsubscribed:super.isSubscribed?Bi.SubscriptionStatus.Subscribed:Bi.SubscriptionStatus.Desired}get permissionStatus(){return this.allowed?Bi.PermissionStatus.Allowed:Bi.PermissionStatus.NotAllowed}get isSubscribed(){return this.subscribed===!1?!1:super.isSubscribed}get isDesired(){return this.subscribed!==!1}get isEnabled(){return this.requestedDisabled!==void 0?!this.requestedDisabled:this.isAdaptiveStream?this.visible:!0}get isLocal(){return!1}setEnabled(e){!this.isManualOperationAllowed()||this.requestedDisabled===!e||(this.requestedDisabled=!e,this.emitTrackUpdate())}setVideoQuality(e){!this.isManualOperationAllowed()||this.requestedMaxQuality===e||(this.requestedMaxQuality=e,this.requestedVideoDimensions=void 0,this.emitTrackUpdate())}setVideoDimensions(e){var n,i;this.isManualOperationAllowed()&&(((n=this.requestedVideoDimensions)===null||n===void 0?void 0:n.width)===e.width&&((i=this.requestedVideoDimensions)===null||i===void 0?void 0:i.height)===e.height||(Af(this.track)&&(this.requestedVideoDimensions=e),this.requestedMaxQuality=void 0,this.emitTrackUpdate()))}setVideoFPS(e){this.isManualOperationAllowed()&&Af(this.track)&&this.fps!==e&&(this.fps=e,this.emitTrackUpdate())}get videoQuality(){var e;return(e=this.requestedMaxQuality)!==null&&e!==void 0?e:En.HIGH}setTrack(e){const n=this.subscriptionStatus,i=this.permissionStatus,r=this.track;r!==e&&(r&&(r.off(le.VideoDimensionsChanged,this.handleVideoDimensionsChange),r.off(le.VisibilityChanged,this.handleVisibilityChange),r.off(le.Ended,this.handleEnded),r.detach(),r.stopMonitor(),this.emit(le.Unsubscribed,r)),super.setTrack(e),e&&(e.sid=this.trackSid,e.on(le.VideoDimensionsChanged,this.handleVideoDimensionsChange),e.on(le.VisibilityChanged,this.handleVisibilityChange),e.on(le.Ended,this.handleEnded),this.emit(le.Subscribed,e)),this.emitPermissionUpdateIfChanged(i),this.emitSubscriptionUpdateIfChanged(n))}setAllowed(e){const n=this.subscriptionStatus,i=this.permissionStatus;this.allowed=e,this.emitPermissionUpdateIfChanged(i),this.emitSubscriptionUpdateIfChanged(n)}setSubscriptionError(e){this.emit(le.SubscriptionFailed,e)}updateInfo(e){super.updateInfo(e);const n=this.metadataMuted;this.metadataMuted=e.muted,this.track?this.track.setMuted(e.muted):n!==e.muted&&this.emit(e.muted?le.Muted:le.Unmuted)}emitSubscriptionUpdateIfChanged(e){const n=this.subscriptionStatus;e!==n&&this.emit(le.SubscriptionStatusChanged,n,e)}emitPermissionUpdateIfChanged(e){this.permissionStatus!==e&&this.emit(le.SubscriptionPermissionChanged,this.permissionStatus,e)}isManualOperationAllowed(){return this.isDesired?!0:(this.log.warn("cannot update track settings when not subscribed",this.logContext),!1)}get isAdaptiveStream(){return Af(this.track)&&this.track.isAdaptiveStream}emitTrackUpdate(){const e=new Ax({trackSids:[this.trackSid],disabled:!this.isEnabled,fps:this.fps});if(this.kind===K.Kind.Video){let n=this.requestedVideoDimensions;if(this.videoDimensionsAdaptiveStream!==void 0)if(n)HS(this.videoDimensionsAdaptiveStream,n)&&(this.log.debug("using adaptive stream dimensions instead of requested",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream);else if(this.requestedMaxQuality!==void 0&&this.trackInfo){const i=XU(this.trackInfo,this.requestedMaxQuality);i&&HS(this.videoDimensionsAdaptiveStream,i)&&(this.log.debug("using adaptive stream dimensions instead of max quality layer",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream)}else this.log.debug("using adaptive stream dimensions",Object.assign(Object.assign({},this.logContext),this.videoDimensionsAdaptiveStream)),n=this.videoDimensionsAdaptiveStream;n?(e.width=Math.ceil(n.width),e.height=Math.ceil(n.height)):this.requestedMaxQuality!==void 0?(this.log.debug("using requested max quality",Object.assign(Object.assign({},this.logContext),{quality:this.requestedMaxQuality})),e.quality=this.requestedMaxQuality):(this.log.debug("using default quality",Object.assign(Object.assign({},this.logContext),{quality:En.HIGH})),e.quality=En.HIGH)}this.emit(le.UpdateSettings,e)}}class Du extends jE{static fromParticipantInfo(e,n,i){return new Du(e,n.sid,n.identity,n.name,n.metadata,n.attributes,i,n.kind)}get logContext(){return Object.assign(Object.assign({},super.logContext),{rpID:this.sid,remoteParticipant:this.identity})}constructor(e,n,i,r,o,l,c){let d=arguments.length>7&&arguments[7]!==void 0?arguments[7]:ol.STANDARD;super(n,i||"",r,o,l,c,d),this.signalClient=e,this.trackPublications=new Map,this.audioTrackPublications=new Map,this.videoTrackPublications=new Map,this.volumeMap=new Map}addTrackPublication(e){super.addTrackPublication(e),e.on(le.UpdateSettings,n=>{this.log.debug("send update settings",Object.assign(Object.assign(Object.assign({},this.logContext),je(e)),{settings:n})),this.signalClient.sendUpdateTrackSettings(n)}),e.on(le.UpdateSubscription,n=>{n.participantTracks.forEach(i=>{i.participantSid=this.sid}),this.signalClient.sendUpdateSubscription(n)}),e.on(le.SubscriptionPermissionChanged,n=>{this.emit(fe.TrackSubscriptionPermissionChanged,e,n)}),e.on(le.SubscriptionStatusChanged,n=>{this.emit(fe.TrackSubscriptionStatusChanged,e,n)}),e.on(le.Subscribed,n=>{this.emit(fe.TrackSubscribed,n,e)}),e.on(le.Unsubscribed,n=>{this.emit(fe.TrackUnsubscribed,n,e)}),e.on(le.SubscriptionFailed,n=>{this.emit(fe.TrackSubscriptionFailed,e.trackSid,n)})}getTrackPublication(e){const n=super.getTrackPublication(e);if(n)return n}getTrackPublicationByName(e){const n=super.getTrackPublicationByName(e);if(n)return n}setVolume(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:K.Source.Microphone;this.volumeMap.set(n,e);const i=this.getTrackPublication(n);i&&i.track&&i.track.setVolume(e)}getVolume(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:K.Source.Microphone;const n=this.getTrackPublication(e);return n&&n.track?n.track.getVolume():this.volumeMap.get(e)}addSubscribedMediaTrack(e,n,i,r,o,l){let c=this.getTrackPublicationBySid(n);if(c||n.startsWith("TR")||this.trackPublications.forEach(f=>{!c&&e.kind===f.kind.toString()&&(c=f)}),!c){if(l===0){this.log.error("could not find published track",Object.assign(Object.assign({},this.logContext),{trackSid:n})),this.emit(fe.TrackSubscriptionFailed,n);return}l===void 0&&(l=20),setTimeout(()=>{this.addSubscribedMediaTrack(e,n,i,r,o,l-1)},150);return}if(e.readyState==="ended"){this.log.error("unable to subscribe because MediaStreamTrack is ended. Do not call MediaStreamTrack.stop()",Object.assign(Object.assign({},this.logContext),je(c))),this.emit(fe.TrackSubscriptionFailed,n);return}const d=e.kind==="video";let h;return d?h=new GB(e,n,r,o):h=new KB(e,n,r,this.audioContext,this.audioOutput),h.source=c.source,h.isMuted=c.isMuted,h.setMediaStream(i),h.start(),c.setTrack(h),this.volumeMap.has(c.source)&&zp(h)&&ki(h)&&h.setVolume(this.volumeMap.get(c.source)),c}get hasMetadata(){return!!this.participantInfo}getTrackPublicationBySid(e){return this.trackPublications.get(e)}updateInfo(e){if(!super.updateInfo(e))return!1;const n=new Map,i=new Map;return e.tracks.forEach(r=>{var o,l;let c=this.getTrackPublicationBySid(r.sid);if(c)c.updateInfo(r);else{const d=K.kindFromProto(r.type);if(!d)return;c=new eV(d,r,(o=this.signalClient.connectOptions)===null||o===void 0?void 0:o.autoSubscribe,{loggerContextCb:()=>this.logContext,loggerName:(l=this.loggerOptions)===null||l===void 0?void 0:l.loggerName}),c.updateInfo(r),i.set(r.sid,c);const h=Array.from(this.trackPublications.values()).find(f=>f.source===c?.source);h&&c.source!==K.Source.Unknown&&this.log.debug("received a second track publication for ".concat(this.identity," with the same source: ").concat(c.source),Object.assign(Object.assign({},this.logContext),{oldTrack:je(h),newTrack:je(c)})),this.addTrackPublication(c)}n.set(r.sid,c)}),this.trackPublications.forEach(r=>{n.has(r.trackSid)||(this.log.trace("detected removed track on remote participant, unpublishing",Object.assign(Object.assign({},this.logContext),je(r))),this.unpublishTrack(r.trackSid,!0))}),i.forEach(r=>{this.emit(fe.TrackPublished,r)}),!0}unpublishTrack(e,n){const i=this.trackPublications.get(e);if(!i)return;const{track:r}=i;switch(r&&(r.stop(),i.setTrack(void 0)),this.trackPublications.delete(e),i.kind){case K.Kind.Audio:this.audioTrackPublications.delete(e);break;case K.Kind.Video:this.videoTrackPublications.delete(e);break}n&&this.emit(fe.TrackUnpublished,i)}setAudioOutput(e){return M(this,void 0,void 0,function*(){this.audioOutput=e;const n=[];this.audioTrackPublications.forEach(i=>{var r;ki(i.track)&&zp(i.track)&&n.push(i.track.setSinkId((r=e.deviceId)!==null&&r!==void 0?r:"default"))}),yield Promise.all(n)})}emit(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return this.log.trace("participant event",Object.assign(Object.assign({},this.logContext),{event:e,args:i})),super.emit(e,...i)}}var qe;(function(t){t.Disconnected="disconnected",t.Connecting="connecting",t.Connected="connected",t.Reconnecting="reconnecting",t.SignalReconnecting="signalReconnecting"})(qe||(qe={}));const tV=4*1e3;class No extends Ei.EventEmitter{get hasE2EESetup(){return this.e2eeManager!==void 0}constructor(e){var n,i,r,o;if(super(),n=this,this.state=qe.Disconnected,this.activeSpeakers=[],this.isE2EEEnabled=!1,this.audioEnabled=!0,this.isVideoPlaybackBlocked=!1,this.log=Oe,this.bufferedEvents=[],this.isResuming=!1,this.rpcHandlers=new Map,this.connect=(l,c,d)=>M(this,void 0,void 0,function*(){var h;if(!RU())throw Ti()?Error("WebRTC isn't detected, have you called registerGlobals?"):Error("LiveKit doesn't seem to be supported on this browser. Try to update your browser and make sure no browser extensions are disabling webRTC.");const f=yield this.disconnectLock.lock();if(this.state===qe.Connected)return this.log.info("already connected to room ".concat(this.name),this.logContext),f(),Promise.resolve();if(this.connectFuture)return f(),this.connectFuture.promise;this.setAndEmitConnectionState(qe.Connecting),((h=this.regionUrlProvider)===null||h===void 0?void 0:h.getServerUrl().toString())!==l&&(this.regionUrl=void 0,this.regionUrlProvider=void 0),Bp(new URL(l))&&(this.regionUrlProvider===void 0?this.regionUrlProvider=new Pt(l,c):this.regionUrlProvider.updateToken(c),this.regionUrlProvider.fetchRegionSettings().then(S=>{var k;(k=this.regionUrlProvider)===null||k===void 0||k.setServerReportedRegions(S)}).catch(S=>{this.log.warn("could not fetch region settings",Object.assign(Object.assign({},this.logContext),{error:S}))}));const m=(S,k,b)=>M(this,void 0,void 0,function*(){var C,T;this.abortController&&this.abortController.abort();const _=new AbortController;this.abortController=_,f?.();try{yield this.attemptConnection(b??l,c,d,_),this.abortController=void 0,S()}catch(R){if(this.regionUrlProvider&&R instanceof He&&R.reason!==Be.Cancelled&&R.reason!==Be.NotAllowed){let P=null;try{P=yield this.regionUrlProvider.getNextBestRegionUrl((C=this.abortController)===null||C===void 0?void 0:C.signal)}catch(I){if(I instanceof He&&(I.status===401||I.reason===Be.Cancelled)){this.handleDisconnect(this.options.stopLocalTrackOnUnpublish),k(I);return}}P&&!(!((T=this.abortController)===null||T===void 0)&&T.signal.aborted)?(this.log.info("Initial connection failed with ConnectionError: ".concat(R.message,". Retrying with another region: ").concat(P),this.logContext),this.recreateEngine(),yield m(S,k,P)):(this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,qS(R)),k(R))}else{let P=ii.UNKNOWN_REASON;R instanceof He&&(P=qS(R)),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,P),k(R)}}}),v=this.regionUrl;return this.regionUrl=void 0,this.connectFuture=new zn((S,k)=>{m(S,k,v)},()=>{this.clearConnectionFutures()}),this.connectFuture.promise}),this.connectSignal=(l,c,d,h,f,m)=>M(this,void 0,void 0,function*(){var v,S,k;const b=yield d.join(l,c,{autoSubscribe:h.autoSubscribe,adaptiveStream:typeof f.adaptiveStream=="object"?!0:f.adaptiveStream,maxRetries:h.maxRetries,e2eeEnabled:!!this.e2eeManager,websocketTimeout:h.websocketTimeout,singlePeerConnection:f.singlePeerConnection},m.signal);let C=b.serverInfo;if(C||(C={version:b.serverVersion,region:b.serverRegion}),this.serverInfo=C,this.log.debug("connected to Livekit Server ".concat(Object.entries(C).map(T=>{let[_,R]=T;return"".concat(_,": ").concat(R)}).join(", ")),{room:(v=b.room)===null||v===void 0?void 0:v.name,roomSid:(S=b.room)===null||S===void 0?void 0:S.sid,identity:(k=b.participant)===null||k===void 0?void 0:k.identity}),!C.version)throw new hU("unknown server version");return C.version==="0.15.1"&&this.options.dynacast&&(this.log.debug("disabling dynacast due to server version",this.logContext),f.dynacast=!1),b}),this.applyJoinResponse=l=>{const c=l.participant;if(this.localParticipant.sid=c.sid,this.localParticipant.identity=c.identity,this.localParticipant.setEnabledPublishCodecs(l.enabledPublishCodecs),this.e2eeManager)try{this.e2eeManager.setSifTrailer(l.sifTrailer)}catch(d){this.log.error(d instanceof Error?d.message:"Could not set SifTrailer",Object.assign(Object.assign({},this.logContext),{error:d}))}this.handleParticipantUpdates([c,...l.otherParticipants]),l.room&&this.handleRoomUpdate(l.room)},this.attemptConnection=(l,c,d,h)=>M(this,void 0,void 0,function*(){var f,m;this.state===qe.Reconnecting||this.isResuming||!((f=this.engine)===null||f===void 0)&&f.pendingReconnect?(this.log.info("Reconnection attempt replaced by new connection attempt",this.logContext),this.recreateEngine()):this.maybeCreateEngine(),!((m=this.regionUrlProvider)===null||m===void 0)&&m.isCloud()&&this.engine.setRegionUrlProvider(this.regionUrlProvider),this.acquireAudioContext(),this.connOptions=Object.assign(Object.assign({},gg),d),this.connOptions.rtcConfig&&(this.engine.rtcConfig=this.connOptions.rtcConfig),this.connOptions.peerConnectionTimeout&&(this.engine.peerConnectionTimeout=this.connOptions.peerConnectionTimeout);try{const v=yield this.connectSignal(l,c,this.engine,this.connOptions,this.options,h);this.applyJoinResponse(v),this.setupLocalParticipantEvents(),this.emit(ne.SignalConnected)}catch(v){yield this.engine.close(),this.recreateEngine();const S=new He("could not establish signal connection",Be.ServerUnreachable);throw v instanceof Error&&(S.message="".concat(S.message,": ").concat(v.message)),v instanceof He&&(S.reason=v.reason,S.status=v.status),this.log.debug("error trying to establish signal connection",Object.assign(Object.assign({},this.logContext),{error:v})),S}if(h.signal.aborted)throw yield this.engine.close(),this.recreateEngine(),new He("Connection attempt aborted",Be.Cancelled);try{yield this.engine.waitForPCInitialConnection(this.connOptions.peerConnectionTimeout,h)}catch(v){throw yield this.engine.close(),this.recreateEngine(),v}mn()&&this.options.disconnectOnPageLeave&&(window.addEventListener("pagehide",this.onPageLeave),window.addEventListener("beforeunload",this.onPageLeave)),mn()&&document.addEventListener("freeze",this.onPageLeave),this.setAndEmitConnectionState(qe.Connected),this.emit(ne.Connected),this.registerConnectionReconcile()}),this.disconnect=function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];return M(n,[...c],void 0,function(){var h=this;let f=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;return(function*(){var m,v,S,k;const b=yield h.disconnectLock.lock();try{if(h.state===qe.Disconnected){h.log.debug("already disconnected",h.logContext);return}if(h.log.info("disconnect from room",Object.assign({},h.logContext)),h.state===qe.Connecting||h.state===qe.Reconnecting||h.isResuming){const C="Abort connection attempt due to user initiated disconnect";h.log.warn(C,h.logContext),(m=h.abortController)===null||m===void 0||m.abort(C),(S=(v=h.connectFuture)===null||v===void 0?void 0:v.reject)===null||S===void 0||S.call(v,new He("Client initiated disconnect",Be.Cancelled)),h.connectFuture=void 0}!((k=h.engine)===null||k===void 0)&&k.client.isDisconnected||(yield h.engine.client.sendLeave()),h.engine&&(yield h.engine.close()),h.handleDisconnect(f,ii.CLIENT_INITIATED),h.engine=void 0}finally{b()}})()})},this.onPageLeave=()=>M(this,void 0,void 0,function*(){this.log.info("Page leave detected, disconnecting",this.logContext),yield this.disconnect()}),this.startAudio=()=>M(this,void 0,void 0,function*(){const l=[],c=gn();if(c&&c.os==="iOS"){const d="livekit-dummy-audio-el";let h=document.getElementById(d);if(!h){h=document.createElement("audio"),h.id=d,h.autoplay=!0,h.hidden=!0;const f=If();f.enabled=!0;const m=new MediaStream([f]);h.srcObject=m,document.addEventListener("visibilitychange",()=>{h&&(h.srcObject=document.hidden?null:m,document.hidden||(this.log.debug("page visible again, triggering startAudio to resume playback and update playback status",this.logContext),this.startAudio()))}),document.body.append(h),this.once(ne.Disconnected,()=>{h?.remove(),h=null})}l.push(h)}this.remoteParticipants.forEach(d=>{d.audioTrackPublications.forEach(h=>{h.track&&h.track.attachedElements.forEach(f=>{l.push(f)})})});try{yield Promise.all([this.acquireAudioContext(),...l.map(d=>(d.muted=!1,d.play()))]),this.handleAudioPlaybackStarted()}catch(d){throw this.handleAudioPlaybackFailed(d),d}}),this.startVideo=()=>M(this,void 0,void 0,function*(){const l=[];for(const c of this.remoteParticipants.values())c.videoTrackPublications.forEach(d=>{var h;(h=d.track)===null||h===void 0||h.attachedElements.forEach(f=>{l.includes(f)||l.push(f)})});yield Promise.all(l.map(c=>c.play())).then(()=>{this.handleVideoPlaybackStarted()}).catch(c=>{c.name==="NotAllowedError"?this.handleVideoPlaybackFailed():this.log.warn("Resuming video playback failed, make sure you call `startVideo` directly in a user gesture handler",this.logContext)})}),this.handleRestarting=()=>{this.clearConnectionReconcile(),this.isResuming=!1;for(const l of this.remoteParticipants.values())this.handleParticipantDisconnected(l.identity,l);this.setAndEmitConnectionState(qe.Reconnecting)&&this.emit(ne.Reconnecting)},this.handleSignalRestarted=l=>M(this,void 0,void 0,function*(){this.log.debug("signal reconnected to server, region ".concat(l.serverRegion),Object.assign(Object.assign({},this.logContext),{region:l.serverRegion})),this.bufferedEvents=[],this.applyJoinResponse(l);try{yield this.localParticipant.republishAllTracks(void 0,!0)}catch(c){this.log.error("error trying to re-publish tracks after reconnection",Object.assign(Object.assign({},this.logContext),{error:c}))}try{yield this.engine.waitForRestarted(),this.log.debug("fully reconnected to server",Object.assign(Object.assign({},this.logContext),{region:l.serverRegion}))}catch{return}this.setAndEmitConnectionState(qe.Connected),this.emit(ne.Reconnected),this.registerConnectionReconcile(),this.emitBufferedEvents()}),this.handleParticipantUpdates=l=>{l.forEach(c=>{var d;if(c.identity===this.localParticipant.identity){this.localParticipant.updateInfo(c);return}c.identity===""&&(c.identity=(d=this.sidToIdentity.get(c.sid))!==null&&d!==void 0?d:"");let h=this.remoteParticipants.get(c.identity);c.state===Co.DISCONNECTED?this.handleParticipantDisconnected(c.identity,h):h=this.getOrCreateParticipant(c.identity,c)})},this.handleActiveSpeakersUpdate=l=>{const c=[],d={};l.forEach(h=>{if(d[h.sid]=!0,h.sid===this.localParticipant.sid)this.localParticipant.audioLevel=h.level,this.localParticipant.setIsSpeaking(!0),c.push(this.localParticipant);else{const f=this.getRemoteParticipantBySid(h.sid);f&&(f.audioLevel=h.level,f.setIsSpeaking(!0),c.push(f))}}),d[this.localParticipant.sid]||(this.localParticipant.audioLevel=0,this.localParticipant.setIsSpeaking(!1)),this.remoteParticipants.forEach(h=>{d[h.sid]||(h.audioLevel=0,h.setIsSpeaking(!1))}),this.activeSpeakers=c,this.emitWhenConnected(ne.ActiveSpeakersChanged,c)},this.handleSpeakersChanged=l=>{const c=new Map;this.activeSpeakers.forEach(h=>{const f=this.remoteParticipants.get(h.identity);f&&f.sid!==h.sid||c.set(h.sid,h)}),l.forEach(h=>{let f=this.getRemoteParticipantBySid(h.sid);h.sid===this.localParticipant.sid&&(f=this.localParticipant),f&&(f.audioLevel=h.level,f.setIsSpeaking(h.active),h.active?c.set(h.sid,f):c.delete(h.sid))});const d=Array.from(c.values());d.sort((h,f)=>f.audioLevel-h.audioLevel),this.activeSpeakers=d,this.emitWhenConnected(ne.ActiveSpeakersChanged,d)},this.handleStreamStateUpdate=l=>{l.streamStates.forEach(c=>{const d=this.getRemoteParticipantBySid(c.participantSid);if(!d)return;const h=d.getTrackPublicationBySid(c.trackSid);if(!h||!h.track)return;const f=K.streamStateFromProto(c.state);h.track.setStreamState(f),f!==h.track.streamState&&(d.emit(fe.TrackStreamStateChanged,h,h.track.streamState),this.emitWhenConnected(ne.TrackStreamStateChanged,h,h.track.streamState,d))})},this.handleSubscriptionPermissionUpdate=l=>{const c=this.getRemoteParticipantBySid(l.participantSid);if(!c)return;const d=c.getTrackPublicationBySid(l.trackSid);d&&d.setAllowed(l.allowed)},this.handleSubscriptionError=l=>{const c=Array.from(this.remoteParticipants.values()).find(h=>h.trackPublications.has(l.trackSid));if(!c)return;const d=c.getTrackPublicationBySid(l.trackSid);d&&d.setSubscriptionError(l.err)},this.handleDataPacket=(l,c)=>{const d=this.remoteParticipants.get(l.participantIdentity);if(l.value.case==="user")this.handleUserPacket(d,l.value.value,l.kind,c);else if(l.value.case==="transcription")this.handleTranscription(d,l.value.value);else if(l.value.case==="sipDtmf")this.handleSipDtmf(d,l.value.value);else if(l.value.case==="chatMessage")this.handleChatMessage(d,l.value.value);else if(l.value.case==="metrics")this.handleMetrics(l.value.value,d);else if(l.value.case==="streamHeader"||l.value.case==="streamChunk"||l.value.case==="streamTrailer")this.handleDataStream(l,c);else if(l.value.case==="rpcRequest"){const h=l.value.value;this.handleIncomingRpcRequest(l.participantIdentity,h.id,h.method,h.payload,h.responseTimeoutMs,h.version)}},this.handleUserPacket=(l,c,d,h)=>{this.emit(ne.DataReceived,c.payload,l,d,c.topic,h),l?.emit(fe.DataReceived,c.payload,d,h)},this.handleSipDtmf=(l,c)=>{this.emit(ne.SipDTMFReceived,c,l),l?.emit(fe.SipDTMFReceived,c)},this.handleTranscription=(l,c)=>{const d=c.transcribedParticipantIdentity===this.localParticipant.identity?this.localParticipant:this.getParticipantByIdentity(c.transcribedParticipantIdentity),h=d?.trackPublications.get(c.trackId),f=FU(c,this.transcriptionReceivedTimes);h?.emit(le.TranscriptionReceived,f),d?.emit(fe.TranscriptionReceived,f,h),this.emit(ne.TranscriptionReceived,f,d,h)},this.handleChatMessage=(l,c)=>{const d=jU(c);this.emit(ne.ChatMessage,d,l)},this.handleMetrics=(l,c)=>{this.emit(ne.MetricsReceived,l,c)},this.handleDataStream=(l,c)=>{this.incomingDataStreamManager.handleDataStreamPacket(l,c)},this.bufferedSegments=new Map,this.handleAudioPlaybackStarted=()=>{this.canPlaybackAudio||(this.audioEnabled=!0,this.emit(ne.AudioPlaybackStatusChanged,!0))},this.handleAudioPlaybackFailed=l=>{this.log.warn("could not playback audio",Object.assign(Object.assign({},this.logContext),{error:l})),this.canPlaybackAudio&&(this.audioEnabled=!1,this.emit(ne.AudioPlaybackStatusChanged,!1))},this.handleVideoPlaybackStarted=()=>{this.isVideoPlaybackBlocked&&(this.isVideoPlaybackBlocked=!1,this.emit(ne.VideoPlaybackStatusChanged,!0))},this.handleVideoPlaybackFailed=()=>{this.isVideoPlaybackBlocked||(this.isVideoPlaybackBlocked=!0,this.emit(ne.VideoPlaybackStatusChanged,!1))},this.handleDeviceChange=()=>M(this,void 0,void 0,function*(){var l;((l=gn())===null||l===void 0?void 0:l.os)!=="iOS"&&(yield this.selectDefaultDevices()),this.emit(ne.MediaDevicesChanged)}),this.handleRoomUpdate=l=>{const c=this.roomInfo;this.roomInfo=l,c&&c.metadata!==l.metadata&&this.emitWhenConnected(ne.RoomMetadataChanged,l.metadata),c?.activeRecording!==l.activeRecording&&this.emitWhenConnected(ne.RecordingStatusChanged,l.activeRecording)},this.handleConnectionQualityUpdate=l=>{l.updates.forEach(c=>{if(c.participantSid===this.localParticipant.sid){this.localParticipant.setConnectionQuality(c.quality);return}const d=this.getRemoteParticipantBySid(c.participantSid);d&&d.setConnectionQuality(c.quality)})},this.onLocalParticipantMetadataChanged=l=>{this.emit(ne.ParticipantMetadataChanged,l,this.localParticipant)},this.onLocalParticipantNameChanged=l=>{this.emit(ne.ParticipantNameChanged,l,this.localParticipant)},this.onLocalAttributesChanged=l=>{this.emit(ne.ParticipantAttributesChanged,l,this.localParticipant)},this.onLocalTrackMuted=l=>{this.emit(ne.TrackMuted,l,this.localParticipant)},this.onLocalTrackUnmuted=l=>{this.emit(ne.TrackUnmuted,l,this.localParticipant)},this.onTrackProcessorUpdate=l=>{var c;(c=l?.onPublish)===null||c===void 0||c.call(l,this)},this.onLocalTrackPublished=l=>M(this,void 0,void 0,function*(){var c,d,h,f,m,v;(c=l.track)===null||c===void 0||c.on(le.TrackProcessorUpdate,this.onTrackProcessorUpdate),(d=l.track)===null||d===void 0||d.on(le.Restarted,this.onLocalTrackRestarted),(m=(f=(h=l.track)===null||h===void 0?void 0:h.getProcessor())===null||f===void 0?void 0:f.onPublish)===null||m===void 0||m.call(f,this),this.emit(ne.LocalTrackPublished,l,this.localParticipant),Ui(l.track)&&(yield l.track.checkForSilence())&&this.emit(ne.LocalAudioSilenceDetected,l);const S=yield(v=l.track)===null||v===void 0?void 0:v.getDeviceId(!1),k=qp(l.source);k&&S&&S!==this.localParticipant.activeDeviceMap.get(k)&&(this.localParticipant.activeDeviceMap.set(k,S),this.emit(ne.ActiveDeviceChanged,k,S))}),this.onLocalTrackUnpublished=l=>{var c,d;(c=l.track)===null||c===void 0||c.off(le.TrackProcessorUpdate,this.onTrackProcessorUpdate),(d=l.track)===null||d===void 0||d.off(le.Restarted,this.onLocalTrackRestarted),this.emit(ne.LocalTrackUnpublished,l,this.localParticipant)},this.onLocalTrackRestarted=l=>M(this,void 0,void 0,function*(){const c=yield l.getDeviceId(!1),d=qp(l.source);d&&c&&c!==this.localParticipant.activeDeviceMap.get(d)&&(this.log.debug("local track restarted, setting ".concat(d," ").concat(c," active"),this.logContext),this.localParticipant.activeDeviceMap.set(d,c),this.emit(ne.ActiveDeviceChanged,d,c))}),this.onLocalConnectionQualityChanged=l=>{this.emit(ne.ConnectionQualityChanged,l,this.localParticipant)},this.onMediaDevicesError=(l,c)=>{this.emit(ne.MediaDevicesError,l,c)},this.onLocalParticipantPermissionsChanged=l=>{this.emit(ne.ParticipantPermissionsChanged,l,this.localParticipant)},this.onLocalChatMessageSent=l=>{this.emit(ne.ChatMessage,l,this.localParticipant)},this.setMaxListeners(100),this.remoteParticipants=new Map,this.sidToIdentity=new Map,this.options=Object.assign(Object.assign({},gB),e),this.log=Ji((i=this.options.loggerName)!==null&&i!==void 0?i:oi.Room),this.transcriptionReceivedTimes=new Map,this.options.audioCaptureDefaults=Object.assign(Object.assign({},PE),e?.audioCaptureDefaults),this.options.videoCaptureDefaults=Object.assign(Object.assign({},RE),e?.videoCaptureDefaults),this.options.publishDefaults=Object.assign(Object.assign({},mB),e?.publishDefaults),this.maybeCreateEngine(),this.incomingDataStreamManager=new WB,this.outgoingDataStreamManager=new $B(this.engine,this.log),this.disconnectLock=new nn,this.localParticipant=new ZB("","",this.engine,this.options,this.rpcHandlers,this.outgoingDataStreamManager),(this.options.e2ee||this.options.encryption)&&this.setupE2EE(),this.engine.e2eeManager=this.e2eeManager,this.options.videoCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("videoinput",Fr(this.options.videoCaptureDefaults.deviceId)),this.options.audioCaptureDefaults.deviceId&&this.localParticipant.activeDeviceMap.set("audioinput",Fr(this.options.audioCaptureDefaults.deviceId)),!((r=this.options.audioOutput)===null||r===void 0)&&r.deviceId&&this.switchActiveDevice("audiooutput",Fr(this.options.audioOutput.deviceId)).catch(l=>this.log.warn("Could not set audio output: ".concat(l.message),this.logContext)),mn()){const l=new AbortController;(o=navigator.mediaDevices)===null||o===void 0||o.addEventListener("devicechange",this.handleDeviceChange,{signal:l.signal}),No.cleanupRegistry&&No.cleanupRegistry.register(this,()=>{l.abort()})}}registerTextStreamHandler(e,n){return this.incomingDataStreamManager.registerTextStreamHandler(e,n)}unregisterTextStreamHandler(e){return this.incomingDataStreamManager.unregisterTextStreamHandler(e)}registerByteStreamHandler(e,n){return this.incomingDataStreamManager.registerByteStreamHandler(e,n)}unregisterByteStreamHandler(e){return this.incomingDataStreamManager.unregisterByteStreamHandler(e)}registerRpcMethod(e,n){if(this.rpcHandlers.has(e))throw Error("RPC handler already registered for method ".concat(e,", unregisterRpcMethod before trying to register again"));this.rpcHandlers.set(e,n)}unregisterRpcMethod(e){this.rpcHandlers.delete(e)}setE2EEEnabled(e){return M(this,void 0,void 0,function*(){if(this.e2eeManager)yield Promise.all([this.localParticipant.setE2EEEnabled(e)]),this.localParticipant.identity!==""&&this.e2eeManager.setParticipantCryptorEnabled(e,this.localParticipant.identity);else throw Error("e2ee not configured, please set e2ee settings within the room options")})}setupE2EE(){var e;const n=!!this.options.encryption,i=this.options.encryption||this.options.e2ee;i&&("e2eeManager"in i?(this.e2eeManager=i.e2eeManager,this.e2eeManager.isDataChannelEncryptionEnabled=n):this.e2eeManager=new YU(i,n),this.e2eeManager.on(Nr.ParticipantEncryptionStatusChanged,(r,o)=>{BU(o)&&(this.isE2EEEnabled=r),this.emit(ne.ParticipantEncryptionStatusChanged,r,o)}),this.e2eeManager.on(Nr.EncryptionError,r=>this.emit(ne.EncryptionError,r)),(e=this.e2eeManager)===null||e===void 0||e.setup(this))}get logContext(){var e;return{room:this.name,roomID:(e=this.roomInfo)===null||e===void 0?void 0:e.sid,participant:this.localParticipant.identity,pID:this.localParticipant.sid}}get isRecording(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.activeRecording)!==null&&n!==void 0?n:!1}getSid(){return M(this,void 0,void 0,function*(){return this.state===qe.Disconnected?"":this.roomInfo&&this.roomInfo.sid!==""?this.roomInfo.sid:new Promise((e,n)=>{const i=r=>{r.sid!==""&&(this.engine.off(de.RoomUpdate,i),e(r.sid))};this.engine.on(de.RoomUpdate,i),this.once(ne.Disconnected,()=>{this.engine.off(de.RoomUpdate,i),n("Room disconnected before room server id was available")})})})}get name(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.name)!==null&&n!==void 0?n:""}get metadata(){var e;return(e=this.roomInfo)===null||e===void 0?void 0:e.metadata}get numParticipants(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numParticipants)!==null&&n!==void 0?n:0}get numPublishers(){var e,n;return(n=(e=this.roomInfo)===null||e===void 0?void 0:e.numPublishers)!==null&&n!==void 0?n:0}maybeCreateEngine(){this.engine&&!this.engine.isClosed||(this.engine=new UB(this.options),this.engine.e2eeManager=this.e2eeManager,this.engine.on(de.ParticipantUpdate,this.handleParticipantUpdates).on(de.RoomUpdate,this.handleRoomUpdate).on(de.SpeakersChanged,this.handleSpeakersChanged).on(de.StreamStateChanged,this.handleStreamStateUpdate).on(de.ConnectionQualityUpdate,this.handleConnectionQualityUpdate).on(de.SubscriptionError,this.handleSubscriptionError).on(de.SubscriptionPermissionUpdate,this.handleSubscriptionPermissionUpdate).on(de.MediaTrackAdded,(e,n,i)=>{this.onTrackAdded(e,n,i)}).on(de.Disconnected,e=>{this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,e)}).on(de.ActiveSpeakersUpdate,this.handleActiveSpeakersUpdate).on(de.DataPacketReceived,this.handleDataPacket).on(de.Resuming,()=>{this.clearConnectionReconcile(),this.isResuming=!0,this.log.info("Resuming signal connection",this.logContext),this.setAndEmitConnectionState(qe.SignalReconnecting)&&this.emit(ne.SignalReconnecting)}).on(de.Resumed,()=>{this.registerConnectionReconcile(),this.isResuming=!1,this.log.info("Resumed signal connection",this.logContext),this.updateSubscriptions(),this.emitBufferedEvents(),this.setAndEmitConnectionState(qe.Connected)&&this.emit(ne.Reconnected)}).on(de.SignalResumed,()=>{this.bufferedEvents=[],(this.state===qe.Reconnecting||this.isResuming)&&this.sendSyncState()}).on(de.Restarting,this.handleRestarting).on(de.SignalRestarted,this.handleSignalRestarted).on(de.Offline,()=>{this.setAndEmitConnectionState(qe.Reconnecting)&&this.emit(ne.Reconnecting)}).on(de.DCBufferStatusChanged,(e,n)=>{this.emit(ne.DCBufferStatusChanged,e,n)}).on(de.LocalTrackSubscribed,e=>{const n=this.localParticipant.getTrackPublications().find(i=>{let{trackSid:r}=i;return r===e});if(!n){this.log.warn("could not find local track subscription for subscribed event",this.logContext);return}this.localParticipant.emit(fe.LocalTrackSubscribed,n),this.emitWhenConnected(ne.LocalTrackSubscribed,n,this.localParticipant)}).on(de.RoomMoved,e=>{this.log.debug("room moved",e),e.room&&this.handleRoomUpdate(e.room),this.remoteParticipants.forEach((n,i)=>{this.handleParticipantDisconnected(i,n)}),this.emit(ne.Moved,e.room.name),e.participant?this.handleParticipantUpdates([e.participant,...e.otherParticipants]):this.handleParticipantUpdates(e.otherParticipants)}),this.localParticipant&&this.localParticipant.setupEngine(this.engine),this.e2eeManager&&this.e2eeManager.setupEngine(this.engine),this.outgoingDataStreamManager&&this.outgoingDataStreamManager.setupEngine(this.engine))}static getLocalDevices(e){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return Dt.getInstance().getDevices(e,n)}prepareConnection(e,n){return M(this,void 0,void 0,function*(){if(this.state===qe.Disconnected){this.log.debug("prepareConnection to ".concat(e),this.logContext);try{if(Bp(new URL(e))&&n){this.regionUrlProvider=new Pt(e,n);const i=yield this.regionUrlProvider.getNextBestRegionUrl();i&&this.state===qe.Disconnected&&(this.regionUrl=i,yield fetch(Vp(i),{method:"HEAD"}),this.log.debug("prepared connection to ".concat(i),this.logContext))}else yield fetch(Vp(e),{method:"HEAD"})}catch(i){this.log.warn("could not prepare connection",Object.assign(Object.assign({},this.logContext),{error:i}))}}})}getParticipantByIdentity(e){return this.localParticipant.identity===e?this.localParticipant:this.remoteParticipants.get(e)}clearConnectionFutures(){this.connectFuture=void 0}simulateScenario(e,n){return M(this,void 0,void 0,function*(){let i=()=>M(this,void 0,void 0,function*(){}),r;switch(e){case"signal-reconnect":yield this.engine.client.handleOnClose("simulate disconnect");break;case"speaker":r=new fi({scenario:{case:"speakerUpdate",value:3}});break;case"node-failure":r=new fi({scenario:{case:"nodeFailure",value:!0}});break;case"server-leave":r=new fi({scenario:{case:"serverLeave",value:!0}});break;case"migration":r=new fi({scenario:{case:"migration",value:!0}});break;case"resume-reconnect":this.engine.failNext(),yield this.engine.client.handleOnClose("simulate resume-disconnect");break;case"disconnect-signal-on-resume":i=()=>M(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),r=new fi({scenario:{case:"disconnectSignalOnResume",value:!0}});break;case"disconnect-signal-on-resume-no-messages":i=()=>M(this,void 0,void 0,function*(){yield this.engine.client.handleOnClose("simulate resume-disconnect")}),r=new fi({scenario:{case:"disconnectSignalOnResumeNoMessages",value:!0}});break;case"full-reconnect":this.engine.fullReconnectOnNext=!0,yield this.engine.client.handleOnClose("simulate full-reconnect");break;case"force-tcp":case"force-tls":r=new fi({scenario:{case:"switchCandidateProtocol",value:e==="force-tls"?2:1}}),i=()=>M(this,void 0,void 0,function*(){const o=this.engine.client.onLeave;o&&o(new rd({reason:ii.CLIENT_INITIATED,action:To.RECONNECT}))});break;case"subscriber-bandwidth":if(n===void 0||typeof n!="number")throw new Error("subscriber-bandwidth requires a number as argument");r=new fi({scenario:{case:"subscriberBandwidth",value:vs(n)}});break;case"leave-full-reconnect":r=new fi({scenario:{case:"leaveRequestFullReconnect",value:!0}})}r&&(yield this.engine.client.sendSimulateScenario(r),yield i())})}get canPlaybackAudio(){return this.audioEnabled}get canPlaybackVideo(){return!this.isVideoPlaybackBlocked}getActiveDevice(e){return this.localParticipant.activeDeviceMap.get(e)}switchActiveDevice(e,n){return M(this,arguments,void 0,function(i,r){var o=this;let l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;return(function*(){var c,d,h,f,m,v,S;let k=!0,b=!1;const C=l?{exact:r}:r;if(i==="audioinput"){b=o.localParticipant.audioTrackPublications.size===0;const T=(c=o.getActiveDevice(i))!==null&&c!==void 0?c:o.options.audioCaptureDefaults.deviceId;o.options.audioCaptureDefaults.deviceId=C;const _=Array.from(o.localParticipant.audioTrackPublications.values()).filter(P=>P.source===K.Source.Microphone);try{k=(yield Promise.all(_.map(P=>{var I;return(I=P.audioTrack)===null||I===void 0?void 0:I.setDeviceId(C)}))).every(P=>P===!0)}catch(P){throw o.options.audioCaptureDefaults.deviceId=T,P}const R=_.some(P=>{var I,D;return(D=(I=P.track)===null||I===void 0?void 0:I.isMuted)!==null&&D!==void 0?D:!1});k&&R&&(b=!0)}else if(i==="videoinput"){b=o.localParticipant.videoTrackPublications.size===0;const T=(d=o.getActiveDevice(i))!==null&&d!==void 0?d:o.options.videoCaptureDefaults.deviceId;o.options.videoCaptureDefaults.deviceId=C;const _=Array.from(o.localParticipant.videoTrackPublications.values()).filter(P=>P.source===K.Source.Camera);try{k=(yield Promise.all(_.map(P=>{var I;return(I=P.videoTrack)===null||I===void 0?void 0:I.setDeviceId(C)}))).every(P=>P===!0)}catch(P){throw o.options.videoCaptureDefaults.deviceId=T,P}const R=_.some(P=>{var I,D;return(D=(I=P.track)===null||I===void 0?void 0:I.isMuted)!==null&&D!==void 0?D:!1});k&&R&&(b=!0)}else if(i==="audiooutput"){if(b=!0,!Up()&&!o.options.webAudioMix||o.options.webAudioMix&&o.audioContext&&!("setSinkId"in o.audioContext))throw new Error("cannot switch audio output, the current browser does not support it");o.options.webAudioMix&&(r=(h=yield Dt.getInstance().normalizeDeviceId("audiooutput",r))!==null&&h!==void 0?h:""),(f=(S=o.options).audioOutput)!==null&&f!==void 0||(S.audioOutput={});const T=(m=o.getActiveDevice(i))!==null&&m!==void 0?m:o.options.audioOutput.deviceId;o.options.audioOutput.deviceId=r;try{o.options.webAudioMix&&((v=o.audioContext)===null||v===void 0||v.setSinkId(r)),yield Promise.all(Array.from(o.remoteParticipants.values()).map(_=>_.setAudioOutput({deviceId:r})))}catch(_){throw o.options.audioOutput.deviceId=T,_}}return b&&(o.localParticipant.activeDeviceMap.set(i,r),o.emit(ne.ActiveDeviceChanged,i,r)),k})()})}setupLocalParticipantEvents(){this.localParticipant.on(fe.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).on(fe.ParticipantNameChanged,this.onLocalParticipantNameChanged).on(fe.AttributesChanged,this.onLocalAttributesChanged).on(fe.TrackMuted,this.onLocalTrackMuted).on(fe.TrackUnmuted,this.onLocalTrackUnmuted).on(fe.LocalTrackPublished,this.onLocalTrackPublished).on(fe.LocalTrackUnpublished,this.onLocalTrackUnpublished).on(fe.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).on(fe.MediaDevicesError,this.onMediaDevicesError).on(fe.AudioStreamAcquired,this.startAudio).on(fe.ChatMessage,this.onLocalChatMessageSent).on(fe.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged)}recreateEngine(){var e;(e=this.engine)===null||e===void 0||e.close(),this.engine=void 0,this.isResuming=!1,this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.bufferedEvents=[],this.maybeCreateEngine()}onTrackAdded(e,n,i){if(this.state===qe.Connecting||this.state===qe.Reconnecting){const m=()=>{this.log.debug("deferring on track for later",{mediaTrackId:e.id,mediaStreamId:n.id,tracksInStream:n.getTracks().map(S=>S.id)}),this.onTrackAdded(e,n,i),v()},v=()=>{this.off(ne.Reconnected,m),this.off(ne.Connected,m),this.off(ne.Disconnected,v)};this.once(ne.Reconnected,m),this.once(ne.Connected,m),this.once(ne.Disconnected,v);return}if(this.state===qe.Disconnected){this.log.warn("skipping incoming track after Room disconnected",this.logContext);return}if(e.readyState==="ended"){this.log.info("skipping incoming track as it already ended",this.logContext);return}const r=xU(n.id),o=r[0];let l=r[1],c=e.id;if(l&&l.startsWith("TR")&&(c=l),o===this.localParticipant.sid){this.log.warn("tried to create RemoteParticipant for local participant",this.logContext);return}const d=Array.from(this.remoteParticipants.values()).find(m=>m.sid===o);if(!d){this.log.error("Tried to add a track for a participant, that's not present. Sid: ".concat(o),this.logContext);return}if(!c.startsWith("TR")){const m=this.engine.getTrackIdForReceiver(i);if(!m){this.log.error("Tried to add a track whose 'sid' could not be found for a participant, that's not present. Sid: ".concat(o),this.logContext);return}c=m}c.startsWith("TR")||this.log.warn("Tried to add a track whose 'sid' could not be determined for a participant, that's not present. Sid: ".concat(o,", streamId: ").concat(l,", trackId: ").concat(c),Object.assign(Object.assign({},this.logContext),{rpID:o,streamId:l,trackId:c}));let h;this.options.adaptiveStream&&(typeof this.options.adaptiveStream=="object"?h=this.options.adaptiveStream:h={});const f=d.addSubscribedMediaTrack(e,c,n,i,h);f?.isEncrypted&&!this.e2eeManager&&this.emit(ne.EncryptionError,new Error("Encrypted ".concat(f.source," track received from participant ").concat(d.sid,", but room does not have encryption enabled!")))}handleDisconnect(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,n=arguments.length>1?arguments[1]:void 0;var i;if(this.clearConnectionReconcile(),this.isResuming=!1,this.bufferedEvents=[],this.transcriptionReceivedTimes.clear(),this.incomingDataStreamManager.clearHandlersAndControllers(),this.state!==qe.Disconnected){this.regionUrl=void 0;try{this.remoteParticipants.forEach(r=>{r.trackPublications.forEach(o=>{r.unpublishTrack(o.trackSid)})}),this.localParticipant.trackPublications.forEach(r=>{var o,l,c;r.track&&this.localParticipant.unpublishTrack(r.track,e),e?((o=r.track)===null||o===void 0||o.detach(),(l=r.track)===null||l===void 0||l.stop()):(c=r.track)===null||c===void 0||c.stopMonitor()}),this.localParticipant.off(fe.ParticipantMetadataChanged,this.onLocalParticipantMetadataChanged).off(fe.ParticipantNameChanged,this.onLocalParticipantNameChanged).off(fe.AttributesChanged,this.onLocalAttributesChanged).off(fe.TrackMuted,this.onLocalTrackMuted).off(fe.TrackUnmuted,this.onLocalTrackUnmuted).off(fe.LocalTrackPublished,this.onLocalTrackPublished).off(fe.LocalTrackUnpublished,this.onLocalTrackUnpublished).off(fe.ConnectionQualityChanged,this.onLocalConnectionQualityChanged).off(fe.MediaDevicesError,this.onMediaDevicesError).off(fe.AudioStreamAcquired,this.startAudio).off(fe.ChatMessage,this.onLocalChatMessageSent).off(fe.ParticipantPermissionsChanged,this.onLocalParticipantPermissionsChanged),this.localParticipant.trackPublications.clear(),this.localParticipant.videoTrackPublications.clear(),this.localParticipant.audioTrackPublications.clear(),this.remoteParticipants.clear(),this.sidToIdentity.clear(),this.activeSpeakers=[],this.audioContext&&typeof this.options.webAudioMix=="boolean"&&(this.audioContext.close(),this.audioContext=void 0),mn()&&(window.removeEventListener("beforeunload",this.onPageLeave),window.removeEventListener("pagehide",this.onPageLeave),window.removeEventListener("freeze",this.onPageLeave),(i=navigator.mediaDevices)===null||i===void 0||i.removeEventListener("devicechange",this.handleDeviceChange))}finally{this.setAndEmitConnectionState(qe.Disconnected),this.emit(ne.Disconnected,n)}}}handleParticipantDisconnected(e,n){var i;this.remoteParticipants.delete(e),n&&(this.incomingDataStreamManager.validateParticipantHasNoActiveDataStreams(e),n.trackPublications.forEach(r=>{n.unpublishTrack(r.trackSid,!0)}),this.emit(ne.ParticipantDisconnected,n),n.setDisconnected(),(i=this.localParticipant)===null||i===void 0||i.handleParticipantDisconnected(n.identity))}handleIncomingRpcRequest(e,n,i,r,o,l){return M(this,void 0,void 0,function*(){if(yield this.engine.publishRpcAck(e,n),l!==1){yield this.engine.publishRpcResponse(e,n,null,dt.builtIn("UNSUPPORTED_VERSION"));return}const c=this.rpcHandlers.get(i);if(!c){yield this.engine.publishRpcResponse(e,n,null,dt.builtIn("UNSUPPORTED_METHOD"));return}let d=null,h=null;try{const f=yield c({requestId:n,callerIdentity:e,payload:r,responseTimeout:o});vg(f)>IE?(d=dt.builtIn("RESPONSE_PAYLOAD_TOO_LARGE"),console.warn("RPC Response payload too large for ".concat(i))):h=f}catch(f){f instanceof dt?d=f:(console.warn("Uncaught error returned by RPC handler for ".concat(i,". Returning APPLICATION_ERROR instead."),f),d=dt.builtIn("APPLICATION_ERROR"))}yield this.engine.publishRpcResponse(e,n,h,d)})}selectDefaultDevices(){return M(this,void 0,void 0,function*(){var e,n,i;const r=Dt.getInstance().previousDevices,o=yield Dt.getInstance().getDevices(void 0,!1),l=gn();if(l?.name==="Chrome"&&l.os!=="iOS")for(let d of o){const h=r.find(f=>f.deviceId===d.deviceId);h&&h.label!==""&&h.kind===d.kind&&h.label!==d.label&&this.getActiveDevice(d.kind)==="default"&&this.emit(ne.ActiveDeviceChanged,d.kind,d.deviceId)}const c=["audiooutput","audioinput","videoinput"];for(let d of c){const h=WU(d),f=this.localParticipant.getTrackPublication(h);if(f&&(!((e=f.track)===null||e===void 0)&&e.isUserProvided))continue;const m=o.filter(S=>S.kind===d),v=this.getActiveDevice(d);if(v===((n=r.filter(S=>S.kind===d)[0])===null||n===void 0?void 0:n.deviceId)&&m.length>0&&((i=m[0])===null||i===void 0?void 0:i.deviceId)!==v){yield this.switchActiveDevice(d,m[0].deviceId);continue}d==="audioinput"&&!cl()||d==="videoinput"||m.length>0&&!m.find(S=>S.deviceId===this.getActiveDevice(d))&&(d!=="audiooutput"||!cl())&&(yield this.switchActiveDevice(d,m[0].deviceId))}})}acquireAudioContext(){return M(this,void 0,void 0,function*(){var e,n;if(typeof this.options.webAudioMix!="boolean"&&this.options.webAudioMix.audioContext?this.audioContext=this.options.webAudioMix.audioContext:(!this.audioContext||this.audioContext.state==="closed")&&(this.audioContext=(e=wE())!==null&&e!==void 0?e:void 0),this.options.webAudioMix&&this.remoteParticipants.forEach(r=>r.setAudioContext(this.audioContext)),this.localParticipant.setAudioContext(this.audioContext),this.audioContext&&this.audioContext.state==="suspended")try{yield Promise.race([this.audioContext.resume(),rn(200)])}catch(r){this.log.warn("Could not resume audio context",Object.assign(Object.assign({},this.logContext),{error:r}))}const i=((n=this.audioContext)===null||n===void 0?void 0:n.state)==="running";i!==this.canPlaybackAudio&&(this.audioEnabled=i,this.emit(ne.AudioPlaybackStatusChanged,i))})}createParticipant(e,n){var i;let r;return n?r=Du.fromParticipantInfo(this.engine.client,n,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}):r=new Du(this.engine.client,"",e,void 0,void 0,void 0,{loggerContextCb:()=>this.logContext,loggerName:this.options.loggerName}),this.options.webAudioMix&&r.setAudioContext(this.audioContext),!((i=this.options.audioOutput)===null||i===void 0)&&i.deviceId&&r.setAudioOutput(this.options.audioOutput).catch(o=>this.log.warn("Could not set audio output: ".concat(o.message),this.logContext)),r}getOrCreateParticipant(e,n){if(this.remoteParticipants.has(e)){const r=this.remoteParticipants.get(e);return n&&r.updateInfo(n)&&this.sidToIdentity.set(n.sid,n.identity),r}const i=this.createParticipant(e,n);return this.remoteParticipants.set(e,i),this.sidToIdentity.set(n.sid,n.identity),this.emitWhenConnected(ne.ParticipantConnected,i),i.on(fe.TrackPublished,r=>{this.emitWhenConnected(ne.TrackPublished,r,i)}).on(fe.TrackSubscribed,(r,o)=>{r.kind===K.Kind.Audio?(r.on(le.AudioPlaybackStarted,this.handleAudioPlaybackStarted),r.on(le.AudioPlaybackFailed,this.handleAudioPlaybackFailed)):r.kind===K.Kind.Video&&(r.on(le.VideoPlaybackFailed,this.handleVideoPlaybackFailed),r.on(le.VideoPlaybackStarted,this.handleVideoPlaybackStarted)),this.emit(ne.TrackSubscribed,r,o,i)}).on(fe.TrackUnpublished,r=>{this.emit(ne.TrackUnpublished,r,i)}).on(fe.TrackUnsubscribed,(r,o)=>{this.emit(ne.TrackUnsubscribed,r,o,i)}).on(fe.TrackMuted,r=>{this.emitWhenConnected(ne.TrackMuted,r,i)}).on(fe.TrackUnmuted,r=>{this.emitWhenConnected(ne.TrackUnmuted,r,i)}).on(fe.ParticipantMetadataChanged,r=>{this.emitWhenConnected(ne.ParticipantMetadataChanged,r,i)}).on(fe.ParticipantNameChanged,r=>{this.emitWhenConnected(ne.ParticipantNameChanged,r,i)}).on(fe.AttributesChanged,r=>{this.emitWhenConnected(ne.ParticipantAttributesChanged,r,i)}).on(fe.ConnectionQualityChanged,r=>{this.emitWhenConnected(ne.ConnectionQualityChanged,r,i)}).on(fe.ParticipantPermissionsChanged,r=>{this.emitWhenConnected(ne.ParticipantPermissionsChanged,r,i)}).on(fe.TrackSubscriptionStatusChanged,(r,o)=>{this.emitWhenConnected(ne.TrackSubscriptionStatusChanged,r,o,i)}).on(fe.TrackSubscriptionFailed,(r,o)=>{this.emit(ne.TrackSubscriptionFailed,r,i,o)}).on(fe.TrackSubscriptionPermissionChanged,(r,o)=>{this.emitWhenConnected(ne.TrackSubscriptionPermissionChanged,r,o,i)}).on(fe.Active,()=>{this.emitWhenConnected(ne.ParticipantActive,i),i.kind===ol.AGENT&&this.localParticipant.setActiveAgent(i)}),n&&i.updateInfo(n),i}sendSyncState(){const e=Array.from(this.remoteParticipants.values()).reduce((i,r)=>(i.push(...r.getTrackPublications()),i),[]),n=this.localParticipant.getTrackPublications();this.engine.sendSyncState(e,n)}updateSubscriptions(){for(const e of this.remoteParticipants.values())for(const n of e.videoTrackPublications.values())n.isSubscribed&&UU(n)&&n.emitTrackUpdate()}getRemoteParticipantBySid(e){const n=this.sidToIdentity.get(e);if(n)return this.remoteParticipants.get(n)}registerConnectionReconcile(){this.clearConnectionReconcile();let e=0;this.connectionReconcileInterval=Bt.setInterval(()=>{!this.engine||this.engine.isClosed||!this.engine.verifyTransport()?(e++,this.log.warn("detected connection state mismatch",Object.assign(Object.assign({},this.logContext),{numFailures:e,engine:this.engine?{closed:this.engine.isClosed,transportsConnected:this.engine.verifyTransport()}:void 0})),e>=3&&(this.recreateEngine(),this.handleDisconnect(this.options.stopLocalTrackOnUnpublish,ii.STATE_MISMATCH))):e=0},tV)}clearConnectionReconcile(){this.connectionReconcileInterval&&Bt.clearInterval(this.connectionReconcileInterval)}setAndEmitConnectionState(e){return e===this.state?!1:(this.state=e,this.emit(ne.ConnectionStateChanged,this.state),!0)}emitBufferedEvents(){this.bufferedEvents.forEach(e=>{let[n,i]=e;this.emit(n,...i)}),this.bufferedEvents=[]}emitWhenConnected(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if(this.state===qe.Reconnecting||this.isResuming||!this.engine||this.engine.pendingReconnect)this.bufferedEvents.push([e,i]);else if(this.state===qe.Connected)return this.emit(e,...i);return!1}simulateParticipants(e){return M(this,void 0,void 0,function*(){var n,i;const r=Object.assign({audio:!0,video:!0,useRealTracks:!1},e.publish),o=Object.assign({count:9,audio:!1,video:!0,aspectRatios:[1.66,1.7,1.3]},e.participants);if(this.handleDisconnect(),this.roomInfo=new ed({sid:"RM_SIMULATED",name:"simulated-room",emptyTimeout:0,maxParticipants:0,creationTime:et.parse(new Date().getTime()),metadata:"",numParticipants:1,numPublishers:1,turnPassword:"",enabledCodecs:[],activeRecording:!1}),this.localParticipant.updateInfo(new Ps({identity:"simulated-local",name:"local-name"})),this.setupLocalParticipantEvents(),this.emit(ne.SignalConnected),this.emit(ne.Connected),this.setAndEmitConnectionState(qe.Connected),r.video){const l=new Xp(K.Kind.Video,new go({source:St.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:ti.AUDIO,name:"video-dummy"}),new Nu(r.useRealTracks?(yield window.navigator.mediaDevices.getUserMedia({video:!0})).getVideoTracks()[0]:WS(160*((n=o.aspectRatios[0])!==null&&n!==void 0?n:1),160,!0,!0),void 0,!1,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(l),this.localParticipant.emit(fe.LocalTrackPublished,l)}if(r.audio){const l=new Xp(K.Kind.Audio,new go({source:St.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:ti.AUDIO}),new Mu(r.useRealTracks?(yield navigator.mediaDevices.getUserMedia({audio:!0})).getAudioTracks()[0]:If(),void 0,!1,this.audioContext,{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext}),{loggerName:this.options.loggerName,loggerContextCb:()=>this.logContext});this.localParticipant.addTrackPublication(l),this.localParticipant.emit(fe.LocalTrackPublished,l)}for(let l=0;l<o.count-1;l+=1){let c=new Ps({sid:Math.floor(Math.random()*1e4).toString(),identity:"simulated-".concat(l),state:Co.ACTIVE,tracks:[],joinedAt:et.parse(Date.now())});const d=this.getOrCreateParticipant(c.identity,c);if(o.video){const h=WS(160*((i=o.aspectRatios[l%o.aspectRatios.length])!==null&&i!==void 0?i:1),160,!1,!0),f=new go({source:St.CAMERA,sid:Math.floor(Math.random()*1e4).toString(),type:ti.AUDIO});d.addSubscribedMediaTrack(h,f.sid,new MediaStream([h]),new RTCRtpReceiver),c.tracks=[...c.tracks,f]}if(o.audio){const h=If(),f=new go({source:St.MICROPHONE,sid:Math.floor(Math.random()*1e4).toString(),type:ti.AUDIO});d.addSubscribedMediaTrack(h,f.sid,new MediaStream([h]),new RTCRtpReceiver),c.tracks=[...c.tracks,f]}d.updateInfo(c)}})}emit(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if(e!==ne.ActiveSpeakersChanged&&e!==ne.TranscriptionReceived){const o=UE(i).filter(l=>l!==void 0);(e===ne.TrackSubscribed||e===ne.TrackUnsubscribed)&&this.log.trace("subscribe trace: ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:o})),this.log.debug("room event ".concat(e),Object.assign(Object.assign({},this.logContext),{event:e,args:o}))}return super.emit(e,...i)}}No.cleanupRegistry=typeof FinalizationRegistry<"u"&&new FinalizationRegistry(t=>{t()});function UE(t){return t.map(e=>{if(e)return Array.isArray(e)?UE(e):typeof e=="object"?"logContext"in e?e.logContext:void 0:e})}var ei;(function(t){t[t.IDLE=0]="IDLE",t[t.RUNNING=1]="RUNNING",t[t.SKIPPED=2]="SKIPPED",t[t.SUCCESS=3]="SUCCESS",t[t.FAILED=4]="FAILED"})(ei||(ei={}));class Xr extends Ei.EventEmitter{constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.status=ei.IDLE,this.logs=[],this.options={},this.url=e,this.token=n,this.name=this.constructor.name,this.room=new No(i.roomOptions),this.connectOptions=i.connectOptions,this.options=i}run(e){return M(this,void 0,void 0,function*(){if(this.status!==ei.IDLE)throw Error("check is running already");this.setStatus(ei.RUNNING);try{yield this.perform()}catch(n){n instanceof Error&&(this.options.errorsAsWarnings?this.appendWarning(n.message):this.appendError(n.message))}return yield this.disconnect(),yield new Promise(n=>setTimeout(n,500)),this.status!==ei.SKIPPED&&this.setStatus(this.isSuccess()?ei.SUCCESS:ei.FAILED),e&&e(),this.getInfo()})}isSuccess(){return!this.logs.some(e=>e.level==="error")}connect(e){return M(this,void 0,void 0,function*(){return this.room.state===qe.Connected?this.room:(e||(e=this.url),yield this.room.connect(e,this.token,this.connectOptions),this.room)})}disconnect(){return M(this,void 0,void 0,function*(){this.room&&this.room.state!==qe.Disconnected&&(yield this.room.disconnect(),yield new Promise(e=>setTimeout(e,500)))})}skip(){this.setStatus(ei.SKIPPED)}switchProtocol(e){return M(this,void 0,void 0,function*(){let n=!1,i=!1;if(this.room.on(ne.Reconnecting,()=>{n=!0}),this.room.once(ne.Reconnected,()=>{i=!0}),this.room.simulateScenario("force-".concat(e)),yield new Promise(o=>setTimeout(o,1e3)),!n)return;const r=Date.now()+1e4;for(;Date.now()<r;){if(i)return;yield rn(100)}throw new Error("Could not reconnect using ".concat(e," protocol after 10 seconds"))})}appendMessage(e){this.logs.push({level:"info",message:e}),this.emit("update",this.getInfo())}appendWarning(e){this.logs.push({level:"warning",message:e}),this.emit("update",this.getInfo())}appendError(e){this.logs.push({level:"error",message:e}),this.emit("update",this.getInfo())}setStatus(e){this.status=e,this.emit("update",this.getInfo())}get engine(){var e;return(e=this.room)===null||e===void 0?void 0:e.engine}getInfo(){return{logs:this.logs,name:this.name,status:this.status,description:this.description}}}class nV extends Xr{get description(){return"Cloud regions"}perform(){return M(this,void 0,void 0,function*(){const e=new Pt(this.url,this.token);if(!e.isCloud()){this.skip();return}const n=[],i=new Set;for(let o=0;o<3;o++){const l=yield e.getNextBestRegionUrl();if(!l)break;if(i.has(l))continue;i.add(l);const c=yield this.checkCloudRegion(l);this.appendMessage("".concat(c.region," RTT: ").concat(c.rtt,"ms, duration: ").concat(c.duration,"ms")),n.push(c)}n.sort((o,l)=>(o.duration-l.duration)*.5+(o.rtt-l.rtt)*.5);const r=n[0];this.bestStats=r,this.appendMessage("best Cloud region: ".concat(r.region))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkCloudRegion(e){return M(this,void 0,void 0,function*(){var n,i;yield this.connect(e),this.options.protocol==="tcp"&&(yield this.switchProtocol("tcp"));const r=(n=this.room.serverInfo)===null||n===void 0?void 0:n.region;if(!r)throw new Error("Region not found");const o=yield this.room.localParticipant.streamText({topic:"test"}),l=1e3,d=1e6/l,h="A".repeat(l),f=Date.now();for(let k=0;k<d;k++)yield o.write(h);yield o.close();const m=Date.now(),v=yield(i=this.room.engine.pcManager)===null||i===void 0?void 0:i.publisher.getStats(),S={region:r,rtt:1e4,duration:m-f};return v?.forEach(k=>{k.type==="candidate-pair"&&k.nominated&&(S.rtt=k.currentRoundTripTime*1e3)}),yield this.disconnect(),S})}}const Uf=1e4;class iV extends Xr{get description(){return"Connection via UDP vs TCP"}perform(){return M(this,void 0,void 0,function*(){const e=yield this.checkConnectionProtocol("udp"),n=yield this.checkConnectionProtocol("tcp");this.bestStats=e,e.qualityLimitationDurations.bandwidth-n.qualityLimitationDurations.bandwidth>.5||(e.packetsLost-n.packetsLost)/e.packetsSent>.01?(this.appendMessage("best connection quality via tcp"),this.bestStats=n):this.appendMessage("best connection quality via udp");const i=this.bestStats;this.appendMessage("upstream bitrate: ".concat((i.bitrateTotal/i.count/1e3/1e3).toFixed(2)," mbps")),this.appendMessage("RTT: ".concat((i.rttTotal/i.count*1e3).toFixed(2)," ms")),this.appendMessage("jitter: ".concat((i.jitterTotal/i.count*1e3).toFixed(2)," ms")),i.packetsLost>0&&this.appendWarning("packets lost: ".concat((i.packetsLost/i.packetsSent*100).toFixed(2),"%")),i.qualityLimitationDurations.bandwidth>1&&this.appendWarning("bandwidth limited ".concat((i.qualityLimitationDurations.bandwidth/(Uf/1e3)*100).toFixed(2),"%")),i.qualityLimitationDurations.cpu>0&&this.appendWarning("cpu limited ".concat((i.qualityLimitationDurations.cpu/(Uf/1e3)*100).toFixed(2),"%"))})}getInfo(){const e=super.getInfo();return e.data=this.bestStats,e}checkConnectionProtocol(e){return M(this,void 0,void 0,function*(){yield this.connect(),e==="tcp"?yield this.switchProtocol("tcp"):yield this.switchProtocol("udp");const n=document.createElement("canvas");n.width=1280,n.height=720;const i=n.getContext("2d");if(!i)throw new Error("Could not get canvas context");let r=0;const o=()=>{r=(r+1)%360,i.fillStyle="hsl(".concat(r,", 100%, 50%)"),i.fillRect(0,0,n.width,n.height),requestAnimationFrame(o)};o();const c=n.captureStream(30).getVideoTracks()[0],h=(yield this.room.localParticipant.publishTrack(c,{simulcast:!1,degradationPreference:"maintain-resolution",videoEncoding:{maxBitrate:2e6}})).track,f={protocol:e,packetsLost:0,packetsSent:0,qualityLimitationDurations:{},rttTotal:0,jitterTotal:0,bitrateTotal:0,count:0},m=setInterval(()=>M(this,void 0,void 0,function*(){const v=yield h.getRTCStatsReport();v?.forEach(S=>{S.type==="outbound-rtp"?(f.packetsSent=S.packetsSent,f.qualityLimitationDurations=S.qualityLimitationDurations,f.bitrateTotal+=S.targetBitrate,f.count++):S.type==="remote-inbound-rtp"&&(f.packetsLost=S.packetsLost,f.rttTotal+=S.roundTripTime,f.jitterTotal+=S.jitter)})}),1e3);return yield new Promise(v=>setTimeout(v,Uf)),clearInterval(m),c.stop(),n.remove(),yield this.disconnect(),f})}}class rV extends Xr{get description(){return"Can publish audio"}perform(){return M(this,void 0,void 0,function*(){var e;const n=yield this.connect(),i=yield FE();if(yield TE(i,1e3))throw new Error("unable to detect audio from microphone");this.appendMessage("detected audio from microphone"),n.localParticipant.publishTrack(i),yield new Promise(c=>setTimeout(c,3e3));const o=yield(e=i.sender)===null||e===void 0?void 0:e.getStats();if(!o)throw new Error("Could not get RTCStats");let l=0;if(o.forEach(c=>{c.type==="outbound-rtp"&&(c.kind==="audio"||!c.kind&&c.mediaType==="audio")&&(l=c.packetsSent)}),l===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(l," audio packets"))})}}class sV extends Xr{get description(){return"Can publish video"}perform(){return M(this,void 0,void 0,function*(){var e;const n=yield this.connect(),i=yield YB();yield this.checkForVideo(i.mediaStreamTrack),n.localParticipant.publishTrack(i),yield new Promise(l=>setTimeout(l,5e3));const r=yield(e=i.sender)===null||e===void 0?void 0:e.getStats();if(!r)throw new Error("Could not get RTCStats");let o=0;if(r.forEach(l=>{l.type==="outbound-rtp"&&(l.kind==="video"||!l.kind&&l.mediaType==="video")&&(o+=l.packetsSent)}),o===0)throw new Error("Could not determine packets are sent");this.appendMessage("published ".concat(o," video packets"))})}checkForVideo(e){return M(this,void 0,void 0,function*(){const n=new MediaStream;n.addTrack(e.clone());const i=document.createElement("video");i.srcObject=n,i.muted=!0,i.autoplay=!0,i.playsInline=!0,i.setAttribute("playsinline","true"),document.body.appendChild(i),yield new Promise(r=>{i.onplay=()=>{setTimeout(()=>{var o,l,c,d;const h=document.createElement("canvas"),f=e.getSettings(),m=(l=(o=f.width)!==null&&o!==void 0?o:i.videoWidth)!==null&&l!==void 0?l:1280,v=(d=(c=f.height)!==null&&c!==void 0?c:i.videoHeight)!==null&&d!==void 0?d:720;h.width=m,h.height=v;const S=h.getContext("2d");S.drawImage(i,0,0);const b=S.getImageData(0,0,h.width,h.height).data;let C=!0;for(let T=0;T<b.length;T+=4)if(b[T]!==0||b[T+1]!==0||b[T+2]!==0){C=!1;break}C?this.appendError("camera appears to be producing only black frames"):this.appendMessage("received video frames"),r()},1e3)},i.play()}),n.getTracks().forEach(r=>r.stop()),i.remove()})}}class oV extends Xr{get description(){return"Resuming connection after interruption"}perform(){return M(this,void 0,void 0,function*(){var e;const n=yield this.connect();let i=!1,r=!1,o;const l=new Promise(h=>{setTimeout(h,5e3),o=h}),c=()=>{i=!0};n.on(ne.SignalReconnecting,c).on(ne.Reconnecting,c).on(ne.Reconnected,()=>{r=!0,o(!0)}),(e=n.engine.client.ws)===null||e===void 0||e.close();const d=n.engine.client.onClose;if(d&&d(""),yield l,i){if(!r||n.state!==qe.Connected)throw this.appendWarning("reconnection is only possible in Redis-based configurations"),new Error("Not able to reconnect")}else throw new Error("Did not attempt to reconnect")})}}class aV extends Xr{get description(){return"Can connect via TURN"}perform(){return M(this,void 0,void 0,function*(){var e,n;const i=new hg,r=yield i.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3,singlePeerConnection:!1});let o=!1,l=!1,c=!1;for(let d of r.iceServers)for(let h of d.urls)h.startsWith("turn:")?(l=!0,c=!0):h.startsWith("turns:")&&(l=!0,c=!0,o=!0),h.startsWith("stun:")&&(c=!0);c?l&&!o&&this.appendWarning("TURN is configured server side, but TURN/TLS is unavailable."):this.appendWarning("No STUN servers configured on server side."),yield i.close(),!((n=(e=this.connectOptions)===null||e===void 0?void 0:e.rtcConfig)===null||n===void 0)&&n.iceServers||l?yield this.room.connect(this.url,this.token,{rtcConfig:{iceTransportPolicy:"relay"}}):(this.appendWarning("No TURN servers configured."),this.skip(),yield new Promise(d=>setTimeout(d,0)))})}}class lV extends Xr{get description(){return"Establishing WebRTC connection"}perform(){return M(this,void 0,void 0,function*(){let e=!1,n=!1;this.room.on(ne.SignalConnected,()=>{var i;const r=this.room.engine.client.onTrickle;this.room.engine.client.onTrickle=(o,l)=>{if(o.candidate){const c=new RTCIceCandidate(o);let d="".concat(c.protocol," ").concat(c.address,":").concat(c.port," ").concat(c.type);c.address&&(cV(c.address)?d+=" (private)":c.protocol==="tcp"&&c.tcpType==="passive"?(e=!0,d+=" (passive)"):c.protocol==="udp"&&(n=!0)),this.appendMessage(d)}r&&r(o,l)},!((i=this.room.engine.pcManager)===null||i===void 0)&&i.subscriber&&(this.room.engine.pcManager.subscriber.onIceCandidateError=o=>{o instanceof RTCPeerConnectionIceErrorEvent&&this.appendWarning("error with ICE candidate: ".concat(o.errorCode," ").concat(o.errorText," ").concat(o.url))})});try{yield this.connect(),Oe.info("now the room is connected")}catch(i){throw this.appendWarning("ports need to be open on firewall in order to connect."),i}e||this.appendWarning("Server is not configured for ICE/TCP"),n||this.appendWarning("No public IPv4 UDP candidates were found. Your server is likely not configured correctly")})}}function cV(t){const e=t.split(".");if(e.length===4){if(e[0]==="10")return!0;if(e[0]==="192"&&e[1]==="168")return!0;if(e[0]==="172"){const n=parseInt(e[1],10);if(n>=16&&n<=31)return!0}}return!1}class uV extends Xr{get description(){return"Connecting to signal connection via WebSocket"}perform(){return M(this,void 0,void 0,function*(){var e,n,i;(this.url.startsWith("ws:")||this.url.startsWith("http:"))&&this.appendWarning("Server is insecure, clients may block connections to it");let r=new hg;const o=yield r.join(this.url,this.token,{autoSubscribe:!0,maxRetries:0,e2eeEnabled:!1,websocketTimeout:15e3,singlePeerConnection:!1});this.appendMessage("Connected to server, version ".concat(o.serverVersion,".")),((e=o.serverInfo)===null||e===void 0?void 0:e.edition)===wx.Cloud&&(!((n=o.serverInfo)===null||n===void 0)&&n.region)&&this.appendMessage("LiveKit Cloud: ".concat((i=o.serverInfo)===null||i===void 0?void 0:i.region)),yield r.close()})}}class zV extends Ei.EventEmitter{constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};super(),this.options={},this.checkResults=new Map,this.url=e,this.token=n,this.options=i}getNextCheckId(){const e=this.checkResults.size;return this.checkResults.set(e,{logs:[],status:ei.IDLE,name:"",description:""}),e}updateCheck(e,n){this.checkResults.set(e,n),this.emit("checkUpdate",e,n)}isSuccess(){return Array.from(this.checkResults.values()).every(e=>e.status!==ei.FAILED)}getResults(){return Array.from(this.checkResults.values())}createAndRunCheck(e){return M(this,void 0,void 0,function*(){const n=this.getNextCheckId(),i=new e(this.url,this.token,this.options),r=l=>{this.updateCheck(n,l)};i.on("update",r);const o=yield i.run();return i.off("update",r),o})}checkWebsocket(){return M(this,void 0,void 0,function*(){return this.createAndRunCheck(uV)})}checkWebRTC(){return M(this,void 0,void 0,function*(){return this.createAndRunCheck(lV)})}checkTURN(){return M(this,void 0,void 0,function*(){return this.createAndRunCheck(aV)})}checkReconnect(){return M(this,void 0,void 0,function*(){return this.createAndRunCheck(oV)})}checkPublishAudio(){return M(this,void 0,void 0,function*(){return this.createAndRunCheck(rV)})}checkPublishVideo(){return M(this,void 0,void 0,function*(){return this.createAndRunCheck(sV)})}checkConnectionProtocol(){return M(this,void 0,void 0,function*(){const e=yield this.createAndRunCheck(iV);if(e.data&&"protocol"in e.data){const n=e.data;this.options.protocol=n.protocol}return e})}checkCloudRegion(){return M(this,void 0,void 0,function*(){return this.createAndRunCheck(nV)})}}function Ue(t,e,n){return(e=hV(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function dV(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function hV(t){var e=dV(t,"string");return typeof e=="symbol"?e:e+""}new TextEncoder;new TextDecoder;class sn extends Error{constructor(e,n){var i;super(e,n),Ue(this,"code","ERR_JOSE_GENERIC"),this.name=this.constructor.name,(i=Error.captureStackTrace)===null||i===void 0||i.call(Error,this,this.constructor)}}Ue(sn,"code","ERR_JOSE_GENERIC");class fV extends sn{constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"unspecified",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unspecified";super(e,{cause:{claim:i,reason:r,payload:n}}),Ue(this,"code","ERR_JWT_CLAIM_VALIDATION_FAILED"),Ue(this,"claim",void 0),Ue(this,"reason",void 0),Ue(this,"payload",void 0),this.claim=i,this.reason=r,this.payload=n}}Ue(fV,"code","ERR_JWT_CLAIM_VALIDATION_FAILED");class pV extends sn{constructor(e,n){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"unspecified",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"unspecified";super(e,{cause:{claim:i,reason:r,payload:n}}),Ue(this,"code","ERR_JWT_EXPIRED"),Ue(this,"claim",void 0),Ue(this,"reason",void 0),Ue(this,"payload",void 0),this.claim=i,this.reason=r,this.payload=n}}Ue(pV,"code","ERR_JWT_EXPIRED");class mV extends sn{constructor(){super(...arguments),Ue(this,"code","ERR_JOSE_ALG_NOT_ALLOWED")}}Ue(mV,"code","ERR_JOSE_ALG_NOT_ALLOWED");class gV extends sn{constructor(){super(...arguments),Ue(this,"code","ERR_JOSE_NOT_SUPPORTED")}}Ue(gV,"code","ERR_JOSE_NOT_SUPPORTED");class vV extends sn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"decryption operation failed",n=arguments.length>1?arguments[1]:void 0;super(e,n),Ue(this,"code","ERR_JWE_DECRYPTION_FAILED")}}Ue(vV,"code","ERR_JWE_DECRYPTION_FAILED");class yV extends sn{constructor(){super(...arguments),Ue(this,"code","ERR_JWE_INVALID")}}Ue(yV,"code","ERR_JWE_INVALID");class bV extends sn{constructor(){super(...arguments),Ue(this,"code","ERR_JWS_INVALID")}}Ue(bV,"code","ERR_JWS_INVALID");class SV extends sn{constructor(){super(...arguments),Ue(this,"code","ERR_JWT_INVALID")}}Ue(SV,"code","ERR_JWT_INVALID");class kV extends sn{constructor(){super(...arguments),Ue(this,"code","ERR_JWK_INVALID")}}Ue(kV,"code","ERR_JWK_INVALID");class CV extends sn{constructor(){super(...arguments),Ue(this,"code","ERR_JWKS_INVALID")}}Ue(CV,"code","ERR_JWKS_INVALID");class TV extends sn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"no applicable key found in the JSON Web Key Set",n=arguments.length>1?arguments[1]:void 0;super(e,n),Ue(this,"code","ERR_JWKS_NO_MATCHING_KEY")}}Ue(TV,"code","ERR_JWKS_NO_MATCHING_KEY");class wV extends sn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"multiple matching keys found in the JSON Web Key Set",n=arguments.length>1?arguments[1]:void 0;super(e,n),Ue(this,Symbol.asyncIterator,void 0),Ue(this,"code","ERR_JWKS_MULTIPLE_MATCHING_KEYS")}}Ue(wV,"code","ERR_JWKS_MULTIPLE_MATCHING_KEYS");class xV extends sn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"request timed out",n=arguments.length>1?arguments[1]:void 0;super(e,n),Ue(this,"code","ERR_JWKS_TIMEOUT")}}Ue(xV,"code","ERR_JWKS_TIMEOUT");class EV extends sn{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"signature verification failed",n=arguments.length>1?arguments[1]:void 0;super(e,n),Ue(this,"code","ERR_JWS_SIGNATURE_VERIFICATION_FAILED")}}Ue(EV,"code","ERR_JWS_SIGNATURE_VERIFICATION_FAILED");function $i(){return $i=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},$i.apply(null,arguments)}const dk=new Uint8Array(0);class ul{static getFullOptions(e){return $i({clientTools:{},onConnect:()=>{},onDebug:()=>{},onDisconnect:()=>{},onError:()=>{},onMessage:()=>{},onAudio:()=>{},onModeChange:()=>{},onStatusChange:()=>{},onCanSendFeedbackChange:()=>{},onInterruption:()=>{}},e)}constructor(e,n){var i=this;this.options=void 0,this.connection=void 0,this.lastInterruptTimestamp=0,this.mode="listening",this.status="connecting",this.volume=1,this.currentEventId=1,this.lastFeedbackEventId=0,this.canSendFeedback=!1,this.endSessionWithDetails=async function(r){i.status!=="connected"&&i.status!=="connecting"||(i.updateStatus("disconnecting"),await i.handleEndSession(),i.updateStatus("disconnected"),i.options.onDisconnect&&i.options.onDisconnect(r))},this.onMessage=async function(r){switch(r.type){case"interruption":return void i.handleInterruption(r);case"agent_response":return void i.handleAgentResponse(r);case"user_transcript":return void i.handleUserTranscript(r);case"internal_tentative_agent_response":return void i.handleTentativeAgentResponse(r);case"client_tool_call":try{await i.handleClientToolCall(r)}catch(o){i.onError(`Unexpected error in client tool call handling: ${o instanceof Error?o.message:String(o)}`,{clientToolName:r.client_tool_call.tool_name,toolCallId:r.client_tool_call.tool_call_id})}return;case"audio":return void i.handleAudio(r);case"vad_score":return void i.handleVadScore(r);case"ping":return void i.connection.sendMessage({type:"pong",event_id:r.ping_event.event_id});case"mcp_tool_call":return void i.handleMCPToolCall(r);case"mcp_connection_status":return void i.handleMCPConnectionStatus(r);case"agent_tool_response":return void i.handleAgentToolResponse(r);case"conversation_initiation_metadata":return void i.handleConversationMetadata(r);case"asr_initiation_metadata":return void i.handleAsrInitiationMetadata(r);case"agent_chat_response_part":return void i.handleAgentChatResponsePart(r);case"error":return void i.handleErrorEvent(r);default:return void(i.options.onDebug&&i.options.onDebug(r))}},this.setVolume=({volume:r})=>{this.volume=r},this.options=e,this.connection=n,this.options.onConnect&&this.options.onConnect({conversationId:n.conversationId}),this.connection.onMessage(this.onMessage),this.connection.onDisconnect(this.endSessionWithDetails),this.connection.onModeChange(r=>this.updateMode(r)),this.updateStatus("connected")}endSession(){return this.endSessionWithDetails({reason:"user"})}async handleEndSession(){this.connection.close()}updateMode(e){e!==this.mode&&(this.mode=e,this.options.onModeChange&&this.options.onModeChange({mode:e}))}updateStatus(e){e!==this.status&&(this.status=e,this.options.onStatusChange&&this.options.onStatusChange({status:e}))}updateCanSendFeedback(){const e=this.currentEventId!==this.lastFeedbackEventId;this.canSendFeedback!==e&&(this.canSendFeedback=e,this.options.onCanSendFeedbackChange&&this.options.onCanSendFeedbackChange({canSendFeedback:e}))}handleInterruption(e){e.interruption_event&&(this.lastInterruptTimestamp=e.interruption_event.event_id,this.options.onInterruption&&this.options.onInterruption({event_id:e.interruption_event.event_id}))}handleAgentResponse(e){this.options.onMessage&&this.options.onMessage({source:"ai",message:e.agent_response_event.agent_response})}handleUserTranscript(e){this.options.onMessage&&this.options.onMessage({source:"user",message:e.user_transcription_event.user_transcript})}handleTentativeAgentResponse(e){this.options.onDebug&&this.options.onDebug({type:"tentative_agent_response",response:e.tentative_agent_response_internal_event.tentative_agent_response})}handleVadScore(e){this.options.onVadScore&&this.options.onVadScore({vadScore:e.vad_score_event.vad_score})}async handleClientToolCall(e){if(Object.prototype.hasOwnProperty.call(this.options.clientTools,e.client_tool_call.tool_name))try{var n;const i=(n=await this.options.clientTools[e.client_tool_call.tool_name](e.client_tool_call.parameters))!=null?n:"Client tool execution successful.",r=typeof i=="object"?JSON.stringify(i):String(i);this.connection.sendMessage({type:"client_tool_result",tool_call_id:e.client_tool_call.tool_call_id,result:r,is_error:!1})}catch(i){this.onError(`Client tool execution failed with following error: ${i?.message}`,{clientToolName:e.client_tool_call.tool_name}),this.connection.sendMessage({type:"client_tool_result",tool_call_id:e.client_tool_call.tool_call_id,result:`Client tool execution failed: ${i?.message}`,is_error:!0})}else{if(this.options.onUnhandledClientToolCall)return void this.options.onUnhandledClientToolCall(e.client_tool_call);this.onError(`Client tool with name ${e.client_tool_call.tool_name} is not defined on client`,{clientToolName:e.client_tool_call.tool_name}),this.connection.sendMessage({type:"client_tool_result",tool_call_id:e.client_tool_call.tool_call_id,result:`Client tool with name ${e.client_tool_call.tool_name} is not defined on client`,is_error:!0})}}handleAudio(e){}handleMCPToolCall(e){this.options.onMCPToolCall&&this.options.onMCPToolCall(e.mcp_tool_call)}handleMCPConnectionStatus(e){this.options.onMCPConnectionStatus&&this.options.onMCPConnectionStatus(e.mcp_connection_status)}handleAgentToolResponse(e){e.agent_tool_response.tool_name==="end_call"&&this.endSessionWithDetails({reason:"agent",context:new CloseEvent("end_call",{reason:"Agent ended the call"})}),this.options.onAgentToolResponse&&this.options.onAgentToolResponse(e.agent_tool_response)}handleConversationMetadata(e){this.options.onConversationMetadata&&this.options.onConversationMetadata(e.conversation_initiation_metadata_event)}handleAsrInitiationMetadata(e){this.options.onAsrInitiationMetadata&&this.options.onAsrInitiationMetadata(e.asr_initiation_metadata_event)}handleAgentChatResponsePart(e){this.options.onAgentChatResponsePart&&this.options.onAgentChatResponsePart(e.text_response_part)}handleErrorEvent(e){const n=e.error_event.error_type,i=e.error_event.message||e.error_event.reason||"Unknown error";n!=="max_duration_exceeded"?this.onError(`Server error: ${i}`,{errorType:n,code:e.error_event.code,debugMessage:e.error_event.debug_message,details:e.error_event.details}):this.endSessionWithDetails({reason:"error",message:i,context:new Event("max_duration_exceeded")})}onError(e,n){console.error(e,n),this.options.onError&&this.options.onError(e,n)}getId(){return this.connection.conversationId}isOpen(){return this.status==="connected"}setMicMuted(e){this.connection.setMicMuted(e)}getInputByteFrequencyData(){return dk}getOutputByteFrequencyData(){return dk}getInputVolume(){return 0}getOutputVolume(){return 0}sendFeedback(e){this.canSendFeedback?(this.connection.sendMessage({type:"feedback",score:e?"like":"dislike",event_id:this.currentEventId}),this.lastFeedbackEventId=this.currentEventId,this.updateCanSendFeedback()):console.warn(this.lastFeedbackEventId===0?"Cannot send feedback: the conversation has not started yet.":"Cannot send feedback: feedback has already been sent for the current response.")}sendContextualUpdate(e){this.connection.sendMessage({type:"contextual_update",text:e})}sendUserMessage(e){this.connection.sendMessage({type:"user_message",text:e})}sendUserActivity(){this.connection.sendMessage({type:"user_activity"})}sendMCPToolApprovalResult(e,n){this.connection.sendMessage({type:"mcp_tool_approval_result",tool_call_id:e,is_approved:n})}}let BE=class{constructor(e={}){this.queue=[],this.disconnectionDetails=null,this.onDisconnectCallback=null,this.onMessageCallback=null,this.onModeChangeCallback=null,this.onDebug=void 0,this.onDebug=e.onDebug}debug(e){this.onDebug&&this.onDebug(e)}onMessage(e){this.onMessageCallback=e;const n=this.queue;this.queue=[],n.length>0&&queueMicrotask(()=>{n.forEach(e)})}onDisconnect(e){this.onDisconnectCallback=e;const n=this.disconnectionDetails;n&&queueMicrotask(()=>{e(n)})}onModeChange(e){this.onModeChangeCallback=e}updateMode(e){var n;(n=this.onModeChangeCallback)==null||n.call(this,e)}disconnect(e){var n;this.disconnectionDetails||(this.disconnectionDetails=e,(n=this.onDisconnectCallback)==null||n.call(this,e))}handleMessage(e){this.onMessageCallback?this.onMessageCallback(e):this.queue.push(e)}};function Ou(t){const[e,n]=t.split("_");if(!["pcm","ulaw"].includes(e))throw new Error(`Invalid format: ${t}`);const i=Number.parseInt(n);if(Number.isNaN(i))throw new Error(`Invalid sample rate: ${n}`);return{format:e,sampleRate:i}}const VE="0.9.1";function Yp(t){return!!t.type}const zE="conversation_initiation_client_data";function WE(t){var e;const n={type:zE};var i,r,o,l,c;return t.overrides&&(n.conversation_config_override={agent:{prompt:(i=t.overrides.agent)==null?void 0:i.prompt,first_message:(r=t.overrides.agent)==null?void 0:r.firstMessage,language:(o=t.overrides.agent)==null?void 0:o.language},tts:{voice_id:(l=t.overrides.tts)==null?void 0:l.voiceId},conversation:{text_only:(c=t.overrides.conversation)==null?void 0:c.textOnly}}),t.customLlmExtraBody&&(n.custom_llm_extra_body=t.customLlmExtraBody),t.dynamicVariables&&(n.dynamic_variables=t.dynamicVariables),t.userId&&(n.user_id=t.userId),(e=t.overrides)!=null&&e.client&&(n.source_info={source:t.overrides.client.source,version:t.overrides.client.version}),n}class dl extends BE{constructor(e,n,i,r){super(),this.socket=void 0,this.conversationId=void 0,this.inputFormat=void 0,this.outputFormat=void 0,this.socket=e,this.conversationId=n,this.inputFormat=i,this.outputFormat=r,this.socket.addEventListener("error",o=>{setTimeout(()=>this.disconnect({reason:"error",message:"The connection was closed due to a socket error.",context:o}),0)}),this.socket.addEventListener("close",o=>{this.disconnect(o.code===1e3?{reason:"agent",context:o}:{reason:"error",message:o.reason||"The connection was closed by the server.",context:o})}),this.socket.addEventListener("message",o=>{try{const l=JSON.parse(o.data);if(!Yp(l))return void this.debug({type:"invalid_event",message:"Received invalid socket event",data:o.data});this.handleMessage(l)}catch(l){this.debug({type:"parsing_error",message:"Failed to parse socket message",error:l instanceof Error?l.message:String(l),data:o.data})}})}static async create(e){let n=null;try{var i,r,o;const c=(i=e.origin)!=null?i:"wss://api.elevenlabs.io";let d;const h=((r=e.overrides)==null||(r=r.client)==null?void 0:r.version)||VE,f=((o=e.overrides)==null||(o=o.client)==null?void 0:o.source)||"js_sdk";if(e.signedUrl){const _=e.signedUrl.includes("?")?"&":"?";d=`${e.signedUrl}${_}source=${f}&version=${h}`}else d=`${c}/v1/convai/conversation?agent_id=${e.agentId}&source=${f}&version=${h}`;const m=["convai"];e.authorization&&m.push(`bearer.${e.authorization}`),n=new WebSocket(d,m);const v=await new Promise((_,R)=>{n.addEventListener("open",()=>{var P;const I=WE(e);(P=n)==null||P.send(JSON.stringify(I))},{once:!0}),n.addEventListener("error",P=>{setTimeout(()=>R(P),0)}),n.addEventListener("close",R),n.addEventListener("message",P=>{const I=JSON.parse(P.data);Yp(I)&&(I.type==="conversation_initiation_metadata"?_(I.conversation_initiation_metadata_event):console.warn("First received message is not conversation metadata."))},{once:!0})}),{conversation_id:S,agent_output_audio_format:k,user_input_audio_format:b}=v,C=Ou(b??"pcm_16000"),T=Ou(k);return new dl(n,S,C,T)}catch(c){var l;throw(l=n)==null||l.close(),c}}close(){this.socket.close()}sendMessage(e){this.socket.send(JSON.stringify(e))}async setMicMuted(e){console.warn(`WebSocket connection setMicMuted called with ${e}, but this is handled by VoiceConversation`)}}function qE(t){const e=new Uint8Array(t);return window.btoa(String.fromCharCode(...e))}function PV(t){const e=window.atob(t),n=e.length,i=new Uint8Array(n);for(let r=0;r<n;r++)i[r]=e.charCodeAt(r);return i.buffer}const $c=new Map;function HE(t,e){return async(n,i)=>{const r=$c.get(t);if(r)return n.addModule(r);if(i)try{return await n.addModule(i),void $c.set(t,i)}catch(c){throw new Error(`Failed to load the ${t} worklet module from path: ${i}. Error: ${c}`)}const o=new Blob([e],{type:"application/javascript"}),l=URL.createObjectURL(o);try{return await n.addModule(l),void $c.set(t,l)}catch{URL.revokeObjectURL(l)}try{const c=`data:application/javascript;base64,${btoa(e)}`;await n.addModule(c),$c.set(t,c)}catch{throw new Error(`Failed to load the ${t} worklet module. Make sure the browser supports AudioWorklets. If you are using a strict CSP, you may need to self-host the worklet files.`)}}}const $E=HE("rawAudioProcessor",`/*
 * ulaw encoding logic taken from the wavefile library
 * https://github.com/rochars/wavefile/blob/master/lib/codecs/mulaw.js
 * USED BY @elevenlabs/client
 */

const BIAS = 0x84;
const CLIP = 32635;
const encodeTable = [
  0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,
  4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,
  5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,
  5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,
  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
  6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,
  7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7
];

function encodeSample(sample) {
  let sign;
  let exponent;
  let mantissa;
  let muLawSample;
  sign = (sample >> 8) & 0x80;
  if (sign !== 0) sample = -sample;
  sample = sample + BIAS;
  if (sample > CLIP) sample = CLIP;
  exponent = encodeTable[(sample>>7) & 0xFF];
  mantissa = (sample >> (exponent+3)) & 0x0F;
  muLawSample = ~(sign | (exponent << 4) | mantissa);
  
  return muLawSample;
}

class RawAudioProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
              
    this.port.onmessage = ({ data }) => {
      switch (data.type) {
        case "setFormat":
          this.isMuted = false;
          this.buffer = []; // Initialize an empty buffer
          this.bufferSize = data.sampleRate / 4;
          this.format = data.format;

          if (globalThis.LibSampleRate && sampleRate !== data.sampleRate) {
            globalThis.LibSampleRate.create(1, sampleRate, data.sampleRate).then(resampler => {
              this.resampler = resampler;
            });
          }
          break;
        case "setMuted":
          this.isMuted = data.isMuted;
          break;
      }
    };
  }
  process(inputs) {
    if (!this.buffer) {
      return true;
    }
    
    const input = inputs[0]; // Get the first input node
    if (input.length > 0) {
      let channelData = input[0]; // Get the first channel's data

      // Resample the audio if necessary
      if (this.resampler) {
        channelData = this.resampler.full(channelData);
      }

      // Add channel data to the buffer
      this.buffer.push(...channelData);
      // Get max volume 
      let sum = 0.0;
      for (let i = 0; i < channelData.length; i++) {
        sum += channelData[i] * channelData[i];
      }
      const maxVolume = Math.sqrt(sum / channelData.length);
      // Check if buffer size has reached or exceeded the threshold
      if (this.buffer.length >= this.bufferSize) {
        const float32Array = this.isMuted 
          ? new Float32Array(this.buffer.length)
          : new Float32Array(this.buffer);

        let encodedArray = this.format === "ulaw"
          ? new Uint8Array(float32Array.length)
          : new Int16Array(float32Array.length);

        // Iterate through the Float32Array and convert each sample to PCM16
        for (let i = 0; i < float32Array.length; i++) {
          // Clamp the value to the range [-1, 1]
          let sample = Math.max(-1, Math.min(1, float32Array[i]));

          // Scale the sample to the range [-32768, 32767]
          let value = sample < 0 ? sample * 32768 : sample * 32767;
          if (this.format === "ulaw") {
            value = encodeSample(Math.round(value));
          }

          encodedArray[i] = value;
        }

        // Send the buffered data to the main script
        this.port.postMessage([encodedArray, maxVolume]);

        // Clear the buffer after sending
        this.buffer = [];
      }
    }
    return true; // Continue processing
  }
}
registerProcessor("rawAudioProcessor", RawAudioProcessor);
`);class Vi extends BE{constructor(e,n,i,r,o={}){super(o),this.conversationId=void 0,this.inputFormat=void 0,this.outputFormat=void 0,this.room=void 0,this.isConnected=!1,this.audioEventId=1,this.audioCaptureContext=null,this.audioElements=[],this.outputDeviceId=null,this.outputAnalyser=null,this.outputFrequencyData=null,this.room=e,this.conversationId=n,this.inputFormat=i,this.outputFormat=r,this.setupRoomEventListeners()}static async create(e){let n;if("conversationToken"in e&&e.conversationToken)n=e.conversationToken;else{if(!("agentId"in e)||!e.agentId)throw new Error("Either conversationToken or agentId is required for WebRTC connection");try{var i,r,o;const h=((i=e.overrides)==null||(i=i.client)==null?void 0:i.version)||VE,f=((r=e.overrides)==null||(r=r.client)==null?void 0:r.source)||"js_sdk",m=`${l=(o=e.origin)!=null?o:"https://api.elevenlabs.io",l.replace(/^wss:\/\//,"https://")}/v1/convai/conversation/token?agent_id=${e.agentId}&source=${f}&version=${h}`,v=await fetch(m);if(!v.ok)throw new Error(`ElevenLabs API returned ${v.status} ${v.statusText}`);if(n=(await v.json()).token,!n)throw new Error("No conversation token received from API")}catch(h){let f=h instanceof Error?h.message:String(h);throw h instanceof Error&&h.message.includes("401")&&(f="Your agent has authentication enabled, but no signed URL or conversation token was provided."),new Error(`Failed to fetch conversation token for agent ${e.agentId}: ${f}`)}}var l;const c=new No;try{const h=`room_${Date.now()}`,f=Ou("pcm_48000"),m=Ou("pcm_48000"),v=new Vi(c,h,f,m,e),S=e.livekitUrl||"wss://livekit.rtc.elevenlabs.io";var d;await c.connect(S,n),await new Promise(b=>{if(v.isConnected)b();else{const C=()=>{c.off(ne.Connected,C),b()};c.on(ne.Connected,C)}}),c.name&&(v.conversationId=((d=c.name.match(/(conv_[a-zA-Z0-9]+)/))==null?void 0:d[0])||c.name),await c.localParticipant.setMicrophoneEnabled(!0);const k=WE(e);return v.debug({type:zE,message:k}),await v.sendMessage(k),v}catch(h){throw await c.disconnect(),h}}setupRoomEventListeners(){var e=this;this.room.on(ne.Connected,async function(){e.isConnected=!0,console.info("WebRTC room connected")}),this.room.on(ne.Disconnected,n=>{this.isConnected=!1,this.disconnect({reason:"agent",context:new CloseEvent("close",{reason:n?.toString()})})}),this.room.on(ne.ConnectionStateChanged,n=>{n===qe.Disconnected&&(this.isConnected=!1,this.disconnect({reason:"error",message:`LiveKit connection state changed to ${n}`,context:new Event("connection_state_changed")}))}),this.room.on(ne.DataReceived,(n,i)=>{try{const r=JSON.parse(new TextDecoder().decode(n));if(r.type==="audio")return;Yp(r)?this.handleMessage(r):console.warn("Invalid socket event received:",r)}catch(r){console.warn("Failed to parse incoming data message:",r),console.warn("Raw payload:",new TextDecoder().decode(n))}}),this.room.on(ne.TrackSubscribed,async function(n,i,r){if(n.kind===K.Kind.Audio&&r.identity.includes("agent")){const o=n,l=o.attach();if(l.autoplay=!0,l.controls=!1,e.outputDeviceId&&l.setSinkId)try{await l.setSinkId(e.outputDeviceId)}catch(c){console.warn("Failed to set output device for new audio element:",c)}l.style.display="none",document.body.appendChild(l),e.audioElements.push(l),e.audioElements.length===1&&(e.onDebug==null||e.onDebug({type:"audio_element_ready"})),await e.setupAudioCapture(o)}}),this.room.on(ne.ActiveSpeakersChanged,async function(n){e.updateMode(n.length>0&&n[0].identity.startsWith("agent")?"speaking":"listening")})}close(){if(this.isConnected){try{this.room.localParticipant.audioTrackPublications.forEach(e=>{e.track&&e.track.stop()})}catch(e){console.warn("Error stopping local tracks:",e)}this.audioCaptureContext&&(this.audioCaptureContext.close().catch(e=>{console.warn("Error closing audio capture context:",e)}),this.audioCaptureContext=null),this.audioElements.forEach(e=>{e.parentNode&&e.parentNode.removeChild(e)}),this.audioElements=[],this.room.disconnect()}}async sendMessage(e){if(this.isConnected&&this.room.localParticipant){if(!("user_audio_chunk"in e))try{const n=new TextEncoder().encode(JSON.stringify(e));await this.room.localParticipant.publishData(n,{reliable:!0})}catch(n){this.debug({type:"send_message_error",message:{message:e,error:n}}),console.error("Failed to send message via WebRTC:",n)}}else console.warn("Cannot send message: room not connected or no local participant")}getRoom(){return this.room}async setMicMuted(e){if(!this.isConnected||!this.room.localParticipant)return void console.warn("Cannot set microphone muted: room not connected or no local participant");const n=this.room.localParticipant.getTrackPublication(K.Source.Microphone);if(n!=null&&n.track)try{e?await n.track.mute():await n.track.unmute()}catch{await this.room.localParticipant.setMicrophoneEnabled(!e)}else await this.room.localParticipant.setMicrophoneEnabled(!e)}async setupAudioCapture(e){try{const n=new AudioContext;this.audioCaptureContext=n,this.outputAnalyser=n.createAnalyser(),this.outputAnalyser.fftSize=2048,this.outputAnalyser.smoothingTimeConstant=.8;const i=new MediaStream([e.mediaStreamTrack]),r=n.createMediaStreamSource(i);r.connect(this.outputAnalyser),await $E(n.audioWorklet);const o=new AudioWorkletNode(n,"rawAudioProcessor");this.outputAnalyser.connect(o),o.port.postMessage({type:"setFormat",format:this.outputFormat.format,sampleRate:this.outputFormat.sampleRate}),o.port.onmessage=l=>{const[c,d]=l.data;if(d>.01){const h=qE(c.buffer),f=this.audioEventId++;this.handleMessage({type:"audio",audio_event:{audio_base_64:h,event_id:f}})}},r.connect(o)}catch(n){console.warn("Failed to set up audio capture:",n)}}setAudioVolume(e){this.audioElements.forEach(n=>{n.volume=e})}async setAudioOutputDevice(e){if(!("setSinkId"in HTMLAudioElement.prototype))throw new Error("setSinkId is not supported in this browser");const n=this.audioElements.map(async function(i){try{await i.setSinkId(e)}catch(r){throw console.error("Failed to set sink ID for audio element:",r),r}});await Promise.all(n),this.outputDeviceId=e}async setAudioInputDevice(e){if(!this.isConnected||!this.room.localParticipant)throw new Error("Cannot change input device: room not connected or no local participant");try{const n=this.room.localParticipant.getTrackPublication(K.Source.Microphone);n!=null&&n.track&&(await n.track.stop(),await this.room.localParticipant.unpublishTrack(n.track));const i={deviceId:{exact:e},echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,channelCount:{ideal:1}},r=await FE(i);await this.room.localParticipant.publishTrack(r,{name:"microphone",source:K.Source.Microphone})}catch(n){console.error("Failed to change input device:",n);try{await this.room.localParticipant.setMicrophoneEnabled(!0)}catch(i){console.error("Failed to recover microphone after device switch error:",i)}throw n}}getOutputByteFrequencyData(){return this.outputAnalyser?(this.outputFrequencyData!=null||(this.outputFrequencyData=new Uint8Array(this.outputAnalyser.frequencyBinCount)),this.outputAnalyser.getByteFrequencyData(this.outputFrequencyData),this.outputFrequencyData):null}}async function KE(t){const e=(function(n){return n.connectionType?n.connectionType:"conversationToken"in n&&n.conversationToken?"webrtc":"websocket"})(t);switch(e){case"websocket":return dl.create(t);case"webrtc":return Vi.create(t);default:throw new Error(`Unknown connection type: ${e}`)}}function GE(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}async function XE(t={default:0,android:3e3}){let e=t.default;var n;if(/android/i.test(navigator.userAgent))e=(n=t.android)!=null?n:e;else if(GE()){var i;e=(i=t.ios)!=null?i:e}e>0&&await new Promise(r=>setTimeout(r,e))}class Sg extends ul{static async startSession(e){const n=ul.getFullOptions(e);n.onStatusChange&&n.onStatusChange({status:"connecting"}),n.onCanSendFeedbackChange&&n.onCanSendFeedbackChange({canSendFeedback:!1}),n.onModeChange&&n.onModeChange({mode:"listening"}),n.onCanSendFeedbackChange&&n.onCanSendFeedbackChange({canSendFeedback:!1});let i=null;try{return await XE(n.connectionDelay),i=await KE(e),new Sg(n,i)}catch(o){var r;throw n.onStatusChange&&n.onStatusChange({status:"disconnected"}),(r=i)==null||r.close(),o}}}const hk={echoCancellation:!0,noiseSuppression:!0,autoGainControl:!0,channelCount:{ideal:1}};class Lu{static async create({sampleRate:e,format:n,preferHeadphonesForIosDevices:i,inputDeviceId:r,workletPaths:o,libsampleratePath:l}){let c=null,d=null;try{const m=$i({sampleRate:{ideal:e}},hk);if(GE()&&i){const T=(await window.navigator.mediaDevices.enumerateDevices()).find(_=>_.kind==="audioinput"&&["airpod","headphone","earphone"].find(R=>_.label.toLowerCase().includes(R)));T&&(m.deviceId={ideal:T.deviceId})}r&&(m.deviceId={exact:r});const v=navigator.mediaDevices.getSupportedConstraints().sampleRate;c=new window.AudioContext(v?{sampleRate:e}:{});const S=c.createAnalyser();if(!v){const T=l||"https://cdn.jsdelivr.net/npm/@alexanderolsen/libsamplerate-js@2.1.2/dist/libsamplerate.worklet.js";await c.audioWorklet.addModule(T)}await $E(c.audioWorklet,o?.rawAudioProcessor);const k=$i({voiceIsolation:!0},m);d=await navigator.mediaDevices.getUserMedia({audio:k});const b=c.createMediaStreamSource(d),C=new AudioWorkletNode(c,"rawAudioProcessor");return C.port.postMessage({type:"setFormat",format:n,sampleRate:e}),b.connect(S),S.connect(C),await c.resume(),new Lu(c,S,C,d,b)}catch(m){var h,f;throw(h=d)==null||h.getTracks().forEach(v=>{v.stop()}),(f=c)==null||f.close(),m}}constructor(e,n,i,r,o){this.context=void 0,this.analyser=void 0,this.worklet=void 0,this.inputStream=void 0,this.mediaStreamSource=void 0,this.context=e,this.analyser=n,this.worklet=i,this.inputStream=r,this.mediaStreamSource=o}async close(){this.inputStream.getTracks().forEach(e=>{e.stop()}),this.mediaStreamSource.disconnect(),await this.context.close()}setMuted(e){this.worklet.port.postMessage({type:"setMuted",isMuted:e})}async setInputDevice(e){try{const n=$i({},hk);e&&(n.deviceId={exact:e});const i=$i({voiceIsolation:!0},n),r=await navigator.mediaDevices.getUserMedia({audio:i});this.inputStream.getTracks().forEach(o=>{o.stop()}),this.mediaStreamSource.disconnect(),this.inputStream=r,this.mediaStreamSource=this.context.createMediaStreamSource(r),this.mediaStreamSource.connect(this.analyser)}catch(n){throw console.error("Failed to switch input device:",n),n}}}const RV=HE("audioConcatProcessor",`/*
 * ulaw decoding logic taken from the wavefile library
 * https://github.com/rochars/wavefile/blob/master/lib/codecs/mulaw.js
 * USED BY @elevenlabs/client
 */

const decodeTable = [0,132,396,924,1980,4092,8316,16764];

function decodeSample(muLawSample) {
  let sign;
  let exponent;
  let mantissa;
  let sample;
  muLawSample = ~muLawSample;
  sign = (muLawSample & 0x80);
  exponent = (muLawSample >> 4) & 0x07;
  mantissa = muLawSample & 0x0F;
  sample = decodeTable[exponent] + (mantissa << (exponent+3));
  if (sign !== 0) sample = -sample;

  return sample;
}

class AudioConcatProcessor extends AudioWorkletProcessor {
  constructor() {
    super();
    this.buffers = []; // Initialize an empty buffer
    this.cursor = 0;
    this.currentBuffer = null;
    this.wasInterrupted = false;
    this.finished = false;
    
    this.port.onmessage = ({ data }) => {
      switch (data.type) {
        case "setFormat":
          this.format = data.format;
          break;
        case "buffer":
          this.wasInterrupted = false;
          this.buffers.push(
            this.format === "ulaw"
              ? new Uint8Array(data.buffer)
              : new Int16Array(data.buffer)
          );
          break;
        case "interrupt":
          this.wasInterrupted = true;
          break;
        case "clearInterrupted":
          if (this.wasInterrupted) {
            this.wasInterrupted = false;
            this.buffers = [];
            this.currentBuffer = null;
          }
      }
    };
  }
  process(_, outputs) {
    let finished = false;
    const output = outputs[0][0];
    for (let i = 0; i < output.length; i++) {
      if (!this.currentBuffer) {
        if (this.buffers.length === 0) {
          finished = true;
          break;
        }
        this.currentBuffer = this.buffers.shift();
        this.cursor = 0;
      }

      let value = this.currentBuffer[this.cursor];
      if (this.format === "ulaw") {
        value = decodeSample(value);
      }
      output[i] = value / 32768;
      this.cursor++;

      if (this.cursor >= this.currentBuffer.length) {
        this.currentBuffer = null;
      }
    }

    if (this.finished !== finished) {
      this.finished = finished;
      this.port.postMessage({ type: "process", finished });
    }

    return true; // Continue processing
  }
}

registerProcessor("audioConcatProcessor", AudioConcatProcessor);
`);class Fu{static async create({sampleRate:e,format:n,outputDeviceId:i,workletPaths:r}){let o=null,l=null;try{o=new AudioContext({sampleRate:e});const h=o.createAnalyser(),f=o.createGain();l=new Audio,l.src="",l.load(),l.autoplay=!0,l.style.display="none",document.body.appendChild(l);const m=o.createMediaStreamDestination();l.srcObject=m.stream,f.connect(h),h.connect(m),await RV(o.audioWorklet,r?.audioConcatProcessor);const v=new AudioWorkletNode(o,"audioConcatProcessor");return v.port.postMessage({type:"setFormat",format:n}),v.connect(f),await o.resume(),i&&l.setSinkId&&await l.setSinkId(i),new Fu(o,h,f,v,l)}catch(h){var c,d;throw(c=l)!=null&&c.parentNode&&l.parentNode.removeChild(l),(d=l)==null||d.pause(),o&&o.state!=="closed"&&await o.close(),h}}constructor(e,n,i,r,o){this.context=void 0,this.analyser=void 0,this.gain=void 0,this.worklet=void 0,this.audioElement=void 0,this.context=e,this.analyser=n,this.gain=i,this.worklet=r,this.audioElement=o}async setOutputDevice(e){if(!("setSinkId"in HTMLAudioElement.prototype))throw new Error("setSinkId is not supported in this browser");await this.audioElement.setSinkId(e||"")}async close(){this.audioElement.parentNode&&this.audioElement.parentNode.removeChild(this.audioElement),this.audioElement.pause(),await this.context.close()}}class kg extends ul{static async startSession(e){var n;const i=ul.getFullOptions(e);i.onStatusChange&&i.onStatusChange({status:"connecting"}),i.onCanSendFeedbackChange&&i.onCanSendFeedbackChange({canSendFeedback:!1});let r=null,o=null,l=null,c=null,d=null;if((n=e.useWakeLock)==null||n)try{d=await navigator.wakeLock.request("screen")}catch{}try{var h;return c=await navigator.mediaDevices.getUserMedia({audio:!0}),await XE(i.connectionDelay),o=await KE(e),[r,l]=await Promise.all([Lu.create($i({},o.inputFormat,{preferHeadphonesForIosDevices:e.preferHeadphonesForIosDevices,inputDeviceId:e.inputDeviceId,workletPaths:e.workletPaths,libsampleratePath:e.libsampleratePath})),Fu.create($i({},o.outputFormat,{outputDeviceId:e.outputDeviceId,workletPaths:e.workletPaths}))]),(h=c)==null||h.getTracks().forEach(b=>{b.stop()}),c=null,new kg(i,o,r,l,d)}catch(b){var f,m,v,S;i.onStatusChange&&i.onStatusChange({status:"disconnected"}),(f=c)==null||f.getTracks().forEach(C=>{C.stop()}),(m=o)==null||m.close(),await((v=r)==null?void 0:v.close()),await((S=l)==null?void 0:S.close());try{var k;await((k=d)==null?void 0:k.release()),d=null}catch{}throw b}}constructor(e,n,i,r,o){super(e,n),this.input=void 0,this.output=void 0,this.wakeLock=void 0,this.inputFrequencyData=void 0,this.outputFrequencyData=void 0,this.onInputWorkletMessage=l=>{this.status==="connected"&&this.connection.sendMessage({user_audio_chunk:qE(l.data[0].buffer)})},this.onOutputWorkletMessage=({data:l})=>{l.type==="process"&&this.updateMode(l.finished?"listening":"speaking")},this.addAudioBase64Chunk=l=>{this.output.gain.gain.value=this.volume,this.output.worklet.port.postMessage({type:"clearInterrupted"}),this.output.worklet.port.postMessage({type:"buffer",buffer:PV(l)})},this.fadeOutAudio=()=>{this.updateMode("listening"),this.output.worklet.port.postMessage({type:"interrupt"}),this.output.gain.gain.exponentialRampToValueAtTime(1e-4,this.output.context.currentTime+2),setTimeout(()=>{this.output.gain.gain.value=this.volume,this.output.worklet.port.postMessage({type:"clearInterrupted"})},2e3)},this.calculateVolume=l=>{if(l.length===0)return 0;let c=0;for(let d=0;d<l.length;d++)c+=l[d]/255;return c/=l.length,c<0?0:c>1?1:c},this.setVolume=({volume:l})=>{const c=Number.isFinite(l)?Math.min(1,Math.max(0,l)):1;this.volume=c,this.connection instanceof Vi?this.connection.setAudioVolume(c):this.output.gain.gain.value=c},this.input=i,this.output=r,this.wakeLock=o,this.input.worklet.port.onmessage=this.onInputWorkletMessage,this.output.worklet.port.onmessage=this.onOutputWorkletMessage}async handleEndSession(){await super.handleEndSession();try{var e;await((e=this.wakeLock)==null?void 0:e.release()),this.wakeLock=null}catch{}await this.input.close(),await this.output.close()}handleInterruption(e){super.handleInterruption(e),this.fadeOutAudio()}handleAudio(e){var n,i;this.lastInterruptTimestamp<=e.audio_event.event_id&&((n=(i=this.options).onAudio)==null||n.call(i,e.audio_event.audio_base_64),this.connection instanceof Vi||this.addAudioBase64Chunk(e.audio_event.audio_base_64),this.currentEventId=e.audio_event.event_id,this.updateCanSendFeedback(),this.updateMode("speaking"))}setMicMuted(e){this.connection instanceof Vi?this.connection.setMicMuted(e):this.input.setMuted(e)}getInputByteFrequencyData(){return this.inputFrequencyData!=null||(this.inputFrequencyData=new Uint8Array(this.input.analyser.frequencyBinCount)),this.input.analyser.getByteFrequencyData(this.inputFrequencyData),this.inputFrequencyData}getOutputByteFrequencyData(){return this.connection instanceof Vi?this.connection.getOutputByteFrequencyData()||new Uint8Array(1024):(this.outputFrequencyData!=null||(this.outputFrequencyData=new Uint8Array(this.output.analyser.frequencyBinCount)),this.output.analyser.getByteFrequencyData(this.outputFrequencyData),this.outputFrequencyData)}getInputVolume(){return this.calculateVolume(this.getInputByteFrequencyData())}getOutputVolume(){return this.calculateVolume(this.getOutputByteFrequencyData())}async changeInputDevice({sampleRate:e,format:n,preferHeadphonesForIosDevices:i,inputDeviceId:r}){try{if(this.connection instanceof dl)try{return await this.input.setInputDevice(r),this.input}catch(l){console.warn("Failed to change device on existing input, recreating:",l)}this.connection instanceof Vi&&await this.connection.setAudioInputDevice(r||""),await this.input.close();const o=await Lu.create({sampleRate:e??this.connection.inputFormat.sampleRate,format:n??this.connection.inputFormat.format,preferHeadphonesForIosDevices:i,inputDeviceId:r,workletPaths:this.options.workletPaths,libsampleratePath:this.options.libsampleratePath});return this.input=o,this.input.worklet.port.onmessage=this.onInputWorkletMessage,this.input}catch(o){throw console.error("Error changing input device",o),o}}async changeOutputDevice({sampleRate:e,format:n,outputDeviceId:i}){try{if(this.connection instanceof dl)try{return await this.output.setOutputDevice(i),this.output}catch(o){console.warn("Failed to change device on existing output, recreating:",o)}this.connection instanceof Vi&&await this.connection.setAudioOutputDevice(i||""),await this.output.close();const r=await Fu.create({sampleRate:e??this.connection.outputFormat.sampleRate,format:n??this.connection.outputFormat.format,outputDeviceId:i,workletPaths:this.options.workletPaths});return this.output=r,this.output}catch(r){throw console.error("Error changing output device",r),r}}}var fk;(function(t){t.SESSION_STARTED="session_started",t.PARTIAL_TRANSCRIPT="partial_transcript",t.FINAL_TRANSCRIPT="final_transcript",t.FINAL_TRANSCRIPT_WITH_TIMESTAMPS="final_transcript_with_timestamps",t.AUTH_ERROR="auth_error",t.ERROR="error",t.OPEN="open",t.CLOSE="close"})(fk||(fk={}));var pk,mk;(function(t){t.PCM_8000="pcm_8000",t.PCM_16000="pcm_16000",t.PCM_22050="pcm_22050",t.PCM_24000="pcm_24000",t.PCM_44100="pcm_44100",t.PCM_48000="pcm_48000",t.ULAW_8000="ulaw_8000"})(pk||(pk={})),(function(t){t.MANUAL="manual",t.VAD="vad"})(mk||(mk={}));class _V extends ul{static startSession(e){return e.textOnly?Sg.startSession(e):kg.startSession(e)}}function Xa(){return Xa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)({}).hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Xa.apply(null,arguments)}const IV=["micMuted","volume","serverLocation"];function AV(t="us"){switch(t){case"eu-residency":case"in-residency":case"us":case"global":return t;default:return console.warn(`[ConversationalAI] Invalid server-location: ${t}. Defaulting to "us"`),"us"}}function MV(t){return{us:"wss://api.elevenlabs.io","eu-residency":"wss://api.eu.residency.elevenlabs.io","in-residency":"wss://api.in.residency.elevenlabs.io",global:"wss://api.elevenlabs.io"}[t]}function NV(t){return{us:"wss://livekit.rtc.elevenlabs.io","eu-residency":"wss://livekit.rtc.eu.residency.elevenlabs.io","in-residency":"wss://livekit.rtc.in.residency.elevenlabs.io",global:"wss://livekit.rtc.elevenlabs.io"}[t]}function DV(t={}){const{micMuted:e,volume:n,serverLocation:i}=t,r=(function(b,C){if(b==null)return{};var T={};for(var _ in b)if({}.hasOwnProperty.call(b,_)){if(C.indexOf(_)!==-1)continue;T[_]=b[_]}return T})(t,IV),o=x.useRef(null),l=x.useRef(null),[c,d]=x.useState("disconnected"),[h,f]=x.useState(!1),[m,v]=x.useState("listening"),S=x.useRef(e),k=x.useRef(n);return S.current=e,k.current=n,x.useEffect(()=>{var b;e!==void 0&&(o==null||(b=o.current)==null||b.setMicMuted(e))},[e]),x.useEffect(()=>{var b;n!==void 0&&(o==null||(b=o.current)==null||b.setVolume({volume:n}))},[n]),x.useEffect(()=>()=>{var b;(b=o.current)==null||b.endSession()},[]),{startSession:async b=>{var C;if((C=o.current)!=null&&C.isOpen())return o.current.getId();if(l.current)return(await l.current).getId();try{var T,_,R,P,I,D,O,N,q,H;const G=AV(b?.serverLocation||i),ce=MV(G),pe=NV(G);return l.current=_V.startSession(Xa({},r??{},b??{},{origin:ce,livekitUrl:pe,overrides:Xa({},(T=r?.overrides)!=null?T:{},(_=b?.overrides)!=null?_:{},{client:Xa({},(R=r==null||(P=r.overrides)==null?void 0:P.client)!=null?R:{},(I=b==null||(D=b.overrides)==null?void 0:D.client)!=null?I:{},{source:(b==null||(O=b.overrides)==null||(O=O.client)==null?void 0:O.source)||(r==null||(N=r.overrides)==null||(N=N.client)==null?void 0:N.source)||"react_sdk",version:(b==null||(q=b.overrides)==null||(q=q.client)==null?void 0:q.version)||(r==null||(H=r.overrides)==null||(H=H.client)==null?void 0:H.version)||"0.9.1"})}),onConnect:b?.onConnect||r?.onConnect,onDisconnect:b?.onDisconnect||r?.onDisconnect,onError:b?.onError||r?.onError,onMessage:b?.onMessage||r?.onMessage,onAudio:b?.onAudio||r?.onAudio,onDebug:b?.onDebug||r?.onDebug,onUnhandledClientToolCall:b?.onUnhandledClientToolCall||r?.onUnhandledClientToolCall,onVadScore:b?.onVadScore||r?.onVadScore,onInterruption:b?.onInterruption||r?.onInterruption,onAgentToolResponse:b?.onAgentToolResponse||r?.onAgentToolResponse,onConversationMetadata:b?.onConversationMetadata||r?.onConversationMetadata,onMCPToolCall:b?.onMCPToolCall||r?.onMCPToolCall,onMCPConnectionStatus:b?.onMCPConnectionStatus||r?.onMCPConnectionStatus,onAsrInitiationMetadata:b?.onAsrInitiationMetadata||r?.onAsrInitiationMetadata,onAgentChatResponsePart:b?.onAgentChatResponsePart||r?.onAgentChatResponsePart,onModeChange:({mode:me})=>{var ye;v(me),(ye=b?.onModeChange||r?.onModeChange)==null||ye({mode:me})},onStatusChange:({status:me})=>{var ye;d(me),(ye=b?.onStatusChange||r?.onStatusChange)==null||ye({status:me})},onCanSendFeedbackChange:({canSendFeedback:me})=>{var ye;f(me),(ye=b?.onCanSendFeedbackChange||r?.onCanSendFeedbackChange)==null||ye({canSendFeedback:me})}})),o.current=await l.current,S.current!==void 0&&o.current.setMicMuted(S.current),k.current!==void 0&&o.current.setVolume({volume:k.current}),o.current.getId()}finally{l.current=null}},endSession:async()=>{const b=o.current;o.current=null,await b?.endSession()},setVolume:({volume:b})=>{var C;(C=o.current)==null||C.setVolume({volume:b})},getInputByteFrequencyData:()=>{var b;return(b=o.current)==null?void 0:b.getInputByteFrequencyData()},getOutputByteFrequencyData:()=>{var b;return(b=o.current)==null?void 0:b.getOutputByteFrequencyData()},getInputVolume:()=>{var b,C;return(b=(C=o.current)==null?void 0:C.getInputVolume())!=null?b:0},getOutputVolume:()=>{var b,C;return(b=(C=o.current)==null?void 0:C.getOutputVolume())!=null?b:0},sendFeedback:b=>{var C;(C=o.current)==null||C.sendFeedback(b)},getId:()=>{var b;return(b=o.current)==null?void 0:b.getId()},sendContextualUpdate:b=>{var C;(C=o.current)==null||C.sendContextualUpdate(b)},sendUserMessage:b=>{var C;(C=o.current)==null||C.sendUserMessage(b)},sendUserActivity:()=>{var b;(b=o.current)==null||b.sendUserActivity()},sendMCPToolApprovalResult:(b,C)=>{var T;(T=o.current)==null||T.sendMCPToolApprovalResult(b,C)},changeInputDevice:async b=>{if(o.current&&"changeInputDevice"in o.current)return await o.current.changeInputDevice(b);throw new Error("Device switching is only available for voice conversations")},changeOutputDevice:async b=>{if(o.current&&"changeOutputDevice"in o.current)return await o.current.changeOutputDevice(b);throw new Error("Device switching is only available for voice conversations")},status:c,canSendFeedback:h,micMuted:e,isSpeaking:m==="speaking"}}const OV=({onFieldUpdate:t})=>{const[e,n]=x.useState(!1),i=DV({onConnect:()=>Ro.success("Assistant Listening"),onDisconnect:()=>{n(!1)},onError:o=>console.error("Voice Error:",o),clientTools:{fillFormField:o=>{console.log("[VoiceWidget] RAW TOOL DATA:",JSON.stringify(o,null,2));const l=o.fieldId||o.field_id||o.fieldName||o.name||o.id,c=o.value||o.text||o.answer||o.response;return!l||!c?(console.error("[VoiceWidget] Failed to extract parameters from:",o),"Error: Could not understand field parameters"):(t(l,c),"OK")}}}),r=x.useCallback(async()=>{if(i.status==="connected")await i.endSession(),n(!1);else try{await navigator.mediaDevices.getUserMedia({audio:!0}),await i.startSession({agentId:"agent_4301k95kgvjcf7pae9s837pe3bca"}),n(!0)}catch(o){Ro.error("Microphone access required"),console.error(o)}},[i]);return E.jsxs("div",{className:"fixed bottom-8 right-8 z-50 flex flex-col items-end",children:[E.jsx(lA,{children:e&&E.jsxs(Kt.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},transition:{duration:.2},className:"mb-4 bg-white rounded-2xl shadow-2xl p-4 w-72 border border-gray-100 origin-bottom-right",children:[E.jsxs("div",{className:"flex items-center justify-between mb-4",children:[E.jsxs("div",{className:"flex items-center gap-2",children:[E.jsx("div",{className:`w-2.5 h-2.5 rounded-full ${i.status==="connected"?"bg-green-500 animate-pulse":"bg-gray-300"}`}),E.jsx("span",{className:"font-semibold text-gray-800",children:"Prudential Assistant"})]}),E.jsx("button",{onClick:()=>i.endSession(),className:"text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full p-1 transition-colors",children:E.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[E.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),E.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]})})]}),E.jsx("div",{className:"h-16 flex items-center justify-center bg-gradient-to-b from-blue-50 to-white rounded-xl border border-blue-100",children:i.isSpeaking?E.jsx("div",{className:"flex items-center gap-1.5",children:[1,2,3,4].map(o=>E.jsx(Kt.div,{animate:{height:[8,32,8]},transition:{repeat:1/0,duration:.5,delay:o*.1,ease:"easeInOut"},className:"w-1.5 bg-[#0046B8] rounded-full"},o))}):E.jsxs("div",{className:"text-sm text-[#0046B8] font-medium flex items-center gap-2",children:[E.jsxs("span",{className:"relative flex h-3 w-3",children:[E.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-blue-400 opacity-75"}),E.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-[#0046B8]"})]}),"Listening..."]})})]})}),E.jsx(Kt.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:r,className:"relative z-50 w-16 h-16 rounded-full shadow-[0_8px_30px_rgb(0,0,0,0.12)] flex items-center justify-center transition-all overflow-hidden",style:{background:i.status==="connected"?"linear-gradient(135deg, #0046B8 0%, #001538 100%)":"#0046B8"},children:i.status==="connected"?E.jsxs(E.Fragment,{children:[E.jsx(Kt.div,{animate:{rotate:360},transition:{repeat:1/0,duration:3,ease:"linear"},className:"absolute inset-[-50%] opacity-30 mix-blend-overlay",style:{background:"conic-gradient(from 90deg at 50% 50%, transparent 0%, #00FFFF 50%, transparent 100%)"}}),E.jsx(Kt.div,{animate:{scale:i.isSpeaking?[1,1.2,1]:1},transition:{repeat:1/0,duration:2},className:"absolute w-8 h-8 rounded-full bg-white/20 blur-md"}),E.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",className:"relative z-10",children:[E.jsx("rect",{x:"9",y:"2",width:"6",height:"12",rx:"2"}),E.jsx("path",{d:"M5 10v2a7 7 0 0 0 14 0v-2"}),E.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"22"}),E.jsx("line",{x1:"8",y1:"22",x2:"16",y2:"22"})]})]}):E.jsxs("svg",{width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",children:[E.jsx("rect",{x:"9",y:"2",width:"6",height:"12",rx:"2"}),E.jsx("path",{d:"M5 10v2a7 7 0 0 0 14 0v-2"}),E.jsx("line",{x1:"12",y1:"18",x2:"12",y2:"22"}),E.jsx("line",{x1:"8",y1:"22",x2:"16",y2:"22"})]})})]})},LV=t=>{const e=new Date(t);if(isNaN(e.getTime())){const n=t.split("/");return n.length===3?`${n[2]}-${n[0].padStart(2,"0")}-${n[1].padStart(2,"0")}`:t}return e.toISOString().split("T")[0]},co=[{name:"Personal Info",fields:[{id:"fullName",label:"Full Legal Name",type:"text",placeholder:"First Middle Last",required:!0},{id:"dateOfBirth",label:"Date of Birth",type:"date",format:"MM/DD/YYYY (Must be 18-85 years old)",required:!0},{id:"ssn",label:"Social Security Number",type:"ssn",format:"XXX-XX-XXXX",required:!0},{id:"gender",label:"Gender",type:"radio",options:["Male","Female"],required:!0},{id:"maritalStatus",label:"Marital Status",type:"select",options:["Single","Married","Divorced","Widowed","Domestic Partnership"],required:!0},{id:"currentAddress",label:"Current Home Address",type:"text",placeholder:"Must be more than 2 years: Number, Street, City, State, ZIP",required:!0},{id:"yearsAtAddress",label:"Years at Current Address",type:"text",placeholder:"Number (0-99)",required:!0},{id:"previousAddress",label:"Previous Address",type:"text",placeholder:"If less than 2 years: Number, Street, City, State, ZIP"},{id:"phoneNumber",label:"Phone Number",type:"phone",format:"(XXX) XXX-XXXX",required:!0},{id:"emailAddress",label:"Email Address",type:"email",placeholder:"Valid email address",required:!0},{id:"citizenship",label:"Citizenship Status",type:"select",options:["US Citizen","Permanent Resident","Visa Holder"],required:!0},{id:"countryOfBirth",label:"Country of Birth",type:"text",placeholder:"Country name",required:!0},{id:"stateOfBirth",label:"State of Birth (if US)",type:"text",placeholder:"State abbreviation"},{id:"driversLicenseNumber",label:"Driver's License Number",type:"text",placeholder:"State-specific format",required:!0},{id:"driversLicenseState",label:"Driver's License State",type:"text",placeholder:"State abbreviation",required:!0}]},{name:"Employment Information",fields:[{id:"employmentStatus",label:"Employment Status",type:"select",options:["Employed","Self-Employed","Retired","Unemployed","Student","Homemaker"],required:!0},{id:"employerName",label:"Employer Name",type:"text",placeholder:"Company name",format:"Company name",required:!0},{id:"occupationJobTitle",label:"Occupation/Job Title",type:"text",placeholder:"Your job title",format:"Text",required:!0},{id:"yearsWithCurrentEmployer",label:"Years with Current Employer",type:"number",placeholder:"0-99",format:"Number (0-99)",required:!0},{id:"annualIncome",label:"Annual Income",type:"text",placeholder:"$0.00",format:"Dollar amount",required:!0},{id:"incomeSource",label:"Income Source",type:"select",options:["Salary","Hourly","Commission","Business Income","Investment","Pension"],required:!0},{id:"workAddress",label:"Work Address",type:"text",placeholder:"Street, City, State, ZIP",format:"Street, City, State, ZIP",required:!0},{id:"workPhone",label:"Work Phone",type:"phone",placeholder:"(XXX) XXX-XXXX",format:"(XXX) XXX-XXXX",required:!0},{id:"previousEmployer",label:"Previous Employer (if less than 2 years)",type:"text",placeholder:"Company name",format:"Company name"},{id:"industrySector",label:"Industry/Sector",type:"select",options:["Technology","Healthcare","Finance","Education","Manufacturing","Retail","Construction","Agriculture","Transportation","Government","Other"],required:!0},{id:"travelForWork",label:"Do you travel for work?",type:"radio",options:["Yes","No"],required:!0},{id:"travelDaysPerYear",label:"If yes, how many days per year?",type:"number",placeholder:"0-365",format:"Number (0-365)"},{id:"hazardousConditions",label:"Do you work in hazardous conditions?",type:"radio",options:["Yes","No"],required:!0},{id:"hazardousDescription",label:"If yes, please describe",type:"textarea",placeholder:"Describe the hazardous conditions...",format:"Text (max 500 characters)",maxLength:500},{id:"expectedRetirementAge",label:"Expected Retirement Age",type:"number",placeholder:"50-100",format:"Number (50-100)",required:!0}]},{name:"Financial Information",fields:[{id:"totalHouseholdIncome",label:"Total Household Income",type:"text",placeholder:"$0.00",format:"Dollar amount",required:!0},{id:"netWorth",label:"Net Worth",type:"text",placeholder:"$0.00",format:"Dollar amount range",required:!0},{id:"primaryBankName",label:"Primary Bank Name",type:"text",placeholder:"Bank name",format:"Text",required:!0},{id:"existingLifeInsurance",label:"Do you have existing life insurance?",type:"radio",options:["Yes","No"],required:!0},{id:"existingCoverageAmount",label:"If yes, total coverage amount",type:"text",placeholder:"$0.00",format:"Dollar amount"},{id:"numberOfExistingPolicies",label:"Number of existing policies",type:"number",placeholder:"0-20",format:"Number (0-20)"},{id:"purposeOfInsurance",label:"Purpose of this insurance",type:"select",options:["Income Replacement","Mortgage Protection","Estate Planning","Business/Final Expenses","Other"],required:!0},{id:"desiredCoverageAmount",label:"Desired Coverage Amount",type:"text",placeholder:"$25,000 minimum",format:"Dollar amount ($25,000 minimum)",required:!0},{id:"desiredTermLength",label:"Desired Term Length (if term)",type:"select",options:["10","15","20","25","30 years"],required:!0},{id:"premiumPaymentFrequency",label:"Premium Payment Frequency",type:"select",options:["Monthly","Quarterly","Semi-Annual","Annual"],required:!0},{id:"accountTypeForPremiums",label:"Bank Account Type for Premiums",type:"select",options:["Checking","Savings"],required:!0},{id:"routingNumber",label:"Routing Number",type:"text",placeholder:"9 digits",format:"9 digits",required:!0},{id:"accountNumber",label:"Account Number",type:"text",placeholder:"Bank-specific",format:"Bank-specific",required:!0},{id:"totalDebtAmount",label:"Total Debt Amount",type:"text",placeholder:"$0.00",format:"Dollar amount",required:!0},{id:"mortgageBalance",label:"Mortgage Balance",type:"text",placeholder:"$0.00",format:"Dollar amount",required:!0},{id:"otherLoansDebts",label:"Other Loans/Debts",type:"text",placeholder:"$0.00",format:"Dollar amount"},{id:"monthlyExpenses",label:"Monthly Expenses",type:"text",placeholder:"$0.00",format:"Dollar amount",required:!0},{id:"emergencyFundAmount",label:"Emergency Fund Amount",type:"text",placeholder:"$0.00",format:"Dollar amount",required:!0},{id:"investmentAccounts",label:"Investment Accounts",type:"select",options:["401k","IRA","Stocks","Bonds","None","Other"],required:!0},{id:"bankruptcyHistory",label:"Bankruptcy History",type:"select",options:["Never","7+ years ago","Within 7 years"],required:!0}]},{name:"Health Information",fields:[{id:"height",label:"Height",type:"text",placeholder:`e.g., 5'10"`,format:"Feet/Inches",required:!0},{id:"weight",label:"Weight",type:"text",placeholder:"e.g., 180",format:"Pounds",required:!0},{id:"tobaccoLast12Months",label:"Have you used tobacco in the last 12 months?",type:"radio",options:["Yes","No"],required:!0},{id:"tobaccoType",label:"If yes, type of tobacco",type:"select",options:["Cigarettes","Cigars","Pipe","Chewing","Vaping","Other"]},{id:"formerSmokerQuitDate",label:"If former smoker, quit date",type:"text",placeholder:"MM/YYYY",format:"MM/YYYY"},{id:"primaryCarePhysician",label:"Primary Care Physician Name",type:"text",placeholder:"Dr. First Last",format:"Text",required:!0},{id:"physicianPhone",label:"Physician Phone Number",type:"phone",placeholder:"(XXX) XXX-XXXX",format:"(XXX) XXX-XXXX",required:!0},{id:"lastPhysicalExam",label:"Date of Last Physical Exam",type:"text",placeholder:"MM/YYYY",format:"MM/YYYY",required:!0},{id:"bloodPressure",label:"Blood Pressure (if known)",type:"text",placeholder:"120/80",format:"XXX/XX"},{id:"cholesterolLevel",label:"Cholesterol Level (if known)",type:"text",placeholder:"e.g., 200",format:"Number"},{id:"prescriptionMedications",label:"Do you take prescription medications?",type:"radio",options:["Yes","No"],required:!0},{id:"medicationsList",label:"If yes, list medications",type:"textarea",placeholder:"List medication names",format:"Text (medication names)",maxLength:500},{id:"hospitalizedLast10Years",label:"Have you been hospitalized in the last 10 years?",type:"radio",options:["Yes","No"],required:!0},{id:"hospitalizationDetails",label:"If yes, provide dates and reasons",type:"textarea",placeholder:"Date and reason for each hospitalization",format:"Text",maxLength:500},{id:"surgeryLast10Years",label:"Have you had surgery in the last 10 years?",type:"radio",options:["Yes","No"],required:!0},{id:"surgeryDetails",label:"If yes, provide details",type:"textarea",placeholder:"Surgery details",format:"Text",maxLength:500},{id:"familyHeartDisease",label:"Family history of heart disease?",type:"select",options:["Yes","No","Unknown"],required:!0},{id:"familyCancer",label:"Family history of cancer?",type:"select",options:["Yes","No","Unknown"],required:!0},{id:"familyDiabetes",label:"Family history of diabetes?",type:"select",options:["Yes","No","Unknown"],required:!0},{id:"familyStroke",label:"Family history of stroke?",type:"select",options:["Yes","No","Unknown"],required:!0},{id:"diabetes",label:"Do you have diabetes?",type:"select",options:["No","Type 1","Type 2","Pre-diabetes"],required:!0},{id:"heartConditions",label:"Heart conditions?",type:"select",options:["None","High BP","Heart Disease","Other"],required:!0},{id:"cancer",label:"Cancer?",type:"select",options:["Never","In remission","Currently treating"],required:!0},{id:"mentalHealthTreatment",label:"Mental health treatment?",type:"select",options:["Never","Past","Current"],required:!0},{id:"respiratoryConditions",label:"Respiratory conditions?",type:"select",options:["None","Asthma","COPD","Other"],required:!0},{id:"neurologicalConditions",label:"Neurological conditions?",type:"select",options:["None","Epilepsy","MS","Parkinson's","Other"],required:!0},{id:"liverConditions",label:"Liver conditions?",type:"select",options:["None","Hepatitis","Cirrhosis","Other"],required:!0},{id:"kidneyDisease",label:"Kidney disease?",type:"radio",options:["Yes","No"],required:!0},{id:"hivAids",label:"HIV/AIDS?",type:"radio",options:["Yes","No"],required:!0},{id:"sleepApnea",label:"Sleep apnea?",type:"select",options:["No","Yes-treated","Yes-untreated"],required:!0},{id:"alcoholConsumption",label:"Alcohol consumption",type:"select",options:["None","Occasional","1-2 daily","3+ daily"],required:!0},{id:"drugUseHistory",label:"Drug use history",type:"select",options:["Never","Past","Current"],required:!0},{id:"duiDwiHistory",label:"DUI/DWI history?",type:"select",options:["Never","Yes-date"],required:!0},{id:"currentlyPregnant",label:"Currently pregnant? (if female)",type:"select",options:["Yes","No","N/A"],required:!0},{id:"planningPregnancy",label:"Planning pregnancy? (if female)",type:"select",options:["Yes","No","N/A"],required:!0},{id:"depressionTreatment",label:"Depression treatment?",type:"select",options:["Never","Past","Current"],required:!0},{id:"anxietyTreatment",label:"Anxiety treatment?",type:"select",options:["Never","Past","Current"],required:!0},{id:"otherMentalHealthConditions",label:"Other mental health conditions?",type:"textarea",placeholder:"Describe any other mental health conditions",format:"Text",maxLength:500},{id:"pendingMedicalTests",label:"Pending medical tests?",type:"radio",options:["Yes","No"],required:!0},{id:"scheduledSurgeries",label:"Scheduled surgeries?",type:"radio",options:["Yes","No"],required:!0},{id:"physicalDisabilities",label:"Physical disabilities?",type:"select",options:["None","Mobility","Vision","Hearing","Other"],required:!0},{id:"workersCompClaims",label:"Workers comp claims?",type:"select",options:["Never","Past","Current"],required:!0},{id:"disabilityInsuranceClaims",label:"Disability insurance claims?",type:"select",options:["Never","Past","Current"],required:!0},{id:"declinedForInsurance",label:"Declined for insurance before?",type:"radio",options:["Yes","No"],required:!0}]},{name:"Lifestyle & Habits",fields:[{id:"hazardousHobbies",label:"Hazardous hobbies?",type:"select",options:["None","Aviation","Racing","Scuba","Rock Climbing","Other"],required:!0},{id:"pilotLicense",label:"Pilot license?",type:"radio",options:["Yes","No"],required:!0},{id:"hoursFlownAnnually",label:"If yes, hours flown annually",type:"number",placeholder:"Number",format:"Number"},{id:"motorcycleRiding",label:"Motorcycle riding?",type:"select",options:["Never","Occasionally","Regularly"],required:!0},{id:"internationalTravelFrequency",label:"International travel frequency",type:"select",options:["Never","1-2 yearly","3-5 yearly","6+ yearly"],required:!0},{id:"travelHighRiskCountries",label:"Travel to high-risk countries?",type:"radio",options:["Yes","No"],required:!0},{id:"militaryService",label:"Military service?",type:"select",options:["Never","Past","Active","Reserve"],required:!0},{id:"militaryDeploymentStatus",label:"If military, deployment status",type:"select",options:["Never","Past","Scheduled","Current"]},{id:"criminalHistory",label:"Criminal history?",type:"select",options:["None","Misdemeanor","Felony"],required:!0},{id:"criminalHistoryDetails",label:"If yes, provide details",type:"text",placeholder:"Provide details",format:"Text"},{id:"suspendedLicenseHistory",label:"Suspended license history?",type:"select",options:["Never","Past-restored","Current"],required:!0},{id:"movingViolations",label:"Moving violations (last 5 years)",type:"number",placeholder:"0-99",format:"Number (0-99)",required:!0},{id:"extremeSportsParticipation",label:"Extreme sports participation?",type:"radio",options:["Yes","No"],required:!0},{id:"professionalSports",label:"Professional sports?",type:"radio",options:["Yes","No"],required:!0},{id:"volunteerFirefighterEMT",label:"Volunteer firefighter/EMT?",type:"radio",options:["Yes","No"],required:!0},{id:"lawEnforcement",label:"Law enforcement?",type:"radio",options:["Yes","No"],required:!0},{id:"hazardousOccupationDetails",label:"Hazardous occupation details",type:"text",placeholder:"Provide details",format:"Text"},{id:"workAtHeights",label:"Work at heights?",type:"select",options:["Never","Occasionally","Regularly"],required:!0},{id:"workWithExplosives",label:"Work with explosives?",type:"radio",options:["Yes","No"],required:!0},{id:"radiationExposure",label:"Radiation exposure?",type:"select",options:["Never","Occasionally","Regularly"],required:!0}]},{name:"Beneficiary Information",fields:[{id:"primaryBeneficiaryName",label:"Primary Beneficiary Name",type:"text",placeholder:"First Last",format:"First Last",required:!0},{id:"primaryRelationship",label:"Relationship",type:"select",options:["Spouse","Child","Parent","Sibling","Trust","Estate","Other"],required:!0},{id:"primaryBeneficiaryDOB",label:"Date of Birth",type:"date",format:"MM/DD/YYYY",required:!0},{id:"primaryBeneficiarySSN",label:"Social Security Number",type:"ssn",placeholder:"XXX-XX-XXXX",format:"XXX-XX-XXXX",required:!0},{id:"primarySharePercentage",label:"Share Percentage",type:"number",placeholder:"1-100",format:"1-100%",required:!0},{id:"primaryBeneficiaryAddress",label:"Address",type:"text",placeholder:"Street, City, State, ZIP",format:"Street, City, State, ZIP",required:!0},{id:"primaryBeneficiaryPhone",label:"Phone Number",type:"phone",placeholder:"(XXX) XXX-XXXX",format:"(XXX) XXX-XXXX",required:!0},{id:"contingentBeneficiaryName",label:"Contingent Beneficiary Name",type:"text",placeholder:"First Last",format:"First Last"},{id:"contingentRelationship",label:"Contingent Relationship",type:"select",options:["Spouse","Child","Parent","Sibling","Trust","Estate","Other"]},{id:"contingentBeneficiaryDOB",label:"Contingent DOB",type:"date",format:"MM/DD/YYYY"},{id:"contingentBeneficiarySSN",label:"Contingent SSN",type:"ssn",placeholder:"XXX-XX-XXXX",format:"XXX-XX-XXXX"},{id:"contingentSharePercentage",label:"Contingent Share %",type:"number",placeholder:"1-100",format:"1-100%"},{id:"additionalBeneficiaries",label:"Additional Beneficiaries?",type:"radio",options:["Yes","No"],required:!0},{id:"trustAsBeneficiary",label:"Trust as Beneficiary?",type:"radio",options:["Yes","No"],required:!0},{id:"trustNameAndDate",label:"If yes, Trust Name and Date",type:"text",placeholder:"Trust name and date",format:"Text"}]},{name:"Review",fields:[]}],FV=co.map(t=>t.name);function jV(){const[t,e]=x.useState(0),[n,i]=x.useState({}),[r,o]=x.useState(15),l=(b,C)=>{console.log("[VoiceWidget] Field update:",b,C);const _={full_name:"fullName",legal_name:"fullName",name:"fullName",dob:"dateOfBirth",date_of_birth:"dateOfBirth",birth_date:"dateOfBirth",ssn:"ssn",social:"ssn",social_security:"ssn",gender:"gender",marital_status:"maritalStatus",current_address:"currentAddress",address:"currentAddress",years_at_address:"yearsAtAddress",previous_address:"previousAddress",phone:"phoneNumber",phone_number:"phoneNumber",email:"emailAddress",email_address:"emailAddress",citizenship:"citizenship",country_of_birth:"countryOfBirth"}[b]||b;let R=C;(_==="dateOfBirth"||_==="primaryBeneficiaryDOB"||_==="contingentBeneficiaryDOB")&&(R=LV(C),console.log(`[App] Formatted date '${C}' to '${R}'`)),i(P=>(console.log(`[VoiceWidget] Updating state: ${_} = ${R}`),{...P,[_]:R})),Ro.success(`Updated: ${_}`)},c=co[t],d=co.reduce((b,C)=>b+C.fields.length,0),h=Object.keys(n).filter(b=>n[b]).length,f=b=>{let C=1;for(let T=0;T<b;T++)C+=co[T].fields.length;return C};x.useEffect(()=>{const C=15/d;o(Math.max(1,Math.ceil(15-h*C)))},[h,d]);const m=(b,C)=>{i(T=>({...T,[b]:C}))},v=()=>{t<co.length-1&&e(b=>b+1)},S=()=>{t>0&&e(b=>b-1)},k=b=>{e(b),window.scrollTo({top:0,behavior:"smooth"})};return E.jsxs("div",{className:"min-h-screen bg-gray-50",children:[E.jsx(s_,{}),E.jsxs("main",{className:"max-w-5xl mx-auto px-4 py-8",children:[E.jsxs("div",{className:"relative bg-[#0046B8] py-[58px] px-8 rounded-2xl shadow-2xl mb-8 overflow-hidden",children:[E.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGRlZnM+PHBhdHRlcm4gaWQ9ImdyaWQiIHdpZHRoPSI2MCIgaGVpZ2h0PSI2MCIgcGF0dGVyblVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+PHBhdGggZD0iTSAxMCAwIEwgMCAwIDAgMTAiIGZpbGw9Im5vbmUiIHN0cm9rZT0id2hpdGUiIHN0cm9rZS1vcGFjaXR5PSIwLjA1IiBzdHJva2Utd2lkdGg9IjEiLz48L3BhdHRlcm4+PC9kZWZzPjxyZWN0IHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIGZpbGw9InVybCgjZ3JpZCkiLz48L3N2Zz4=')] opacity-30"}),E.jsxs("div",{className:"relative z-10 text-center",children:[E.jsx("h1",{className:"text-white mb-3 font-black text-3xl tracking-tight leading-none drop-shadow-lg",children:"Life Insurance E-Interview"}),E.jsx("p",{className:"text-white/90 text-lg font-medium tracking-wide",children:"Complete your application with our AI assistant"})]}),E.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-white/5 rounded-full blur-3xl -mr-32 -mt-32"}),E.jsx("div",{className:"absolute bottom-0 left-0 w-64 h-64 bg-white/5 rounded-full blur-3xl -ml-32 -mb-32"})]}),E.jsx(VN,{sections:FV,currentSection:t,onSectionClick:k}),c.name!=="Review"&&E.jsxs("div",{className:"text-center text-gray-500 mb-6",children:["About ",r," minutes remaining"]}),c.name==="Review"?E.jsx(o2,{formData:n,onPrevious:S,canGoPrevious:t>0}):E.jsx(Zj,{section:c,sectionNumber:t+1,totalSections:co.length,formData:n,onFieldChange:m,onNext:v,onPrevious:S,canGoPrevious:t>0,startingQuestionNumber:f(t)})]}),E.jsx(d2,{position:"top-center"}),E.jsx(OV,{onFieldUpdate:l})]})}J1.createRoot(document.getElementById("root")).render(E.jsx(jV,{}));
